import{a as Te}from"./chunk-LSZZKHZT.js";import{a as Ee}from"./chunk-JPV5PNQX.js";import{r as ke}from"./chunk-6GFVKSAR.js";import{a as Ne}from"./chunk-OCZAVPFZ.js";import{b as Ce,c as R,d as z,e as Se,f as Ue,g as De,h as Pe,i as Ae,j as Le,k as $e,l as Be,m as We,n as L,o as V,p as Q,q as ze,r as Me,s as H,t as Y,u as Ze,v as Fe,w as He,x as Ye}from"./chunk-ZI6GTU5G.js";import{e as W}from"./chunk-4RHFH7IF.js";import{a as be}from"./chunk-PYJPOVV7.js";import{b as se}from"./chunk-AO6MUSOH.js";import{a as Ie}from"./chunk-I435LZHT.js";import{e as ve,j as ye}from"./chunk-5JJQQHKZ.js";import{T as xe,a as we}from"./chunk-URG4MCPH.js";import{D as pr,y as A}from"./chunk-ZPOCIBPN.js";import{a as he}from"./chunk-IOCZ22XI.js";import{b as K}from"./chunk-4JZ3HIS7.js";import{w as ge}from"./chunk-JLA5HXVC.js";import{a as ue,b as mr}from"./chunk-A7LNVEYU.js";import{c as de,e as fe,h as _e}from"./chunk-2YWUVAR3.js";import{Ga as ce,Pa as lr}from"./chunk-M54COW6Q.js";import{B as ne,b as ie,q as v}from"./chunk-RIJWHGTU.js";import{I as P,v as t}from"./chunk-K4MPEKC5.js";import{L as pe,R as E,X as F,c as ar}from"./chunk-XIGC6FD5.js";import{a as D}from"./chunk-CXUPEGDW.js";import{c as sr,f as g,m as d,n as b,o as f}from"./chunk-ICCOEXX5.js";var ae=sr((gr,qe)=>{d();f();(function(n){"use strict";n.exports.is_uri=s,n.exports.is_http_uri=i,n.exports.is_https_uri=o,n.exports.is_web_uri=_,n.exports.isUri=s,n.exports.isHttpUri=i,n.exports.isHttpsUri=o,n.exports.isWebUri=_;var l=function(r){var e=r.match(/(?:([^:\/?#]+):)?(?:\/\/([^\/?#]*))?([^?#]*)(?:\?([^#]*))?(?:#(.*))?/);return e};function s(r){if(!!r&&!/[^a-z0-9\:\/\?\#\[\]\@\!\$\&\'\(\)\*\+\,\;\=\.\-\_\~\%]/i.test(r)&&!/%[^0-9a-f]/i.test(r)&&!/%[0-9a-f](:?[^0-9a-f]|$)/i.test(r)){var e=[],a="",c="",m="",u="",y="",p="";if(e=l(r),a=e[1],c=e[2],m=e[3],u=e[4],y=e[5],!!(a&&a.length&&m.length>=0)){if(c&&c.length){if(!(m.length===0||/^\//.test(m)))return}else if(/^\/\//.test(m))return;if(!!/^[a-z][a-z0-9\+\-\.]*$/.test(a.toLowerCase()))return p+=a+":",c&&c.length&&(p+="//"+c),p+=m,u&&u.length&&(p+="?"+u),y&&y.length&&(p+="#"+y),p}}}function i(r,e){if(!!s(r)){var a=[],c="",m="",u="",y="",p="",x="",h="";if(a=l(r),c=a[1],m=a[2],u=a[3],p=a[4],x=a[5],!!c){if(e){if(c.toLowerCase()!="https")return}else if(c.toLowerCase()!="http")return;if(!!m)return/:(\d+)$/.test(m)&&(y=m.match(/:(\d+)$/)[0],m=m.replace(/:\d+$/,"")),h+=c+":",h+="//"+m,y&&(h+=y),h+=u,p&&p.length&&(h+="?"+p),x&&x.length&&(h+="#"+x),h}}}function o(r){return i(r,!0)}function _(r){return i(r)||o(r)}})(qe)});d();f();var tr=g(ar());var w=g(D()),or=g(pr());var oe=g(A());var ir=g(he());P();d();f();var j=g(D()),X=g(A());P();var je=(0,j.memo)(n=>{let{disabled:l}=n,s=(0,X.useDispatch)(),i=({target:{value:a}})=>{s($e(a))},{name:o,nameErr:_}=(0,X.useSelector)(Ce),r=()=>{s(Be(t(o?"":"developer_mode_network_errortip_cannotspace")))},e=t("extension_wallet_addnetwork_placeholder_network");return j.default.createElement("div",{className:"net-form__wrap-input"},j.default.createElement(v,{value:o,onBlur:r,disabled:l,size:v.SIZE.xl,errorType:v.TIP_TYPE.always,error:_,onChange:i,placeholder:e,label:t("wallet_transaction_history_subtitle_network_name")}))});d();f();var $=g(D()),M=g(A()),Ge=g(ae());P();d();f();d();f();_e();async function Oe(n,l,s=[]){let i=n,o={"Content-Type":"application/json"},{origin:_,pathname:r,username:e,password:a,search:c}=new URL(n);if(e&&a){let p=b.Buffer.from(`${e}:${a}`).toString("base64");o.Authorization=`Basic ${p}`,i=`${_}${r}${c}`}let{data:m}=await fe(i,{id:Date.now().toString(),jsonrpc:"2.0",method:l,params:s},{timeout:3e4,cache:"default",headers:o});if(!m||Array.isArray(m)||typeof m!="object")throw new Error(`RPC endpoint ${n} returned non-object response.`);let{error:u,result:y}=m;if(u)throw new Error(u?.message||u);return y}var J=n=>{try{let l=new URL(n);return l.protocol==="http:"||l.protocol==="https:"}catch{return!1}},ee=((n={})=>l=>new Promise((s,i)=>n[l]?s(n[l]):Oe(l,"eth_chainId").then(o=>{n[l]=o,s(o)}).catch(o=>{i(o)})))();var Ke=$.default.memo(n=>{let{disabled:l,modify:s}=n,i=(0,M.useDispatch)(),[o,_]=(0,$.useState)(!1),r=({target:{value:h}})=>{i(We(h.trim()))},{rpcUrl:e,rpcUrlErr:a}=(0,M.useSelector)(R),{defaultNets:c,customNets:m}=(0,M.useSelector)(W),u=[...c,...m],{chainId:y}=(0,M.useSelector)(z),p=()=>{if(!e)return i(L(t("developer_mode_network_errortip_cannotspace")));if(!J(e))return i(L(t("developer_mode_infor_errortip_https")));if(!Ge.default.isWebUri(e))return i(L(t("developer_mode_infor_errortip_rpcurl")));let T=u.find(N=>N.rpcUrl===e);return T&&!s?i(L(t("developer_mode_infor_errortip_used_network",{network:T.name}))):(_(!0),ee(e).then(N=>{try{N=parseInt(N,16).toString(10),s?N!==y&&i(Q({err:t("developer_mode_infor_errortip_chainid",{chainID:N}),validChainId:y})):i(V(N))}catch{}_(!1),i(L(""))}).catch(()=>{i(L(t("developer_mode_infor_errortip_rpcurl"))),_(!1)}))},x=t("extension_wallet_addnetwork_placeholder_prcurl");return $.default.createElement("div",{className:"net-form__wrap-input"},$.default.createElement(v,{value:e,onBlur:p,disabled:l,size:v.SIZE.xl,errorType:v.TIP_TYPE.always,error:a,onChange:r,placeholder:x,label:t("developer_mode_network_title_rpcurl"),suffix:o&&$.default.createElement(E.Circle,{size:E.SIZE.sm})}))});d();f();var B=g(D()),q=g(A());P();mr();_e();var Re=B.default.memo(n=>{let{disabled:l}=n,s=(0,q.useDispatch)(),i=({target:{value:p}})=>{s(Me(p.trim()))},{symbol:o,symbolErr:_,symbolTip:r,fieldUpdated:e}=(0,q.useSelector)(Se),[a,c]=(0,B.useState)(!1),{chainId:m}=(0,q.useSelector)(z),u=()=>{let p="",x="";if(!m){s(H(p)),s(Y(x));return}if(!o){p=t("developer_mode_network_errortip_cannotspace"),s(H(p)),s(Y(x));return}c(!0),de(ue.getRpcNetworkByChainId,{chainIds:[m]}).then(({data:h})=>{if(c(!1),Array.isArray(h)){let T=h.find(N=>N.chainId.toString()===m);T?T?.nativeCurrency?.symbol!==o&&(x=t("developer_mode_infor_errortip_network_correct",{number:m,symbol:T.nativeCurrency?.symbol})):x=t("developer_mode_infor_errortip_errorname_rpcurl")}s(H(p)),s(Y(x))}).catch(h=>{console.log(h),x=t("developer_mode_infor_errortip_errorname_rpcurl"),c(!1),s(H(p)),s(Y(x))})},y=t("extension_wallet_addnetwork_placeholder_symbol");return B.default.createElement("div",{className:"net-form__wrap-input"},B.default.createElement(v,{value:o,disabled:l,onBlur:u,size:v.SIZE.xl,errorType:v.TIP_TYPE.always,error:_,tips:r,onChange:i,suffix:a&&e&&B.default.createElement(E.Circle,{size:E.SIZE.sm}),placeholder:y,label:t("developer_mode_network_title_tokenname")}))});d();f();var k=g(D()),Z=g(A());P();d();f();lr();function Ve(n){return Number.isSafeInteger(n)&&n>0&&n<=ce}var Qe=k.default.memo(n=>{let{disabled:l,modify:s}=n,i=(0,Z.useDispatch)(),o=({target:{value:I}})=>{i(V(I.trim()))},[_,r]=(0,k.useState)(!1),{chainId:e,chainIdErr:a,chainIdTip:c,fieldUpdated:m}=(0,Z.useSelector)(z),{rpcUrl:u}=(0,Z.useSelector)(R),{defaultNets:y,customNets:p}=(0,Z.useSelector)(W),x=[...y,...p],h=(I,C,S=e)=>{i(Q({err:I,validChainId:S})),i(ze({tip:C,validChainId:S}))},T=()=>{let I="",C="";if(!e)return I=t("developer_mode_network_errortip_cannotspace"),h(I,C);let S=e,le=10;if(!S.startsWith("0x"))try{S=`0x${K(S)}`}catch{I=t("developer_mode_infor_errortip_errorchainid")}let[me]=x.filter(U=>U.chainId===S&&U.rpcUrl!==u);if(me?C=t("developer_mode_infor_errortip_network",{network:me.name}):e.startsWith("0x")?(le=16,/^0x[0-9a-f]+$/iu.test(e)||(I=t("developer_mode_infor_errortip_errornum"))):/^[0-9]+$/u.test(e)?e.startsWith("0")?I=t("developer_mode_infor_errortip_errornum"):Ve(parseInt(e,le))||(I=t("developer_mode_infor_errortip_errorchainid")):I=t("developer_mode_infor_errortip_errornum"),!u||_||I)return h(I,C);r(!0),ee(u).then(U=>{if(S!==U){if(!e.startsWith("0x"))try{U=parseInt(U,16).toString(10)}catch(nr){console.log(nr)}I=t("developer_mode_infor_errortip_chainid",{chainID:U})}h(I,C,e),r(!1)}).catch(()=>{C=t("developer_mode_infor_errortip_rpcurl_confirm"),r(!1),h(I,C,e)})},N=t("extension_wallet_addnetwork_placeholder_chainid");return k.default.createElement("div",{className:"net-form__wrap-input"},k.default.createElement(v,{value:e,disabled:l||!!s,size:v.SIZE.xl,errorType:v.TIP_TYPE.always,error:a,onBlur:T,tips:c,onChange:o,suffix:_&&m&&k.default.createElement(E.Circle,{size:E.SIZE.sm}),placeholder:N,label:k.default.createElement(k.default.Fragment,null,t("developer_mode_network_title_chainid"),k.default.createElement(ne,{title:t("developer_mode_network_tooltip_display_decimal"),placement:ne.DIRECTION.topRight},k.default.createElement(pe,{className:"okx-wallet-plugin-information-circle"})))}))});d();f();var O=g(D()),G=g(A()),Xe=g(he());P();var Je=n=>{let{modify:l}=n,s=(0,G.useDispatch)(),i=(0,Xe.useHistory)(),o=(0,G.useSelector)(Le),_=ke(),r=(0,G.useSelector)(De),e=(0,O.useRef)(!1),a=async()=>{if(!e.current){if(e.current=!0,l){await s(Ae());let c={...r,chainId:`0x${K(r.chainId)}`};_(c)}else await s(Pe());i.replace(`${xe}?tab=2`),e.current=!1}};return O.default.createElement(Ie.FooterActions,null,O.default.createElement(F,{disabled:o,category:F.CATEGORY.fill,type:F.TYPE.highlight,size:F.SIZE.lg,onClick:a},t("developer_mode_bot_btn_save")))};d();f();var re=g(D()),te=g(A()),er=g(ae());P();var rr=re.default.memo(n=>{let{disabled:l}=n,s=(0,te.useDispatch)(),i=({target:{value:a}})=>{s(Ze(a.trim()))},{explorerUrl:o,explorerUrlErr:_}=(0,te.useSelector)(Ue),r=()=>{let a="";o&&(er.default.isWebUri(o)||(J(o)?a=t("developer_mode_infor_errortip_invalidurl"):a=t("developer_mode_infor_errortip_https1"))),s(Fe(a))},e=t("extension_wallet_addnetwork_placeholder_blockchain");return re.default.createElement("div",{className:"net-form__wrap-input"},re.default.createElement(v,{value:o,onBlur:r,disabled:l,size:v.SIZE.xl,errorType:v.TIP_TYPE.always,error:_,onChange:i,placeholder:e,label:t("developer_mode_network_title_blockchain_explorer")}))});d();f();var qt=()=>{let n=(0,oe.useDispatch)(),l=(0,ir.useHistory)(),s=Ne(),i=s.get("modify"),o=i===Ee.CANT,_=decodeURIComponent(s.get("id")),r=(0,oe.useSelector)((0,or.createSelector)(W,({defaultNets:u,customNets:y})=>[...u,...y].find(p=>p.uniqueId===_)||{}));ye(()=>{r={...r},r.chainId&&(r.chainId=`${Number.parseInt(r.chainId,16)}`),n(He(r))}),ve(()=>{n(Ye())});let e=(0,w.useCallback)(()=>{l.action==="POP"?l.replace(we):l.goBack()},[l]),a=Te(),c=(0,w.useCallback)(()=>{a({editRpcInfo:r,onDeleted:e})},[a,e,r]),m=(0,w.useMemo)(()=>r.name?w.default.createElement("div",{className:"net-form__title"},w.default.createElement(se,{size:se.SIZE.md,src:r.icon,text:r.name,className:"net-form__title-icon",defaultIcon:ge}),w.default.createElement("div",{className:"net-form__title-text"},r.name)):t("wallet_extension_settings_header_custom_network"),[r]);return w.default.createElement("div",{className:(0,tr.default)("net-form",{disabled:o})},w.default.createElement(be,{title:m,onBack:e,onClose:i&&!o?c:null,closeable:i&&!o?{icon:"okx-wallet-plugin-trash",style:{color:"var(--okd-color-semantic-negative)"}}:!1}),o||i?null:w.default.createElement(ie,{className:"net-form__warn",desc:t("developer_mode_network_errortip_trust_network"),type:ie.TYPE.warn,closable:!1}),w.default.createElement("div",{className:"net-form__wrap"},w.default.createElement(je,{disabled:o}),w.default.createElement(Ke,{disabled:o,modify:i}),w.default.createElement(Qe,{disabled:o,modify:i}),w.default.createElement(Re,{disabled:o}),w.default.createElement(rr,{disabled:o}),o?null:w.default.createElement(Je,{modify:i})))};export{qt as a};

window.inOKXExtension = true;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=chunk-TSNGA6WZ.js.map
