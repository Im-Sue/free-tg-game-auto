import{a as Cr}from"./chunk-XCM743XO.js";import{a as Y}from"./chunk-HNQ4OXOH.js";import{a as yr}from"./chunk-D4V7ONZY.js";import{b as ur,c as me,l as cr,m as pr,n as lr}from"./chunk-N3VGDA3L.js";import{a as Lo}from"./chunk-TQEP4B6B.js";import{a as wo}from"./chunk-E6PQQLEO.js";import{a as vo}from"./chunk-W327NRHO.js";import{a as Po}from"./chunk-DZDHGH5B.js";import{e as Oo}from"./chunk-UKFSUXAE.js";import{a as dr}from"./chunk-SIKYZQW4.js";import{a as at,b as fr,d as yt,e as _r,f as ue,g as xt}from"./chunk-YZAK46Y6.js";import{A as re,K as nr,N as sr,O as ir,S as ne,T as ar,V as mr,X as se,Y as ie,b as Qo,ba as ae,c as tr,d as er,e as wt,f as R,g as or,i as Lt,k as te,l as rr,q as ee,v as vt,z as oe}from"./chunk-VX7CI7XT.js";import{a as bo,b as ho,d as Bo,e as D}from"./chunk-7ODXCTBK.js";import{a as Fo}from"./chunk-ADIQBHVU.js";import{e as No}from"./chunk-FFJ36R7T.js";import{e as it,k as Pt}from"./chunk-UIABO6UG.js";import{a as Un,l as Ao,m as Eo}from"./chunk-FFQESTX4.js";import{c as To}from"./chunk-6YBNTFOQ.js";import{$ as Tr,y as xr}from"./chunk-542JHSZH.js";import{D as ve,E as Ho,F as Yo,G as Go,I as zo,J as Vo,L as Xo,M as Zo,N as Jo,O as Ko,P as qo,Q as jo,b as Qt,f as Mo,j as ko,k as Do,n as Uo,q as Ro,t as $o,x as Wo}from"./chunk-Y2PED5BF.js";import{i as go}from"./chunk-LF2PURXZ.js";import{a as jt,g as Co}from"./chunk-SR2BDP3A.js";import{G as So,j as Io}from"./chunk-CFT6B56M.js";import{a as Ot}from"./chunk-PYJPOVV7.js";import{b as Le}from"./chunk-AO6MUSOH.js";import{a as Bt}from"./chunk-I435LZHT.js";import{s as so,t as io,x as S}from"./chunk-SJIW4WAV.js";import{a as ht,c as co,j as po,l as lo,o as Nt}from"./chunk-5JJQQHKZ.js";import{a as fo,bb as xo,f as _o,ma as yo}from"./chunk-URG4MCPH.js";import{ab as qt,g as Xt,h as no,m as Zt,y as W}from"./chunk-ZPOCIBPN.js";import{R as Jt,T as F,V as Kt,W as uo,b as N,ba as K,j as mo}from"./chunk-CA5MYYD6.js";import{a as we}from"./chunk-IOCZ22XI.js";import{d as Ht,f as Qe}from"./chunk-2G2AXMFT.js";import{c as E}from"./chunk-VMYDP774.js";import{a as Vt,b as ro}from"./chunk-A7LNVEYU.js";import{f as Yt,h as to}from"./chunk-2YWUVAR3.js";import{$b as ao,Qa as J,Ra as Oe,S as v,Sa as nt,Va as Gt,Wa as eo,Xa as Pe,eb as oo,jb as zt,la as dt,m as Ne,mb as _t,pb as st,q as $t}from"./chunk-M54COW6Q.js";import{C as qe,H as je,b as Je,o as Ke,q as ft}from"./chunk-RIJWHGTU.js";import{I as k,l as lt,v as p}from"./chunk-K4MPEKC5.js";import{X as Z,c as Be}from"./chunk-XIGC6FD5.js";import{a as x}from"./chunk-CXUPEGDW.js";import{f as u,m as r,o as n}from"./chunk-ICCOEXX5.js";r();n();var gr=u(x());function Rn({children:t,...e}){return gr.default.createElement(Qo.Provider,{value:e},t)}var Os=Rn;r();n();var fe=u(x());var Fr=u(W());r();n();var Ir=u(x());dt();function $n(t){let e=it(v),[,o]=Po({coinId:v,address:t,chainId:e?.chainId},{pollingInterval:20*1e3});return(0,Ir.useMemo)(()=>o||{},[o])}var Sr=$n;r();n();var ce=u(x());st();var Me=(0,ce.createContext)({signInfo:null,currencyId:null,params:{walletId:null,inscriptions:[],from:"",to:"",utxoType:1,txType:null,protocolId:null,mintType:Jt.parallel},feeData:{inscriptionOutput:null,revealTxFees:[],commitTxFee:"0",feeSelectedSat:{},canTransferAmount:"0"},lifecycle:{beforePostTx:null},onFeeDataChange:()=>{}});function q(){return(0,ce.useContext)(Me)}function Mt(){let{signInfo:t}=q();return t}function pe(){let{currencyId:t}=q();return t}function tt(){let{params:t}=q();return t}function ke(){let{feeData:t}=q();return t}function le(){let{onFeeDataChange:t}=q();return t}function j(){let t=Mt(),{inscriptions:e}=tt(),{inscriptionOutput:o}=ke(),i=o||t?.inscriptionOutput||"0";return{inscriptionOutput:i,inscriptionsCount:e.length,total:J(i,e.length)}}function Tt(){let{feeData:t}=q();return{fees:t.revealTxFees,totalFee:(t.revealTxFees||[]).reduce((e,o)=>nt(e,o),"0")}}function Ct(){let{feeData:t}=q();return t.commitTxFee}function V(){let{feeData:{feeSelectedSat:t={}}}=q(),{type:e}=t,o=Mt(),i;return e===F.CUSTOM?i=t.satBytes:i=o?.[uo[e]],{...t,satBytes:i||o?.normal||0}}function Ar(){let{feeData:t}=q();return t.canTransferAmount}function Er(){let{lifecycle:t}=q();return t}function Wn({defaultFeeData:t,currencyId:e,params:o,lifecycle:i,children:s}){let{from:a,to:m,...c}=o,l=(0,Fr.useSelector)(qt),d=Sr(a),[_,T]=(0,fe.useState)(t||{inscriptionOutput:null,revealTxFees:[],commitTxFee:"0",feeSelectedSat:{satBytes:0,type:F.STANDARD},canTransferAmount:"0"}),g=ht((w,I)=>{T(y=>({...y,[w]:I}))});return fe.default.createElement(Me.Provider,{value:{signInfo:d,currencyId:e??l.currencyId,params:{...c,from:a,to:m||a},lifecycle:i,feeData:_,onFeeDataChange:g}},s)}var De=Wn;r();n();r();n();var M=u(x());dt();r();n();var gt=u(x()),Ue=u(Be());r();n();var kt={root:"_root_1mbnk_1","send-page-base-container":"_send-page-base-container_1mbnk_7",sendPageBaseContainer:"_send-page-base-container_1mbnk_7","send-page-base-container__header":"_send-page-base-container__header_1mbnk_13",sendPageBaseContainerHeader:"_send-page-base-container__header_1mbnk_13","send-page-base-container__wrapper":"_send-page-base-container__wrapper_1mbnk_16",sendPageBaseContainerWrapper:"_send-page-base-container__wrapper_1mbnk_16","send-page-base-container__inner-wrapper":"_send-page-base-container__inner-wrapper_1mbnk_17",sendPageBaseContainerInnerWrapper:"_send-page-base-container__inner-wrapper_1mbnk_17","send-page-base-container__content":"_send-page-base-container__content_1mbnk_25",sendPageBaseContainerContent:"_send-page-base-container__content_1mbnk_25","send-page-base-container__footer":"_send-page-base-container__footer_1mbnk_30",sendPageBaseContainerFooter:"_send-page-base-container__footer_1mbnk_30"};function Hn({className:t,loading:e,slot:o={},children:i,contentClassName:s}){let{header:a,footer:m,top:c}=o;return gt.default.createElement(E.Container,{loading:e,className:(0,Ue.default)(kt.root,t)},gt.default.createElement(E.Box,{className:kt["send-page-base-container__header"]},a),gt.default.createElement(E.Box,{className:kt["send-page-base-container__wrapper"]},c,gt.default.createElement(E.Box,{className:kt["send-page-base-container__inner-wrapper"]},gt.default.createElement(E.Box,{className:(0,Ue.default)(kt["send-page-base-container__content"],s)},i),gt.default.createElement(Bt,{offsetBottom:0,placeholder:!0},m))))}var de=Hn;k();r();n();var $e=u(x()),Br=u(Ne());r();n();var G=u(x());k();r();n();var br=u(x()),Re=u(W());st();var hr=(t,e)=>{let o=t.coinId,i=go(o),s=(0,Re.useSelector)(qt),a=(0,Re.useSelector)(({metamask:l})=>l.currencies),m=(0,br.useMemo)(()=>e&&a?.find(l=>l.currencyId===e)||s,[e]),c=J(i,m?.usdToThisRate);return vo(oo,l=>{let d=io(l,{symbol:t.symbol}),_=so(J(l,c),{useApproximate:!1,symbol:m.symbol});return`${d}(${_})`})};dt();st();var Nr=({bytes:t,value:e,signInfo:o={},coinId:i,currencyId:s,onChange:a})=>{let m=Lo(),{coin:c,baseCoin:l}=Fo(i,!0),[d,_]=(0,G.useState)(e?.customSatBytes),T=hr(l,s),g=p("extension_wallet_transaction_text_minute");(0,G.useEffect)(()=>{!d&&o?.normal&&_(o?.normal)},[o]);let w=(0,G.useCallback)(A=>{_(A)},[]),I=(0,G.useCallback)(()=>{a?.({customSatBytes:d,type:F.CUSTOM,satBytes:d})},[d]),y=c.localType===$t?p("wallet_extension_transfer_unit_sat_b"):"",C=(0,G.useMemo)(()=>{let{min:A,mempoolMin:b}=o,O=b||A||0;return Gt(d,O)?p("extension_btc_minmum_alert_fee_lowerthan",{feerate:O}):""},[d,o]);return(0,G.useMemo)(()=>[F.SLOW,F.STANDARD,F.FAST,F.CUSTOM].map(A=>{switch(A){case F.SLOW:return{data:{type:F.SLOW,satBytes:o.min,estimatedTime:`${_t(o.maxCost)} ${g}`},unitPrice:`${o.min} ${y}`,totalPrice:T(J(o.min,t),s),type:p(Kt[F.SLOW]),typeKey:F.SLOW,estimatedTime:`${_t(o.maxCost)} ${g}`};case F.STANDARD:return{data:{type:F.STANDARD,satBytes:o.normal,estimatedTime:`${_t(o.normalCost)} ${g}`},unitPrice:`${o.normal} ${y}`,totalPrice:T(J(o.normal,t),s),type:p(Kt[F.STANDARD]),typeKey:F.STANDARD,estimatedTime:`${_t(o.normalCost)} ${g}`};case F.FAST:return{data:{type:F.FAST,satBytes:o.max,estimatedTime:`${_t(o.minCost)} ${g}`},unitPrice:`${o.max} ${y}`,totalPrice:T(J(o.max,t),s),type:p(Kt[F.FAST]),typeKey:F.FAST,estimatedTime:`${_t(o.minCost)} ${g}`};default:return{unitPrice:`${o.max} ${y}`,totalPrice:T(J(d,t),s),estimatedTime:m(o,d),canConfirm:!C,onConfirm:I,components:()=>G.default.createElement(ft.Number,{enableMinus:!1,precision:0,error:C,errorType:ft.TIP_TYPE.always,onChange:w,value:d,size:ft.SIZE.sm,title:y,className:"custom-network-fee__satb"})}}}),[t,o,d])};var Yn=({value:t,coinId:e,bytes:o,signInfo:i,onChange:s,currencyId:a,onClose:m})=>{let c=Nr({bytes:o,value:t,coinId:e,onChange:s,signInfo:i,currencyId:a});return $e.default.createElement(wo,{feeType:t?.type,feeDataList:c?.slice(0,3),onBack:m,custom:(0,Br.last)(c),onChange:({data:l})=>{s?.(l)}})},Or=$e.default.memo(Yn);r();n();var et=u(x());dt();k();r();n();k();var P=u(x());r();n();var It={"output-panel":"_output-panel_1mdhy_1",outputPanel:"_output-panel_1mdhy_1","output-panel__content":"_output-panel__content_1mdhy_4",outputPanelContent:"_output-panel__content_1mdhy_4","output-panel__compare":"_output-panel__compare_1mdhy_7",outputPanelCompare:"_output-panel__compare_1mdhy_7","output-panel-slider__content":"_output-panel-slider__content_1mdhy_13",outputPanelSliderContent:"_output-panel-slider__content_1mdhy_13","output-tag":"_output-tag_1mdhy_16",outputTag:"_output-tag_1mdhy_16"};var _e=330,ye=1e4,Gn=({coinId:t,visible:e,outputValue:o,currencyId:i,onClose:s,onChange:a})=>{let[m,c]=(0,P.useState)(String(o));(0,P.useEffect)(()=>{c(String(o))},[o]),(0,P.useEffect)(()=>{e&&c(String(o))},[o,e]);let l=Pt(t,m,{currencyId:i,useApproximate:!1});return e?P.default.createElement(E.Portal,{component:E.Container,className:It["output-panel"]},P.default.createElement(Ot,{onBack:s,onClose:s,title:p("wallet_header_title_inscription_sats")}),P.default.createElement(E.Box,{className:It["output-panel__content"]},P.default.createElement(ft.Number,{precision:0,value:m,max:ye,min:_e,size:ft.SIZE.xl,onChange:d=>{c(d)},suffix:P.default.createElement(S.Text,{size:S.SIZE.sm},"sats")}),P.default.createElement(S.Text,{className:It["output-panel__compare"],type:S.TYPE.secondary,size:S.SIZE.sm},l),P.default.createElement(E.Space,{space:4,direction:E.DIRECTION.vertical},P.default.createElement(qe,{value:m,min:_e,max:ye,contentClassName:It["output-panel-slider__content"],onChange:d=>{c(String(d))}}),P.default.createElement(E.FlexBox,{justify:"space-between"},P.default.createElement(S.Text,{type:S.TYPE.secondary,size:S.SIZE.xs},`${_e} sats`),P.default.createElement(S.Text,{type:S.TYPE.secondary,size:S.SIZE.xs},`${ye} sats`)))),P.default.createElement(Bt.FooterActions,null,P.default.createElement(Z,{disabled:!m||!m?.trim(),category:Z.CATEGORY.fill,type:Z.TYPE.highlight,size:Z.SIZE.lg,onClick:()=>{a?.(Math.min(Math.max(m,_e),ye)),s?.()}},p("extension_transactions_btn_confirm")))):null},Pr=Gn;var zn=({txType:t,currencyId:e,inscriptionsCount:o,inscriptionOutput:i,coinId:s=v,totalInscriptionCoinAmount:a,onInscriptionOutputChange:m})=>{let[c,{toggle:l}]=Nt(!1),d=lt.gt(a,0)?a:"0",_=Pt(s,d,{currencyId:e,useApproximate:!0}),T=(0,et.useMemo)(()=>mo(t),[t]);return et.default.createElement(et.default.Fragment,null,et.default.createElement(at,{clickable:t===N.RUNES_ETCH?!1:void 0,onClick:()=>{lt.gt(i,0)&&l()},title:p(T)},et.default.createElement(E.FlexBox,{align:E.ALIGN.center},`${i} sats`,!!o&&o>1&&et.default.createElement(S.Text,{className:It["output-tag"]},"x",o),_)),et.default.createElement(Pr,{coinId:s,visible:c,currencyId:e,outputValue:i,onClose:l,onChange:m}))},wr=zn;r();n();k();var xe=u(x()),Vn=({coinId:t,currencyId:e,totalCoinAmount:o})=>{let i=it(t),s=Pt(t,o,{currencyId:e,useApproximate:!0});return xe.default.createElement(at,{title:p("extension_wallet_transaction_item_inscribe_totalfee")},xe.default.createElement(S.Text,{inherit:!0,strong:700},xe.default.createElement(S.DisplayAmount,{noStyle:!0,symbol:i?.symbol,decimals:i?.decimals},o),s))},Lr=Vn;r();n();var Dr=u(x()),Ur=u(we()),Rr=u(Un());k();r();n();r();n();Qe();to();ro();dt();var vr=u(Ne());function Xn({walletId:t,utxoType:e=1,coinId:o=v}={}){let i=jt();return async({from:s,coinAmount:a,serviceCharge:m,feeRate:c})=>{let l=await Ht().getRequestHeaders({walletId:t||i,needSign:!0,currency:"usd"}),d={address:s,coinAmount:a,serviceCharge:m,utxoType:e};(0,vr.isNil)(c);let _={coinId:o,utxoRequests:[d]};try{let{data:T}=await Yt(Vt.getBTCUTXO,_,{headers:l});return T?.[0]||{}}catch(T){return{error:!0,errorResp:T}}}}var Te=Xn;Qe();dt();k();st();r();n();var Mr=u(x());function Zn(t){let{inscriptionOutput:e}=j(),{satBytes:o}=V(),{walletId:i,from:s,to:a,inscriptions:m,txType:c,mintType:l}=tt(),d=pr(t),_=lr();return(0,Mr.useCallback)(async T=>{let g={};return c===N.RUNES_ETCH?(g={input:T.map(({txHash:y,vout:C,coinAmount:A})=>({vOut:C,txId:y,amount:A})),address:s,feePerB:o,outValue:e,inscriptions:(m||[]).map(({body:y})=>JSON.parse(y))},await _({walletId:i,address:s,tx:g,txType:c,mintType:l})):(g={commitTxPrevOutputList:T.map(({txHash:I,vout:y,coinAmount:C})=>({vOut:y,txId:I,amount:C})),commitFeeRate:o,revealFeeRate:o,inscriptionDataList:(m||[]).map(({contentType:I,body:y})=>({contentType:I,body:y})),revealOutValue:e,changeAddress:s,toAddr:a},await d({walletId:i,address:s,tx:g,txType:c}))},[s,a,m,e,o])}var Ce=Zn;function Jn(){let{walletId:t,from:e,to:o,utxoType:i,inscriptions:s,txType:a,protocolId:m,mintType:c}=tt(),l=Mt(),d=pe(),_=cr({address:e,coinId:v,currencyId:d,txType:a,protocolId:m}),T=Ce(me.CONFIRM),g=Te({walletId:t,utxoType:i}),{beforePostTx:w}=Er(),{inscriptionOutput:I,total:y}=j(),{totalFee:C}=Tt(),A=Ct(),{satBytes:b}=V(),O=async B=>{let{commitTx:h,revealTxs:L,commitAddrs:U,commitTxFee:X,revealTxFees:Ft}=await T(B.utxoList||[]),Q=await bo($t,h),ct=await ho($t,L),H=[Q,...ct],bt={signedTx:h,fromAdr:e,serviceCharge:X,toAdr:o||e,itemId:"commitTx",txHash:Q,txType:a,extJson:JSON.stringify({protocolId:m,broadcastType:1,nftIds:[]})},pt=L.map((be,rt)=>({signedTx:be,fromAdr:U?.[rt]||e,serviceCharge:Ft?.[rt],toAdr:o||e,itemId:`revealTx${rt}`,txHash:ct[rt],dependTx:c===Jt.serial?[H[rt]]:[Q],txType:a,extJson:JSON.stringify({protocolId:m,broadcastType:1,nftIds:[]})}));w&&w(bt,pt);let Rt=await Ht().getRequestHeaders({walletId:t,needSign:!0,currency:"usd"});return{txIds:await Io({txList:[bt,...pt]},{headers:Rt}),commitTx:h,revealTxs:L,commitAddrs:U,commitTxFee:X,revealTxFees:Ft,feeRate:parseInt(b,10),size:parseInt(I,10)}},ut=async()=>{let B=await g({from:e,coinAmount:nt(y,C),serviceCharge:A,feeRate:b}),h=B.utxoList||[];return await _(h,()=>{}),await O(B)};return()=>new Promise((B,h)=>{if(typeof l?.txSizeLimit=="number"&&s.length>l.txSizeLimit){let L=Ke.warn({alignBottom:!1,maskClosable:!1,title:p("wallet_header_dialog_header_reminder"),text:p("wallet_info_dialog_too_much_inscription"),confirmText:p("wallet_btn_dialog_btn_cancel"),cancelText:p("wallet_bot_dialog_btn_continue"),onCancel:async()=>{try{let U=await ut();B(U)}catch(U){h(U)}L.destroy()},onConfirm:()=>{h(new Error(ae)),L.destroy()}})}else(async()=>{try{let L=await ut();B(L)}catch(L){h(L)}})()})}var kr=Jn;var Kn=({txId:t,coinId:e,walletId:o,feeError:i,address:s,onConfirm:a,onCancel:m,disabled:c,addressType:l,useTipMessageFillUp:d,onFillUp:_},T)=>{let g=(0,Ur.useHistory)(),w=kr(),I=Oo(o,m),y=ht(async()=>{try{await I();let C=await w();a&&await a(C)}catch(C){if(!(C?.message===ae)){let b=C?.data?.msg||C?.msg||C?.data?.originalError?.msg||p("wallet_home_toast_network_error");je.error({title:b})}}},[a]);return(0,Dr.useMemo)(()=>{let C=m?{actionType:D.ACTION_TYPE.CANCEL,onClick:m}:null,A={disabled:c,actionType:D.ACTION_TYPE.CONFIRM,onClick:y};return!i&&[K.BALANCE_INSUFFICIENT,K.FEE_BALANCE_INSUFFICIENT].includes(T)&&(C=C||{actionType:D.ACTION_TYPE.CANCEL,onClick:()=>{g.goBack()}},d?A={actionType:D.ACTION_TYPE.CONFIRM,btnText:p("wallet_extension_mid_textbtn_manage_utxo"),onClick:async()=>{_&&await _();let b=Rr.default.stringify({addressType:l,coinId:e},{skipEmptyString:!0,skipNull:!0}),O=b?`?${b}`:"";g.push(xo+O)}}:A={txId:t,coinId:e,address:s,walletId:o,actionType:D.ACTION_TYPE.FILL_UP}),[C,A]},[m,c,y,i,T,d,g,l,t,e,s,o,_])},$r=Kn;r();n();var We={"free-tag":"_free-tag_7hgbl_1",freeTag:"_free-tag_7hgbl_1",actions:"_actions_7hgbl_5"};r();n();k();r();n();var Wr=u(x());st();function Hr(){let{totalFee:t}=Tt(),{satBytes:e}=V();return zt(Oe(t,e),0)}function Yr(){let t=Ct(),{satBytes:e}=V();return zt(Oe(t,e),0)}function Gr(){let{totalFee:t}=Tt(),e=Ct();return(0,Wr.useMemo)(()=>nt(t,e),[t,e])}r();n();r();n();var St=u(x());st();function qn(t){let{disabled:e=!1}=t||{},{walletId:o,from:i,utxoType:s}=tt(),[a,m]=(0,St.useState)(!0),[c,l]=(0,St.useState)(!0),[d,_]=(0,St.useState)(null),[T,g]=(0,St.useState)([]),w=Te({walletId:o,utxoType:s}),I=Ce(me.CAL_FEE),{satBytes:y}=V(),{total:C}=j(),A=le(),{totalFee:b}=Tt(),O=Ct();return(0,St.useEffect)(()=>{!e&&(async()=>{if(!eo(C,0))try{l(!0);let B=await w({from:i,coinAmount:nt(C,b),serviceCharge:O,feeRate:y});if(!B?.utxoList?.length){_(Y.BALANCE_NOT_ENOUGH);return}if(B.error){let U=B.errorResp.code,X=Y.COMMON_ERROR;[Y.BALANCE_NOT_ENOUGH,Y.PURE_UTXO_NOT_ENOUGH].includes(U)&&(X=U),_(X);return}A("canTransferAmount",B.canTransferAmount||"0"),_(null);let{commitTxFee:h,revealTxFees:L}=await I(B.utxoList);g(B.utxoList),A("commitTxFee",h),A("revealTxFees",L)}catch{_(Y.COMMON_ERROR),A("commitTxFee","0"),A("revealTxFees",[])}finally{m(!1),l(!1)}})()},[i,y,C,b,O,I,e]),{isInitLoading:a,isLoading:c,error:d,utxoList:T}}var zr=qn;function jn(t){let{disabled:e=!1}=t||{},o=Gr(),{total:i}=j(),s=Ar(),a=ke(),{isInitLoading:m,isLoading:c,error:l,utxoList:d}=zr({disabled:e});return{isInitLoading:m,isLoading:c,error:l,canTransferAmount:s,fee:o,inscriptionOutput:i,feeData:a,utxoList:d}}var ge=jn;var Qn=()=>{let{utxoList:t,fee:e,error:o,canTransferAmount:i,isLoading:s}=ge(),a=Mt(),m=Yr(),c=Hr(),l=lt.add(m,c),d=V(),_=le();return{bytes:l,signInfo:a,feeError:o,selectedSat:d,feeLoading:s,networkFee:e,canTransferAmount:i,utxoListCount:t?.length||0,onFeeDataChange:_}},Vr=Qn;r();n();var Zr=u(x());k();r();n();var ts=[N.BRC20_DEPLOY,N.BRC20_MINT,N.BRC20_INSCRIBE,N.ORDINAL_NFT,N.ORDINAL_TEXT,N.EARN_BRC30_DEPLOY,N.EARN_BRC30_APPLY,N.EARN_BRC30_REDEEM,N.EARN_BRC30_CLAIM,N.BRC30_INSCRIBE,N.RUNES_ETCH];function Xr(t){return ts.indexOf(t)>-1}var es=({txType:t,feeError:e,isHardware:o,isMpcWallet:i,utxoListCount:s,transferReminder:a})=>(0,Zr.useMemo)(()=>Xr(t)?i&&t===N.RUNES_ETCH?{type:xt.TIP_TYPE.COMMON_ERROR,message:p("extension_defi_bot_alert_mpc_not_support")}:o?{type:xt.TIP_TYPE.COMMON_ERROR,message:p("wallet_extension_top_toast_dapp_comingsoon")}:e===Y.COMMON_ERROR?{type:xt.TIP_TYPE.FEE_ERROR}:e===Y.BALANCE_NOT_ENOUGH?{type:ue.FEE_BALANCE_INSUFFICIENT,message:p("extension_defi_errortip_not_enough_btc")}:e===Y.PURE_UTXO_NOT_ENOUGH?{type:ue.BALANCE_INSUFFICIENT,message:p("extension_defi_errortip_not_enough_pure_utxo")}:s>100?{type:ue.BALANCE_INSUFFICIENT}:{message:a}:{type:xt.TIP_TYPE.COMMON_ERROR,message:p("extension_defi_bot_alert_wallet_upgrade")},[t,e,o,i,s,a]),Jr=es;function os({txId:t,headerProps:e={},slot:o={},confirmButtonProps:i={}}){let{from:s,walletId:a,txType:m}=tt(),c=Eo(a),l=Ao(a),[d,{toggle:_}]=Nt(!1),T=pe(),w=Co()[s],{bytes:I,signInfo:y,feeError:C,selectedSat:A,feeLoading:b,networkFee:O,canTransferAmount:ut,utxoListCount:B,onFeeDataChange:h}=Vr(),{title:L,...U}=e,{inscriptionOutput:X,inscriptionsCount:Ft,total:Q}=j(),ct=(0,M.useMemo)(()=>lt.add(O,Q),[O,Q]),H=it(v),{showManageUTXO:bt}=Cr(H||{},w,!0),pt=bt&&C!==Y.PURE_UTXO_NOT_ENOUGH,{type:Rt,message:Ze}=Jr({txType:m,feeError:C,feeLoading:b,utxoListCount:B,isHardware:c,isMpcWallet:l,canTransferAmount:ut,networkFee:O,totalUsedCoinAmount:ct}),be=$r({txId:t,walletId:a,coinId:v,addressType:w,disabled:!!Rt||!!C||!!b||c||B>100,useTipMessageFillUp:pt,...i},Rt),rt=yr(a),Mn=ht(he=>{h("commitTxFee","0"),h("revealTxFees",[]),h("inscriptionOutput",he)},[]),{top:kn,footer:Dn}=o;return M.default.createElement(de,{slot:{header:M.default.createElement(Ot,{title:L||p("extension_wallet_header_maintitle_inscribe"),...U}),footer:Dn||M.default.createElement("div",{className:We.actions},M.default.createElement(xt,{type:Rt||Je.TYPE.warn,address:s,message:Ze,coinId:v,walletId:a,fillUpAble:pt}),M.default.createElement(D,{buttonGroup:be}))}},kn,M.default.createElement(yt,null,M.default.createElement(at,{title:p("wallet_info_title_inscribe_service_fee")},M.default.createElement(S.Text,{className:We["free-tag"]},p("wallet_info_tag_inscribe_free_tag"))),M.default.createElement(dr,{coinId:v,loading:b,currencyId:T,networkFee:b&&O==="0"?void 0:O,estimateFailed:!b&&!Number(O),onClick:()=>{_?.(),rt({trade:"brc20",all_confirmation:"network_fee"})}}),M.default.createElement(wr,{txType:m,currencyId:T,inscriptionsCount:Ft,inscriptionOutput:X,totalInscriptionCoinAmount:Q,onInscriptionOutputChange:Mn})),M.default.createElement(yt,null,M.default.createElement(Lr,{coinId:v,currencyId:T,totalCoinAmount:ct})),M.default.createElement(yt,{bordered:!1},M.default.createElement(_r,{address:s,walletId:a,title:p("wallet_extension_network_address_title_walletused"),onCopyCallback:()=>{rt({trade:"brc20",all_confirmation:"wallet_used_address"})}})),d&&M.default.createElement(Or,{bytes:I,currencyId:T,value:A,coinId:v,onClose:_,signInfo:y,onChange:he=>{h("commitTxFee","0"),h("revealTxFees",[]),h("feeSelectedSat",he)}}))}var He=os;r();n();var Et=u(x());k();r();n();var jr=u(x());var Qr=u(W());dt();r();n();var Kr=u(x());function rs(){let{coin:t}=R(),e=Lt();return(0,Kr.useMemo)(()=>{if(Xt(t))return[{body:JSON.stringify({p:"brc-20",op:"transfer",tick:t.symbol,amt:e})}];let i=Zt(t);return[{body:JSON.stringify({p:"brc20-s",op:"transfer",tid:i,tick:t.symbol,amt:e})}]},[t.coinId,e])}var qr=rs;function ns({walletId:t,txSource:e,children:o}){let i=qr(),s=ee(),a=te(),{coin:m}=R(),c=vt(),l=jt(),_=Xt(m)?N.BRC20_INSCRIBE:N.BRC30_INSCRIBE,T=(0,Qr.useSelector)(xr),g=(I,y)=>{I.coinAmount=a,I.coinId=y?v:m.coinId,I.txSource=e||ao.NORMAL},w=(I,y)=>{I&&g(I,!0),Array.isArray(y)&&y.forEach(C=>{g(C,!1)})};return jr.default.createElement(De,{defaultFeeData:T,currencyId:s,params:{walletId:t||l,from:c,inscriptions:i,utxoType:ur.INSCRIPTION_USE_NFT_UTXO,txType:_,protocolId:m?.protocolId},lifecycle:{beforePostTx:w}},o)}var Ie=ns;r();n();var $=u(x());k();var Ut=u(W()),Sn=u(Be());var An=u(Ne());r();n();st();var ss=()=>{let t=ie();return Gt(t,0)&&(t="0"),t},tn=ss;r();n();var on=u(x()),rn=u(Be()),nn=u(we()),sn=u(W());r();n();var en={root:"_root_ryl3e_1"};function is({onBack:t,onClose:e,...o}){let i=(0,nn.useHistory)(),s=(0,sn.useSelector)(Qt),a=()=>{t&&t(),i.goBack()},m=()=>{e&&e(),i.push(s)};return on.default.createElement(Ot,{className:(0,rn.default)(en.root,o.className),onClose:m,onBack:a,...o})}var an=is;r();n();var Ye={content:"_content_11o8q_1",totalAmountWrap:"_totalAmountWrap_11o8q_7"};r();n();var mt=u(x());k();r();n();var Dt={container:"_container_djh56_1",totalAmount:"_totalAmount_djh56_5","totalAmount-content":"_totalAmount-content_djh56_9",totalAmountContent:"_totalAmount-content_djh56_9","totalAmount-title":"_totalAmount-title_djh56_18",totalAmountTitle:"_totalAmount-title_djh56_18","totalAmount-amount":"_totalAmount-amount_djh56_25",totalAmountAmount:"_totalAmount-amount_djh56_25"};r();n();var as=(t,e)=>{let{coin:o}=R(),i=er(),s=mr(),a=se(),m=ie(),l={total:s,amount:a,available:m}[t];return`${i(e||l,o,{useApproximate:!1,zero:{decimals:!1}})} ${o.symbol}`},mn=as;function ms(t){t||(t=""),typeof t!="string"&&(t=t.toString());let e=t?.length;return e<=20?"15px":e<=22?"14px":e<=24?"13px":"12px"}function us({type:t="total",title:e,maxBtnText:o,maxAmount:i,hiddenMaxButton:s,onMax:a,slot:m={},...c}){let{coin:l}=R(),d=mn(t,i),{bottom:_}=m;return mt.default.createElement(E.Box,{className:Dt.container},mt.default.createElement(E.FlexBox,{align:E.ALIGN.center,className:Dt.totalAmount,...c},mt.default.createElement(Le,{size:Le.SIZE.lg,src:l?.image,text:l?.symbol}),mt.default.createElement(E.Box,{className:Dt["totalAmount-content"]},mt.default.createElement(S.Text,{type:S.TYPE.secondary,size:S.SIZE.xs,className:Dt["totalAmount-title"]},e||p("wallet_extension_send_item_total_amount")),mt.default.createElement(S.Text,{ellipsis:{tooltip:!0},className:Dt["totalAmount-amount"],style:{fontSize:ms(d)}},d)),!s&&mt.default.createElement(Z,{category:Z.CATEGORY.fill,type:Z.TYPE.gray,size:Z.SIZE.xs,onClick:a},o||p("wallet_extension_send_text_max"))),_)}var un=us;r();n();var yn=u(x()),xn=u(W());r();n();var At=u(x());k();r();n();var ln=u(x());r();n();var ot=u(x());k();r();n();var cn={root:"_root_1k6ce_1"};var cs=({coin:t={},onVisible:e,receiveOnly:o,address:i,style:s})=>{let[a,{setTrue:m,setFalse:c}]=Nt();(0,ot.useEffect)(()=>{e&&e(a)},[a]);let l=t.symbol.length>12?`${t.symbol.slice(0,12)}...`:t.symbol;return ot.default.createElement(ot.default.Fragment,null,ot.default.createElement("div",{className:cn.root,onClick:m,style:s},p("wallet_extension_placeorder_textbtn_replenish",{token:l})),ot.default.createElement(Bo,{address:i,visible:a,closeCallback:c,coinId:t.coinId,receiveOnly:o}))},pn=(0,ot.memo)(cs);var fn=u(W());function ps(t){let e=(0,fn.useDispatch)(),o=vt();return ln.default.createElement(pn,{address:o,...t,onVisible:s=>{e(Ko(s))}})}var Ge=ps;var ls=()=>{let{coin:t}=R(),e=or();return i=>{let s="";return i.text?s=i.text:i.key&&(s=p(i?.key,i?.args)),i?.type===K.BALANCE_INSUFFICIENT?At.default.createElement(At.default.Fragment,null,s," ",At.default.createElement(Ge,{coin:t,receiveOnly:!0,style:{width:"100%","word-wrap":"break-word"}})):i?.type===K.FEE_BALANCE_INSUFFICIENT?At.default.createElement(At.default.Fragment,null,s," ",At.default.createElement(Ge,{coin:e,style:{width:"100%","word-wrap":"break-word"}})):s}},dn=ls;r();n();var _n={root:"_root_g697e_1"};function fs({renderError:t}){let e=(0,xn.useSelector)(ko),o=dn(),i=t||o;if(!e.key)return null;let s=i(e);return yn.default.createElement("div",{className:_n.root},s)}var Tn=fs;r();n();var Cn=u(we()),ze=u(W());function ds(t){let e=(0,Cn.useHistory)(),o=(0,ze.useSelector)(Qt),i=wt(),{coin:s}=R(),a=(0,ze.useSelector)(Mo),m=tr();po(()=>{if(!!t){if(To(s))e.replace(o||fo);else if(!a){let c={pathname:`${_o}/${i}${yo}`};m&&(c.search=`?from=${m}`),e.replace(c)}}})}var gn=ds;r();n();k();var _s=({loading:t,disabled:e,onClick:o,...i})=>co(()=>[{loading:!e&&t,disabled:e,onClick:o,actionType:D.ACTION_TYPE.CONFIRM,btnText:p("wallet_extension_send_btn_continue"),...i}],[e,t,o,i]),ys=({disabled:t,onClick:e,...o})=>{let i=ar(),s=ne();return _s({...o,disabled:t||s,onClick:e||i})},In=ys;function xs({isGlobalLoading:t,renderError:e,headerProps:o={},confirmButtonProps:i={},inputProps:s={},totalAmountProps:a={},slot:m={},classes:c={},checkEmpty:l=!0,inputAmount:d}){let _=(0,Ut.useDispatch)(),{content:T}=c,{header:g,bottom:w,footer:I}=m,y=(0,$.useRef)(),C=(0,Ut.useSelector)($o),A=wt(),b=Lt(),O=(0,Ut.useSelector)(Do),ut=(0,Ut.useSelector)(Ro),B=ee(),h=rr(),L=tn(),U=(0,$.useRef)(!!b),X=H=>{_(Xo(H))},Ft=()=>{_(ve(L)),X(!0)},Q=a.onMax||Ft;gn(l),(0,$.useEffect)(()=>{(0,An.isNil)(d)||y.current?.setInputAmount(d.toString())},[d]);let ct=In(i);return $.default.createElement(de,{loading:t,slot:{header:g||$.default.createElement(an,{title:p("wallet_extension_send_title_send"),...o}),footer:t?null:I||$.default.createElement(D,{buttonGroup:ct})}},$.default.createElement("div",{className:(0,Sn.default)(T,Ye.content)},$.default.createElement(No,{ref:y,...s,autoFocus:!C,coinId:A,maximumMode:h,maximumAmount:h?L:null,initialValue:{value:[b||"0",O||"0"],mode:ut,flatCurrencyId:B},onAmountChange:([H,bt],pt)=>{_(Yo(bt)),_(ve(H)),pt&&(X(!1),U.current=!0)},onModeChnage:H=>{_(Go(H))},onFlatChange:H=>{H&&_(Zo(H.currencyId))}}),U.current&&$.default.createElement(Tn,{renderError:e}),$.default.createElement(Bt,{offsetBottom:a?.fixBottom?80:104,className:Ye.totalAmountWrap},$.default.createElement(un,{...a,onMax:()=>{Q(),U.current=!0}})),w))}var En=xs;r();n();var Fn=u(x());st();var bn=u(W());function Ve(){let t=se();return(0,Fn.useCallback)(e=>Pe(e,t)?{key:"extension_wallet_send_text_insufficient_balance",args:{},type:K.COMMON_ERROR}:null,[t])}function Ts(){let t=(0,bn.useDispatch)(),e=nr(),o=Ve(),i=[e,o],{runErrorFns:s}=re(i);oe(s,a=>{t(Ho(a))})}var hn=Ts;r();n();var Nn=u(W()),Se=u(x());to();ro();function Cs(){let t=(0,Nn.useDispatch)(),e=vt(),{coin:o}=R(),[i,s]=(0,Se.useState)(!0);return(0,Se.useEffect)(()=>{(async()=>{try{if(!o.coinId)return;let m=await Yt(Vt.postPendingBalanceDetail,{address:e,coinId:o.coinId});m?.data&&t(qo(m.data.availableWithoutSpending))}finally{s(!1)}})()},[e,o.coinId]),i}var Bn=Cs;r();n();var Wt=u(x());var On=u(W());function gs(){let t=(0,On.useDispatch)(),{isInitLoading:e,error:o,fee:i,feeData:s,canTransferAmount:a}=ge();return(0,Wt.useEffect)(()=>{t(jo(a))},[a]),(0,Wt.useEffect)(()=>{t(zo(i))},[i]),(0,Wt.useEffect)(()=>{t(Tr(s))},[s]),(0,Wt.useEffect)(()=>{t(Vo(!!o))},[o]),e}var Ae=gs;function Is({amount:t,onCancel:e,onConfirm:o,slot:i,...s}){let a=ne(),m=Ae(),c=Bn(),l=(0,Et.useMemo)(()=>{let d=null;return typeof e=="function"&&(d={actionType:D.ACTION_TYPE.CANCEL,onClick:e}),[d,{actionType:D.ACTION_TYPE.CONFIRM,onClick:o,disabled:a,loading:m,btnText:p("wallet_extension_send_btn_continue")}]},[m,a,e,o]);return hn(),Et.default.createElement(En,{...s,inputAmount:t,isGlobalLoading:c,slot:{...i||{},footer:Et.default.createElement(D,{buttonGroup:l})},checkEmpty:!1,headerProps:{title:p("extension_wallet_header_maintitle_inscribe"),...s.headerProps||{}},totalAmountProps:{...s?.totalAmountProps||{},title:p("extension_defi_bot_textarea_inscribe_balance"),type:"amount"},inputProps:{...s.inputProps||{},disabled:{input:!1,switch:!0}}})}function Ss({walletId:t,...e}){return Et.default.createElement(Ie,{walletId:t},Et.default.createElement(Is,{...e}))}var Gl=Ss;r();n();var z=u(x());k();var vn=u(W());r();n();var Xe=u(x());var Ee=u(W());function As(){let t=(0,Ee.useSelector)(Uo);return(0,Xe.useCallback)(()=>t?{key:"extension_wallet_btc_error_notif_insufficient_btc",args:{},type:K.FEE_BALANCE_INSUFFICIENT}:null,[t])}function Es(){let t=Ve();return(0,Xe.useCallback)(e=>{let o=t(e);return o?{...o,highlight:sr.AMOUNT}:null},[t])}function Fs(t){let e=(0,Ee.useDispatch)(),o=As(),i=ir(),s=Es(),a=[o,i,s],{runErrorFns:m}=re(a);oe(m,c=>{e(Jo(c))},t)}var Pn=Fs;r();n();var Fe=u(x());k();r();n();var wn={"preview-json":"_preview-json_xaani_1",previewJson:"_preview-json_xaani_1"};var bs=({coinId:t,amount:e})=>{let o=it(t),{loading:i,data:s}=lo(async()=>{let a={op:"transfer",amount:e,tick:o.symbol};return no(o)&&(a={...a,p:"brc20-s",tid:Zt(o)}),(await So(a))?.brcJson||""});return Fe.default.createElement(at,{title:p("extension_wallet_transaction_item_inscribe_preview")},Fe.default.createElement(E.Spin,{loading:i},Fe.default.createElement(S.Text,{className:wn["preview-json"]},s)))},Ln=bs;function hs({headerProps:t={},onCancel:e,onConfirm:o,walletId:i}){let s=(0,vn.useDispatch)(),a=Lt(),m=wt(),c=te(),l=Ae(),d=(0,z.useCallback)(async()=>{await s(Wo(!1))},[s]);return Pn(l),z.default.createElement(He,{walletId:i,slot:{top:z.default.createElement(z.default.Fragment,null,z.default.createElement(yt,null,z.default.createElement(fr,{summaryList:[{coinId:m,coinAmount:c}],title:p("extension_wallet_transaction_item_inscribe")})),z.default.createElement(yt,null,z.default.createElement(Ln,{coinId:m,amount:a})))},headerProps:t,confirmButtonProps:{onCancel:e,onConfirm:o,onFillUp:d}})}function Ns({txSource:t,walletId:e,...o}){return z.default.createElement(Ie,{txSource:t,walletId:e},z.default.createElement(hs,{walletId:e,...o}))}var wf=Ns;export{de as a,an as b,Ge as c,gn as d,_s as e,En as f,Os as g,Te as h,Or as i,tt as j,He as k,De as l,Gl as m,wf as n};

window.inOKXExtension = true;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=chunk-757PCK3N.js.map
