import{a as sr}from"./chunk-3533736A.js";import{a as mr}from"./chunk-LGYOLZMN.js";import{a as De,b as ar}from"./chunk-JGAHAEK5.js";import"./chunk-PFNFAQEP.js";import{a as ir}from"./chunk-KHK3QCC3.js";import{a as nr}from"./chunk-53XGQLJX.js";import{a as bt}from"./chunk-JR7BDGRI.js";import{c as Qo}from"./chunk-UFJWKC47.js";import"./chunk-MTAR53YL.js";import{b as ke}from"./chunk-KWQVFNZ3.js";import"./chunk-N3VGDA3L.js";import{d as Vo}from"./chunk-3QCQMWWZ.js";import"./chunk-TQEP4B6B.js";import"./chunk-E6PQQLEO.js";import"./chunk-R7R6LTH6.js";import"./chunk-TAZU4KSU.js";import{a as zo,d as le}from"./chunk-W327NRHO.js";import"./chunk-DZDHGH5B.js";import"./chunk-UKFSUXAE.js";import"./chunk-U3CLRNWK.js";import"./chunk-M4STRGDO.js";import"./chunk-GYUX3JJ3.js";import"./chunk-4C2576LU.js";import{a as Zo}from"./chunk-3EYFKVOU.js";import"./chunk-QUUI62AZ.js";import"./chunk-SIKYZQW4.js";import{a as dt,b as Yo}from"./chunk-MCRNCTJS.js";import"./chunk-YZAK46Y6.js";import{C as qo,D as jo,E as Jo,G as Ko}from"./chunk-VX7CI7XT.js";import"./chunk-D6HSNWGS.js";import{a as me}from"./chunk-7ODXCTBK.js";import{a as $o}from"./chunk-GZMWLE4V.js";import{b as Xo}from"./chunk-C54I6GL3.js";import"./chunk-ZJICRI36.js";import"./chunk-BIBDTDJA.js";import{a as ie}from"./chunk-ADIQBHVU.js";import"./chunk-TPVT7ZCY.js";import"./chunk-A6HNAUBV.js";import"./chunk-6GFVKSAR.js";import"./chunk-JVLSBRR5.js";import"./chunk-5IXTSGAM.js";import"./chunk-OR2KMY5L.js";import"./chunk-FFJ36R7T.js";import"./chunk-NVCWAHOV.js";import"./chunk-RFEJLMRV.js";import{e as Mo,g as se,h as Ho}from"./chunk-UIABO6UG.js";import"./chunk-KJFAD5C4.js";import"./chunk-BFVA6OLJ.js";import"./chunk-ON3J2WQV.js";import"./chunk-RC3QMLDN.js";import"./chunk-JINEVGIZ.js";import"./chunk-SRU2IM3A.js";import"./chunk-46NSFYB3.js";import"./chunk-FFQESTX4.js";import"./chunk-OCZAVPFZ.js";import"./chunk-P6SDUFQ6.js";import"./chunk-5TNZ4MQV.js";import"./chunk-XGXABYQN.js";import"./chunk-KKTPGZSO.js";import"./chunk-ESKOSV75.js";import"./chunk-ZDQ5EBGN.js";import"./chunk-2KEW2T4M.js";import"./chunk-R7VTXTCL.js";import"./chunk-LBYCQPAD.js";import{b as Ut,c as tr,d as er,e as Ee,f as B,g as b,h as nt,i as at,j as ce,k as or,l as St,m as fe,n as rr}from"./chunk-X6EEBMFW.js";import{k as It}from"./chunk-KZR43RPO.js";import{a as Wt,c as Ro}from"./chunk-U43G73LH.js";import"./chunk-SQ5W4RLM.js";import"./chunk-I27PVEIN.js";import"./chunk-Y2PED5BF.js";import{b as Ot,d as So,e as Fo}from"./chunk-RUSRHRGO.js";import"./chunk-IZ5XPPXG.js";import{d as Po,f as ko}from"./chunk-6PN4BR3D.js";import"./chunk-EWK7ZFVN.js";import"./chunk-A23SHFFL.js";import"./chunk-VZ3BFZKL.js";import"./chunk-T6Z2C3RK.js";import"./chunk-R2QYIBE7.js";import"./chunk-KT53NMHD.js";import"./chunk-64STH2HN.js";import"./chunk-EKQH7XTV.js";import"./chunk-R2QKPEWB.js";import"./chunk-RMA2FZOE.js";import"./chunk-KRHB66KZ.js";import"./chunk-4RHFH7IF.js";import"./chunk-LPTRVNVL.js";import"./chunk-PH2A2GR3.js";import"./chunk-2LLM6N6U.js";import{h as ae}from"./chunk-LF2PURXZ.js";import"./chunk-JEZIPKDY.js";import{a as Eo}from"./chunk-SR2BDP3A.js";import{d as Lo,g as Go,l as Bo,m as Oo,o as Wo,u as Uo,y as Pe}from"./chunk-CFT6B56M.js";import"./chunk-WK32FAZW.js";import"./chunk-WMUTUJYX.js";import"./chunk-B23OWGFX.js";import"./chunk-OSWXWF4A.js";import"./chunk-Q7FJER56.js";import"./chunk-RBTIRMSE.js";import"./chunk-7GZ2ZCGI.js";import{c as go}from"./chunk-WTP3OIOS.js";import"./chunk-D66ZH3O3.js";import"./chunk-X764QIVO.js";import"./chunk-HISWVX7W.js";import{a as Do}from"./chunk-PYJPOVV7.js";import"./chunk-AO6MUSOH.js";import{a as rt}from"./chunk-I435LZHT.js";import{t as yo}from"./chunk-SJIW4WAV.js";import{a as Nn}from"./chunk-SLDECH2O.js";import{a as Co,j as At,l as bo,o as Nt,q as Fe}from"./chunk-5JJQQHKZ.js";import{a as M,n as oe,o as re}from"./chunk-URG4MCPH.js";import{Pa as ot,Xa as No,Ya as wo,_a as vt,ab as ee,o as j,r as _o,y as P}from"./chunk-ZPOCIBPN.js";import{T as vo,U as Ao,d as To,m as ho,r as Io,t as ft}from"./chunk-CA5MYYD6.js";import"./chunk-RZ7GFYMN.js";import{a as et}from"./chunk-IOCZ22XI.js";import"./chunk-EJY3MW2I.js";import"./chunk-3VRAVMMN.js";import"./chunk-YJ45QIWT.js";import"./chunk-WR62TYUO.js";import{d as yt,f as be}from"./chunk-2G2AXMFT.js";import"./chunk-XGFQCNHX.js";import"./chunk-7JF42X5G.js";import{a as Ct,b as J}from"./chunk-4JZ3HIS7.js";import"./chunk-JLA5HXVC.js";import"./chunk-I4WIGQLD.js";import"./chunk-ZNGQ6IUR.js";import"./chunk-JERFAOJH.js";import{g as wt}from"./chunk-JXZFOFB5.js";import"./chunk-LYNLETTP.js";import{a as ne}from"./chunk-FQ4XEVKF.js";import{c as xo}from"./chunk-VMYDP774.js";import{a as Bt,b as po}from"./chunk-A7LNVEYU.js";import{d as ro,e as no,f as ao,h as so}from"./chunk-2YWUVAR3.js";import"./chunk-VA2HGDZT.js";import"./chunk-AKPDCNMH.js";import{$a as lo,$b as $,Ea as eo,Ha as oo,Ka as Tt,La as ht,Na as V,Pa as Xt,Qa as tt,Ra as Qt,Sa as Rt,Sb as uo,Wa as Se,Xa as io,Ya as mo,db as Gt,fb as co,jb as fo,la as Re,na as to,nb as te,pb as q,t as Qe,ya as Kt}from"./chunk-M54COW6Q.js";import"./chunk-PWWHYQAY.js";import{B as Ce,G,b as Jt,q as ct}from"./chunk-RIJWHGTU.js";import{I as U,l as qt,v as a}from"./chunk-K4MPEKC5.js";import"./chunk-X6USBUO5.js";import"./chunk-674MHQJQ.js";import{L as Ke,R as Xe,X as v,c as Lt}from"./chunk-XIGC6FD5.js";import{a as C,g as jt}from"./chunk-CXUPEGDW.js";import"./chunk-QAWZYDPQ.js";import"./chunk-PYTKRRY4.js";import"./chunk-363VDWOO.js";import"./chunk-7B5WANGL.js";import"./chunk-4P4FGPYZ.js";import"./chunk-Y47SQ3XQ.js";import"./chunk-YGNOWOE7.js";import"./chunk-N4GKTC7Y.js";import"./chunk-2BD64J7Y.js";import"./chunk-RYJHESAH.js";import"./chunk-DOQ5NSSP.js";import"./chunk-VULQOB2N.js";import{f as c,m as s,o as i}from"./chunk-ICCOEXX5.js";s();i();var Ie=c(C()),_t=c(et());var pn=c(P());s();i();var Ht=c(C()),vr=c(P()),Ar=c(et());U();s();i();var Mt=c(C()),Ft=c(jt()),lr=c(P());var Le=({title:t,children:e,onBack:o,onClose:r,nav:n,loading:m,pageName:f})=>{let l=(0,lr.useSelector)(b);return Mt.default.createElement(xo.Container,{loading:m,className:`metax-send-nft-page main-container ${f==="confirmDetail"&&l?.chain==0?"metax-send-btc-page":""}`},!n&&Mt.default.createElement(Do,{title:t,onClose:r,onBack:o,closeable:!!r,className:f==="confirmDetail"&&l?.chain==0?"metax-send-btc-page-nav":""}),n,Mt.default.createElement("div",{className:`metax-send-nft-page__content ${f==="confirmDetail"&&l?.chain==0?"metax-send-btc-content":""}`},l&&Mt.default.createElement("div",{className:"metax-send-nft-page__content__main"},e)))};Le.defaultProps={nav:null,title:"",onBack:null,onClose:null};Le.propTypes={children:Ft.default.node.isRequired,onBack:Ft.default.func,onClose:Ft.default.func,title:Ft.default.string,nav:Ft.default.node};var de=Le;s();i();U();var Y=c(C()),_e=c(P()),Tr=c(jt());s();i();Xt();var cr=async(t,e,o)=>{let r="",{coinId:n,baseCoinId:m}=o;return t?((n===ht||m===ht)&&!await jo(t)||(n===Tt||m===Tt)&&!(await Jo(t)).isValid||(n===V||m===V)&&!await qo(t)||o.coinId!==ht&&o.coinId!==V&&o.coinId!==Tt&&!Ko(t,{allowNonPrefixed:!1}))&&(r="wallet_manage_crypto_errortip_invalid_address_tips"):r="wallet_transfer_errortip_receive_address_empty",r},fr=({amount:t,balance:e,t:o})=>t==="0"?o("wallet_extension_nft_toast_input_amount_no0"):t?t>e?o("wallet_extension_nft_toast_input_amount_no_greater",{max_amount:e}):"":o("wallet_extension_nft_toast_input_transfer_amount");s();i();var L=c(C()),ue=c(jt()),gr=c(Lt());U();var xr=c(et());s();i();var Ge=c(C());var pe=c(jt());var Be=({disabled:t,buttonText:e,nextJump:o})=>{let r=()=>{t||o&&o()};return Ge.default.createElement(rt.FooterActions,null,Ge.default.createElement(v,{block:!0,category:v.CATEGORY.fill,type:v.TYPE.highlight,size:v.SIZE.lg,onClick:r,disabled:t},e))};Be.propTypes={disabled:pe.default.bool,buttonText:pe.default.string.isRequired,nextJump:pe.default.func};Be.defaultProps={disabled:!1,nextJump:()=>{}};var dr=Be;s();i();var pr=c(P());so();po();var ur=c(C()),wn=0,Cn=()=>{let{chain:t,tokenId:e,accountAddress:o,tokenStandard:r}=(0,pr.useSelector)(b),{loading:n,data:m,error:f}=bo(async()=>{let p={chain:t,walletAddress:o,inscriptionIds:[e],tokenStandard:Ro[r]},{data:d}=await ao(Bt.postBtcNftStatus,p);return d?.assetStatusList||[]},{ready:t===wn&&[Wt.Ordinals,Wt.ATOMICAL].includes(r)}),l=(0,ur.useMemo)(()=>[Wt.ATOMICAL,Wt.Ordinals].includes(r)&&m?.some(({unavailable:p})=>Number(p)===1)?1:0,[m,r]);return[n,l,f]},_r=Cn;var Oe=({nftBalance:t,nftInfo:e,amount:o,toAddress:r,toError:n,amountError:m,onAmountChange:f,onToAddressChange:l,showAmount:p,onLoadingChange:d,tipMessage:g})=>{let[u,h,x]=_r(),I=(0,xr.useHistory)(),F=()=>{I.replace(re)};(0,L.useEffect)(()=>{d?.(u)},[u]);let _=(0,L.useMemo)(()=>x?a("extension_wallet_header_alert_nft_check_error"):h===1?a("extension_wallet_header_alert_utxo_limit_arc"):null,[x,h]);return L.default.createElement("div",{className:(0,gr.default)("metax-send-nft-form")},(h||x)&&L.default.createElement(Jt,{closable:!1,type:x?Jt.TYPE.error:Jt.TYPE.warn,className:"metax-send-nft-form__alert",title:_}),L.default.createElement("div",{className:"metax-send-nft-form__row"},L.default.createElement(ct.TextArea,{className:"metax-send-nft-form__address",inputClassName:"metax-send-nft-form__address-input",placeholder:a("wallet_extension_transaction_placeholder_input_address"),label:a("wallet_transfer_subtitle_receive_address"),value:r,error:n?a(n):"",disabled:!!h||u,size:ct.SIZE.xl,errorType:ct.TIP_TYPE.always,onChange:l,tips:g||a("wallet_extension_nft_popup_toast_wrong_address_cannnot_retrieved"),autoResize:!0})),p&&L.default.createElement("div",{className:"metax-send-nft-form__row"},L.default.createElement(ct.Number,{className:"ethereum-send-form__amount",placeholder:"0",title:a("wallet_contract_interactiom_subtitle_amount"),size:ct.SIZE.xl,precision:0,enableMinus:!1,value:o,error:m||"",errorType:ct.TIP_TYPE.always,onChange:f}),L.default.createElement("div",{className:"metax-send-nft-form__row__max"},L.default.createElement("span",{className:"metax-send-nft-form__row__max-amount"},a("wallet_extension_nft_toast_owned"),":",t),L.default.createElement("span",{onClick:()=>{f(`${e.totalBalance||0}`)},className:"metax-send-nft-form__row__btn-max"},a("wallet_transfer_btn_max_balance_amount")))),L.default.createElement(dr,{nextJump:F,buttonText:a("wallet_transfer_btn_next"),disabled:!r||n||h||p&&(!o||m)}))};Oe.propTypes={nftBalance:ue.default.number.isRequired,amount:ue.default.number,toAddress:ue.default.string};Oe.defaultProps={toAddress:"",amount:void 0};var yr=Oe;function hr(t){let e=Mo(void 0,void 0,{key:t.nftInfo.baseCoinKey}),o=(0,_e.useSelector)(fe),[r,n]=(0,Y.useState)(null),[m,f]=(0,Y.useState)(null),{run:l}=Fe(async(x,I)=>{!e||(x.toLowerCase()===I.toLowerCase()&&f(Y.default.createElement("div",{className:"metax-send-nft-form__waring"},Y.default.createElement("span",{className:"metax-send-nft-form__waring__tips"},a("wallet_extension_mid_textarea_same_address")))),n(await cr(x,I,e)))},{wait:200}),[p,d]=(0,Y.useState)(null),{run:g}=Fe((x,I)=>{d(fr({amount:x,balance:I,t:a}))},{wait:200}),u=(0,Y.useCallback)(x=>{t.setToAddress(x.target.value),l(x.target.value,t.fromAddress)},[t.fromAddress,l]),h=(0,Y.useCallback)(x=>{let I=x.replace(/\D.*$/g,"").replace(/^0*/,"").replace(/\D/g,"");t.setAmount(I),g(I,t.nftBalance)},[t.nftBalance,g]);return Y.default.createElement(yr,{...t,toError:r,tipMessage:m,amountError:p,showAmount:o,onToAddressChange:u,onAmountChange:h})}hr.propTypes={nftInfo:Tr.default.object.isRequired};function bn(t){return{amount:t.nftSend.amount,toAddress:t.nftSend.toAddress,fromAddress:t.nftSend.nftInfo?.accountAddress,nftInfo:t.nftSend.nftInfo,nftBalance:t.nftSend.nftInfo?.totalBalance}}function Sn(t){return{setToAddress:e=>t(Ut.setToAddress(e)),setAmount:e=>t(Ut.setAmount(e))}}var Ir=(0,_e.connect)(bn,Sn)(hr);var Fn=()=>{let t=(0,vr.useDispatch)(),e=(0,Ar.useHistory)(),[o,{set:r}]=Nt(!1),n=(0,Ht.useCallback)(()=>{t(Ut.resetSend()),e.goBack()},[e]);return Ht.default.createElement(de,{onBack:n,loading:o,title:a("wallet_home_btn_send")},Ht.default.createElement(Ir,{onLoadingChange:r}))},Nr=Fn;s();i();var zt=c(C()),cn=c(P()),fn=c(et());U();s();i();var $t=c(C()),mn=c(P());Xt();s();i();var A=c(C()),z=c(P()),Ur=c(et());U();q();s();i();var We=c(P());q();function wr(){let{baseCoinKey:t}=(0,We.useSelector)(b),o=se(void 0,void 0,{key:t})?.coinAmountInt,r=(0,We.useSelector)(at),{gasLimit:n,gasPrice:m,supportEip1559:f,maxFeePerGas:l,maxPriorityFeePerGas:p}=r;if(n==="0"||f&&(l==="0"||p==="0")||!f&&m==="0")return!1;let g=tt(`${(f?l:m)||0}`,`${n||0}`);return mo(`${o||0}`,g)}s();i();var Pt=c(P());Xt();q();be();function Cr(){let t=(0,Pt.useDispatch)(),{contractAddress:e,accountAddress:o,baseCoinId:r,localType:n}=(0,Pt.useSelector)(b),{gasLimit:m,gasPrice:f,maxFeePerGas:l,maxPriorityFeePerGas:p,supportEip1559:d}=(0,Pt.useSelector)(or),g=(0,Pt.useSelector)(ce),u=Eo();return{send:async({nonce:h,updateGasInfo:x,activityId:I})=>{let F=oo(n)?.realChainIdHex,_={from:o,to:e,nonce:J(h),data:g,chainId:F,value:"0",gasLimit:J(m)};d?(_.type=ho.FEE_MARKET,_.maxFeePerGas=J(l),_.maxPriorityFeePerGas=J(p)):_.gasPrice=J(f),x&&(_.maxFeePerGas?(_.maxFeePerGas=J(x.maxFeePerGas),_.maxPriorityFeePerGas=J(x.maxPriorityFeePerGas)):_.gasPrice=J(x.gasPrice));let w={..._o(_)};w.walletId=u;let O=Ct(d?_.maxFeePerGas:_.gasPrice),E=Ct(_.gasLimit),K={..._,value:Ct(_.value),from:_.from,to:_.to,gas:E,gasPrice:O,priorityFee:Ct(d?_.maxPriorityFeePerGas:0),nonce:Ct(_.nonce),repeatTxType:To.CONFIRMING,oldTxHash:""},X={coinId:r,coinAmount:0,fromAdr:_.from,toAdr:_.to,serviceCharge:tt(E,O),extJson:JSON.stringify(K),txSource:$.NFT,inputData:_.data?_.data:"",activityId:I};return await t(Po({txParams:w,walletId:u})),{serverTxId:await yt().signAndPublishTransferTransaction({signParams:w,from:w.from,baseChain:to,publishParams:X})}}}}s();i();var st=c(C()),br=c(Nn());U();var D=({label:t,value:e,valueDisplay:o,canCopy:r})=>{let n=(0,st.useCallback)(()=>{(0,br.default)(e),G.success({title:a("wallet_transaction_history_toast_address_copied"),desc:e,duration:3,containerClassName:"address-copy-notification",showClose:!0,placement:G.DIRECTION.top})},[e]);return st.default.createElement("div",{className:"metax-send-nft-confirm"},st.default.createElement("div",{className:"metax-send-nft-confirm__label"},t),st.default.createElement("div",{className:"metax-send-nft-confirm__value",onClick:r?n:void 0},st.default.createElement(Zo,{text:o,maxWidth:"215px"}),r&&st.default.createElement("span",{className:"okds-copy confirm-transaction--copy"})))};s();i();var S=c(C()),Br=c(Lt()),pt=c(P());U();var Or=c(et());s();i();s();i();var Fr=c(C()),Pr=c(Lt());U();s();i();var Sr={root:"_root_1leh0_1"};function Pn({className:t,style:e}){return Fr.default.createElement("div",{className:(0,Pr.default)(Sr.root,t),style:e},a("wallet_extension_freegas_notif_networkfee_rebate"))}var Ue=Pn;s();i();var Er=c(C());s();i();var kr={text:"_text_1qgtl_1"};function kn({status:t}){return t!==dt.ok?null:Er.default.createElement(Ue,{className:kr.text})}var Me=kn;s();i();var Dr=c(C()),Lr=c(Lt());s();i();var it={root:"_root_6th6e_1",render:"_render_6th6e_9",iconWrapper:"_iconWrapper_6th6e_13",icon:"_icon_6th6e_13",error:"_error_6th6e_23"};function En({className:t,children:e,error:o}){return Dr.default.createElement("div",{className:(0,Lr.default)(it.root,t,{[it.error]:o})},e)}var He=En;s();i();U();var Yt=c(C());var Ye=c(Lt());function Dn({className:t,status:e,tip:o,activity:r}){if(e!==dt.error&&e!==dt.ok||!o)return null;let{gas:n,totalTimes:m}=r,{text:f,key:l,args:p,error:d}=o,g=f||a(l,p||{}),u;return l===Ot.availableTimesLimit?u=a("wallet_extension_freegas_tooltip_5refund_day",{num:m}):l===Ot.exceedGasLimit?u=a("wallet_extension_freegas_tooltip_under_10u",{num:n}):l===Ot.exceedTodayGasLimit?u=a("wallet_extension_freegas_tooltip_paused_rules"):l===Ot.walletAssetNotEnough&&(u=a("wallet_extension_freegas_notif_greater_than10",{num:m})),u&&(g=Yt.default.createElement("div",{className:it.iconWrapper},g,Yt.default.createElement(Ce,{title:u,trigger:Ce.TRIGGER_TYPES.hover},Yt.default.createElement(Ke,{className:(0,Ye.default)("okx-wallet-plugin-information-circle",it.icon,{[it.error]:d})})))),Yt.default.createElement(He,{className:(0,Ye.default)(it.render,t),error:d},g)}var $e=Dn;s();i();var ge=c(P());U();q();var Gr=()=>{let t=(0,ge.useSelector)(St),e=(0,ge.useSelector)(at),{baseCoin:o}=ie(t,!0),{networkFee:r}=e,n=(0,ge.useSelector)(ee),f=$o(Gt,g=>fo(g,o.vdecimalNum),te),l=`${qt.thousandFormat(f(r))} ${o.symbol}`,p=ae(o.coinId),d=le({amount:Gt(r),rate:p,symbol:n.symbol},{useApproximate:!0});return{gasFeeToETHDisplay:l,gasFeeToCurrencyDisplay:d}};s();i();var ze={arrow:"_arrow_1p9f5_1",gasReturnTip:"_gasReturnTip_1p9f5_6"};function Ln(){let t=(0,pt.useSelector)(at),e=De(),{status:o}=e,{gasType:r}=t,n=Ao[r],m=n?a(n):"",{gasFeeToETHDisplay:f,gasFeeToCurrencyDisplay:l}=Gr();return o===dt.ok?S.default.createElement(S.default.Fragment,null,S.default.createElement(Me,{status:o}),S.default.createElement("div",{className:"metax-send-nft-confirm__value__content"},m,"\xA0",f)):S.default.createElement(S.default.Fragment,null,S.default.createElement("div",{className:"metax-send-nft-confirm__value__title"},m,"\xA0",f),S.default.createElement("div",{className:"metax-send-nft-confirm__value__content"},l))}var Wr=()=>{let t=(0,pt.useDispatch)(),e=(0,Or.useHistory)(),{accountAddress:o,contractAddress:r}=(0,pt.useSelector)(b),n=(0,pt.useSelector)(St),m=(0,pt.useSelector)(ce),[f,{setTrue:l,setFalse:p}]=Nt(!1),d=De(),g=Co(h=>{t(tr(h))}),u=()=>{t(B()),e.push(M)};return S.default.createElement(S.default.Fragment,null,S.default.createElement("div",{className:"metax-send-nft-confirm"},S.default.createElement("div",{className:"metax-send-nft-confirm__label"},a("wallet_transfer_subtitle_network_fee")),S.default.createElement("div",{className:"metax-send-nft-confirm__value",onClick:l},S.default.createElement("div",{className:"metax-send-nft-confirm__value__content-wrapper"},S.default.createElement(Ln,null)),S.default.createElement("div",{className:"metax-send-nft-confirm__value__narrow"},S.default.createElement("span",{className:(0,Br.default)("okds-arrow-chevron-right-centered-md",ze.arrow)}))),S.default.createElement(Vo,{visible:f,coinId:n,address:o,inputData:m,tokenAddress:r,value:"0",onBack:p,onClose:u,onGasChange:g,gasReturn:d})),S.default.createElement($e,{className:ze.gasReturnTip,activity:d.activity,status:d.status,tip:d.tip}))};var Gn=()=>{let t=(0,z.useDispatch)(),e=(0,z.useSelector)(rr),{accountAddress:o,baseCoinId:r,image:n,name:m,chainName:f}=(0,z.useSelector)(b),l=wr(),p=(0,Ur.useHistory)(),{name:d,keyringName:g}=(0,z.useSelector)(vt),u=(0,z.useSelector)(at),h=(0,z.useSelector)(St),[,x]=Ho(h),{toAddress:I,amount:F}=(0,z.useSelector)(nt),_=(0,z.useSelector)(fe),[k,w]=(0,A.useState)(!1),{send:O}=Cr(),E=Yo({coinId:h,txType:So.nft,fromAddress:o,toAddress:I,unavailable:u.gasType===vo.CUSTOM,fee:Gt(u.networkFee)}),K=E?.errorCode,X=()=>{w(!0)},Q=()=>{w(!1)},{gasPrice:Et}=u,mt={fetchParams:{coinId:h,from:o,to:I,amount:F,gasPrice:Et},userGasInfo:u,baseCoinAmountUse:"0"},H=(0,A.useMemo)(()=>_?qt.thousandFormat(F):"",[F,_]),Z=(0,A.useCallback)(()=>{t(B()),l?p.goBack():p.replace(M)},[l]),gt=(0,A.useCallback)(async ve=>{if(!await Xo({callback:Z}))return;let{nonce:Ae,updateGasInfo:Ne}=ve;try{let W=await O({nonce:Ae,updateGasInfo:Ne,activityId:E.activityId}),{serverTxId:Dt}=W||{};It({tx_id:Dt}),G.success({title:a("wallet_transfer_notif_transaction_submit")}),t(B()),p.replace("/")}catch(W){let Dt=W?.data?.originalError?.code;Fo(Dt)?(G.error({title:W?.data?.originalError.msg||a("wallet_home_toast_network_error")}),E.clear()):W.message!==ne&&G.error({title:a("wallet_home_toast_network_error")})}},[r,o,O]);(0,A.useEffect)(()=>{K===0&&typeof x?.chainId<"u"&&go({wallet_address:o,interactive_address:I,chain_id:x?.chainId,transaction_type:"send_nft"})},[K,x?.chainId]);let xt=wt({dark:"/cdn/assets/imgs/246/690CB9B3F2F4142F.png",light:"/cdn/assets/imgs/246/15101867D98B5C34.png"});return A.default.createElement(ar,{gasReturn:E},A.default.createElement("div",{className:"metax-send-nft-detail"},A.default.createElement("div",{className:"metax-send-nft-detail__base--container"},A.default.createElement(bt,{src:n,alt:"nft",startStatus:!0,backupImage:xt,classnames:"metax-send-nft-detail__icon"}),A.default.createElement("div",{className:"metax-send-nft-detail__name-container"},A.default.createElement("div",{className:"metax-send-nft-detail__name"},m))),A.default.createElement(D,{label:a("wallet_transfer_confirmation_subtitle_wallet"),valueDisplay:`${g} - ${d}`}),A.default.createElement(D,{label:a("wallet_transfer_subtitle_send_address"),value:o,valueDisplay:j(o),canCopy:!0}),A.default.createElement(D,{label:a("wallet_transfer_subtitle_receive_address"),value:I,valueDisplay:j(I),canCopy:!0}),A.default.createElement("div",{className:"metax-send-nft-detail__hr"}),A.default.createElement(D,{label:a("wallet_extension_nft_popup_text_network"),valueDisplay:f}),A.default.createElement(Wr,null),!e&&!l&&A.default.createElement("div",{className:"metax-send-nft-detail__error"},a("wallet_dapp_connection_errortip_insufficient_tip")),_&&A.default.createElement(D,{label:a("wallet_extension_transaction_module_input_label_amount"),valueDisplay:H})),A.default.createElement(rt.FooterActions,null,A.default.createElement(v,{category:v.CATEGORY.outline,type:v.TYPE.secondary,size:v.SIZE.lg,width:160,onClick:Z},a("wallet_dapp_connection_btn_reject")),A.default.createElement(sr,{dataForCheck:mt,onClick:gt,beforeClick:X,afterClick:Q,btnProps:{loading:k,width:160,disabled:e||!l}},a("wallet_set_password_btn_confirm"))))},Mr=Gn;s();i();var y=c(C());U();s();i();var xe=c(C());q();Re();var Hr=(t={},e=!1,o=!1)=>{let[r,n]=(0,xe.useState)({}),[m,f]=(0,xe.useState)(!0),[l,p]=(0,xe.useState)(!1),d=r.fee;return At(()=>{(async()=>{try{let u=await Bo(t);u?.fee&&n(u),f(!1)}catch{o&&(p(!0),f(!1))}})()}),e?{solanaFee:d,solanaFeeInfo:r,loading:m,error:l}:d};s();i();var Yr=c(P());q();var Bn=(t,e)=>zo((n,m)=>Qt(n,10**m.decimals),te)(t,e),ye=(t,e={})=>yo(t,{symbol:e?.symbol,decimals:e?.decimals}),Te=(t,e={})=>{let o=(0,Yr.useSelector)(ee),r=ae(e.coinId),n=Bn(t,e);return le({amount:n,rate:r,symbol:o.symbol},{useApproximate:!0})};var ut=c(P()),Zr=c(et());s();i();Re();s();i();be();var $r=t=>async(e,o)=>{let r=o(),n=ot(r),m=t.walletId||n,l=wo(r,m)?.serverWalletType,p=await yt().getSignRequestHeaders({walletId:m}),d={txSource:$.NORMAL,accountId:m,walletType:l,...t};return await Go(d,{headers:p})};var Ze=({type:t,from:e,to:o,blockHash:r,coinAmount:n,mint:m,createAssociatedAddress:f,computeUnitPrice:l,computeUnitLimit:p,tokenStandard:d})=>{let g={type:t,payer:e,blockHash:r,from:e,to:o,amount:n,computeUnitPrice:l,computeUnitLimit:p},u;return t===Io.TRANSFER?u={...g}:u={...g,mint:m,createAssociatedAddress:f},d&&(u.tokenStandard=d),u},zr=({type:t,from:e,to:o,coinId:r,blockHash:n,coinAmount:m,mint:f=null,createAssociatedAddress:l,serviceCharge:p,computeUnitPrice:d,computeUnitLimit:g,txSource:u=$.NORMAL,extJson:h=JSON.stringify({}),walletId:x,tokenStandard:I})=>async F=>{let _=Ze({type:t,from:e,to:o,blockHash:n,coinAmount:m,mint:f,createAssociatedAddress:l,computeUnitPrice:d,computeUnitLimit:g,tokenStandard:I}),k=await F(ko(_,e,x)),w=await me(Qe,k);return await F($r({signedTx:k,coinAmount:m,coinId:r,fromAdr:e,toAdr:o,serviceCharge:p,txSource:u,extJson:h,txHash:w}))};q();var On=()=>{let t=(0,ut.useDispatch)(),e=(0,ut.useSelector)(b),{tokenId:o,accountAddress:r,baseCoinId:n,image:m,name:f,chainName:l,extendProperty:p}=e,d=se(n),{chainId:g}=d,{tokenStandard:u}=p||{},h=ir(),x=(0,Zr.useHistory)(),I=(0,y.useRef)(!1),F=(0,y.useRef)(),{name:_,keyringName:k}=(0,ut.useSelector)(vt),{toAddress:w}=(0,ut.useSelector)(nt),[O,{setTrue:E,setFalse:K}]=Nt(!0),[X,Q]=(0,y.useState)(""),[Et,Zt]=(0,y.useState)("0"),{loading:mt,solanaFeeInfo:H}=Hr({coinId:n,address:w},!0),Z=mt||O,{fee:gt,computeUnitPrice:xt,feelimit:ve}=H,{priorityFee:qe,priorityGasPrice:Ae,priorityGasLimit:Ne}=ke(ve,xt,Et),W=Rt(gt,qe),Dt=Te(W,d),un=ye(W,d),_n=(0,ut.useSelector)(ot),[gn,je]=(0,y.useState)(!1),xn=wt({dark:"/cdn/assets/imgs/246/690CB9B3F2F4142F.png",light:"/cdn/assets/imgs/246/15101867D98B5C34.png"}),Vt=(0,y.useMemo)(()=>Z?{msg:"",isEnough:!1}:X?{msg:X,isEnough:!0}:Se(d.coinAmountInt,W)?{msg:a("wallet_dapp_connection_errortip_insufficient_tip"),isEnough:!1}:Se(d.coinAmountInt,Rt(W,H.selfRent))?{msg:a("walletextension_toast_text_reserve_rent_exempt",{number:Qt(H.selfRent,10**d.decimals)}),isEnough:!1}:{msg:"",isEnough:!0},[Z,d.coinAmountInt,d.decimals,W,H.selfRent]),Je=()=>{let R={from:r,to:w,coinId:n,serviceCharge:W,computeUnitPrice:Ae,computeUnitLimit:Ne,txSource:$.NFT,coinAmount:1,mint:o,createAssociatedAddress:!F.current,walletId:_n,type:"tokenTransfer"};return u===4&&(R.type="mplTransfer",R.tokenStandard=4),R};return(0,y.useEffect)(()=>{o&&w&&g&&H.recentBlockhash&&(E(),Q(""),(async()=>{try{let lt=Je();lt.blockHash=H.recentBlockhash;let we=Ze(lt),yn=Wo({mint:o,address:w}),{SolWallet:Tn}=await uo(),hn=await new Tn().getSerializedTransaction({privateKey:"",data:we}),In=h({coinId:n,from:r,chainId:g,simulateTransactionParam:{transaction:hn}}),[vn,An]=await Promise.all([yn,In]);F.current=vn?.data?.legal,Zt(An.firstUnitLimit)}catch(lt){Q(lt?.message||a("wallet_extension_alert_estimate_unavailable"))}finally{K()}})())},[o,r,w,g,H.recentBlockhash]),y.default.createElement(y.default.Fragment,null,y.default.createElement("div",{className:"metax-send-nft-detail"},y.default.createElement("div",{className:"metax-send-nft-detail__base--container"},y.default.createElement(bt,{src:m,startStatus:!0,alt:"",backupImage:xn,classnames:"metax-send-nft-detail__icon"}),y.default.createElement("div",{className:"metax-send-nft-detail__name-container"},y.default.createElement("div",{className:"metax-send-nft-detail__name"},f))),y.default.createElement(D,{label:a("wallet_transfer_confirmation_subtitle_wallet"),valueDisplay:`${k} - ${_}`}),y.default.createElement(D,{label:a("wallet_transfer_subtitle_send_address"),value:r,valueDisplay:j(r),canCopy:!0}),y.default.createElement(D,{label:a("wallet_transfer_subtitle_receive_address"),value:w,valueDisplay:j(w),canCopy:!0}),y.default.createElement("div",{className:"metax-send-nft-detail__hr"}),y.default.createElement(D,{label:a("wallet_extension_nft_popup_text_network"),valueDisplay:l}),y.default.createElement("div",{className:"metax-send-nft-confirm metax-send-nft-fee-item"},y.default.createElement("div",{className:"metax-send-nft-confirm__label"},a("wallet_transfer_subtitle_network_fee")),y.default.createElement("div",{className:"metax-send-nft-confirm__value"},y.default.createElement("div",{className:"metax-send-nft-confirm__value__content-wrapper"},y.default.createElement("div",{className:"metax-send-nft-confirm__value__title"},a("wallet_transfer_subtitle_trading_speed_average")," ",un),y.default.createElement("div",{className:"metax-send-nft-confirm__value__content"},Dt)))),!Z&&Vt.msg&&y.default.createElement("div",{className:"metax-send-nft-detail__error"},Vt.msg)),y.default.createElement(rt.FooterActions,null,y.default.createElement(v,{category:v.CATEGORY.outline,type:v.TYPE.secondary,size:v.SIZE.lg,width:160,onClick:()=>{t(B()),Vt.isEnough?x.goBack():x.replace(M)}},a("wallet_dapp_connection_btn_reject")),y.default.createElement(v,{category:v.CATEGORY.fill,type:v.TYPE.highlight,size:v.SIZE.lg,width:160,loading:Z||gn,disabled:Vt.msg,onClick:async()=>{if(!I.current){I.current=!0,je(!0);try{let R=await Oo({coinId:n,address:r},{fromAddr:r,toAddr:w}),lt=Je();lt.blockHash=R;let we=await t(zr(lt));It({tx_id:we}),t(B()),G.success({title:a("wallet_transfer_notif_transaction_submit")}),x.replace(M)}catch(R){R.message!==ne&&G.error({title:a("wallet_home_toast_network_error")})}I.current=!1,je(!1)}}},a("wallet_set_password_btn_confirm"))))},Vr=On;s();i();var N=c(C()),kt=c(P()),rn=c(et());U();s();i();Xt();po();so();q();be();var Wn=t=>{let e=ot(t),n=(No(t)?.account||{})[Kt]||"";return{walletId:e,address:n}},Un=async t=>{let e={coinId:V,address:t.address},o={fromAddr:t.fromAddress,toAddr:t.toAddress},{info:r={}}=await Lo(e,o),{sequenceNumber:n,chainId:m,expirationTimestampSecs:f,gasUnitPrice:l}=r;return{sequenceNumber:n,chainId:m,expirationTimestampSecs:f,gasUnitPrice:l,maxGasAmount:8e3}},Mn=t=>async e=>{let{signedTx:o,sequenceNumber:r,fromAddress:n,toAddress:m,gasUnitPrice:f,maxGasAmount:l,amount:p}=t,d={nonce:r},g=tt(f,l),u={signedTx:o,coinId:V,fromAdr:n,toAdr:m,serviceCharge:g,extJson:JSON.stringify(d),coinAmount:lo(p),txSource:$.NFT};return await e(nr(u))},Ve=t=>async(e,o)=>{let r=o(),{address:n}=Wn(r),{type:m,maxGasAmount:f,gasUnitPrice:l,fromAddress:p,toAddress:d,receiver:g,sender:u,creator:h,collectionName:x,tokenName:I,version:F,amount:_}=t,k=await Un({fromAddress:p,toAddress:d,address:n});f&&(k.maxGasAmount=f),l&&(k.gasUnitPrice=l);let w={};m===ft.OFFER_NFT||m===ft.OFFER_NFT_SIMULATE?(w.receiver=g,w.amount=_):w.sender=u;let O={type:m,base:k,data:{...w,creator:h,collectionName:x,tokenName:I,version:F}},E=await yt().signTransaction(O,n,Kt);return{base:k,signedTx:E}},qr=t=>async e=>{let{fromAddress:o,toAddress:r,amount:n}=t,{base:m,signedTx:f}=await e(Ve(t)),l=await me(Kt,f);return{txId:await e(Mn({...m,signedTx:f,fromAddress:o,toAddress:r,amount:n})),txHash:l}},jr=async(t={},e)=>{let o;try{o=await Uo(e)}catch(m){o=t.maxGasAmount||2e3,console.log(m)}let{gasUnitPrice:r}=t,n=tt(r,o);return{gasUnitPrice:r,maxGasAmount:o,fee:n}},Jr=t=>async e=>{let{base:o,signedTx:r}=await e(Ve({...t,type:ft.OFFER_NFT_SIMULATE}));return jr(o,r)},Kr=t=>async e=>{let{base:o,signedTx:r}=await e(Ve({...t,type:ft.CLAIM_NFT_SIMULATE}));return jr(o,r)},Xr=t=>async e=>e(qr({...t,type:ft.OFFER_NFT})),Qr=t=>async e=>e(qr({...t,type:ft.CLAIM_NFT})),Rr=async(t,e,o,r)=>{let n=eo({coinId:r})||{},m=Bt.getAptosResourceType.replace("{rpcUrl}",n.rpcUrl),f=Bt.getAptosTable.replace("{rpcUrl}",n.rpcUrl),{data:{data:{token_data:{handle:l}}}}=await ro(m.replace("{creator}",t)),{data:p}=await no(f.replace("{handle}",l),{key_type:"0x3::token::TokenDataId",value_type:"0x3::token::TokenData",key:{creator:t,collection:e,name:o}});return p.largest_property_version};q();s();i();var tn=c(C()),en=c(P());var on=(t,e)=>{let o=(0,en.useDispatch)(),[r,n]=(0,tn.useState)({aptosFee:0,gasUnitPrice:"0",maxGasAmount:"0",loading:!1,version:0});return At(()=>{(async()=>{n({...r,loading:!0}),t.version=await Rr(t.creator,t.collectionName,t.tokenName,t.coinId);let{gasUnitPrice:f,maxGasAmount:l,fee:p}=e?await o(Kr(t)):await o(Jr(t));n({aptosFee:p,gasUnitPrice:f,maxGasAmount:l,loading:!1,version:t.version})})()}),r};var Hn=()=>{let t=(0,kt.useDispatch)(),{creatorAddress:e,name:o,projectName:r,accountAddress:n,baseCoinId:m,image:f,chainName:l,claim:p}=(0,kt.useSelector)(b),d=(0,rn.useHistory)(),{name:g,keyringName:u}=(0,kt.useSelector)(vt),{toAddress:h,amount:x=1}=(0,kt.useSelector)(nt),{baseCoin:I,coin:F}=ie(m,!0),_=p?{fromAddress:n,toAddress:h,sender:n,creator:e,collectionName:r,tokenName:o,amount:x,coinId:F?.coinId}:{fromAddress:n,toAddress:h,receiver:h,creator:e,collectionName:r,tokenName:o,amount:x,coinId:F?.coinId},{aptosFee:k,gasUnitPrice:w,maxGasAmount:O,loading:E,version:K}=on(_,p),[X,Q]=(0,N.useState)(!1),Et=Qo(),Zt=ye(k,I),mt=io(Et,co(k)),H=Te(k,I),Z=wt({dark:"/cdn/assets/imgs/246/690CB9B3F2F4142F.png",light:"/cdn/assets/imgs/246/15101867D98B5C34.png"});return N.default.createElement(N.default.Fragment,null,N.default.createElement("div",{className:"metax-send-nft-detail"},N.default.createElement("div",{className:"metax-send-nft-detail__base--container"},N.default.createElement(bt,{src:f,startStatus:!0,alt:"nft",backupImage:Z,classnames:"metax-send-nft-detail__icon"}),N.default.createElement("div",{className:"metax-send-nft-detail__name-container"},N.default.createElement("div",{className:"metax-send-nft-detail__name"},o))),N.default.createElement(D,{label:a("wallet_transfer_confirmation_subtitle_wallet"),valueDisplay:`${u} - ${g}`}),N.default.createElement(D,{label:a("wallet_transfer_subtitle_send_address"),value:n,valueDisplay:j(n),canCopy:!0}),N.default.createElement(D,{label:a("wallet_transfer_subtitle_receive_address"),value:h,valueDisplay:j(h),canCopy:!0}),N.default.createElement("div",{className:"metax-send-nft-detail__hr"}),N.default.createElement(D,{label:a("wallet_extension_nft_popup_text_network"),valueDisplay:l}),N.default.createElement("div",{className:"metax-send-nft-confirm metax-send-nft-fee-item"},N.default.createElement("div",{className:"metax-send-nft-confirm__label"},a("wallet_transfer_subtitle_network_fee")),N.default.createElement("div",{className:"metax-send-nft-confirm__value"},E?N.default.createElement(Xe,null):N.default.createElement("div",{className:"metax-send-nft-confirm__value__content-wrapper"},N.default.createElement("div",{className:"metax-send-nft-confirm__value__title"},a("wallet_transfer_subtitle_trading_speed_average")," ",Zt),N.default.createElement("div",{className:"metax-send-nft-confirm__value__content"},H)))),!mt&&!E&&N.default.createElement("div",{className:"metax-send-nft-detail__error"},a("wallet_dapp_connection_errortip_insufficient_tip"))),N.default.createElement(rt.FooterActions,null,N.default.createElement(v,{category:v.CATEGORY.outline,type:v.TYPE.secondary,size:v.SIZE.lg,width:160,onClick:()=>{t(B()),mt?d.goBack():d.replace(M)}},a("wallet_dapp_connection_btn_reject")),N.default.createElement(v,{category:v.CATEGORY.fill,type:v.TYPE.highlight,size:v.SIZE.lg,width:160,loading:X,disabled:!mt||E,onClick:async()=>{try{Q(!0),_.gasUnitPrice=w,_.maxGasAmount=O,_.version=K;let{txId:gt,txHash:xt}=p?await t(Qr(_)):await t(Xr(_));p?await Pe(21,xt,h):await Pe(20,xt,n),It({tx_id:gt}),t(B()),G.success({title:a("wallet_transfer_notif_transaction_submit")}),d.replace(M)}catch{G.error({title:a("wallet_home_toast_network_error")})}finally{Q(!1)}}},a("wallet_set_password_btn_confirm"))))},nn=Hn;s();i();var an=c(C());var he=c(P());var sn=()=>{let{accountAddress:t,inscriptionIdProtocol:e}=(0,he.useSelector)(b),{toAddress:o}=(0,he.useSelector)(nt),r=(0,he.useSelector)(ot);return an.default.createElement(mr,{unapproved:{walletId:r,params:{transfer:{from:t,to:o,data:e}}}})};var Yn=()=>{let{baseCoinId:t}=(0,mn.useSelector)(b);switch(t){case Tt:return $t.default.createElement(sn,null);case ht:return $t.default.createElement(Vr,null);case V:return $t.default.createElement(nn,null);default:return $t.default.createElement(Mr,null)}},ln=Yn;var $n=()=>{let t=(0,fn.useHistory)(),e=(0,cn.useDispatch)(),o=(0,zt.useCallback)(()=>{e(Ee()),t.replace(oe)},[]);return zt.default.createElement(de,{pageName:"confirmDetail",title:t.location.state?.nftInfo.claim?a("extension_aptos_nft_title_receiveconfirm"):a("wallet_trade_maintitle_transaction_confirm"),onBack:()=>{if(t.location.state?.nftInfo.claim){e(B()),e(Ee()),t.goBack();return}o()}},zt.default.createElement(ln,null))},dn=$n;var zn=()=>{let t=(0,_t.useHistory)(),e=(0,pn.useDispatch)();return At(()=>{t.location.state?e(er(t.location.state?.nftInfo)):t.replace(M)}),Ie.default.createElement(_t.Switch,null,Ie.default.createElement(_t.Route,{exact:!0,path:oe,component:Nr}),Ie.default.createElement(_t.Route,{exact:!0,path:re,component:dn}))},Oc=zn;export{Oc as default};

window.inOKXExtension = true;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=SendNft-W2PUN7SW.js.map
