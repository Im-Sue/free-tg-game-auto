import{a as Q}from"./chunk-KJFAD5C4.js";import{a as z,b as E,c as me}from"./chunk-JINEVGIZ.js";import{a as G}from"./chunk-46NSFYB3.js";import{h as _}from"./chunk-FFQESTX4.js";import{a as qe,e as I}from"./chunk-LF2PURXZ.js";import{a as ue,b as ae,d as le}from"./chunk-JEZIPKDY.js";import{H as fe,L,M as H,a as Ie}from"./chunk-CFT6B56M.js";import{c as V,d as ce}from"./chunk-WMUTUJYX.js";import{f as ie}from"./chunk-B23OWGFX.js";import{d as De}from"./chunk-Q7FJER56.js";import{s as j}from"./chunk-SJIW4WAV.js";import{a as w,c as P,d as D,l as v,m as se}from"./chunk-5JJQQHKZ.js";import{ab as oe,ha as We,ia as ke,xa as re,y as ne}from"./chunk-ZPOCIBPN.js";import{Qa as N,Ra as U,Wb as te,ia as ee,la as Se,pb as K}from"./chunk-M54COW6Q.js";import{I as $,l as B,p as Z}from"./chunk-K4MPEKC5.js";import{a as O}from"./chunk-CXUPEGDW.js";import{c as q,f as x,m,o as f}from"./chunk-ICCOEXX5.js";var pe=q((tn,Ce)=>{m();f();var Ee=ie(),Le=We(),Oe=ke();function Ue(e){return function(n,t,r){var o=Object(n);if(!Le(n)){var s=Ee(t,3);n=Oe(n),t=function(i){return s(o[i],i,o)}}var c=e(n,t,r);return c>-1?o[s?n[c]:c]:void 0}}Ce.exports=Ue});var ye=q((cn,de)=>{m();f();var Ke=De(),je=ie(),Ve=qe(),ze=Math.max;function He(e,n,t){var r=e==null?0:e.length;if(!r)return-1;var o=t==null?0:Ve(t);return o<0&&(o=ze(r+o,0)),Ke(e,je(n,3),o)}de.exports=He});var ge=q((ln,he)=>{m();f();var Qe=pe(),_e=ye(),Ge=Qe(_e);he.exports=Ge});var be=q((Cn,Pe)=>{m();f();function Je(e){return e==null}Pe.exports=Je});m();f();var R=x(O());var Y=x(ge()),Ne=x(Ie()),we=x(be());$();m();f();var Te=x(O()),Ae=x(ne());K();var J=()=>{let e=(0,Ae.useSelector)(oe),n=I();return P(()=>{let t={},{symbol:r}=e;return Object.keys(n).forEach(o=>{t[o]={currencySymbol:r,usdPrice:n?.[o]?.coinToUSDRate,currencyPrice:N(n?.[o]?.coinToUSDRate,e?.usdToThisRate),priceChangePercent24h:n?.[o]?.coinPriceChangePercent24h}}),t},[n,e])},xe=e=>{let n=J(),t=E(),{data:r,run:o}=v(L,{manual:!0,ready:!0,retryCount:3,staleTime:36e5,cacheTime:864e5});return(0,Te.useEffect)(()=>{!n[e]&&fe(e)&&o(+e)},[n,e]),P(()=>{let s=n[e];if(s)return s;if(r&&t){let{currencyAmount:c,priceChangePercent24h:i}=r;return{currencySymbol:t.symbol,usdPrice:c,currencyPrice:N(c,t.usdToThisRate),priceChangePercent24h:i}}return null},[n,e,t,r])};m();f();var Me=x(ne());function X(){return(0,Me.useSelector)(re)}Se();K();m();f();var Be=x(O());K();function Re(){let e=E();return(0,Be.useCallback)(async n=>{let t=await ue(n),r={};return t&&Object.entries(t).forEach(([o,s])=>{let c=[];s.forEach(i=>{let u;"childrenCoin"in i&&i.childrenCoin?.length&&(u=i.childrenCoin?.map(l=>({...l,currencyAmount:N(l.currencyAmountUSD,e.usdToThisRate)}))),c.push({...i,childrenCoin:u,currencyAmount:N(i.currencyAmountUSD,e.usdToThisRate)})}),r[o]=c}),r},[e.usdToThisRate])}var Fe=e=>!!e&&!Number.isNaN(e),S=(e={})=>{let n=Q(),t=z(),r=X(),o=J(),s=I(),c=D(n),i=D(o),u=D(s),{withPrice:l=!1,withPriceChangePercent24h:p=!1}=e||{},[g,d]=(0,R.useState)(void 0),{runAsync:h}=v(H,{manual:!0,cacheKey:g,retryCount:3,staleTime:36e5,cacheTime:864e5});return(0,R.useCallback)(async a=>{if(!r||!Fe(a))return null;let y,b=c?.current?.[a];if(b)y=b;else{let C={coinId:a};d(V(C)),y=await h(C)}if(!y)return null;let A;if((l||p)&&!b&&(A=await L(y.coinId)),l){let{currencySymbol:C,usdPrice:M,currencyPrice:W}=i?.current?.[a]??A??{};y={...y,currencySymbol:C,usdPrice:M,currencyPrice:W}}if(p){let C=u?.current?.[a]?.coinPriceChangePercent24h??A?.priceChangePercent24h;y={...y,priceChangePercent24h:C}}return y},[l,p,n,t,h,r])},Xe=(e,n,t)=>P(()=>{let r;if(!(t||e===0)&&(typeof e<"u"&&!Number.isNaN(e)?r={coinId:e}:r=(0,Ne.default)(n)?null:n,r))return V(r)},[e,n,t]),F=(e,n={},t)=>{let r=z(),o=Q(),s=X(),{withPrice:c,withPriceChangePercent24h:i}=n,u=me(t),l=[e,o,r,u,s],p=[],g=P(()=>{let C;if(e===0||!s||Number.isNaN(e))return null;if(typeof e<"u")C=o?.[e];else if(u){let M=Object.values(o);if(u.aggregation&&u.symbol)return r[u.symbol]?{...r[u.symbol][0],childrenCoin:r[u.symbol]}:null;if(ce(u)){let k=Z(M,u);k.length>0&&(C=k[0])}}return C||null},l),d=!!g,h=Xe(e,u,d),{data:a,run:y}=v(H,{manual:!0,ready:!0,cacheKey:h,retryCount:3,staleTime:36e5,cacheTime:864e5});(0,R.useEffect)(()=>{if(!d&&s&&!!h){let C=Fe(e)?{coinId:e}:u;y(C)}},[d,s,h,e,u]);let b=g||a,A=xe(c||i?b?.coinId:null);return p.push(b,A),P(()=>{if(!b)return null;let C=b;if(c&&A){let{currencySymbol:M,usdPrice:W,currencyPrice:k}=A;C={...C,currencySymbol:M,usdPrice:W,currencyPrice:k}}if(i){let{priceChangePercent24h:M}=A;C={...C,priceChangePercent24h:M}}return C},p)};var Ye=e=>{let n=S(e),t=_(),r=le(),o=Re();return w(async(s,c)=>{let i=await n(s);if(!i)return null;let u=c||t,l;c&&c!==u?l=(await o({walletIds:[c],coinId:s,chainId:i.chainId,flatten:!0}))[c]??[]:l=r;let{coinAmountInt:p="0",currencyAmount:g="0",currencyAmountUSD:d="0"}=(0,Y.default)(l,h=>h?.coinId===s)||{};return{...i,coinAmountInt:p,currencyAmount:g,currencyAmountUSD:d,coinAmount:U(p,10**i?.decimals)}},[r,t,n])},Ze=(e,n,t)=>{let{addressType:r,key:o}=t||{},s=F(e,t,o?{key:o}:void 0),c=_(),i=n||c,u=ae(i),l=!!u,p=u?.coins??[],g=P(()=>(0,Y.default)(p,a=>{let y;if(o?y=a.key===o:y=a.coinId===e,r){let b=te[s?.localType]?.[r];y=y&&b===a?.addressType}return y}),[p,i,e,r,o]),{coinAmountInt:d,currencyAmount:h}=g||{};return P(()=>{let a;return s?(a={...s,coinAmountInt:d,currencyAmount:h},(0,we.default)(d)?l?(a.coinAmountInt="0",a.coinAmount="0",a.currencyAmount="0",a.currencyAmountUSD="0"):a.coinAmount=void 0:a.coinAmount=U(d,10**s.decimals)):a=null,a},[s,d,l])},$e=(e,n)=>{let t=F(e,n),r=F(t?.baseCoinId,n);return[t,r||t]},ve=e=>{let n=S(e);return w(async t=>{let r=await n(t),o=await n(r?.baseCoinId);return[r,o||r]},[n])};var en=(e={})=>{let n=ve(e);return w(async t=>{let[,r]=await n(t),o=r?.coinId;return ee.indexOf(o)!==-1},[n])},er=(e,n={})=>{let t=en(n),[r,o]=(0,R.useState)(!1);return se(async()=>{let s=await t(e);o(s)},[t]),r};m();f();m();f();$();var nn=(e={})=>{let{currencyId:n,formatted:t=!0,useApproximate:r}=e||{},o=G(n),{symbol:s,usdToThisRate:c}=o,i=S({withPrice:!0});return w(async(u,l)=>{let p=await i(u),g=B.div(l,10**p?.decimals),d=B.mul(p?.usdPrice,c),h=B.mul(g,d);return t?j(h,{useApproximate:r,symbol:s}):h},[s,t,i,c,r])},rn=(e,n,t={})=>{let{currencyId:r,formatted:o=!0,useApproximate:s,useMinPrecision:c=!0}=t||{},i=F(e,{withPrice:!0}),{usdToThisRate:u,symbol:l}=G(r);return P(()=>{if(!i||!i?.usdPrice)return null;let p=c?B.div(n,10**i?.decimals):n,g=B.mul(i?.usdPrice,u),d=B.mul(p,g);return o?j(d,{useApproximate:s,symbol:l}):d},[l,o,u,n,s,i?.usdPrice,i?.decimals])};export{be as a,X as b,Re as c,S as d,F as e,Ye as f,Ze as g,$e as h,er as i,nn as j,rn as k};

window.inOKXExtension = true;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=chunk-UIABO6UG.js.map
