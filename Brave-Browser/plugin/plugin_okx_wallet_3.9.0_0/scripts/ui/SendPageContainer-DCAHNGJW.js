import{a as br,b as su,c as iu,d as er,e as It}from"./chunk-FU4U5LL7.js";import{a as au}from"./chunk-FQVTVLID.js";import{a as $n,b as jn,c as Pr,d as tu,e as eu,f as Z,g as Do,h as os,i as cu,m as uu,n as du}from"./chunk-757PCK3N.js";import{a as ru,b as nu}from"./chunk-XCM743XO.js";import{a as mu}from"./chunk-T65CW4NW.js";import{a as Qn}from"./chunk-7UZMBJLI.js";import"./chunk-HNQ4OXOH.js";import{a as Pt}from"./chunk-PZENYLA6.js";import{a as qt,b as Pc}from"./chunk-JGAHAEK5.js";import{a as kc,b as wc}from"./chunk-PFNFAQEP.js";import{a as bc}from"./chunk-KHK3QCC3.js";import{a as Ec}from"./chunk-EMIDMJCA.js";import"./chunk-T2LI56ZH.js";import{b as hc,k as yc}from"./chunk-G35FQ3WW.js";import{a as _c,b as Mn}from"./chunk-KEYZ4YCG.js";import{a as Cc}from"./chunk-5NV3TIKF.js";import"./chunk-DCMAUS7C.js";import{a as Ic,b as Dn}from"./chunk-QIJYKINJ.js";import{a as Sc}from"./chunk-D4V7ONZY.js";import{a as Tc,b as xc}from"./chunk-MTAR53YL.js";import{b as Fc}from"./chunk-KWQVFNZ3.js";import{b as St,c as Bn,e as ac,g as mc,h as cc,i as uc,j as ii,l as vn,p as Ln,r as dc}from"./chunk-N3VGDA3L.js";import{a as _m,d as Fm,m as Ac}from"./chunk-3QCQMWWZ.js";import"./chunk-TQEP4B6B.js";import"./chunk-E6PQQLEO.js";import"./chunk-R7R6LTH6.js";import"./chunk-TAZU4KSU.js";import{c as uo}from"./chunk-W327NRHO.js";import{a as Tn}from"./chunk-DZDHGH5B.js";import{a as Ut,c as pt,d as hm,e as ym}from"./chunk-UKFSUXAE.js";import{b as Ue}from"./chunk-U3CLRNWK.js";import{a as Im,c as Tm,d as xm}from"./chunk-M4STRGDO.js";import"./chunk-GYUX3JJ3.js";import"./chunk-4C2576LU.js";import{b as fc,d as pc,e as lc}from"./chunk-PBOUQOH2.js";import{a as Ze}from"./chunk-SG4LXTVB.js";import{a as si}from"./chunk-3EYFKVOU.js";import"./chunk-QUUI62AZ.js";import{a as Lo}from"./chunk-SIKYZQW4.js";import{b as gm}from"./chunk-MCRNCTJS.js";import{a as yr,b as gc,d as Ao,e as ai,f as qe,g as mi}from"./chunk-YZAK46Y6.js";import{$ as nc,A as Ve,B as Yt,F as Ym,G as qm,H as At,I as Zm,J as zm,K as Xm,L as $m,M as Q,N as pe,O as jm,P as Qm,Q as oc,R as oo,T as tc,U as He,W as rc,Y as Ct,Z as Ke,_ as Je,a as Um,aa as io,ba as Nn,ca as sc,d as En,da as ic,e as Gt,f as S,g as Vt,h as N,i as Ge,j as Wm,k as V,l as Ht,m as j,n as Gm,o as Vm,p as Pn,q as ot,r as Kt,s as Hm,t as bn,u as Km,v as _,w as Jm,x as kn,y as Jt,z as wn}from"./chunk-VX7CI7XT.js";import"./chunk-D6HSNWGS.js";import{a as xo,d as In,e as vo}from"./chunk-7ODXCTBK.js";import{a as fo}from"./chunk-WSSHN373.js";import{i as ec}from"./chunk-GZMWLE4V.js";import{b as Ye}from"./chunk-C54I6GL3.js";import"./chunk-ZJICRI36.js";import"./chunk-BIBDTDJA.js";import{a as Cn}from"./chunk-ADIQBHVU.js";import{a as Am}from"./chunk-TPVT7ZCY.js";import"./chunk-A6HNAUBV.js";import"./chunk-6GFVKSAR.js";import{e as Sn}from"./chunk-JVLSBRR5.js";import"./chunk-5IXTSGAM.js";import"./chunk-OR2KMY5L.js";import{b as Sm}from"./chunk-FFJ36R7T.js";import"./chunk-NVCWAHOV.js";import"./chunk-RFEJLMRV.js";import{a as bA,e as Ot,g as Re,h as An,k as lm}from"./chunk-UIABO6UG.js";import{a as fm}from"./chunk-KJFAD5C4.js";import{a as gn}from"./chunk-BFVA6OLJ.js";import"./chunk-ON3J2WQV.js";import{c as Cm}from"./chunk-RC3QMLDN.js";import"./chunk-JINEVGIZ.js";import"./chunk-SRU2IM3A.js";import"./chunk-46NSFYB3.js";import{a as kA,f as pm,h as jo,i as pn,l as ln}from"./chunk-FFQESTX4.js";import{a as Rt}from"./chunk-OCZAVPFZ.js";import"./chunk-P6SDUFQ6.js";import"./chunk-5TNZ4MQV.js";import"./chunk-6YBNTFOQ.js";import"./chunk-VPDXC6IS.js";import{a as PA}from"./chunk-QMFIV527.js";import"./chunk-XGXABYQN.js";import{a as dn}from"./chunk-KKTPGZSO.js";import{b as at}from"./chunk-ESKOSV75.js";import{c as Ha,e as Ka,f as Ja,g as Ya,h as qa,i as Za,m as za}from"./chunk-ZDQ5EBGN.js";import"./chunk-2KEW2T4M.js";import"./chunk-R7VTXTCL.js";import"./chunk-LBYCQPAD.js";import{A as Hn,B as Kn,C as Qe,D as or,E as et,F as Wc,G as tr,H as Gc,I as Vc,J as rt,K as Hc,L as Kc,M as Jc,N as ci,O as Yc,P as qc,Q as Zc,R as Fr,S as zc,T as Er,U as Jn,V as Yn,W as qn,X as ui,Y as Xc,Z as $c,_ as mt,aa as Zn,b as Nc,ba as jc,c as ze,ca as zn,d as Bc,da as Qc,e as vc,ea as Xn,f as Lc,fa as Et,g as On,ga as di,h as Rn,ha as fi,i as Xe,ia as ou,j as $e,k as Dc,l as Zt,m as Un,n as Wn,o as zt,p as Gn,q as Xt,r as _r,s as Mc,t as Oc,u as Rc,v as tt,w as Uc,x as Vn,z as je}from"./chunk-542JHSZH.js";import{m as eo}from"./chunk-KZR43RPO.js";import"./chunk-PRHPRTXY.js";import"./chunk-SQ5W4RLM.js";import"./chunk-I27PVEIN.js";import{A as Dm,B as _n,C as hr,D as Mm,E as Om,H as Wt,I as H,J as L,K as ho,N as Rm,P as Ro,Q as We,R as Fn,b as lt,c as Em,f as ro,g as xn,h as hn,k as Pm,l as bm,m as Qo,n as km,o as wm,p as gt,q as Nm,s as Bm,w as vm,x as yn,z as Lm}from"./chunk-Y2PED5BF.js";import{d as Ua,e as Wa}from"./chunk-RUSRHRGO.js";import"./chunk-IZ5XPPXG.js";import{d as Xa,e as $a}from"./chunk-6PN4BR3D.js";import"./chunk-EWK7ZFVN.js";import"./chunk-A23SHFFL.js";import"./chunk-VZ3BFZKL.js";import"./chunk-T6Z2C3RK.js";import"./chunk-R2QYIBE7.js";import"./chunk-KT53NMHD.js";import"./chunk-64STH2HN.js";import"./chunk-EKQH7XTV.js";import"./chunk-R2QKPEWB.js";import"./chunk-RMA2FZOE.js";import"./chunk-KRHB66KZ.js";import"./chunk-4RHFH7IF.js";import"./chunk-LPTRVNVL.js";import"./chunk-PH2A2GR3.js";import{d as ni}from"./chunk-2LLM6N6U.js";import"./chunk-LF2PURXZ.js";import"./chunk-JEZIPKDY.js";import{a as Dt,b as Qa,i as om}from"./chunk-SR2BDP3A.js";import{A as cm,B as um,c as Oe,d as Mt,e as fn,m as em,n as rm,q as nm,r as sm,s as im,t as am,v as mm}from"./chunk-CFT6B56M.js";import{a as dm}from"./chunk-WK32FAZW.js";import"./chunk-WMUTUJYX.js";import"./chunk-B23OWGFX.js";import"./chunk-OSWXWF4A.js";import"./chunk-Q7FJER56.js";import"./chunk-RBTIRMSE.js";import"./chunk-7GZ2ZCGI.js";import{c as ha}from"./chunk-WTP3OIOS.js";import"./chunk-D66ZH3O3.js";import"./chunk-X764QIVO.js";import"./chunk-HISWVX7W.js";import{a as tm}from"./chunk-PYJPOVV7.js";import{b as ve}from"./chunk-AO6MUSOH.js";import{a as ja}from"./chunk-I435LZHT.js";import{t as ue,u as Tr,x as D}from"./chunk-SJIW4WAV.js";import"./chunk-SLDECH2O.js";import{A as Ma,B as Oa,a as mo,c as Le,d as Ba,j as ft,n as va,o as To,q as Xo,r as Bt,s as La,t as fe,x as vt,y as Da}from"./chunk-5JJQQHKZ.js";import{a as mn,bb as Ra,f as $o,ma as cn,na as un,oa as De}from"./chunk-URG4MCPH.js";import{Ea as rn,Pa as zo,g as tn,m as Sa,o as ei,r as xa,y as F}from"./chunk-ZPOCIBPN.js";import{T as Ft,W as ba,Y as de,Z as ka,aa as Zo,b as qo,ba as to,d as Ea,ea as wa,fa as Na,m as Pa,n as ri,r as nn,s as Nt,t as sn,u as Ne,v as Be,w as an}from"./chunk-CA5MYYD6.js";import{a as ya}from"./chunk-RZ7GFYMN.js";import{a as bo}from"./chunk-IOCZ22XI.js";import"./chunk-EJY3MW2I.js";import"./chunk-3VRAVMMN.js";import"./chunk-YJ45QIWT.js";import"./chunk-WR62TYUO.js";import{d as q,f as Po}from"./chunk-2G2AXMFT.js";import{c as Ga,f as Va}from"./chunk-XGFQCNHX.js";import"./chunk-7JF42X5G.js";import{a as Me,b as Lt}from"./chunk-4JZ3HIS7.js";import{s as en}from"./chunk-JLA5HXVC.js";import{c as EA}from"./chunk-I4WIGQLD.js";import"./chunk-ZNGQ6IUR.js";import"./chunk-JERFAOJH.js";import"./chunk-JXZFOFB5.js";import"./chunk-LYNLETTP.js";import"./chunk-FQ4XEVKF.js";import{c as J}from"./chunk-VMYDP774.js";import{a as Jo,b as we}from"./chunk-A7LNVEYU.js";import{c as ga,f as dt,h as be}from"./chunk-2YWUVAR3.js";import"./chunk-VA2HGDZT.js";import"./chunk-AKPDCNMH.js";import{$ as ra,$b as Yo,A as ji,B as Qi,C as oa,Fb as Aa,Ha as la,Hb as Ca,K as ta,Kb as FA,Lb as Ia,Ma as Qr,Mb as Ir,N as jr,Pa as Pe,Qa as No,Qb as Ta,Ra as So,S as ce,Sa as no,Ta as _t,Va as Bo,Wa as Sr,Wb as _a,Xa as Ko,Za as ke,_ as ea,_b as Fa,ba as na,ca as sa,da as ia,ea as aa,fa as ma,ga as ca,gc as M,ha as ua,ic as xr,jb as on,la as go,m as it,na as da,pb as co,q as Xr,qa as fa,ra as ti,t as $r,u as $i,ya as pa}from"./chunk-M54COW6Q.js";import"./chunk-PWWHYQAY.js";import{E as Zr,H as zr,M as Ee,b as qi,e as qr,o as Zi,q as yt,r as zi,s as Xi}from"./chunk-RIJWHGTU.js";import{I as Y,l as G,u as _e,v as P}from"./chunk-K4MPEKC5.js";import"./chunk-X6USBUO5.js";import"./chunk-674MHQJQ.js";import{L as Yi,R as Fe,X as wo,c as wt}from"./chunk-XIGC6FD5.js";import{a as x}from"./chunk-CXUPEGDW.js";import"./chunk-QAWZYDPQ.js";import"./chunk-PYTKRRY4.js";import"./chunk-363VDWOO.js";import"./chunk-7B5WANGL.js";import"./chunk-4P4FGPYZ.js";import"./chunk-Y47SQ3XQ.js";import"./chunk-LQTGDVAY.js";import"./chunk-YGNOWOE7.js";import"./chunk-N4GKTC7Y.js";import"./chunk-MHPFRLZZ.js";import"./chunk-X4YEESEZ.js";import"./chunk-IR63YTCE.js";import"./chunk-PATHAEX7.js";import"./chunk-664ZTB7N.js";import"./chunk-4WUMETG6.js";import"./chunk-TAJDMRFA.js";import"./chunk-YZ3HFF2L.js";import"./chunk-2BD64J7Y.js";import{a as _A}from"./chunk-RYJHESAH.js";import"./chunk-DOQ5NSSP.js";import"./chunk-VULQOB2N.js";import{f as u,m as n,n as l,o as s}from"./chunk-ICCOEXX5.js";n();s();var st=u(x()),me=u(bo()),xA=u(it());n();s();var rr=u(x()),ts=u(F()),fu=u(bo());var wA=()=>{let o=(0,fu.useHistory)(),t=(0,ts.useDispatch)(),e=(0,ts.useSelector)(Em),r=(0,rr.useRef)(e);return r.current=e,(0,rr.useEffect)(()=>{let{fromPage:i}=o.location?.state||{};return i&&t(vm(i)),t(yn(!0)),()=>{r.current&&(t(Fn()),t(Xn()))}},[]),null},pu=(0,rr.memo)(wA);n();s();n();s();n();s();var Su=u(x());n();s();var jt=u(x());Y();n();s();n();s();var $t=u(x());Y();function NA({loading:o,tag:t,customRender:e,focus:r,noMargin:i,noPadding:a,onChange:m,onRef:c,...d}){let g=(0,$t.useRef)(null);(0,$t.useLayoutEffect)(()=>{r&&g.current?.focus()},[]);let p=P("wallet_extension_transaction_placeholder_input_address");return $t.default.createElement(Pt.Row,{noMargin:i,noPadding:a},$t.default.createElement(yt.TextArea,{placeholder:p,errorType:yt.TIP_TYPE.always,size:yt.SIZE.xl,autoResize:!0,...d,onRef:f=>{g.current=f,c&&c(f)},onChange:f=>{m&&m(f.target.value)},customRender:({inputComponent:f})=>{let A=$t.default.createElement(Pt.InputCustomRender,{inputComponent:f,loading:o,tag:t});return e?e({inputComponent:f,customInputComponent:A}):A}}))}var pi=NA;n();s();var yo=u(x()),le=u(F()),kr=u(it()),gu=u(wt());Y();n();s();var lu={selected:"_selected_1fq8b_1"};function BA({value:o,network:t}){let e=(0,le.useDispatch)(),r=(0,le.useSelector)(lt),[i,a]=(0,yo.useState)(!1),[m,c]=(0,yo.useState)({}),[d,g]=(0,yo.useState)(""),p=lc(()=>{g(Qn.TYPE.ADD),c({address:o,network:t}),a(!0)}),f=(C={})=>{a(!1),c({}),g(""),C.name&&e(hr({name:C.name,type:ri.ADDRESS_BOOK}))},A=C=>{a(!1),setTimeout(()=>{g(Qn.TYPE.EDIT),c({...C,network:t}),a(!0)})};return yo.default.createElement(yo.default.Fragment,null,yo.default.createElement(Pt.InputBottomBar,{title:P("wallet_extension_send_errortip_not_in_address_book"),buttonTitle:P("wallet_extension_send_anchor_add_now"),buttonClick:p}),i&&yo.default.createElement(Qn,{type:d,data:m,onClose:f,onChangeToEdit:A,onBackToHome:()=>r}))}function vA({visible:o,options:t,onSelect:e,onChange:r}){let i=(0,le.useDispatch)();if(!o)return null;let a=({walletId:m,address:c,name:d,type:g,group:p,addressType:f})=>{if(e(),r(c),d){let A=p?`${p} - ${d}`:d;i(hr({name:A,type:g,extra:{walletId:m,group:p,name:d,addressType:f}}))}};return yo.default.createElement(Pt.SelectAddress,{options:t,onSelect:a})}function LA(o,t,e){let r=e?.matchAddress||((i,a)=>(0,kr.toLower)(a.address).includes((0,kr.toLower)(i))||a.name&&(0,kr.toLower)(a.name).includes((0,kr.toLower)(i)));return(0,yo.useMemo)(()=>{if(!o?.length)return[];if(!t)return o;let i=[];return o.forEach(({group:a,list:m})=>{let c=[];m.forEach(d=>{r(t,d)&&c.push(d)}),c.length&&i.push({group:a,list:c})}),i},[o,t])}function DA({value:o,error:t,onChange:e,isCheckingError:r,extraProps:i,onBlur:a,onFocus:m,...c}){let d=(0,le.useDispatch)(),g=Gt(),{coin:p}=S(),{localType:f}=p,A=(0,le.useSelector)(hn),C=_(),{filterAddress:T,disableRequestDomain:I}=i||{},h=!o,y=!!o&&!t&&!A?.name&&!r,E=pc(f,C),w=(0,yo.useMemo)(()=>T?T(E):E,[E,T]),[k,v]=(0,yo.useState)((!o||!!t)&&!y&&w?.length>0),b=LA(w,o,i),O=fc(f),R=W=>{e(W);let so=O(W),lo=Boolean(W&&so);d(hr(lo?so:null))},{loading:B,abort:U}=Um({domainInputValue:o,coinId:g},({address:W,domain:so})=>{d(_n({key:"",args:{}})),e(W),d(hr({name:so,type:ri.ENS}))},I),K=Bt(!!B||!!c.loading||!!r,{wait:200});return Oa(()=>{r||(!!o&&!t&&b.length===0?v(!1):!!t&&b?.length>0&&v(!0))},[o,t,r,b?.length],{wait:100}),yo.default.createElement("div",{className:(0,gu.default)({[lu.selected]:k})},yo.default.createElement(Pt.Row,{noMargin:k},yo.default.createElement(pi,{...c,noMargin:!0,noPadding:!0,loading:K,tag:A?.name,focus:h,value:o,error:!K&&t,onChange:R,onBlur:W=>{o&&!t&&setTimeout(()=>{v(!1)},100),a&&a(W)},onFocus:W=>{b?.length>0&&v(!0),m&&m(W)}}),y&&yo.default.createElement(BA,{network:f,value:o})),yo.default.createElement(vA,{visible:k,extraProps:i,value:o,options:b,onSelect:()=>{U(),v(!1)},onChange:e}))}var li=DA;n();s();var es=u(x()),wr=u(F());Y();function MA({Component:o=li,loading:t=!1,extraProps:e,errorFns:r={fns:[],override:!1}}){let i=(0,wr.useDispatch)(),a=(0,wr.useSelector)(ro),m=(0,wr.useSelector)(xn),c=zm(),{isCheckingError:d,runErrorFns:g}=Ve(c,r),p=A=>{g(A,C=>{i(_n(C))})},f=A=>{p(A),i(Dm(A))};return(0,es.useEffect)(()=>{i(Lm(d))},[d]),es.default.createElement(o,{value:a,onChange:f,loading:t,isCheckingError:d,error:m?.key?P(m?.key,m?.args):null,extraProps:e||{}})}var gi=MA;n();s();var Au={content:"_content_12kl2_1"};function OA({headerProps:o={},addressProps:t={},confirmButtonProps:e={}}){let r=kn(),i=Jm(),a=Jt(),m=(0,jt.useMemo)(()=>{let{disabled:c,loading:d,onClick:g,...p}=e||{},f=c||r;return[{disabled:f,btnText:P("wallet_extension_send_btn_next_step"),actionType:vo.ACTION_TYPE.CONFIRM,loading:!f&&(d||i),onClick:g||a,...p}]},[e,r,i,a]);return jt.default.createElement($n,{slot:{header:jt.default.createElement(jn,{...o,title:P("wallet_extension_send_title_recipient_address")}),footer:jt.default.createElement(vo,{buttonGroup:m})}},jt.default.createElement("div",{className:Au.content},jt.default.createElement(gi,{...t})))}var z=OA;n();s();var RA=()=>{let{coin:o}=S();return mo(async t=>{try{if(!o||o.baseCoinId===0)return null;let{register:e}=await dm({address:t,contractAddress:o.address,chainIndex:o?.chainId});return e?null:{key:"wallet_extension_note_address_not_register",args:{token:o.symbol}}}catch{return null}})},Cu=()=>[RA()];var UA=()=>{let o=Cu();return Su.default.createElement(z,{addressProps:{errorFns:o}})},Iu=UA;n();s();var yu=u(x());n();s();var Tu=u(x()),xu=u(F());var WA=()=>{let[o,{setFalse:t}]=To(!0),{coin:e}=S(),r=_(),i=(0,xu.useDispatch)(),{chainId:a,coinId:m}=e;return(0,Tu.useEffect)(()=>{a&&r&&(async()=>{try{let d={coinId:m,chainId:a,address:r},g={fromAddr:r},{maxGasAmount:p,gasUnitPrice:f,fee:A}=await mm(d,g);i(H(A)),i(Gc({maxGasAmount:p,gasUnitPrice:f})),i(L(!1))}catch{i(L(!0))}finally{t()}})()},[a,r]),o},hu=WA;function GA(){let o=hu();return Q(),yu.default.createElement(Z,{confirmButtonProps:{loading:o}})}var _u=GA;n();s();var Du=u(x());n();s();var Fo=u(x());Y();n();s();var Fu=u(x()),Eu=u(F());co();function Pu(){let o=(0,Eu.useDispatch)(),t=Ht(),e=Ct();(0,Fu.useEffect)(()=>{if(t){let r=e;Bo(r,0)&&(r="0"),o(Mm(r))}},[t,e])}var Nr=u(F());var vu=u(it());n();s();var Ai=u(F()),VA=()=>{let o=Ht(),t=S(),e=(0,Ai.useSelector)(Nm),r=ot(),i=t?.coin?.coinId,a=V(),m=lm(i,a,{currencyId:r,formatted:!1}),c=(0,Ai.useSelector)(Pm);return Le(()=>{let d=0,g=0;return e===Sm?o?(g=m,d=a):(d=void 0,g=c):(d=a,g=void 0),[{currencyId:r,coinAmount:d,currencyAmount:g,coinId:i}]},[e,r,i,o,m,c,a])},bu=VA;n();s();var Ci={};n();s();var ku=u(x());var HA=({loading:o,chainName:t,feeLevel:e,onClick:r,...i},a)=>{let m=j(),c=Kt(),d=ot(),g=Vm(),p=Pn(),f=qt(),A=r?()=>{r(),a({trade:"send",network:t,all_confirmation:"network_fee"})}:void 0,C=(0,ku.useMemo)(()=>e!==void 0?e:Ft?.STANDARD,[e]);return{gasReturn:f,currencyId:d,networkFee:g&&m==="0"?void 0:m,loading:o||g,level:C,coinId:c,estimateFailed:!!p,onClick:A,...i}},wu=HA;n();s();var Nu=u(bo()),KA=({disabled:o,onSubmit:t,feeLoading:e,loading:r,onClick:i,networkFee:a,renderActions:m,...c},d)=>{let g=(0,Nu.useHistory)(),p=Vt(),{coin:f}=S(),A=_(),{loading:C,onClick:T}=ic(t),I=sc();return Le(()=>{if(m&&typeof m=="function"){let y=m(d);if(y)return y}if([to.BALANCE_INSUFFICIENT,to.FEE_BALANCE_INSUFFICIENT].includes(d)){let y=d===to.BALANCE_INSUFFICIENT?f?.coinId:p?.coinId;return[{actionType:vo.ACTION_TYPE.CANCEL,onClick:()=>{g.goBack()}},{coinId:y,address:A,actionType:vo.ACTION_TYPE.FILL_UP}]}let h={};return[Zo.DEFRAUD,Zo.SIMILAR].includes(d)&&(h={type:wo.TYPE.red}),[{loading:r||C,disabled:o||I||e,actionType:vo.ACTION_TYPE.CONFIRM,onClick:i||T,...h,...c}]},[e,r,f?.coinId,I,T,o,d,p?.coinId,A,C,i,c])},Bu=KA;function JA({loading:o,headerProps:t={},networkFeeProps:e={},confirmButtonProps:r={},containerProps:i={},tipMessageProps:a={},slot:m={},checkEmpty:c=!0,addressType:d,renderMessage:g,defaultMessage:p,canTransferAmount:f,blockAddressInfo:A={}}){let C=(0,Nr.useSelector)(ro),T=(0,Nr.useSelector)(hn),I=Dt(),h=Sc(I),y=(0,Nr.useSelector)(Bm),E=(0,Nr.useSelector)(Bc),w=_(),k=bu(),{coin:v,baseCoin:b}=S(),O=wu({...e,chainName:v?.chainName},h),{loading:R,estimateFailed:B}=O,K=O?.gasReturn?.activity?.errorCode,{bottom:W,footer:so,top:lo}=m,$=Fo.default.createElement(Ao,null,Fo.default.createElement(Lo,{...O}));W&&((0,vu.isFunction)(W)?$=W(O):$=W),tu(c),Pu(),(0,Fo.useEffect)(()=>{K===0&&ha({wallet_address:w,chain_id:b.chainId,transaction_type:"transfer"})},[K]);let po=Bu({...r,feeLoading:R},y?.type||E);return Fo.default.createElement($n,{...i,loading:o,className:Ci.root,slot:{top:lo,header:Fo.default.createElement(jn,{...t,title:P("wallet_extension_send_title_send")}),footer:so||Fo.default.createElement(Fo.default.Fragment,null,Fo.default.createElement(mi,{...a,address:C,coinId:v?.coinId,type:y?.type||E||B&&mi.TIP_TYPE.FEE_ERROR||qi.TYPE.warn,renderMessage:g,message:y?.text||!!y?.key&&P(y.key,y?.args)||!B&&p,blockAddressInfo:A}),Fo.default.createElement(vo,{buttonGroup:po}))}},Fo.default.createElement("div",{className:Ci.content},Fo.default.createElement(Ao,null,Fo.default.createElement(gc,{summaryList:k,title:P("wallet_extension_send_colored_send")})),Fo.default.createElement(Ao,null,Fo.default.createElement(ai,{address:w,addressType:d,title:P("extension_send_mid_text_from"),walletId:I,onCopyCallback:()=>{h({trade:"send",network:v?.chainName,all_confirmation:"wallet_used_address"})}},!!f&&Fo.default.createElement(kc,{coinBalance:f})),Fo.default.createElement(ai,{tags:T?.name?[T?.name]:null,address:C,title:P("extension_send_mid_text_to"),onCopyCallback:()=>{h({trade:"send",all_confirmation:"to_address",network:v?.chainName})}})),$))}var X=JA;n();s();var Si=u(F());Pe();co();Po();var Lu=()=>{let o=fo(),{coin:t}=S(),e=_(),r=io(),i=(0,Si.useSelector)(ro),a=(0,Si.useSelector)(Nc),{gasUnitPrice:m,maxGasAmount:c}=a;return uo(async()=>await Mt({address:e,coinId:t.coinId},{fromAddr:e,toAddr:i}),async(C={})=>{let{info:T={}}=C,{sequenceNumber:I,chainId:h,expirationTimestampSecs:y,tyArg:E}=T,w={sequenceNumber:I,chainId:h,maxGasAmount:c,gasUnitPrice:m,expirationTimestampSecs:y},k={recipientAddress:i,amount:r},v={base:{...w}};t.baseCoinId===0&&(v.type=sn.TRANSFER,v.data={...k}),t?.baseCoinId!==0&&t?.protocolType===xr.APTOS_FUNGIBLE_TOKEN&&(v.type=sn.FUNGIBLE_ASSET_TRANSFER,v.data={...k,fungibleAssetMetadataAddress:t?.address}),t?.baseCoinId!==0&&t?.protocolType===xr.APTOS_TOKEN&&(v.type=sn.TOKEN_TRANSFER,v.data={...k,tyArg:E});let b=await q().signTransaction(v,e,pa);return{signInfo:C,signedTx:b}},async({signInfo:C,signedTx:T})=>{let{info:I={}}=C,{sequenceNumber:h}=I,y={nonce:h},E=await xo(t.localType,T),w={signedTx:T,coinAmount:r,coinId:t.coinId,fromAdr:e,toAdr:i,serviceCharge:No(m,c),extJson:JSON.stringify(y),txHash:E};return await o(w)},C=>(eo({tx_id:C}),C))};function YA(){let o=Lu(),t=async()=>{await o()};return oo(),Du.default.createElement(X,{confirmButtonProps:{onSubmit:t}})}var Mu=YA;var qA={match:o=>Ya(o),pages:{AddressPage:Iu,AmountPage:_u,ConfirmPage:Mu}},Ou=qA;n();s();n();s();var Wu=u(x());n();s();var ZA=()=>{let{initialType:o}=Qa();return async t=>{let{isValid:e}=await Ym(t);return e&&Ga(o)?{key:"wallet_extensions_hardware_alert_taproot_unsupported",args:{}}:null}},zA=()=>[ZA()],Ru=zA;n();s();go();var Br=u(x()),Uu=u(bo()),XA=()=>{let{coinId:o}=(0,Uu.useParams)(),e=Ot(o)?.protocolId,r=Object.values(M),i=pm(),a=i.filter(({keyringIdentityType:f})=>Va(f)),m=i.filter(({keyringIdentityType:f})=>f===Fa.MPC),c=(f,A)=>!f.some(({walletIdentities:C})=>C.some(({addressType:T={}})=>{let I=T[Xr];return I?I.some(({address:h})=>A.address===h):!1})),d=(0,Br.useCallback)(f=>r.includes(e)?c(a,f):!0,[a,e,r]),g=(0,Br.useCallback)(f=>[M.BRC_20,M.BRC_20S].includes(e)?!0:r.includes(e)?c(m,f):!0,[m,e,r]),p=(0,Br.useCallback)((f=[])=>f.filter(A=>d(A)&&g(A)),[d,g]);return(0,Br.useCallback)(f=>f.map(A=>({...A,list:p(A?.list)})).filter(A=>A?.list?.length),[p])},rs=XA;var $A=()=>{let o=Ru(),t=rs();return Wu.default.createElement(z,{addressProps:{errorFns:o,extraProps:{filterAddress:t}}})},Gu=$A;n();s();var oe=u(x());Y();go();n();s();var Uo=u(x());Y();var jA=()=>{let o=Vt(),{coin:t}=S();return(0,Uo.useCallback)(r=>{let i="";return r.key&&(i=P(r?.key,r?.args)),r?.type===to.BALANCE_INSUFFICIENT?Uo.default.createElement(Uo.default.Fragment,null,Uo.default.createElement(J.Box,{className:br.wrap},i),Uo.default.createElement(J.Box,{className:br.wrap},Uo.default.createElement(Pr,{coin:t,receiveOnly:!0}))):r?.type===to.FEE_BALANCE_INSUFFICIENT?Uo.default.createElement(Uo.default.Fragment,null,Uo.default.createElement(J.Box,{className:br.wrap},i),Uo.default.createElement(J.Box,{className:br.wrap},Uo.default.createElement(Pr,{coin:o}))):i},[t,o])},Vu=jA;n();s();var Mo=u(x()),Qt=u(F()),Yu=u(it());Y();n();s();n();s();co();Po();be();we();var ns=async({walletId:o,signedTx:t,coinId:e,coinAmount:r,fromAdr:i,toAdr:a,serviceCharge:m,txHash:c,walletType:d,txType:g,extJson:p})=>{let f=Jo.postTx,A=await q().getRequestHeaders({walletId:o,needSign:!0,currency:"usd"}),C={};e==1&&(C.btcSpeedUpInfo=JSON.stringify({sequence:1}));let{data:T}=await dt(f,{signedTx:t,coinId:e,coinAmount:r,fromAdr:i,toAdr:a,serviceCharge:m,txSource:Yo.NORMAL,txHash:c,accountId:o,walletType:d,...C,extJson:p,txType:g},{headers:A});return T};var Hu=(o,t)=>!o||!o.length?"0":o.reduce((r,i)=>{let m=(i.nftLocaltionVOs||[]).reduce((c,d)=>d.nftId===t?no(c,d.value):c,"0");return no(r,m)},"0"),Ii=({address:o,amount:t="0",satAmount:e="0",tokenType:r="FT",atomicalId:i},a=546)=>(e=Ko(e,0)?e:t,{address:o,amount:Sr(e,a)?a:Number(e),data:[{atomicalId:i,type:r,amount:Number(t)}]}),Ku=(o,t=546)=>!o||o.length===0?!1:o.some(e=>{let r=e?.data?.[0]?.amount;return r===void 0?!1:Bo(r,t)}),Ju=(o,t=546)=>!o||o.length===0?!1:o.every(e=>{let r=e?.data?.[0]?.amount;return r===void 0?!1:Bo(r,t)});var oC=()=>{let o=(0,Qt.useDispatch)(),t=(0,Qt.useSelector)(On),e=(0,Mo.useCallback)(r=>{o(Jc({selectedNetworkFeeLevel:r}))},[]);return[t?.selectedNetworkFeeLevel,e]},tC=({fromAddr:o,toAddr:t,protocolId:e,minOutput:r,sendAmountInt:i,transferInputs:a})=>{let m=(0,Qt.useDispatch)();return(0,Mo.useMemo)(()=>{if(M.ARC_20!==e)return null;if(!a||a.length===0||G.eq(i,0))return m(ci([])),null;let c=a[0]?.nftLocaltionVOs[0]?.tokenType,d=a[0]?.nftLocaltionVOs[0]?.nftId,g=Ii({address:t,amount:i,tokenType:c,atomicalId:d},r),p=Hu(a,d),f=G.sub(p,i),A=Ii({address:o,amount:f,tokenType:c,atomicalId:d},r),C=[];return G.lte(f,0)?C.push(g):G.lt(f,r)?C.push(g,A):G.gte(f,r)&&C.push(A,g),m(ci(C)),C},[e,a,i,t,r,o,m])},eC=({fromAddr:o,toAddr:t,coinTick:e,transferInputs:r,minOutput:i,isXrc20Token:a,protocolId:m,sendAmountInt:c})=>{let d=tC({fromAddr:o,minOutput:i,protocolId:m,sendAmountInt:c,toAddr:t,transferInputs:r});return(0,Mo.useMemo)(()=>!a||M.SRC_20===m||!r?.length?null:M.ARC_20===m&&d?d:M.RUNES===m?[{address:t,amount:i,data:{id:e,amount:c}}]:M.RUNEMAIN===m?[{address:t,amount:i,data:{id:e,amount:c}}]:[{address:t,amount:Number(c),...ac(r[0],m)}],[e,a,i,m,c,t,r,d])},rC=({coin:o,coinId:t,walletId:e,protocolId:r,tick:i,address:a,coinAmount:m,isXrc20Token:c})=>{let[,d]=uc({coinId:t,walletId:e,protocolId:r,tick:i,address:a,coinAmount:m,utxoType:St.BRC20_CONVERTIBLE},{ready:o&&c&&r!==M.SRC_20});return[null,d]},nC=({coinId:o,isXrc20Token:t,sendAmountInt:e,protocolId:r,inscriptionOutput:i})=>(0,Mo.useMemo)(()=>o===22?546:t?r===M.SRC_20?i||790:"0":e,[o,t,e,r,i]),sC=({coin:o,isXrc20Token:t,protocolId:e,satBytes:r,transferInputs:i})=>(0,Mo.useMemo)(()=>!o||!r?!1:!(e&&t&&e!==M.SRC_20&&!i?.length),[o,t,e,r,i?.length]),iC=({coin:o,protocolId:t})=>(0,Mo.useMemo)(()=>{if(o?.address&&[M.RUNES,M.ARC_20,M.RUNEMAIN].includes(t))return(0,Yu.last)(o?.address?.split("-"))},[o?.address,t]),aC=({coin:o,isXrc20Token:t,protocolId:e,sendAmount:r})=>(0,Mo.useMemo)(()=>{if(t&&e===M.SRC_20)return{body:JSON.stringify({p:"src-20",op:"transfer",tick:o?.name,amt:r})}},[o?.name,t,e,r]),mC=({coinId:o,walletId:t,satBytes:e,address:r,isXrc20Token:i,coinBalance:a})=>{let m=(0,Qt.useDispatch)(),[c,d]=ii({coinId:o,walletId:t,satBytes:e,address:r},{onSuccess:g=>{m(o!==22&&!i?Ro(g):Ro(a?.coinAmountInt)),m(We(g))}});return[c,d]},cC=({coinId:o,walletId:t,protocolId:e,tick:r,address:i})=>{let a=(0,Qt.useDispatch)(),[m,c]=ii({coinId:o,walletId:t,protocolId:e,tick:r,address:i,coinAmount:"0",utxoType:St.BRC20_CONVERTIBLE},{ready:[M.RUNES,M.ARC_20,M.RUNEMAIN].includes(e),onSuccess:d=>{a(Ro(d))}});return[m,c]},uC=({coinId:o,toAddr:t,walletId:e,fromAddr:r,satBytes:i,inputs:a,outputs:m,networkFee:c,revealOutValue:d,coinAmount:g,utxoParams:p,inscriptionData:f,isXrc20Token:A,availableFeeCoinAmountInt:C,availableSendCoinAmountInt:T,sendAmountInt:I},{ready:h,networkFeeInt:y})=>{let E=(0,Qt.useDispatch)(),[w,k,v]=Ln({coinId:o,toAddr:t,walletId:e,fromAddr:r,satBytes:i,inputs:a,outputs:m,networkFee:c,revealOutValue:d,coinAmount:g,utxoParams:p,inscriptionData:f,canTransferAmount:o===22||A?C:T,...o===22?{omni:{coinType:31,amount:I}}:{}},{ready:h,onSuccess:b=>{Math.abs(Number(G.sub(b,y)))!==parseInt(i,10)&&(E(H(b)),E(L(!1)))},onError:b=>{E(L(b))}});return[w,k,v]},dC=()=>{let o=Gt(),t=_(),e=N(),r=jo(),i=Ot(o),a=i?.protocolId,m=mc(a),c=i?.baseCoinId||o,d=Sn(t,r,i?.localType),g=Ge(),p=j(),f=V(),A=bn(),C=Ct(),T=Hm(),[,I]=Tn({protocolId:a,coinId:o,address:t,chainId:i?.chainId}),{inscriptionOutput:h,minOutput:y}=I||{},[E,w]=oC(),k=E?.satBytes;(0,Mo.useEffect)(()=>{if(!k&&I?.normal&&w({level:Ft.STANDARD,satBytes:I?.normal}),k&&E?.level!==Ft.CUSTOM){let ye=I[Tc[E?.level]?.satBytes];w({...E,satBytes:ye})}},[I]);let v=Re(o,void 0,{addressType:d}),b=nC({coinId:o,isXrc20Token:m,sendAmountInt:f,protocolId:a,inscriptionOutput:h}),O=iC({coin:i,protocolId:a}),[,R]=rC({coin:i,coinId:o,walletId:r,protocolId:a,tick:O,address:t,coinAmount:f,isXrc20Token:m}),B=eC({fromAddr:t,toAddr:e,coinTick:O,transferInputs:R,minOutput:y,isXrc20Token:m,protocolId:a,sendAmountInt:f}),U=(0,Mo.useMemo)(()=>{if(R?.length)return R.map(({txHash:ye,vout:Yr})=>`${ye}-${Yr}`)},[R]),K=sC({coin:i,isXrc20Token:m,protocolId:a,satBytes:k,transferInputs:R}),W=aC({coin:i,isXrc20Token:m,protocolId:a,sendAmount:g}),so=(0,Mo.useMemo)(()=>a===M.SRC_20?{protocolId:a,utxoType:St.BRC20_CONVERTIBLE}:{utxoType:St.TRANSFER,needFilteredUtxo:[M.RUNES,M.ARC_20,M.RUNEMAIN].includes(a)?U:void 0},[U,a]),[lo,$]=mC({coinId:o,walletId:r,satBytes:k,address:t,isXrc20Token:m,coinBalance:v}),[po,Oo]=cC({coinId:o,walletId:r,protocolId:a,tick:O,address:t}),[he,,Qs]=uC({coinId:o,toAddr:e,walletId:r,fromAddr:t,satBytes:k,inputs:R,outputs:B,networkFee:p,revealOutValue:h,coinAmount:b,utxoParams:so,inscriptionData:W,isXrc20Token:m,availableFeeCoinAmountInt:A,availableSendCoinAmountInt:T,sendAmountInt:f},{ready:K,networkFeeInt:p}),oi=(0,Mo.useMemo)(()=>[M.RUNES,M.ARC_20,M.RUNEMAIN].includes(a)?$===void 0||Oo===void 0:$===void 0,[$,a,Oo]);return{coin:i,toAddr:e,coinId:o,walletId:r,signInfo:I,feeError:Qs,fromAddr:t,protocolId:a,baseCoinId:c,feeLoading:he,addressType:d,sendAmountInt:f,networkFeeInt:p,transferInputs:R,transferOutputs:B,isXrc20Token:m,utxoParams:so,initLoading:oi,mergedCoinAmount:b,src20InscriptionData:W,sendCoinAvailableAmount:C,availableSendCoinAmountInt:T,availableFeeCoinAmountInt:A,selectedNetworkFeeLevel:E,setSelectedNetworkFeeLevel:w,loading:lo||he||po}},ss=dC;n();s();var $u=u(x());Y();n();s();var zu=u(x());Y();n();s();n();s();var qu=u(F());var Zu=()=>(0,qu.useSelector)(On).transferOutputs;var Xu=({isArc20Token:o,sendCoinBalance:t,doubleMinOutput:e,minOutput:r,coin:i})=>{let a=Zu();return(0,zu.useCallback)(m=>o?G.lte(t,e)&&m!==t?{key:"wallet_extension_error_dust_limit_full_amount",args:{amount:t,token:i?.symbol},type:to.COMMON_ERROR}:Ju(a,r)?{key:"wallet_extension_error_dust_limit_transaction",type:to.COMMON_ERROR}:Ku(a,r)?{key:"wallet_extension_error_dust_asset_continue",type:to.COMMON_TIP}:null:null,[o,t,e,r,i,a])};var ju=o=>{let t=Gt(),e=Ot(t),r=e?.baseCoinId===0,a=e?.protocolId===M.ARC_20,m=G.div(o,10**e?.decimals),c=Ct(),d=G.mul(m,2),g=Xu({isArc20Token:a,sendCoinBalance:c,doubleMinOutput:d,minOutputFloat:m,minOutput:o,coin:e});return(0,$u.useCallback)(p=>{if(!o)return null;let f=g(p);return f||(r&&G.lt(p,m)?{key:"wallet_extension_send_transfer_at_least",args:{amount:`${m} ${e?.symbol}`},type:to.COMMON_ERROR}:null)},[o,g,r,m,e?.symbol])},Qu=o=>{let t=ju(o);Q([t])},od=o=>{let t=ju(o);oo([t])};n();s();var td={"amount-page__available_balance__icon":"_amount-page__available_balance__icon_69wv8_1",amountPageAvailableBalanceIcon:"_amount-page__available_balance__icon_69wv8_1"};n();s();var ao=u(x());var sr=u(wt());Y();n();s();var nr={container:"_container_17byu_1",link:"_link_17byu_6","pending-assets":"_pending-assets_17byu_11",pendingAssets:"_pending-assets_17byu_11"};var fC=({lockedAmount:o,lockedAmountDisplay:t,pendingXrc:e,pendingXrcDisplay:r,availableWithoutSpending:i,availableWithoutSpendingDisplay:a,availableReceiving:m,availableReceivingDisplay:c,goToInscribe:d,addressType:g,coinId:p})=>{let{handleClick:f}=su(g,p);return ao.default.createElement(ao.default.Fragment,null,ao.default.createElement(J.Box,{className:(0,sr.default)(nr.container)},Number(o)>0&&ao.default.createElement(J.FlexBox,{justify:"space-between"},ao.default.createElement(J.Box,null,ao.default.createElement(D.Text,{type:D.TYPE.secondary,size:D.SIZE.xs},P("extension_wallet_btc_in_use"))),ao.default.createElement(J.Box,null,ao.default.createElement(D.Text,{type:D.TYPE.secondary,size:D.SIZE.xs},t),ao.default.createElement(D.Text,{size:D.SIZE.xs,className:(0,sr.default)(nr.link),onClick:f},P("extension_wallet_btc_btn_unlock_use")))),Number(e)>0&&ao.default.createElement(J.FlexBox,{justify:"space-between",className:(0,sr.default)(nr.pendingAssets)},ao.default.createElement(J.Box,null,ao.default.createElement(D.Text,{type:D.TYPE.secondary,size:D.SIZE.xs},P("extension_wallet_btc_select_receiving"))),ao.default.createElement(J.Box,null,ao.default.createElement(D.Text,{type:D.TYPE.secondary,size:D.SIZE.xs},r))),Number(i)>0&&ao.default.createElement(J.FlexBox,{justify:"space-between"},ao.default.createElement(J.Box,null,ao.default.createElement(D.Text,{type:D.TYPE.secondary,size:D.SIZE.xs},P("extension_wallet_btc_to_be_inscribed"))),ao.default.createElement(J.Box,null,ao.default.createElement(D.Text,{type:D.TYPE.secondary,size:D.SIZE.xs},a),ao.default.createElement(D.Text,{size:D.SIZE.xs,className:(0,sr.default)(nr.link),onClick:d},P("extension_wallet_btc_btn_inscribe")))),Number(m)>0&&ao.default.createElement(J.FlexBox,{justify:"space-between",className:(0,sr.default)(nr.pendingAssets)},ao.default.createElement(J.Box,null,ao.default.createElement(D.Text,{type:D.TYPE.secondary,size:D.SIZE.xs},P("extension_wallet_btc_select_receiving"))),ao.default.createElement(J.Box,null,ao.default.createElement(D.Text,{type:D.TYPE.secondary,size:D.SIZE.xs},c)))))},is=fC;n();s();var ed=u(x());function pC(){let o=_(),{coin:t}=S();(0,ed.useEffect)(()=>{iu({coinId:t.coinId,address:o})},[t.coinId,o]);let{availableWithoutSpending:e,availableWithoutSpendingDisplay:r,availableReceiving:i,availableReceivingDisplay:a,receivedPendingBalance:m,receivedPendingBalanceDisplay:c}=er(t);return{availableWithoutSpending:e,availableWithoutSpendingDisplay:r,availableReceiving:i,availableReceivingDisplay:a,receivedPendingBalance:m,receivedPendingBalanceDisplay:c}}var as=pC;function lC(){let{coin:o,coinId:t,signInfo:e,initLoading:r,addressType:i,fromAddr:a}=ss(),{receivedPendingBalance:m,receivedPendingBalanceDisplay:c}=as(),{lockedAmount:d}=nu(a,o),g=ue(d,{decimals:o.decimals});Qu(e?.minOutput);let p=Vu(),f=(0,oe.useMemo)(()=>t===ce?"extension_defi_bot_popuptext_current_balance_coverage":o?.protocolId===M.SRC_20?"extension_defi_tooltip_text_balance_udpate":o?.protocolId===M.ARC_20?"extension_defi_tooltip_text_utxo_exclude":o?.protocolId===M.RUNEMAIN?"extension_defi_hover_text_avail_balance":null,[o?.protocolId,t]);return oe.default.createElement(Z,{isGlobalLoading:r,renderError:p,totalAmountProps:{type:"amount",title:oe.default.createElement(oe.default.Fragment,null,P("extension_defi_text_available_balance"),!!f&&oe.default.createElement(ve,{size:ve.SIZE.xxs,tooltip:P(f),icon:"okx-wallet-plugin-information-circle",className:td["amount-page__available_balance__icon"]})),slot:{bottom:Number(d)>0||Number(m)>0?oe.default.createElement(is,{lockedAmount:d,lockedAmountDisplay:g,pendingXrc:m,pendingXrcDisplay:c,addressType:i,coinId:t}):void 0}}})}var rd=lC;n();s();var Wo=u(x());var dd=u(bo()),fd=u(F());go();n();s();var ir=u(x());Y();n();s();var nd={"fillup-enter":"_fillup-enter_117qj_1",fillupEnter:"_fillup-enter_117qj_1"};var gC=(o,t,e)=>{let[r,i]=An(o),a=r?.baseCoinId===0;return(0,ir.useCallback)(m=>{if(!t)return null;let c=null;return m===qe.BALANCE_INSUFFICIENT&&(c=P("wallet_transfer_errortip_insufficient_balance",{chainSymbol:r?.symbol})),m===qe.FEE_BALANCE_INSUFFICIENT&&(c=P(a?"wallet_extension_popup_adjust_add":"wallet_extension_popup_insufficient_network_fee",{token:i?.symbol,symbol:i?.symbol})),c?ir.default.createElement(ir.default.Fragment,null,c,ir.default.createElement(D.Text,{inherit:!0,className:nd["fillup-enter"],onClick:e},P("wallet_extension_placeorder_textbtn_replenish",{token:i.symbol}))):null},[i?.symbol,r?.symbol,a,e,t])},sd=gC;n();s();var id=u(x()),ad=u(bo()),md=u(kA());var cd=u(F());Y();var AC=({addressType:o,showManageUTXO:t,loading:e,baseCoinId:r})=>{let i=(0,ad.useHistory)(),a=(0,cd.useDispatch)();return(0,id.useCallback)(m=>t&&(m===qe.BALANCE_INSUFFICIENT||m===qe.FEE_BALANCE_INSUFFICIENT)?[{actionType:vo.ACTION_TYPE.CANCEL,onClick:()=>{i.goBack()}},{onClick:async()=>{await a(yn(!1));let c=md.default.stringify({addressType:o,coinId:r},{skipEmptyString:!0,skipNull:!0}),d=c?`?${c}`:"";i.push(Ra+d)},actionType:vo.ACTION_TYPE.CONFIRM,btnText:P("wallet_extension_mid_textbtn_manage_utxo")}]:null,[o,a,i,e,t])},ud=AC;var CC=546;function SC(){let o=(0,dd.useHistory)(),[t,{toggle:e}]=To(!1),{coin:r,coinId:i,toAddr:a,loading:m,walletId:c,fromAddr:d,signInfo:g,utxoParams:p,protocolId:f,baseCoinId:A,feeLoading:C,addressType:T,isXrc20Token:I,networkFeeInt:h,sendAmountInt:y,transferInputs:E,transferOutputs:w,mergedCoinAmount:k,availableSendCoinAmountInt:v,selectedNetworkFeeLevel:b,setSelectedNetworkFeeLevel:O,src20InscriptionData:R}=ss(),B=ot(),U=(0,fd.useSelector)(lt),K=_a[r?.localType]?.[T],{showManageUTXO:W}=ru(r,K,!0),[so,{toggle:lo}]=To(!1);od(g?.minOutput,i);let $=ln(c),[po,Oo]=(0,Wo.useState)(!1),he=mo(()=>{lo()},[]),Qs=sd(i,W,he),oi=ud({addressType:K,showManageUTXO:W,loading:m,baseCoinId:A}),ye=cc({coinId:i,walletId:c,address:d,utxoType:St.TRANSFER,satBytes:b?.satBytes,...p}),Yr=dc({coinId:i,toAddr:a,walletId:c,fromAddr:d,protocolId:f,networkFee:h,localType:r?.localType,outputs:w,inscriptionData:R,dustSize:I?void 0:g?.minOutput,satBytes:b?.satBytes,coinAmount:i===22?CC:y,...i===22?{omni:{coinType:31,amount:y}}:{},extraPublishParams:{coinAmount:y,txType:I?qo.BRC20_SEND:qo.TRANS_OUT}}),Ki=vn({coinId:i,currencyId:B,txType:I?qo.BRC20_SEND:qo.TRANS_OUT,protocolId:f,address:d}),hA=(0,Wo.useCallback)(async()=>{if(await Ye()){let Cr=[];Cr=await ye(k,h),Cr=[...E||[],...Cr],await Ki(Cr,()=>{o.goBack()}),Oo(!0);let Ji=await Yr({utxoList:Cr});return o.push(U),eo({tx_id:Ji}),Ji}return Oo(!1),Promise.reject()},[ye,k,h,E,Ki,Yr,o,U]),yA=(0,Wo.useMemo)(()=>[M.RUNES,M.ARC_20,M.RUNEMAIN].includes(f)&&!E?.length?!0:m,[m,f,E?.length]);return Wo.default.createElement(Wo.default.Fragment,null,Wo.default.createElement(X,{addressType:T,confirmButtonProps:{disabled:yA,renderActions:oi,onSubmit:hA},networkFeeProps:{onClick:e,loading:C,feeLevel:b?.level},renderMessage:Qs,defaultMessage:A===ce&&g?.transferReminder,canTransferAmount:i===ce&&v}),Wo.default.createElement(In,{walletId:c,address:d,visible:so,closeCallback:lo,coinId:A,receiveOnly:!0}),Wo.default.createElement(xc,{visible:t,coinId:A,signInfo:g,currencyId:B,estimatedFee:h,value:b,onChange:O,onToggleVisible:e}),Wo.default.createElement(wc,{visible:$&&po}))}var pd=SC;n();s();var ld=u(x());function IC({children:o}){let e=Rt().get("from");return ld.default.createElement(Do,{fromAddress:e},o)}var gd=IC;var TC={match:o=>Ka(o),Container:gd,pages:{AddressPage:Gu,AmountPage:rd,ConfirmPage:pd}},Ad=TC;n();s();n();s();var Id=u(x());n();s();var Cd=u(it());go();var xC=()=>{let o=At(),t=qa(),e=gn({factionType:jr});return[o,async r=>(await Promise.all(t.map(m=>{let c=rn(e,m);return Yt(r,m,c)}))).some(Cd.identity)?null:{key:"wallet_manage_crypto_errortip_invalid_address_tips",args:{}}]},Sd=xC;var hC=()=>{let o=Sd();return Id.default.createElement(z,{addressProps:{errorFns:{fns:o,override:!0}}})},Td=hC;n();s();var yd=u(x());n();s();var xd=u(F());co();Po();n();s();var ms=u(x());go();function Ti(){let{baseCoin:o}=S(),t=N(),[e,r]=(0,ms.useState)(!1),i=gn({factionType:jr});return(0,ms.useEffect)(()=>{(async()=>{let m=rn(i,o.coinId),c=await Yt(t,o?.coinId,m);r(!c)})()},[o,t]),e}var yC=async({memo:o,fromAddress:t,toAddress:e,amountInt:r,isIBCTransfer:i,baseCoin:a,signInfo:m})=>{let{chainId:c,sequence:d,accountNumber:g,feeDemon:p,demon:f,sourceChannel:A,normal:C,gasLimit:T}=m,I={chainId:c,sequence:d,accountNumber:g,feeDemon:p,feeAmount:No(C,T),gasLimit:T,memo:o,fake:!0},h={fromAddress:t,toAddress:e,demon:f,amount:r},y={};if(i){let w=no(Math.round(Date.now()/1e3),300);y={...I,type:Ne.IBC_TRANSFER,data:{...h,sourcePort:"transfer",sourceChannel:A,ibcTimeoutTimestamp:w}}}else y={...I,type:Ne.TRANSFER,data:{...h}};return await q().signTransaction(y,t,a.localType)},_C=()=>{let o=(0,xd.useDispatch)(),[t,{setFalse:e}]=To(!0),{coin:r}=S(),{coinId:i}=r,a=_(),m=N(),c=io(),d=Ti();return La(()=>{i&&m&&c!=="0"&&(async()=>{try{let p=await cm({coinId:i,from:a,to:m}),f=await yC({memo:"",fromAddress:a,toAddress:m,amountInt:c,isIBCTransfer:d,baseCoin:r,signInfo:p}),A=await um({coinId:i,from:a,inputData:f}),C=Math.ceil(No(p.normal,A));o(H(C)),o(zn({inputData:f,signInfo:p,gasLimit:A,isIBCTransfer:d})),o(L(!1))}catch{o(L(!0))}finally{e()}})()},[i,a,m,c,d]),t},hd=_C;function FC(){let o=hd();return Q(),yd.default.createElement(Z,{confirmButtonProps:{loading:o}})}var _d=FC;n();s();var Go=u(x());var us=u(F());n();s();var te=u(x()),Fd=u(wt());Y();n();s();var ar={"memo-input":"_memo-input_sef3p_1",memoInput:"_memo-input_sef3p_1","memo-input-box":"_memo-input-box_sef3p_1",memoInputBox:"_memo-input-box_sef3p_1","memo-input-core":"_memo-input-core_sef3p_4",memoInputCore:"_memo-input-core_sef3p_4","memo-title__link":"_memo-title__link_sef3p_7",memoTitleLink:"_memo-title__link_sef3p_7","memo-title__link__dashed":"_memo-title__link__dashed_sef3p_11",memoTitleLinkDashed:"_memo-title__link__dashed_sef3p_11"};var EC=({value:o,onChange:t,placeholder:e,title:r=P("wallet_extension_title_memo_optional"),dashed:i=!0,error:a,errorType:m,maxLength:c=256})=>{let d=Am();return te.default.createElement(Ao,{bordered:!1},te.default.createElement(yr,{title:te.default.createElement(ya,{href:d?.sendMemoInput,className:(0,Fd.default)(ar["memo-title__link"],{[ar["memo-title__link__dashed"]]:i})},te.default.createElement(D.Text,{inherit:!0},r))},te.default.createElement(yt.TextArea,{placeholder:e||P("wallet_extension_input_memoinfro"),size:yt.SIZE.xl,autoResize:!0,value:o,onChange:t,maxLength:c,error:a,errorType:m,className:ar["memo-input"],inputClassName:ar["memo-input-core"],innerClassName:ar["memo-input-box"]})))},ee=(0,te.memo)(EC);n();s();var cs=u(F());co();Po();var PC=o=>{let{coin:t,baseCoin:e}=S(),r=_(),i=io(),a=(0,cs.useSelector)(ro),m=(0,cs.useSelector)(Qo),{gasLimit:c,signInfo:d,isIBCTransfer:g,gasPrice:p}=(0,cs.useSelector)(Kn),f=fo();return uo(async()=>{if(!await Ye())throw new Error("mpc error")},async()=>{let{chainId:h,sequence:y,accountNumber:E,feeDemon:w,demon:k,sourceChannel:v}=d,b={chainId:h,sequence:y,accountNumber:E,feeDemon:w,feeAmount:m,gasLimit:c,memo:o},O={fromAddress:r,toAddress:a,demon:k,amount:i},R={};if(g){let U=no(Math.round(Date.now()/1e3),300);R={...b,type:Ne.IBC_TRANSFER,data:{...O,sourcePort:"transfer",sourceChannel:v,ibcTimeoutTimestamp:U}}}else R={...b,type:Ne.TRANSFER,data:{...O}};return await q().signTransaction(R,r,e.localType)},async h=>{let y={memo:o,gasPrice:p,gasLimit:c},E=await xo(t.localType,h),w={signedTx:h,coinAmount:i,coinId:t.coinId,fromAdr:r,toAdr:a,serviceCharge:m,extJson:JSON.stringify(y),txHash:E};return await f(w)},h=>(eo({tx_id:h}),h))},Ed=PC;n();s();function xi({coinId:o,feeInfo:t,callback:e}){let r=Pn();return{coinId:o,level:t.gasType,loading:!r&&t.initLoading,networkFee:!r&&t.initLoading?void 0:t.gasFee,estimateFailed:r||t.error,onClick:()=>{e()}}}function bC(){let o=(0,us.useDispatch)(),[t,e]=(0,Go.useState)({}),[r,{toggle:i}]=va(!1),{coin:a}=S(),{coinId:m}=a,c=_(),d=N(),g=io(),p=(0,us.useSelector)(Kn),f=xi({coinId:m,feeInfo:t,callback:i}),[A,C]=(0,Go.useState)(""),T=Ed(A),I=async()=>{await T()},h=E=>{C(E.target.value)},y=E=>{e(E),o(H(E.gasFee)),o(L(f.estimateFailed)),o(zn({...p,gasLimit:E.gasAmount,gasPrice:E.gasPriceStep}))};return oo(),Go.default.createElement(Go.default.Fragment,null,Go.default.createElement(X,{confirmButtonProps:{onSubmit:I},slot:{bottom:E=>Go.default.createElement(Go.default.Fragment,null,Go.default.createElement(Ao,null,Go.default.createElement(Lo,{...E})),Go.default.createElement(ee,{value:A,onChange:h}),Go.default.createElement(au,{visible:r,coinId:String(m),address:c,inputData:p.inputData,to:d,value:g,onBack:i,onClose:i,onChange:y}))},networkFeeProps:f}))}var Pd=bC;var kC={match:o=>Ja(o),pages:{AddressPage:Td,AmountPage:_d,ConfirmPage:Pd}},bd=kC;n();s();n();s();var Dd=u(x());n();s();var wC=()=>{let{baseCoin:o}=S();return mo(async t=>{let e=at(t,o.localType);return await Yt(e,o.coinId)?null:{key:"wallet_manage_crypto_errortip_invalid_address_tips",args:{}}})},NC=()=>{let o=At(),t=wC();return[o,t]},kd=NC;n();s();var vd=u(F());n();s();go();var BC=()=>{let o=Im(),t=xm(),e=Tm();return async({coinId:i,from:a,to:m,amount:c,inputData:d,localType:g})=>{let p=[de.SAFE_ADDRESS,de.CONTRACT_ADDRESS];g===$i&&p.push(de.TRON_PERMISSTION);let f=await o({checkTypes:p,coinId:i,from:a,to:m,amount:c,txType:ka.TRANSFER,inputData:d||"0x"}),{result:A,msg:C}=f[de.TRON_PERMISSTION]||{},T=f[de.SAFE_ADDRESS],I={...T,...f[de.CONTRACT_ADDRESS],tronPermission:{msg:C,wrongPermission:!A},address:m};return await e({...T,...T?.blackAddressWarning}),await t(I),I}},mr=BC;n();s();var Nd=u(x()),Bd=u(F());n();s();var wd=({contractAddress:o,toAddress:t,amount:e})=>{try{let r=`data:application/vnd.facet.tx+json;rule=esip6,{"op":"call","data":{"to":"${o}","function":"transfer","args":{"to":"${t}","amount":"${e}"}}}`;return l.Buffer.from(r).toString("hex")}catch{return""}};var vC=()=>{let{coin:o}=S(),t=at(N(),o.localType),e=io(),r=(0,Bd.useSelector)(Xe),{isFacet:i,facetContractAddress:a}=r||{};return(0,Nd.useMemo)(()=>!o.address||!qm(t)?"":i?wd({contractAddress:a,toAddress:t,amount:e}):Ze(t,e),[o,t,e,i,a])},cr=vC;var LC=()=>{let o=(0,vd.useDispatch)(),[t,{setTrue:e,setFalse:r}]=To(!1),{coin:i}=S(),a=_(),m=N(),c=V(),d=cr(),{coinId:g}=i,p=Jt(),f=mr();return{onClick:async()=>{try{e();let C=await f({coinId:g,from:a,to:m,amount:c,inputData:d}),{isDefraud:T,isSimilar:I,blackAddressWarning:h}=C;T?(o(rt(Zo.DEFRAUD)),o(Et(h))):I?(o(rt(Zo.SIMILAR)),o(Et(h))):o(rt("")),p()}catch(C){console.log(C)}finally{r()}},loading:t}},Ld=LC;var DC=()=>{let o=kd(),{onClick:t,loading:e}=Ld();return Dd.default.createElement(z,{addressProps:{errorFns:{fns:o,override:!0}},confirmButtonProps:{onClick:t,loading:e}})},Md=DC;n();s();var hi=u(x()),Wd=u(it());n();s();var Od=u(x()),Rd=u(F());function MC(){let o=(0,Rd.useDispatch)(),{coin:t}=S();(0,Od.useEffect)(()=>{t.systemToken&&o(Wt(t.coinId))},[t.coinId])}var Ud=MC;var OC=()=>{let o=Ge(),e=!!Wm().key||(0,Wd.isNil)(o)||o==="",r=tc(),i=eu({disabled:e,onClick:r});return Q(),Ud(),hi.default.createElement(Z,{slot:{footer:hi.default.createElement(vo,{buttonGroup:i})}})},Gd=OC;n();s();var ge=u(x());var _i=u(F());n();s();var ds=u(F());var RC=()=>{let o=(0,ds.useDispatch)(),t=j(),e=(0,ds.useSelector)($e),{gasLimit:r,gasPrice:i,maxPriorityFeePerGas:a,maxFeePerGas:m,supportEip1559:c,extFee:d,gasPriceInfo:g,gasLimitInfo:p,gasType:f}=e,{minGasFee:A}=_m({gasLimit:r,gasPrice:i,maxPriorityFeePerGas:a,maxFeePerGas:m,supportEip1559:c,extFee:d,gasPriceInfo:g,gasLimitInfo:p,gasType:f});return{feeLevel:f,networkFee:A,maxNetworkFee:t,onClick:()=>{o(Fr(!0))}}},Vd=RC;n();s();var Hd=u(F());var UC=()=>{let o=(0,Hd.useSelector)($e),{coin:t}=S(),e=io(),r=_(),i=N();return{fetchParams:{coinId:t.coinId,from:r,to:i,amount:e,gasPrice:o.gasPrice},userGasInfo:o,baseCoinAmountUse:t.baseCoinId===0?e:"0"}},Kd=UC;n();s();var vr=u(F());Po();Pe();co();FA();n();s();var Jd=u(x());var WC=()=>(0,Jd.useCallback)(o=>{try{typeof o=="string"&&!!o&&eo({tx_id:o})}catch(t){console.log(t)}},[]),fs=WC;var GC=()=>{let o=(0,vr.useDispatch)(),{coin:t}=S(),e=rc(),r=Je(),i=V(),a=Ht(),m=_(),c=N(),d=at(m,t.localType),g=at(c,t.localType),p=Dt(),{activityId:f,activity:A,status:C,tip:T}=qt(),I=cr(),h=(0,vr.useSelector)(Zt),y=(0,vr.useSelector)(Xe),E=fs(),w=(B,U)=>{let{userGasInfo:K}=U,{updateGasInfo:W}=B;return W?{...W,gasLimit:K.gasLimit,supportEip1559:K.supportEip1559,networkFee:K.networkFee}:{...K}},k=B=>{let U=B.supportEip1559?B.maxFeePerGas:B.gasPrice,K=B?.networkFee||No(U,B.gasLimit),W=_t(r,K);if(Bo(W,0))return[!1,i];if(t.baseCoinId===0)return a?[Ko(W,0),W]:[Sr(i,W),i];let so=e;t.systemToken&&(so=_t(so,K));let lo=a?so:i;return[Sr(lo,so),lo]},v=({updateData:B,finallyGasInfo:U,publishAmountInt:K})=>{let{nonce:W}=B,so=K,lo=la(t.localType)?.realChainIdHex,$={from:d,gasLimit:Lt(U.gasLimit),nonce:Lt(W),chainId:lo};return U.supportEip1559?($.maxFeePerGas=Lt(U.maxFeePerGas),$.maxPriorityFeePerGas=Lt(U.maxPriorityFeePerGas),$.type=Pa.FEE_MARKET):$.gasPrice=Lt(U.gasPrice),y?.isFacet?($.value="0",$.to=y?.facetBlackHoleAddress,$.data=I):t.address?($.value="0",$.to=at(t.address,t.localType),$.data=I):($.value=Lt(so),$.to=g,h&&($.data=h)),xa($)},b=({txParams:B,publishAmountInt:U})=>{let K={...B};return t.systemToken&&(K.value=Aa(Lt(U))),K.walletId=p,K},O=({txParams:B,publishAmountInt:U,dataForCheck:K={}})=>{let{userGasInfo:W={}}=K,so=Me(B.value),lo=Me(B.gasLimit),$=Me(W.supportEip1559?B.maxFeePerGas:B.gasPrice),po={...B,value:so,from:m,to:c,gas:lo,gasPrice:$,priorityFee:Me(W.supportEip1559?B.maxPriorityFeePerGas:0),nonce:Me(B.nonce),repeatTxType:Ea.CONFIRMING,oldTxHash:"",gasType:W?.gasType};return{coinId:t.coinId,coinAmount:U,fromAdr:m,toAdr:c,serviceCharge:No(lo,$),extJson:JSON.stringify(po),txSource:Yo.NORMAL,inputData:B.data?B.data:"",activityId:f}};return async(B,U={})=>{let K=w(B,U),[W,so]=k(K);if(!W)throw new Error("balance check error");let lo=v({updateData:B,finallyGasInfo:K,publishAmountInt:so}),$=b({txParams:lo,publishAmountInt:so}),po=O({txParams:lo,publishAmountInt:so,dataForCheck:U});Ca({activityId:f,activity:A,status:C,tip:T,walletId:p,address:d}),await o(Xa({txParams:$,walletId:p}));let Oo=await q().signAndPublishTransferTransaction({signParams:$,from:lo.from,baseChain:da,publishParams:po});E(Oo)}},Yd=GC;n();s();var yi=u(x()),ps=u(F());n();s();var ur={wrapper:"_wrapper_17089_1",root:"_root_17089_4",titleClass:"_titleClass_17089_7",headerClassName:"_headerClassName_17089_10",contentClassName:"_contentClassName_17089_13"};function VC({errorMsg:o}){let t=(0,ps.useDispatch)(),{coin:e}=S(),r=(0,ps.useSelector)(Zt),i=a=>{t(zc(a))};return e.baseCoinId!==0?null:yi.default.createElement(Ao,{className:ur.wrapper},yi.default.createElement(Ic,{className:ur.root,titleClass:ur.titleClass,headerClassName:ur.headerClassName,contentClassName:ur.contentClassName,value:r,onChange:i,error:o,autoResize:!0}))}var qd=VC;var HC=()=>{let o=Vd(),t=Kd(),e=Km(),r=Cc(),i=Yd(),{clear:a}=qt(),m=(0,_i.useSelector)(Zt),c=Dn(m),d=async()=>{try{let p=await r({...t.fetchParams,userGasInfo:t.userGasInfo,baseCoinAmountUse:t.baseCoinAmountUse,whetherCheckRepeat:!0,onRepeatCancel:e});await i(p,t)}catch(p){if(p?.message===Ac)throw new Error(Nn);{let f=p?.data?.originalError;throw Wa(f?.code)&&a?(a(),f):p}}},g=(0,_i.useSelector)(or);return oo(),ge.default.createElement(X,{slot:{bottom:p=>ge.default.createElement(ge.default.Fragment,null,ge.default.createElement(qd,{errorMsg:c}),ge.default.createElement(Ao,null,ge.default.createElement(Lo,{...p})))},networkFeeProps:o,confirmButtonProps:{disabled:!!c,onSubmit:d},blockAddressInfo:g})},Zd=HC;n();s();var nt=u(x()),re=u(F()),$d=u(bo());n();s();var zd=u(F());function KC(){let{coin:o}=S(),t=_(),e=Gm(),r=(0,zd.useSelector)($e);return gm({txType:Ua.transfer,coinId:o.coinId,fromAddress:t,unavailable:r.gasType===Ft.CUSTOM,fee:e})}var Xd=KC;var JC=(0,nt.memo)(()=>{let o=(0,re.useDispatch)(),t=(0,$d.useHistory)(),e=(0,nt.useRef)(!1),r=(0,nt.useRef)(!1),i=(0,re.useSelector)(gt),a=(0,re.useSelector)(Dc),m=(0,re.useSelector)(lt),{coin:c}=S(),d=_(),g=N(),p=at(d,c.localType),f=at(g,c.localType),A=cr(),C=(0,re.useSelector)(Zt),T=c.baseCoinId===0?C:A,I=V(),h=ot(),y=kn(),E=(0,re.useSelector)(Xe),{isFacet:w,facetBlackHoleAddress:k}=E||{},{disabled:v,fetchOnce:b}=(0,nt.useMemo)(()=>{let po=null,Oo=c.baseCoinId===0&&Dn(C);return i&&(c.baseCoinId!==0||!Oo)&&(po=+new Date),{disabled:Oo||y,fetchOnce:po}},[c.baseCoinId,C,y,i]),O=qt(),R=(0,nt.useMemo)(()=>w?k:c.baseCoinId===0?f:c.address,[c.baseCoinId,c.address,f,w,k]),B=()=>{e.current||r.current?o(L(!0)):o(L(!1))},U=mo(po=>{o(qc(po?.signInfo||{}))}),K=mo(po=>{o(Zc(po)),o(ho(po?.isNetworkFeeLoading));let Oo=po.supportEip1559?po.maxFeePerGas:po.gasPrice,he=po.networkFee;Oo==="0"?r.current=!0:r.current=!1,po?.gasLimitInfo?.queryGasLimitErrorUseDefault?e.current=!0:e.current=!1,o(H(he)),B()}),W=()=>{o(Fr(!1))},so=()=>{o(Fr(!1)),t.push(m||mn)},lo=()=>{e.current=!1},$=()=>{e.current=!0};return nt.default.createElement(Fm,{currencyId:h,visible:a,coinId:c.coinId,address:p,inputData:T,tokenAddress:R,value:c.address?"0":I,gasLimitOptions:{fetchOnce:b,disabled:v,onFetchSuccess:lo,onFetchError:$},estimatedL1FeeOptions:{fetchOnce:b,disabled:v},onBack:W,onClose:so,onServerDataChange:U,onGasChange:K,gasReturn:O})}),YC=({children:o})=>{let t=Xd();return nt.default.createElement(Pc,{gasReturn:t},o,nt.default.createElement(JC,null))},jd=YC;var qC={match:o=>Ha(o),Container:jd,pages:{AddressPage:Md,AmountPage:Gd,ConfirmPage:Zd}},Qd=qC;n();s();n();s();var nf=u(x()),sf=u(F());Y();n();s();var Lr=u(x()),ls=u(F());co();var of=()=>{let{toRent:o}=(0,ls.useSelector)(_r),{coin:t}=S(),e=Ct();return(0,Lr.useCallback)(r=>{if(t.baseCoinId!==0)return null;let i=So(o,10**t.decimals);return Bo(r,i)?{key:"walletextension_toast_text_minimum_rent_fee",args:{number:i},type:to.COMMON_ERROR}:null},[e,o])},tf=()=>{let{selfRent:o,toRent:t}=(0,ls.useSelector)(_r),{coin:e,baseCoin:r}=S(),i=(0,ls.useSelector)(Qo),a=Je();return(0,Lr.useCallback)(()=>{if(e.baseCoinId===0)return null;let m=no(i,o);return Bo(a,m)?{key:"walletextension_toast_text_insufficient_balance_initiate_transaction",args:{token:r.symbol,number:So(m,10**r.decimals)},type:to.COMMON_ERROR}:Bo(a,no(m,t))?{key:"walletextension_toast_text_reserve_rent_exempt",args:{number:So(no(m,t),10**r.decimals)},type:to.COMMON_ERROR}:null},[a,i,o])},ef=()=>{let o=of(),t=tf();Q([o,t])},ZC=()=>{let o=of();return(0,Lr.useCallback)(t=>{let e=o(t);return e?{...e,highlight:pe.AMOUNT}:null},[o])},zC=()=>{let o=tf();return(0,Lr.useCallback)(t=>{let e=o(t);return e?{...e,highlight:pe.AMOUNT}:null},[o])},rf=()=>{let o=ZC(),t=zC();oo([o,t])};function XC(){let o=(0,sf.useSelector)(Un);return ef(),nf.default.createElement(Z,{totalAmountProps:{title:P("extension_wallet_send_text_transfer_available"),type:"amount"},confirmButtonProps:{loading:o}})}var af=XC;n();s();var ne=u(x()),Pi=u(F());n();s();Y();Pe();var Vo={JITO:"jito",PRIORITY_FEE:"priorityFee"},Fi="speedUpMode";function mf(o){let t=_e.get(Fi);return t?typeof t=="string"&&(t={[fa]:t}):t={},t[o]||Vo.PRIORITY_FEE}function cf(o,t){let e=_e.get(Fi);_e.set(Fi,{...e||{},[o]:t})}var uf="jitoGuide";function df(){return!!_e.get(uf)}function ff(){_e.set(uf,"1")}n();s();var _o=u(x()),ct=u(F());Y();n();s();var Dr={title:"_title_1eu6y_1",tip:"_tip_1eu6y_4",tipDetail:"_tipDetail_1eu6y_11"};var $C=_o.default.memo(({jitoGuide:o})=>{let t=(0,ct.useDispatch)(),e=(0,ct.useSelector)(zt),r=i=>{t(Yn(i))};return _o.default.createElement(Xi,{mask:!0,show:!o,title:P("wallet_extension_transfer_tooltips_title_express_mode"),description:P("wallet_extension_transfer_tooltips_tips_express_mode"),autoEdgeSpacing:16},_o.default.createElement(Ee.Segmented,{className:Dr.modeSwitch,color:Ee.COLOR.grey,size:Ee.SIZE.xs,average:!0,hideContent:!0,activeId:e,onChange:r},_o.default.createElement(Ee.TabPane,{tab:P("wallet_extension_transfer_tab_standard"),id:Vo.PRIORITY_FEE}),_o.default.createElement(Ee.TabPane,{tab:P("wallet_extension_transfer_tab_express"),id:Vo.JITO})))}),jC=()=>{let{baseCoin:o}=S(),t=(0,ct.useSelector)(Xt),e=(0,ct.useSelector)(Wn),{fee:r="0"}=t||{},{priorityFee:i}=e,a=Tr(r,{decimals:o.decimals,type:D.CRYPTO}),m=Tr(i||"0",{decimals:o.decimals,type:D.CRYPTO});return _o.default.createElement(_o.default.Fragment,null,P("wallet_extension_gas_base_priority_fee",{gas:a,gasfee:m}))},QC=()=>{let{baseCoin:o}=S(),t=(0,ct.useSelector)(Xt),e=(0,ct.useSelector)(Gn),{fee:r}=t||{},{totalJitoFee:i}=e||{},a=Tr(r||"0",{decimals:o.decimals,type:D.CRYPTO}),m=Tr(i||"0",{decimals:o.decimals,type:D.CRYPTO});return _o.default.createElement(_o.default.Fragment,null,P("wallet_extension_transfer_tooltips_desc_plus",{amount:a,num:m}),_o.default.createElement("div",{className:Dr.tipDetail},P("wallet_extension_transfer_tooltips_desc_express_mode")))},oS=_o.default.memo(()=>{let o=(0,ct.useSelector)(zt);return _o.default.createElement("div",{className:Dr.tip},o===Vo.JITO?_o.default.createElement(QC,null):_o.default.createElement(jC,null))});function tS({jitoGuide:o,...t}){let e=(0,ct.useSelector)(zt),r=(0,ct.useSelector)(Xt),i=e===Vo.JITO?P("wallet_extension_transfer_express_mode"):P("wallet_extension_transfer_standard_mode");return _o.default.createElement(Ao,null,_o.default.createElement(Lo,{...t,titleClassName:Dr.title,titleAction:r?.supportJito&&_o.default.createElement($C,{jitoGuide:o}),level:i},_o.default.createElement(oS,null)))}var pf=tS;n();s();var Ae=u(F());go();var eS=()=>{let o=fo(),{coin:t}=S(),e=_(),r=(0,Ae.useSelector)(zo),i=(0,Ae.useSelector)(ro),a=io(),m=(0,Ae.useSelector)(Qo),{computeUnitPrice:c,computeUnitLimit:d}=(0,Ae.useSelector)(Wn),g=(0,Ae.useSelector)(zt),p=(0,Ae.useSelector)(Gn),f=pt({fromAddr:e,localType:$r,walletId:r}),{coinId:A}=t,C=async()=>await em({coinId:A,address:e},{fromAddr:e,toAddr:i}),T=async()=>{if(t.baseCoinId===0||!i)return{haveTokenAccountAddress:!1,tokenAccountAddress:""};let b={coinId:A,address:i},{data:O={}}=await rm(b),{legal:R,tokenAccountAddress:B}=O;return{haveTokenAccountAddress:R,tokenAccountAddress:B}},I=async()=>{let[b,{haveTokenAccountAddress:O,tokenAccountAddress:R}]=await Promise.all([C(),T()]);return{recentBlockHash:b,haveTokenAccountAddress:O,tokenAccountAddress:R}},h=async b=>{let{recentBlockHash:O,haveTokenAccountAddress:R}=b,B={from:e,to:i,amount:a,blockHash:O,payer:e};g===Vo.PRIORITY_FEE&&(B={...B,computeUnitPrice:c,computeUnitLimit:d});let U;return t.baseCoinId===0?U={...B,type:nn.TRANSFER}:U={...B,type:nn.TOKEN_TRANSFER,createAssociatedAddress:!R,mint:t.address},t.protocolType===xr.SPL_TOKEN_2022&&(U.token2022=!0,U.decimal=t.decimals),await f({params:U})},y=async b=>{if(g!==Vo.JITO||!p)return null;let{recentBlockHash:O}=b,{tipAccountAddress:R,clientGasPrice:B}=p,U={from:e,to:R,amount:B,blockHash:O,payer:e,type:nn.TRANSFER};return await f({params:U})};return uo(I,async(b={})=>{let O=await h(b),R=await y(b);return{rawSignedTx:O,jitoSignedTx:R}},async({rawSignedTx:b,jitoSignedTx:O})=>{let R=await xo($r,b),B=b,U;g===Vo.JITO&&O&&(B=JSON.stringify([b,O]),U=JSON.stringify({mev:"Jito",jitoHash:await xo($r,O)}));let K={signedTx:B,coinAmount:a,coinId:t.coinId,fromAdr:e,toAdr:i,serviceCharge:m,txHash:R,extJson:U},W=await o(K);return cf(t.localType,g),W},b=>(eo({tx_id:b}),b))},lf=eS;n();s();var Ei={root:"_root_6mjwc_1",contentJitoGuide:"_contentJitoGuide_6mjwc_4"};function rS(){let o=(0,Pi.useSelector)(Un),t=Bt(o,{wait:200}),e=(0,Pi.useSelector)(Xt),[r,i]=(0,ne.useState)(!0),a=lf(),m=async()=>{o||await a()};return rf(),(0,ne.useEffect)(()=>{if(e?.supportJito){let c=df();i(c),c||ff()}},[e?.supportJito]),ne.default.createElement("div",{className:Ei.root,onClick:()=>{i(!0)}},ne.default.createElement(X,{tipMessageProps:{hidden:o},containerProps:{contentClassName:r?"":Ei.contentJitoGuide},slot:{bottom:c=>ne.default.createElement(pf,{...c,jitoGuide:r})},confirmButtonProps:{disabled:t,onSubmit:m}}))}var gf=rS;n();s();n();s();var Af=u(F());function nS(){let o=(0,Af.useDispatch)(),{coin:t}=S();ft(()=>{o(Yn(mf(t.localType)))})}var Cf=nS;n();s();var hf=u(x());co();var yf=u(F());n();s();var bt=u(x()),se=u(F());var Sf=u(bA());co();function sS(){let o=(0,se.useDispatch)(),t=_(),{baseCoin:e}=S(),r=(0,bt.useRef)(null),i=(0,bt.useRef)(!1),[a,m]=(0,bt.useState)("0"),c=async p=>{if(!i.current){try{let f=await nm({from:t,chainId:e.chainId}),{clientGasPrice:A}=f||{},C=no(A||"0",p?.fee||"0");m(C),o(qn({...f,totalJitoFee:C})),o(L(!1))}catch{m("0"),o(qn(null)),o(L(!0))}finally{o(Er(!1))}r.current=setTimeout(()=>{c(p)},7e3)}};return[a,p=>{i.current=!1,c(p)},()=>{clearTimeout(r.current),i.current=!0,r.current=null,m("0"),o(qn(null))}]}function iS(){let o=(0,se.useDispatch)(),t=bc(),e=_(),{coin:r,baseCoin:i}=S(),{coinId:a}=r,[m,c]=(0,bt.useState)("0"),d=()=>{c("0"),o(Jn({priorityFee:"",computeUnitPrice:"",computeUnitLimit:""})),o(L(!0))};return[m,async f=>{try{let{firstUnitLimit:A}=await t({coinId:a,from:e,chainId:i.chainId});if((0,Sf.default)(A)){d();return}let{computeUnitPrice:C,feelimit:T}=f,{priorityFee:I,priorityGasPrice:h,priorityGasLimit:y}=Fc(T,C,A);c(I),o(Jn({priorityFee:I,computeUnitPrice:h||"",computeUnitLimit:y||""})),o(L(!1))}catch{d()}finally{o(Er(!1))}},()=>{c("0"),o(Jn({priorityFee:"",computeUnitPrice:"",computeUnitLimit:""}))}]}function aS(){let o=(0,se.useDispatch)(),t=(0,se.useSelector)(zt),e=(0,se.useSelector)(Xt),r=(0,se.useSelector)(km),i=Ba(r),[a,m,c]=sS(),[d,g,p]=iS();return(0,bt.useEffect)(()=>{i.current?o(Er(!1)):o(Er(!0))},[t]),(0,bt.useEffect)(()=>(!e||!t||(t===Vo.PRIORITY_FEE?g(e):m(e)),()=>{c(),p()}),[e,t]),{speedUpFee:t===Vo.PRIORITY_FEE?d:a}}var If=aS;n();s();var gs=u(x()),Tf=u(F());function mS(){let o=(0,Tf.useDispatch)(),[t,e]=(0,gs.useState)(null),{coin:r}=S(),i=_(),a=N(),{coinId:m}=r;return(0,gs.useEffect)(()=>{m&&i&&a&&(async()=>{try{let{data:d}=await Oe({coinId:m,address:i},{fromAddr:i,toAddr:a}),{info:g}=d||{},{fee:p}=g||{};o(L(!p)),o(ui(g)),e(g)}catch{o(L(!0)),o(ui(null)),e(null)}})()},[m,i,a]),{baseFee:t?.fee||"0"}}var xf=mS;function cS(){let o=(0,yf.useDispatch)(),{baseFee:t}=xf(),{speedUpFee:e}=If();(0,hf.useEffect)(()=>{o(H(no(t,e)))},[t,e])}var _f=cS;n();s();var As=u(F());var Ff=u(x());co();function uS(){let o=(0,As.useDispatch)(),{coin:t}=S(),{selfRent:e}=(0,As.useSelector)(_r),r=He();(0,Ff.useEffect)(()=>{(()=>{if(!!t)if(t.baseCoinId===0){let i=_t(r||"0",e||"0");o(Ro(Ko(i,"0")?i:"0"))}else o(Ro(null))})()},[t,e,r])}var Ef=uS;function dS({children:o}){return Cf(),_f(),Ef(),o}var Pf=dS;var fS={match:o=>za(o),Container:Pf,pages:{AddressPage:z,AmountPage:af,ConfirmPage:gf}},bf=fS;n();s();Pe();n();s();var Mf=u(x());n();s();var kf=u(F());n();s();var Ss=u(x()),Cs=u(F());var pS=()=>{let o=(0,Cs.useSelector)(ze),t=(0,Cs.useSelector)(ro),e=V(),r=(0,Cs.useSelector)(xn),i=!t||!!r.key,[a,m]=(0,Ss.useState)("");return(0,Ss.useEffect)(()=>{(async()=>{if(!i)try{let d=await dn(t);m(o?Ze(d,e):"")}catch(d){console.log(d)}})()},[o,i,t,e]),a},Is=pS;var lS=()=>{let o=(0,kf.useDispatch)(),[t,{setTrue:e,setFalse:r}]=To(!1),{coin:i}=S(),a=_(),m=N(),c=V(),d=Is(),{coinId:g,localType:p}=i,f=Jt(),A=mr();return{onClick:async()=>{try{e();let T=await A({coinId:g,from:a,to:m,amount:c,inputData:d,localType:p}),{isDefraud:I,isSimilar:h,tronPermission:y,blackAddressWarning:E}=T;y&&y.wrongPermission?o(Kc({wrongPermission:y.wrongPermission,msg:y.msg})):I?(o(rt(Zo.DEFRAUD)),o(Et(E))):h?(o(rt(Zo.SIMILAR)),o(Et(E))):o(rt("")),f()}catch(T){console.log(T)}finally{r()}},loading:t}},wf=lS;n();s();var Nf=u(x()),Bf=u(F());Pe();var gS=()=>{let[o,{setFalse:t}]=To(!0),{coin:e}=S(),r=_(),i=(0,Bf.useDispatch)(),{coinId:a}=e;return(0,Nf.useEffect)(()=>{(async()=>{if(Number(a)!==Qr){let d=await sm({coinId:a,address:r});i(Vc(d))}t()})()},[a,r]),o},vf=gS;n();s();var Lf=u(x());function AS(){let o=_();return(0,Lf.useCallback)(t=>t===o?{key:"wallet_extension_send_error_receive_equal_send_address",args:{}}:null,[o])}function CS(){return[AS()]}var Df=CS;var SS=()=>{let o=vf(),{onClick:t,loading:e}=wf(),r=Df();return Mf.default.createElement(z,{addressProps:{errorFns:r},confirmButtonProps:{onClick:t,loading:e||o}})},Of=SS;n();s();var Uf=u(x());n();s();var bi=u(x()),Mr=u(F());var IS=()=>{let[o,{setTrue:t,setFalse:e}]=To(!1),r=(0,Mr.useDispatch)(),i=N(),a=(0,Mr.useSelector)(ze),m=(0,Mr.useSelector)(gt),c=V(),d=vt(c),g=Cm(),{coin:p}=S(),f=Is(),{coinId:A}=p,C=async()=>{let I=a?"0":c,h={coinId:A,address:g},y={fromAddr:g,value:I,toAddr:i,inputData:f};try{let E=await am(h,y);r(H(E)),r(L(!1))}catch{r(L(!0))}finally{e()}},{run:T}=Xo(C,{wait:500});return(0,bi.useEffect)(()=>{m&&(t(),T())},[m]),(0,bi.useEffect)(()=>{m&&c!==d||(t(),T())},[c,f,m]),o},Rf=IS;var TS=()=>{let o=Rf();return Q(),Uf.default.createElement(Z,{confirmButtonProps:{loading:o}})},Wf=TS;n();s();var Jf=u(x());var Yf=u(F());n();s();var Gf=u(x()),Vf=u(F());function xS(o,t){return(0,Gf.useCallback)(()=>o?{text:t,type:to.COMMON_ERROR}:null,[o,t])}function ki(){let o=oc(),t=(0,Vf.useSelector)(vc),e=xS(t.wrongPermission,t.msg);oo({fns:[e,...o],override:!0})}n();s();var Or=u(F()),Hf=u(EA());Pe();var hS=()=>{let o=fo(),{coin:t}=S(),e=_(),r=(0,Or.useSelector)(ro),i=(0,Or.useSelector)(Qo),a=(0,Or.useSelector)(ze),m=V(),c=(0,Or.useSelector)(zo),d=pt({fromAddr:e,localType:ti,walletId:c});return uo(async()=>{if(!await Ye())throw new Error("mpc error")},async()=>{let T=a?"0":m,I=await dn(r),h=a?Ze(I,m):"",y={coinId:t.coinId,address:e};return await im(y,{fromAddr:e,toAddr:r,value:T,inputData:h})},async(T={})=>{let{info:I={}}=T,{timestamp:h,expiration:y,ref_block_bytes:E,ref_block_hash:w,feelimit:k,contractAddress:v,asset:b}=I,O={fromAddress:e,toAddress:r,amount:m,timestamp:h,expiration:y,refBlockBytes:E,refBlockHash:w},R={};return t.baseCoinId===0?R={type:Nt.TRANSFER,data:O}:a?R={type:Nt.TOKEN_TRANSFER,data:{...O,feeLimit:k,contractAddress:v}}:R={type:Nt.ASSET_TRANSFER,data:{...O,assetName:(0,Hf.bufferToHex)(l.Buffer.from(b))}},await d({params:R})},async T=>{let I=await xo(ti,T),h={signedTx:T,coinAmount:m,coinId:t.coinId,fromAdr:e,toAdr:r,serviceCharge:i,txHash:I};return await o(h)},T=>(eo({tx_id:T}),T))},Kf=hS;function yS(){let o=Kf(),t=async()=>{await o()},e=(0,Yf.useSelector)(or);return ki(),Jf.default.createElement(X,{confirmButtonProps:{onSubmit:t},blockAddressInfo:e})}var qf=yS;var _S={match:o=>o===Qr,pages:{AddressPage:Of,AmountPage:Wf,ConfirmPage:qf}},Zf=_S;n();s();n();s();var ys=u(x());n();s();var $f=u(x());var hs=u(F());var jf=u(it());n();s();var zf=u(bo());var Xf=u(F());function FS(){let{coinId:o}=(0,zf.useParams)(),t=_(),e=(0,Xf.useSelector)(ro);return mo(async()=>(await Oe({coinId:o,address:t},{fromAddr:t,toAddr:e,value:"0"}))?.data)}var Ts=FS;n();s();co();function ES(){let o=fm();return(t,e,r)=>{let i=e||0,a=Ko(r,0)?So(i,r):"0",m=o[t];return on(No(a,10**(m.decimals||0)),0)}}var xs=ES;function PS(){let o=(0,hs.useDispatch)(),[t,e]=(0,$f.useState)(!1),r=(0,hs.useSelector)(bm),i=Ts(),a=ec(),m=xs();return ft(()=>{e(!0),(async()=>{try{let g=(await i())?.info||{},p={};if(r!==-1)p=(g?.coinFeeList||[]).find(({coinId:A})=>A===r);else{let A=(0,jf.sortBy)(g?.coinFeeList||[],C=>a(C.coinId).currencyAmount||0);A&&(p=A.pop())}let f=m(p?.coinId,g?.methodFeeList?.transfer,p?.rate);o(Wt(p?.coinId)),o(H(f)),o(Hc(g))}finally{e(!1)}})()}),t}var Qf=PS;function bS(){let o=Qf();return Q(),ys.default.createElement(Z,{confirmButtonProps:{loading:o}})}function kS(){let{coin:o}=S();return ys.default.createElement(Do,{fixed:!!o.vdecimalNum},ys.default.createElement(bS,null))}var op=kS;n();s();var Ce=u(x());n();s();var tp=u(F());Po();go();function wS(){let o=fo(),{coin:t}=S(),e=_(),r=(0,tp.useSelector)(ro),i=j(),a=Kt(),m=io(),c=Ts(),{coin:d}=Cn(a,!1);return uo(c,async(f={})=>{let{info:A={}}=f,{chainId:C,accountId:T,nonce:I,tokenId:h,coinFeeList:y=[]}=A,E=y.find(({coinId:v})=>v===a)||{},w={type:Nt.TRANSFER,accountId:parseInt(T,10),nonce:I,from:e,chainId:C,to:r,tokenId:parseInt(h,10),tokenSymbol:t.symbol,decimals:t.decimals,feeTokenId:parseInt(E.tokenId,10),feeTokenSymbol:d.symbol,feeDecimals:d.decimals,fee:i,amounts:m};return await q().signTransaction(w,e,ji)},async f=>{let{signature:A,tx:C}=f||{},{txHash:T,...I}=C||{},h={txSource:Yo.NORMAL,signedTx:JSON.stringify({fastProcessing:null,signature:A,tx:I}),fromAdr:e,coinAmount:m,coinId:t.coinId,toAdr:r,serviceCharge:f?.tx?.fee,txHash:T,extJson:JSON.stringify({serviceChargeCoinId:a})};return await o(h)})}var ep=wS;n();s();var ko=u(x()),rp=u(wt());Y();var _s=u(F());n();s();var dr={"select-networkFee":"_select-networkFee_ct2da_1",selectNetworkFee:"_select-networkFee_ct2da_1","select-networkFee-content":"_select-networkFee-content_ct2da_4",selectNetworkFeeContent:"_select-networkFee-content_ct2da_4","select-networkFee-title":"_select-networkFee-title_ct2da_7",selectNetworkFeeTitle:"_select-networkFee-title_ct2da_7","select-networkFee-card-content":"_select-networkFee-card-content_ct2da_13",selectNetworkFeeCardContent:"_select-networkFee-card-content_ct2da_13","select-networkFee-card-content-disable":"_select-networkFee-card-content-disable_ct2da_16",selectNetworkFeeCardContentDisable:"_select-networkFee-card-content-disable_ct2da_16"};var NS=({coinId:o,feeCoinAmountInt:t,selectedCoinId:e,onSelect:r,setSupplyGas:i,...a})=>{let m=Re(o),c=m?.coinAmountInt,d=G.gte(c,t);return ko.default.createElement(ni.Card,{hovered:d,onClick:()=>{d&&r?.({coinId:o,feeCoinAmountInt:t})},selected:o===e},ko.default.createElement(J.Space,{space:12,className:(0,rp.default)(dr["select-networkFee-card-content"],{[dr["select-networkFee-card-content-disable"]]:!d})},ko.default.createElement(ve,{size:ve.SIZE.lg,src:m?.image,text:m?.text}),ko.default.createElement(J.Space,{space:2,direction:J.DIRECTION.vertical,...a},ko.default.createElement(D.Text,{strong:!0},m?.symbol),ko.default.createElement(D.Text,{size:D.SIZE.xs,type:D.TYPE.secondary},d?P("developer_mode_send_text_balanceprice",{balance:ue(c,{decimals:m?.decimals,useApproximate:!1})}):P("wallet_extension_placeorder_tooltips_insufficient",{token:m?.symbol})))),!d&&ko.default.createElement(wo,{category:wo.CATEGORY.fill,type:wo.TYPE.gray,size:wo.SIZE.xxs,onClick:g=>{g?.stopPropagation(),i({supplyGasVisible:!0,supplyGasCoinId:o})}},P("extension_send_btn_fill_up_token",{token:m?.symbol})))},BS=({visible:o,onToggle:t})=>{let e=Kt(),r=(0,_s.useDispatch)(),i=_(),a=Dt(),m=xs(),[{supplyGasVisible:c,supplyGasCoinId:d},g]=Da({supplyGasVisible:!1,supplyGasCoinId:null}),p=(0,_s.useSelector)(Lc),f=p?.coinFeeList||[],A=p?.methodFeeList?.transfer,C=Le(()=>f.map(({rate:h,coinId:y})=>{let E=m(y,A,h);return{coinId:y,feeCoinAmountInt:E}}),[f,A]),T=({coinId:h,feeCoinAmountInt:y})=>{t?.(),r(Wt(h)),r(H(y))},I=({coinId:h,feeCoinAmountInt:y})=>ko.default.createElement(NS,{coinId:h,selectedCoinId:e,feeCoinAmountInt:y,onSelect:T,setSupplyGas:g});return o?ko.default.createElement(J.Portal,{component:J.Container,className:dr["select-networkFee"]},ko.default.createElement(tm,{onBack:t,onClose:t,title:P("wallet_transfer_subtitle_network_fee")}),ko.default.createElement(J.Box,{className:dr["select-networkFee-content"]},ko.default.createElement(D.Text,{className:dr["select-networkFee-title"]},P("wallet_extension_send_alert_choose_token")),ko.default.createElement(ni,{space:16,dataSource:C,renderItem:I})),ko.default.createElement(In,{walletId:a,address:i,visible:c,closeCallback:()=>{g({supplyGasVisible:!1})},coinId:d,receiveOnly:!0})):null},np=BS;function vS(){let[o,{toggle:t}]=To(!1),e=ep(),r=async()=>{await e()};return oo(),Ce.default.createElement(Ce.default.Fragment,null,Ce.default.createElement(X,{networkFeeProps:{onClick:t,feeLevel:!1},confirmButtonProps:{onSubmit:r}}),Ce.default.createElement(np,{visible:o,onToggle:t}))}function LS(){let{coin:o}=S();return Ce.default.createElement(Do,{fixed:!!o.vdecimalNum},Ce.default.createElement(vS,null))}var sp=LS;var DS={match:o=>Za(o),pages:{AddressPage:z,AmountPage:op,ConfirmPage:sp}},ip=DS;n();s();go();n();s();var Es=u(x());n();s();var ap=u(x());var Fs=u(F());function MS(){let o=(0,Fs.useDispatch)(),{coin:t}=S(),e=_(),r=(0,Fs.useSelector)(ro),i=Ec(),[a,m]=(0,ap.useState)(!1);return ft(()=>{m(!0),(async()=>{let d={coinId:t.coinId,address:e},g={fromAddr:e,toAddr:r,value:"0"};try{let p=await i("Transfer",d,g);if(p){let{info:f,feeCoin:A,fee:C}=p;o(Xc({info:f,feeCoin:A})),o(Wt(A.coinId)),o(H(C)),o(L(!1))}}catch{o(L(!0))}finally{m(!1)}})()}),a}var mp=MS;n();s();var cp=u(x());Y();co();function wi(){let{coin:o}=S();return(0,cp.useCallback)(async t=>{let{ZksyncWallet:e}=await Ir(),r=No(t,10**o.decimals),i=await e.getCloseAmounts(r);return ke(i,r)?null:{key:"wallet_extenshion_max_amount_no_large_than",args:{amount:G.showFloorTruncation(So(i,10**o.decimals),o.decimals,!1),symbol:o.symbol},type:to.COMMON_ERROR}},[])}function OS(){let t=[wi()];Q(t)}var up=OS;function RS(){let o=mp();return up(),Es.default.createElement(Z,{confirmButtonProps:{loading:o}})}function US(){let{coin:o}=S();return Es.default.createElement(Do,{fixed:!!o.vdecimalNum},Es.default.createElement(RS,null))}var dp=US;n();s();var Ps=u(x());n();s();var Ni=u(F());Po();go();function WS(){let o=fo(),{coin:t}=S(),e=_(),r=(0,Ni.useSelector)(ro),i=j(),a=Kt(),m=V(),c=(0,Ni.useSelector)(Mc),d=async()=>{let{info:p,feeCoin:f}=c||{},{accountId:A,nonce:C}=p||{},T={type:Nt.TRANSFER,from:e,to:r,accountId:parseInt(A,10),tokenId:parseInt(f?.tokenId,10),tokenSymbol:f?.originSymbol,amounts:m,fees:i,decimals:t.decimals,nonce:parseInt(C,10)};return await q().signTransaction(T,e,Qi)},g=async p=>{if(p?.code)throw new Error(Nn);let{signature:f,tx:A}=p||{},{txHash:C,...T}=A||{},I={txSource:Yo.NORMAL,signedTx:JSON.stringify({signature:f,tx:T}),fromAdr:e,serviceCharge:A?.fee,toAdr:A?.to,coinAmount:m,coinId:t.coinId,txHash:C,extJson:JSON.stringify({serviceChargeCoinId:a})};return await o(I)};return async()=>{let p=await d();return g(p)}}var fp=WS;n();s();var pp=u(x());function GS(){let o=wi();return(0,pp.useCallback)(async t=>{let e=await o(t);return e?{...e,highlight:pe.AMOUNT}:null},[o])}function VS(){let t=[GS()];oo(t)}var lp=VS;function HS(){let o=fp(),t=async()=>o();return lp(),Ps.default.createElement(X,{confirmButtonProps:{onSubmit:t}})}function KS(){let{coin:o}=S();return Ps.default.createElement(Do,{fixed:!!o.vdecimalNum},Ps.default.createElement(HS,null))}var gp=KS;var JS={match:o=>o===ea,pages:{AddressPage:z,AmountPage:dp,ConfirmPage:gp}},Ap=JS;n();s();go();n();s();var Ip=u(x());n();s();var Se=u(x()),ks=u(F());n();s();function YS(){let{coin:o}=S(),t=_();return async({value:e,to:r,signInfo:i})=>{let{gasPrice:a,inputCoins:m=[],tokenInputCoins:c=[],budget:d}=i||{},g=m.map((A={})=>{let{digest:C,version:T,objectId:I}=A;return{digest:C,version:T,objectId:I}}),p=new yc;if(p.setGasPrice(a),p.setGasPayment(g||[]),p.setSender(t),d&&p.setGasBudget(d),o.baseCoinId===0){let A=p.splitCoins(p.gas,[p.pure(e)]);p.transferObjects([A],p.pure(r))}else if(c.length>1){let A=c.slice(1).map(I=>p.object(I.objectId)),C=p.object(c[0].objectId);p.mergeCoins(C,A);let T=p.splitCoins(C,[p.pure(e)]);p.transferObjects([T],p.pure(r))}else{let A=p.splitCoins(p.object(c[0].objectId),[p.pure(e)]);p.transferObjects([A],p.pure(r))}let f=hc(await p.build({client:mu}));return{tx:p,txBytes:f}}}var bs=YS;n();s();function qS(){let{coin:o}=S(),t=_(),e=o.coinId;return async({to:r,value:i})=>(await Mt({address:t,coinId:e},{fromAddr:t,toAddr:r,value:i})).info||{}}var Cp=qS;function Sp(){let o=(0,ks.useDispatch)(),t=(0,ks.useSelector)(gt),{coin:e}=S(),r=_(),i=V(),a=N(),{coinId:m}=e,[c,d]=(0,Se.useState)(!1),g=(0,Se.useRef)(0),p=Cp(),f=bs(),A=vt(i),{run:C}=Xo(async()=>{g.current++;try{o(L(!1));let T={value:i,to:a},I=await p(T),y=(await f({...T,signInfo:I}))?.tx?.blockData?.gasConfig?.budget||"0";o($c(I)),o(H(y))}catch{o(L(!0))}finally{g.current--,g.current===0&&d(!1)}},{wait:300});return(0,Se.useEffect)(()=>{t&&(d(!0),C())},[t]),(0,Se.useEffect)(()=>{t&&i!==A||(d(!0),C())},[m,r,a,i,t]),c}function ZS(){let o=Sp();return Q(),Ip.default.createElement(Z,{confirmButtonProps:{loading:o}})}var Tp=ZS;n();s();var hp=u(x());n();s();var Bi=u(F());go();Po();var xp=()=>{let o=fo(),{coin:t}=S(),e=_(),r=io(),i=(0,Bi.useSelector)(ro),a=(0,Bi.useSelector)(Oc),m=j(),c=bs();return uo(async()=>await c({value:r,to:i,signInfo:{...a||{},budget:m}}),async({tx:C,txBytes:T})=>{let I={type:"raw",data:T},h=await q().signTransaction(I,e,oa);return{tx:C,txBytes:T,signedTx:h}},async({tx:C,txBytes:T,signedTx:I}={})=>{let{signature:h,hash:y}=I||{},E={signedTx:{request_type:"WaitForEffectsCert",tx_bytes:T,signatures:[h]},coinAmount:r,coinId:t.coinId,fromAdr:e,toAdr:i,serviceCharge:C?.blockData?.gasConfig?.budget||"0",txHash:y};return await o(E)},C=>(eo({tx_id:C}),C))};function zS(){let o=xp(),t=async()=>{await o()};return oo(),hp.default.createElement(X,{confirmButtonProps:{onSubmit:t}})}var yp=zS;var XS={match:o=>o===ra,pages:{AddressPage:z,AmountPage:Tp,ConfirmPage:yp}},_p=XS;n();s();go();n();s();var Ep=u(x()),ws=u(bo());n();s();function Tt(){return Rt().get("type")||It.SEND}n();s();function $S(){let o=At(),t=Zm();return[o,t]}var Fp=$S;function jS(){let{coinId:o}=(0,ws.useParams)(),t=_(),e=(0,ws.useHistory)(),r=Tt(),i=Fp(),a=rs();return Ep.default.createElement(z,{addressProps:{errorFns:{fns:i,override:!0},extraProps:{filterAddress:a}},confirmButtonProps:{onClick:()=>{e.push(`${$o}/${o}${De}?type=${r}&from=${t}`)}}})}var Pp=jS;n();s();var rl=u(x());n();s();var Ho=u(x()),vs=u(F()),jp=u(bo()),Qp=u(wt());Y();co();n();s();var Co=u(x()),wp=u(F()),Np=u(wt());Y();n();s();var ut=u(x()),vi=u(wt());Y();n();s();var QS="md",oI="lg",bp=o=>{let{className:t,size:e,disabled:r,checked:i,coinImage:a,coinAmountText:m,inscriptionId:c,onChange:d}=o,g=`inscription-select-container-${e}`,p=r?"inscription-select-disabled":null;return ut.default.createElement("div",{className:(0,vi.default)("inscription-select-container",g),onClick:d},r?ut.default.createElement("div",{className:"inscription-select-confirm"},P("extension_wallet_send_tag_confirming")):null,ut.default.createElement("div",{className:(0,vi.default)("inscription-select",p,t)},r?null:ut.default.createElement("div",{className:"inscription-select-radio-container"},ut.default.createElement(zi.Circle,{checked:i})),ut.default.createElement("div",{className:"inscription-select-coin"},ut.default.createElement(Zr,{className:"inscription-select-coin-image",src:a,errorImg:en,width:14,height:14}),ut.default.createElement(si,{text:m,tooltipProps:{className:"inscription-select-coin-text-tooltip"}})),ut.default.createElement("div",{className:"inscription-select-id"},ut.default.createElement(si,{text:c,tooltipProps:{className:"inscription-select-id-tooltip"}}))))};bp.size={md:QS,lg:oI};var fr=bp;n();s();var Eo=u(x());Y();n();s();var ie={header:"_header_144xr_1",amount:"_amount_144xr_7",logo:"_logo_144xr_13",max:"_max_144xr_18",scrollContent:"_scrollContent_144xr_26",content:"_content_144xr_31",cell:"_cell_144xr_38",loading:"_loading_144xr_41"};function tI(){let{coin:o}=S(),{transferableWithoutSpendingDisplay:t}=er(o);return Eo.default.createElement("div",{className:ie.header},Eo.default.createElement("div",{className:ie.amount},Eo.default.createElement(Zr,{className:ie.logo,src:o.image,errorImg:en,width:20,height:20}),t))}function eI({loading:o,list:t,visible:e,onClose:r,value:i,onSelected:a,request:m}){let{coin:c}=S(),[d,g]=(0,Eo.useState)({}),{run:p}=Ma(f=>{o||f.target.scrollHeight-f.target.scrollTop-f.target.offsetHeight<=150&&m&&m()},{wait:300});return(0,Eo.useEffect)(()=>{e&&g(i)},[e]),Eo.default.createElement(Zi,{isFull:!0,topContent:Eo.default.createElement(tI,{list:t,value:d,onMax:f=>{g(t.reduce((A,C)=>({...A,[C.inscriptionId]:!f}),{}))}}),footer:Eo.default.createElement(Pt.ConfirmButton,{onClick:()=>{a(d)}},P("wallet_set_password_btn_confirm")),noMargin:!0,noContentPadding:!0,visible:e,onClose:r,renderContent:()=>Eo.default.createElement("div",{className:ie.scrollContent,onScroll:p},Eo.default.createElement("div",{className:ie.content},t.map((f,A)=>Eo.default.createElement("div",{className:ie.cell},Eo.default.createElement(fr,{key:A,size:fr.size.lg,coinImage:c.image,coinAmountText:`${f.tokenAmount} ${f.tick}`,inscriptionId:f.inscriptionId,checked:d[f.inscriptionId],onChange:()=>{g(C=>({...C,[f.inscriptionId]:!C[f.inscriptionId]}))}})))),o&&Eo.default.createElement("div",{className:ie.loading},Eo.default.createElement(Fe.Circle,{size:Fe.SIZE.sm})))})}var kp=eI;n();s();var pr={root:"_root_r3y60_1",title:"_title_r3y60_5",arrow:"_arrow_r3y60_14",content:"_content_r3y60_17",cell:"_cell_r3y60_22"};function rI({loading:o,list:t,request:e,onSelected:r},i){let{coin:a}=S(),[m,c]=(0,Co.useState)(!1),d=(0,wp.useSelector)(tt),[g,p]=(0,Co.useState)(d.reduce((C,T)=>({...C,[T.inscriptionId]:!0}),{})),{selected:f,showed:A}=(0,Co.useMemo)(()=>{let C=t.filter(I=>!!g[I.inscriptionId]),T=t.filter(I=>!g[I.inscriptionId]);return{selected:C,unselected:T,showed:t.map(I=>C.includes(I)?{...I,checked:!0}:I)}},[t,g]);return(0,Co.useEffect)(()=>{r(f)},[f]),(0,Co.useImperativeHandle)(i,()=>({onMax:()=>{p(t.reduce((C,T)=>({...C,[T.inscriptionId]:!0}),{}))}})),Co.default.createElement(Co.default.Fragment,null,Co.default.createElement("div",{className:pr.root},Co.default.createElement("div",{className:pr.title,onClick:()=>{c(!0)}},P("extension_wallet_send_text_select_transferable"),Co.default.createElement(Yi,{className:(0,Np.default)(pr.arrow,"okds-arrow-chevron-right-centered-md")})),Co.default.createElement("div",{className:pr.content},A.map((C,T)=>Co.default.createElement("div",{className:pr.cell},Co.default.createElement(fr,{key:T,coinImage:a.image,size:fr.size.md,coinAmountText:`${C.tokenAmount} ${C.tick}`,inscriptionId:C.inscriptionId,checked:C.checked,onChange:I=>{I.stopPropagation(),p(h=>({...h,[C.inscriptionId]:!h[C.inscriptionId]}))}}))))),Co.default.createElement(kp,{visible:m,value:g,loading:o,list:t,request:e,onSelected:C=>{p(C),c(!1)},onClose:()=>{c(!1)}}))}var Bp=(0,Co.forwardRef)(rI);n();s();var ae=u(x()),vp=u(F());Y();function nI(o){let{coin:t}=S();return(0,ae.useCallback)(()=>o.length===0?{key:"extension_wallet_send_text_noresults_crypto",args:{crypto:t.symbol},type:"inscribe"}:null,[o])}function Lp(){let o=Vt();return t=>{let e="";return t.key&&(e=P(t?.key,t?.args)),t?.type===to.FEE_BALANCE_INSUFFICIENT?ae.default.createElement(ae.default.Fragment,null,e," ",ae.default.createElement(Pr,{coin:o})):t?.type==="inscribe"?ae.default.createElement(ae.default.Fragment,null,e):e}}function sI(o,t){let e=(0,vp.useDispatch)(),r=Xm(),i=nI(t),a=[r,i],{runErrorFns:m}=Ve(a);wn(m,c=>{e(Om(c))},o)}var Dp=sI;n();s();var Mp=u(bo());var Op=u(F());function iI(){let o=(0,Op.useDispatch)(),t=(0,Mp.useHistory)(),{coin:e}=S(),r=_();return()=>{o(Xn()),o(Fn()),t.push(`${$o}/${e.coinId}${cn}?type=${It.INSCRIBE}&from=${r}`)}}var Rp=iI;n();s();var Gp=u(x()),Vp=u(F());n();s();var Rr=u(x()),Up=u(F());co();function Li(){let{baseCoin:o}=S(),t=_(),[,e]=Tn({coinId:o.coinId,address:t,chainId:o.chainId},{pollingInterval:20*1e3});return e||{}}function aI(o,t){let i=(()=>255)(),a=o||t?.normal||"0",[m,c]=(0,Rr.useState)("0");return(0,Rr.useEffect)(()=>{if(i&&a){let d=No(i,a);c(d)}},[i,a]),{fee:m,satBytes:a,bytes:i}}function mI(o){let t=(0,Up.useDispatch)(),e=Li(),r=aI(o,e);return(0,Rr.useEffect)(()=>{t(mt({name:"signInfo",value:e}))},[e]),{...r,signInfo:e}}var Wp=mI;function cI(){let o=(0,Vp.useDispatch)(),{fee:t}=Wp();(0,Gp.useEffect)(()=>{o(H(t))},[t])}var Hp=cI;n();s();var qp=u(x());var Zp=u(F());n();s();var Ns=u(x());var Jp=u(F());n();s();var Kp=u(F());function uI(){let{selectedSat:o,signInfo:t}=(0,Kp.useSelector)(Vn),e;return o.type===Ft.CUSTOM?e=o.satBytes:e=t?.[ba[o.type]],e||0}var xt=uI;function dI(){let[o,t]=(0,Ns.useState)(!0),e=(0,Jp.useDispatch)(),r=_(),i=os(),a=xt();return(0,Ns.useEffect)(()=>{(async()=>{let c;try{c=(await i({from:r,coinAmount:0,serviceCharge:0,feeRate:a})).canTransferAmount||"0"}catch{c="0"}t(!1),e(We(c))})()},[r,a]),o}var Yp=dI;function fI(){let o=(0,Zp.useDispatch)(),{coin:t}=S(),{transferableWithoutSpending:e}=er(t),r=Yp();return(0,qp.useEffect)(()=>{o(Ro(e))},[e]),r}var zp=fI;n();s();var lr=u(x());Po();be();we();var Xp=u(F());co();function pI(){let{coin:o,baseCoin:t}=S(),e=_(),r=(0,Xp.useSelector)(zo),[i,a]=(0,lr.useState)({from:1,size:10}),m=tn(o);return async()=>{let c=await q().getRequestHeaders({walletId:r,needSign:!0,currency:"usd"}),d;if(m)d={utxoType:St.BRC20_CONVERTIBLE,address:e,tick:o.symbol,protocolId:M.BRC_20};else{let C=Sa(o);d={utxoType:St.BRC20S_CONVERTIBLE,address:e,tid:C,protocolId:M.BRC_20S}}let g={coinId:t.coinId,utxoRequests:[{...d,...i}]},{data:p}=await dt(Jo.getBTCUTXO,g,{headers:c}),f=(p?.[0]?.utxoList||[]).map(C=>({...C,tokenAmountInt:C.tokenAmount,tokenAmount:So(C.tokenAmount,10**o.decimals)})),A=f.length===i.size;return A&&a(C=>({...C,from:C.from+1})),{list:f,more:A}}}function lI(){let o=(0,lr.useRef)(!0),[t,e]=(0,lr.useState)(!0),[r,i]=(0,lr.useState)([]),a=pI(),m=async()=>{if(!!o.current){e(!0);try{let{more:c,list:d}=await a();i(g=>[...g,...d]),o.current=c}finally{e(!1)}}};return ft(()=>{m()}),{list:r,loading:t,request:m}}var $p=lI;n();s();var Bs={loading:"_loading_19h4i_1",content:"_content_19h4i_6","inscribe-footer":"_inscribe-footer_19h4i_9",inscribeFooter:"_inscribe-footer_19h4i_9"};function gI(){let o=(0,jp.useHistory)(),t=(0,vs.useDispatch)(),{coin:e}=S(),r=(0,vs.useSelector)(tt),i=Rp(),a=Lp(),m=Tt(),c=_(),d=(0,Ho.useMemo)(()=>r.reduce((k,{tokenAmount:v})=>no(k,v),0),[r]),{loading:g,list:p,request:f}=$p(),A=zp(),C=p.length>0,T=g||A;Hp(),Dp(T,p);let{availableWithoutSpending:I,availableWithoutSpendingDisplay:h,availableReceiving:y,availableReceivingDisplay:E}=as();if(p.length===0&&T)return Ho.default.createElement("div",{className:Bs.loading},Ho.default.createElement(Fe.Circle,{size:Fe.SIZE.xl}));let w=Ho.default.createElement(ja.FooterActions,{className:(0,Qp.default)(Bs.inscribeFooter)},Ho.default.createElement(wo,{block:!0,type:wo.TYPE.highlight,size:wo.SIZE.lg,onClick:i},P("extension_wallet_btc_btn_inscribe")),Ho.default.createElement(wo,{block:!0,type:wo.TYPE.highlight,size:wo.SIZE.lg,disabled:!0},P("wallet_extension_send_btn_continue")));return Ho.default.createElement(Z,{checkEmpty:!1,inputAmount:d,renderError:a,classes:{content:C?Bs.content:""},slot:{bottom:C?Ho.default.createElement(Bp,{loading:T,list:p,request:f,onSelected:k=>{t(mt({name:"brc20UtxoList",value:k}))}}):null,footer:p.length===0&&Number(I)>0?w:null},inputProps:{disabled:!0},confirmButtonProps:{disabled:r.length===0,onClick:()=>{o.push(`${$o}/${e.coinId}${un}?type=${m}&from=${c}`)}},totalAmountProps:{fixBottom:!0,type:"amount",title:P("extension_wallet_send_text_transfer_available"),hiddenMaxButton:!0,slot:{bottom:Ho.default.createElement(Ho.default.Fragment,null,(Number(I)>0||Number(y)>0)&&Ho.default.createElement(is,{lockedAmount:0,pendingXrc:0,availableWithoutSpending:I,availableWithoutSpendingDisplay:h,availableReceiving:y,availableReceivingDisplay:E,goToInscribe:i}))}}})}var ol=gI;n();s();var tl=u(x()),Ls=u(bo());function AI(){let{coinId:o}=(0,Ls.useParams)(),t=(0,Ls.useHistory)(),e=Tt(),r=_();return tl.default.createElement(uu,{onConfirm:()=>{t.push(`${$o}/${o}${De}?type=${e}&from=${r}`)}})}var el=AI;var CI={[It.SEND]:ol,[It.INSCRIBE]:el};function SI(){let o=Tt(),t=CI[o];return t?rl.default.createElement(t,null):null}var nl=SI;n();s();var yl=u(x());n();s();var Io=u(x()),Te=u(F()),Sl=u(bo());Y();n();s();var Ur=u(x());n();s();var ht=u(x()),sl=u(wt());Y();n();s();var Ie={utxoTextWrap:"_utxoTextWrap_s2w3l_1",utxoText:"_utxoText_s2w3l_1",utxoTextSymbol:"_utxoTextSymbol_s2w3l_14",utxoTextAmount:"_utxoTextAmount_s2w3l_17",badge:"_badge_s2w3l_21"};var II=(o={})=>{let{address:t,isNeedToSign:e,coinAmount:r,symbol:i}=o;return ht.default.createElement(J.FlexBox,{justify:"space-between",align:J.ALIGN.center,className:Ie.utxoTextWrap},ht.default.createElement(J.FlexBox,{align:J.ALIGN.center},ht.default.createElement(D.Text,{className:Ie.utxoText,ellipsis:{tooltip:!0}},t),e&&ht.default.createElement(qr,{className:Ie.badge,color:qr.COLOR.green,type:qr.TYPE.rect},P("extension_wallet_transaction_label_signature"))),ht.default.createElement(J.FlexBox,{align:J.ALIGN.center,className:(0,sl.default)(Ie.utxoText,Ie.utxoTextAmount)},ht.default.createElement(D.Text,{inherit:!0,strong:!0,ellipsis:{tooltip:!0}},r),ht.default.createElement(D.Text,{inherit:!0,strong:!0,className:Ie.utxoTextSymbol},i)))},il=(0,ht.memo)(II);n();s();var al={utxosBlock:"_utxosBlock_ooh7h_1",utxoBorder:"_utxoBorder_ooh7h_6"};var TI=({utxos:o})=>Ur.default.createElement(J.Box,{className:al.utxosBlock},o.map((t={},e)=>{let{address:r,coinAmount:i,isNeedToSign:a,symbol:m}=t;return Ur.default.createElement(il,{key:e,address:r,coinAmount:i,isNeedToSign:a,symbol:m})})),Di=(0,Ur.memo)(TI);co();n();s();var Wr=u(F()),ul=u(it());n();s();var Mi=u(F());go();var ml=u(x());function xI(o){let t=(0,Mi.useSelector)(zo),e=_(),r=(0,Mi.useSelector)(tt),i=xt(),a=N(),m=ln(t);return(0,ml.useCallback)(async c=>{if(!c.length)return null;let d={address:e,feePerB:i,inputs:[...r.map(({txHash:p,vout:f,coinAmount:A})=>({vOut:f,txId:p,amount:A})),...c.map(({txHash:p,vout:f,coinAmount:A})=>({vOut:f,txId:p,amount:A}))],outputs:[...r.map(({coinAmount:p})=>({amount:p,address:a}))]};return await $a(d,e,Xr,t,{fake:o===Bn.CAL_FEE&&m})},[r,i])}var cl=xI;function hI(){let o=(0,Wr.useDispatch)(),{coin:t}=S(),e=(0,Wr.useSelector)(tt),r=_(),i=N(),a=j(),m=V(),c=(0,Wr.useSelector)(zo),d=om(c),g=ot(),p=tn(t),f=p?qo.BRC20_SEND:qo.BRC30_SEND,A=cl(Bn.CONFIRM),C=os(),T=xt(),I=vn({address:r,coinId:t.coinId,currencyId:g,txType:f,protocolId:p?M.BRC_20:M.BRC_20S}),h=ym(c),y=async w=>{try{await h();let k=await A(w.utxoList||[]),v=await xo(t.localType,k),b=d?.serverWalletType,O={txSource:Yo.NORMAL,toAdr:i,coinId:t.coinId,txHash:v,signedTx:k,walletId:c,serviceCharge:a,fromAdr:r,coinAmount:m,walletType:b,txType:p?qo.BRC20_SEND:qo.BRC30_SEND,extJson:JSON.stringify({nftIds:e.reduce((B,U)=>[...B,...(U.nftLocaltionVOs||[]).map(({nftId:K})=>K)],[])})},R=await ns(O);eo({tx_id:R})}catch(k){k?.error_message&&zr.error(k?.error_message)}};return async()=>{let w=await C({from:r,coinAmount:0,serviceCharge:a,feeRate:T}),k=w.utxoList||[];return o(mt({name:"feeUtxoList",value:k||[]})),await I([...e||[],...k||[]],ul.noop),await y(w)}}var dl=hI;n();s();var fl=u(F());function yI(){let o=(0,fl.useDispatch)(),e=[jm()],{runErrorFns:r}=Ve(e);wn(r,i=>{o(Rm(i))})}var pl=yI;n();s();var ll=u(x()),Gr=u(F());function gl(){let o=(0,Gr.useDispatch)(),t=Li();(0,ll.useEffect)(()=>{o(mt({name:"signInfo",value:t}))},[t])}function Al(){let o=Gt(),t=(0,Gr.useDispatch)(),e=_(),r=N(),i=jo(),a=xt(),m=(0,Gr.useSelector)(tt),[c,d,g]=Ln({coinId:o,toAddr:r,walletId:i,fromAddr:e,satBytes:a,coinAmount:"0",utxoParams:{satBytes:a},inputs:m},{onSuccess:(p,f)=>{t(H(p)),t(mt({name:"feeUtxoList",value:f||[]}))}});return{feeLoading:c,fee:d,feeError:g}}n();s();var Cl={network:"_network_1zgil_1",data:"_data_1zgil_6",dataTitle:"_dataTitle_1zgil_12"};function _I(){let o=En(),t=_(),e=N(),r=j(),i=(0,Te.useSelector)(tt),a=(0,Te.useSelector)(Rc),{baseCoin:m}=S(),c=(p,f)=>p.map(({coinAmount:A})=>{let C=So(A,10**m.decimals);return{address:ei(f),coinAmount:o(C,m,{useApproximate:!1}),symbol:m.symbol}}),d=(0,Io.useMemo)(()=>c([...i,...a],t),[i,a]),g=(0,Io.useMemo)(()=>{let p=c(i,e),f=a.reduce((A,{coinAmount:C})=>no(A,C),"0");if(Ko(f,r)){let A=So(_t(f,r),10**m.decimals);p.push({address:ei(t),coinAmount:o(A,m,{useApproximate:!1}),symbol:m.symbol})}return p},[i,a,r]);return Io.default.createElement(Ao,{space:32},Io.default.createElement(yr,{title:P("extension_wallet_transaction_text_input")},Io.default.createElement(Di,{utxos:d})),Io.default.createElement(yr,{title:P("extension_wallet_transaction_text_output")},Io.default.createElement(Di,{utxos:g})))}function FI(){let o=(0,Te.useDispatch)(),[t,e]=(0,Io.useState)(!1),{coinId:r}=(0,Sl.useParams)(),i=ot(),a=(0,Te.useSelector)(Uc),m=dl(),{signInfo:c}=(0,Te.useSelector)(Vn),d=bn(),g=xt(),{feeLoading:p,fee:f,feeError:A}=Al(),C=So(f,g),T=h=>{o(mt({name:"selectedSat",value:h}))};gl(),pl();let I=c?.transferReminder;return Io.default.createElement(Io.default.Fragment,null,Io.default.createElement(X,{classes:{network:Cl.network},slot:{bottom:h=>Io.default.createElement(Io.default.Fragment,null,Io.default.createElement(Ao,null,Io.default.createElement(Lo,{...h})),Io.default.createElement(_I,null))},defaultMessage:I,networkFeeProps:{loading:p,estimateFailed:A,feeLevel:a.type,onClick:()=>{e(!0)}},confirmButtonProps:{onSubmit:m},canTransferAmount:d}),t&&Io.default.createElement(cu,{currencyId:i,bytes:C,value:a,coinId:r,signInfo:c,onChange:T,onClose:()=>{e(!1)}}))}var Il=FI;n();s();var Ds=u(x()),Tl=u(bo());var xl=u(F());co();function EI(){let o=(0,Tl.useHistory)(),t=(0,xl.useSelector)(lt),e=Ge();return(0,Ds.useEffect)(()=>{ke(e,"0")&&o.go(-1)},[e]),Ds.default.createElement(du,{onConfirm:()=>{o.push(t||mn)}})}var hl=EI;var PI={[It.SEND]:Il,[It.INSCRIBE]:hl};function bI(){let o=Tt(),t=PI[o];return t?yl.default.createElement(t,null):null}var _l=bI;n();s();var Fl=u(x());function kI({children:o}){let e=Rt().get("from");return Fl.default.createElement(Do,{fromAddress:e},o)}var El=kI;var wI={match:(o,t,e)=>o===ce&&[M.BRC_20,M.BRC_20S].includes(e),Container:El,pages:{AddressPage:nl,AmountPage:Pp,ConfirmPage:_l}},Pl=wI;n();s();go();n();s();n();s();var Oi=u(x()),Vr=u(F()),wl=u(it());n();s();var bl=u(_A()),NI=async({coin:o,fromAddress:t,toAddress:e,value:r,memo:i="",signInfo:a={}})=>{let{getRawTransaction:m}=await Ia(),c={};if(o.baseCoinId===0)c={data:{type:Be.TRANSFER,data:{to:e,amount:r,memo:i}}};else{let{info:g={}}=a,{contractAddress:p,contractName:f,tokenName:A}=g;c={data:{type:Be.TOKEN_TRANSFER,data:{from:t,to:e,memo:i,contract:p,contractName:f,functionName:an.TRANSFER,tokenName:A,amount:r}}}}return await m(bl.Currency.Stx,c)},kl=async({coin:o,fromAddress:t,toAddress:e,value:r,memo:i="",signInfo:a={}})=>{let m=await NI({coin:o,fromAddress:t,toAddress:e,value:r,memo:i,signInfo:a});return(await _c({coinId:o.coinId,fromAddress:t,value:r,inputData:m}))?.gasLimit||"0"};var BI=()=>{let o=(0,Vr.useDispatch)(),t=_(),e=N(),r=(0,Vr.useSelector)(gt),i=V(),a=vt(i),{coin:m,baseCoin:c}=S(),{signInfo:d,memo:g}=(0,Vr.useSelector)(je),p=async()=>{try{o(L(!1));let A;m.baseCoinId!==0&&(0,wl.isEmpty)(d)?(A=await Mn({coinId:m.coinId,fromAddress:t,toAddress:e,value:i}),o(Zn({name:"signInfo",value:A}))):A=d;let C=await kl({coin:m,baseCoin:c,fromAddress:t,toAddress:e,value:i,signInfo:A,memo:g});o(H(C))}catch{o(L(!0))}finally{o(ho(!1))}},{run:f}=Xo(p,{wait:500});(0,Oi.useEffect)(()=>{r&&(o(ho(!0)),f())},[r]),(0,Oi.useEffect)(()=>{r&&i!==a||(o(ho(!0)),f())},[i,e,r,g])},Nl=BI;var vI=({children:o})=>(Nl(),o),Bl=vI;n();s();var vl=u(x());var LI=()=>(Q(),vl.default.createElement(Z,null)),Ll=LI;n();s();var xe=u(x()),Os=u(F());Y();n();s();var Ms=u(F());var DI=()=>{let o=fo(),{coin:t,baseCoin:e}=S(),r=_(),i=(0,Ms.useSelector)(ro),a=V(),m=(0,Ms.useSelector)(Qo),{memo:c}=(0,Ms.useSelector)(je),d=pt({fromAddr:r,localType:e.localType}),g=async()=>await Mn({coinId:t.coinId,fromAddress:r,toAddress:i,value:a}),p=y=>{let{info:E}=y,{nonce:w}=E;return{type:Be.TRANSFER,data:{to:i,amount:a,nonce:w,fee:m,memo:c}}},f=y=>{let{info:E}=y,{nonce:w,contractAddress:k,contractName:v,tokenName:b}=E;return{type:Be.TOKEN_TRANSFER,data:{from:r,to:i,amount:a,nonce:w,fee:m,memo:c,contract:k,contractName:v,functionName:an.TRANSFER,tokenName:b}}};return uo(g,y=>t.baseCoinId===0?p(y):f(y),async y=>{let{data:E}=y,{nonce:w}=E,{txId:k,txSerializedHexString:v}=await d({params:y,needCapture:!0});return{txId:k,txSerializedHexString:v,nonce:w}},async({txId:y,txSerializedHexString:E,nonce:w})=>{let k={nonce:w},v=JSON.stringify(k),b={signedTx:E,coinAmount:a,coinId:t.coinId,fromAdr:r,toAdr:i,serviceCharge:m,txHash:y,memo:c,extJson:v};return await o(b)},y=>(eo({tx_id:y}),y))},Dl=DI;var Ml=34,MI=()=>{let o=(0,Os.useDispatch)(),{memo:t}=(0,Os.useSelector)(je),e=Dl(),r=i=>{let a=i.target.value;new TextEncoder().encode(a).length<=Ml&&o(Zn({name:"memo",value:i.target.value}))};return oo(),xe.default.createElement(X,{confirmButtonProps:{onSubmit:e},slot:{bottom:i=>xe.default.createElement(xe.default.Fragment,null,xe.default.createElement(Ao,null,xe.default.createElement(Lo,{...i})),xe.default.createElement(ee,{value:t,placeholder:P("extension_wallet_transaction_input_entermemo_max",{num:Ml}),onChange:r}))}})},Ol=MI;var OI={match:o=>o===na,Container:Bl,pages:{AddressPage:z,AmountPage:Ll,ConfirmPage:Ol}},Rl=OI;n();s();go();n();s();var Wl=u(x());n();s();be();we();var RI=()=>{let{baseCoin:o}=S();return mo(async t=>{let e={account:t,coinId:o.coinId},r;try{r=await ga(Jo.queryAccountExist,e)}catch(i){console.log(i)}return r?.data?.account?null:{key:"wallet_manage_crypto_errortip_invalid_address_tips",args:{}}})};function UI(){let o=At(),t=RI();return[o,t]}var Ul=UI;var WI=()=>{let o=Ul();return Wl.default.createElement(z,{addressProps:{errorFns:{override:!0,fns:o},extraProps:{disableRequestDomain:!0}}})},Gl=WI;n();s();var Vl=u(x());function GI(){return Q(),Vl.default.createElement(Z,null)}var Hl=GI;n();s();var Hr=u(x());Y();n();s();var Kl=u(F());Po();var VI=o=>{let{coin:t,baseCoin:e}=S(),r=_(),i=(0,Kl.useSelector)(ro),a=io(),m=fo();return uo(async()=>await Mt({coinId:t.coinId,address:r},{fromAddr:r,toAddr:i}),async A=>{let{info:C}=A,{chainid:T,compression:I,refBlockNumber:h,refBlockId:y,refBlockTimestamp:E,expireSeconds:w,precision:k,symbol:v,contract:b}=C,O={type:0,from:r,to:i,amount:a,memo:o,precision:k,symbol:v,contract:b,common:{chainId:T,compression:I,refBlockNumber:h,refBlockId:y,refBlockTimestamp:E,expireSeconds:w}};return await q().signTransaction(O,r,e.localType)},async A=>{let C={memo:o},T=await xo(t.localType,A),I={signedTx:A,coinAmount:a,coinId:t.coinId,fromAdr:r,toAdr:i,serviceCharge:"0",extJson:JSON.stringify(C),txHash:T};return await m(I)},A=>(eo({tx_id:A}),A))},Jl=VI;var Yl=256;function HI(){let[o,t]=(0,Hr.useState)(""),e=Jl(o),r=async()=>{await e()},i=a=>{let m=a.target.value;new TextEncoder().encode(m).length<=Yl&&t(a.target.value)};return oo(),Hr.default.createElement(X,{slot:{bottom:Hr.default.createElement(ee,{value:o,placeholder:P("extension_wallet_transaction_input_entermemo_max",{num:Yl}),onChange:i})},confirmButtonProps:{onSubmit:r}})}var ql=HI;var KI={match:o=>o===sa,pages:{AddressPage:Gl,AmountPage:Hl,ConfirmPage:ql}},Zl=KI;n();s();go();n();s();n();s();var Ri=u(x()),Rs=u(F()),zl=u(it());Po();var JI=({fromAddress:o,toAddress:t,amountInputValueInt:e,sendCoinBalanceInt:r,feeInt:i,coin:a,isMax:m})=>{let c=(0,Rs.useDispatch)(),{signInfo:d}=(0,Rs.useSelector)(Hn),g=vt(e),p=async()=>{let I=await Mt({coinId:a.coinId,address:o},{fromAddr:o,toAddr:t});return c(jc({name:"signInfo",value:I})),I},f=async I=>{let h={type:"transfer",nonce:I?.info?.nonce,maxFee:i||"0",transferData:{contractAddress:I?.info?.contractAddress,from:o,to:t,amount:e}};return(await q().signTransaction(h,o,a.localType))?.signature},A=async I=>{let{data:h}=await fn({coinId:a.coinId,address:o,inputData:I});if(h?.queryGasLimitErrorUseDefault)throw new Error("fetch maxFee error");return h?.gasLimit},C=async()=>{try{let I;(0,zl.isEmpty)(d)?I=await p():I=d;let h=await f(I),y=await A(h);c(H(y)),c(L(!1))}catch{c(L(!0))}finally{c(ho(!1))}},{run:T}=Xo(C,{wait:500});(0,Ri.useEffect)(()=>{m&&(c(ho(!0)),T())},[m,r]),(0,Ri.useEffect)(()=>{m&&e!==g||(c(ho(!0)),T())},[t,e,m])},Xl=JI;var YI=({children:o})=>{let t=_(),e=N(),r=V(),i=He(),a=j(),{coin:m}=S(),c=Ht();return Xl({fromAddress:t,toAddress:e,amountInputValueInt:r,sendCoinBalanceInt:i,feeInt:a,coin:m,isMax:c}),o},$l=YI;n();s();var jl=u(x());var qI=()=>(Q(),jl.default.createElement(Z,null)),Ql=qI;n();s();var tg=u(x()),eg=u(F());n();s();Po();var ZI=({coin:o,baseCoin:t,fromAddress:e,toAddress:r,amountInt:i,feeInt:a,nonce:m,contractAddress:c})=>{let d=fo();return uo(async()=>{let C={type:"transfer",nonce:m,maxFee:a,transferData:{contractAddress:c,from:e,to:r,amount:i}},{txId:T,signature:I}=await q().signTransaction(C,e,t.localType);return{txId:T,signature:I}},async({txId:C,signature:T})=>{let I={serviceChargeCoinId:t.coinId,nonce:m},h=JSON.stringify(I),y={signedTx:T,coinAmount:i,coinId:o.coinId,fromAdr:e,toAdr:r,serviceCharge:a,txType:qo.TRANS_OUT,txHash:C,extJson:h};return await d(y)},C=>(eo({tx_id:C}),C))},og=ZI;var zI=()=>{let o=_(),t=N(),e=io(),r=j(),{coin:i,baseCoin:a}=S(),{signInfo:m}=(0,eg.useSelector)(Hn),c=og({coin:i,baseCoin:a,fromAddress:o,toAddress:t,amountInt:e,feeInt:r,nonce:m?.info?.nonce,contractAddress:m?.info?.contractAddress});return oo(),tg.default.createElement(X,{confirmButtonProps:{onSubmit:c}})},rg=zI;var XI={match:o=>o===ia,Container:$l,pages:{AddressPage:z,AmountPage:Ql,ConfirmPage:rg}},ng=XI;n();s();go();n();s();var lg=u(x());var Gs=u(F());Y();n();s();var mg=u(x());n();s();Y();var gr=u(it());var sg=(o,t)=>{let[e,r]=o?.split("-");return[{policyId:e,assets:[{amount:t,assetName:r}]}]},$I=(o,t)=>(0,gr.uniq)((0,gr.map)([...o,...t],"assetName")).map(r=>{let i=o.find(m=>m?.assetName===r),a=t.find(m=>m?.assetName===r);return{assetName:r,amount:G.add(i?.amount||0,a?.amount||0)}}),jI=o=>{let t=o.reduce((r,i)=>{let{multiAsset:a}=i;return a?.length?[...r,...a]:r},[]),e=[];return t.forEach(r=>{let{policyId:i,assets:a}=r,m=(0,gr.findIndex)(e,{policyId:i});if(m!==-1){let{assets:c}=e[m];e[m]={policyId:i,assets:$I(a,c)}}else e=[...e,r]}),e},ig=async({toAddr:o,utxoList:t,baseCoinId:e,sendAmountInt:r,contractAddress:i})=>{let{AdaWallet:a}=await Ir(),m;return e===0&&t?.some(({multiAsset:c})=>!!c?.length)?m=jI(t):e!==0&&(m=sg(i,r)),a.minAda(o,m)},ag=async o=>{let{AdaWallet:t}=await Ir();return t.minFee(o)},QI="999999999",oT="transfer",Us=({toAddr:o,utxoList:t,fromAddr:e,sendAmount:r,baseCoinId:i,contractAddress:a,minTransferAmountInt:m})=>{let c={address:o,inputs:t,ttl:QI,type:oT,changeAddress:e};return i===0?c={...c,amount:r}:c={...c,amount:m,multiAsset:sg(a,r)},c};var tT=({utxoList:o,toAddr:t,fromAddr:e,coinId:r,sendAmount:i,minTransferAmountInt:a},m)=>{let c=Ot(r),[d,g]=(0,mg.useState)("0");return fe(()=>{(async()=>{if(!o?.length)return;let p=Us({toAddr:t,fromAddr:e,utxoList:o,contractAddress:c?.address,baseCoinId:c?.baseCoinId,sendAmount:i,minTransferAmountInt:a});try{let f=await ag({data:p});m?.(f),g(f)}catch(f){console.log(f)}})()},[c,t,e,i,a,o]),d},cg=tT;n();s();var dg=u(x());n();s();be();we();Po();Y();n();s();var ug=u(bo());var eT=()=>{let{coinId:o}=(0,ug.useParams)(),t=_(),e=jo(),[r,i]=An(o);return{address:t,walletId:e,coin:r||{},coinId:Number(o),baseCoin:i||{},baseCoinId:r?.baseCoinId}},Ar=eT;var rT=()=>{let o=Ke(),{coin:t,coinId:e,walletId:r,address:i}=Ar(),a=t?.baseCoinId;return mo(async(m,c,d)=>{let g=await q().getRequestHeaders({walletId:r,needSign:!0,currency:"usd"}),p=c,f=m,A=G.add(G.add(a===0?m:d,c),d);a===0&&G.gte(A,o)&&(f=o,p="0"),a!==0&&(p=G.add(c,G.add(d,d)));let C={coinId:e,address:i,fee:p,amount:f},{data:T}=await dt(Jo.getSpecialUtxoList,C,{headers:g});return T},[e,r,i,a,o])},Ws=rT;var nT=(o,t,e)=>{let[r,i]=(0,dg.useState)([]),a=Ws();return fe(()=>{(async()=>{let m=await a(o,t,e);i(m)})()},[o,t,e,a]),r},fg=nT;n();s();Y();var sT=o=>{let t=S(),{coin:{symbol:e,baseCoinId:r,decimals:i}}=t,a=G.div(o,10**i);return mo(m=>r===0&&G.gt(a,0)&&G.lt(m,a)?{key:"wallet_extension_send_transfer_at_least",args:{amount:ue(a,{symbol:e})},type:to.COMMON_ERROR}:null,[a,e,r])},iT=o=>{let t=Vt(),{coin:e}=S(),r=j(),i=Ke(),{baseCoinId:a}=e;return mo(m=>{let c=G.mul(m,10**e?.decimals),d,g;a===0?(g=G.add(G.add(c,r),o),d=G.add(c,r)):(g=G.add(G.add(r,o),o),d=G.add(r,o));let p=G.sub(i,d);return p!=="0"&&G.lt(p,o)?{key:"extension_wallet_cardano_text_token_atleast",args:{amount:ue(g,{decimals:t?.decimals})},type:to.COMMON_ERROR}:null},[a,r,i,t?.decimals,e?.decimals])},aT=o=>{let t=sT(o),e=iT(o);Q([t,e])},pg=aT;function mT(){let o=(0,Gs.useDispatch)(),t=j(),r=(0,Gs.useSelector)(Rn)?.minTransferInt,i=V(),a=N(),m=Ke(),{coin:c,coinId:d,baseCoinId:g,address:p}=Ar(),f=fg(i,t,r);return fe(()=>{(async()=>{let A=await ig({contractAddress:c?.address,baseCoinId:g,utxoList:f,toAddr:a,sendAmountInt:i});o(Yc({minTransferInt:A}))})()},[f,g,a,i,c?.address]),fe(()=>{g===0&&f?.some(({multiAsset:A})=>!!A?.length)&&o(Ro(G.sub(m,r)))},[f,m,r]),pg(r),cg({coinId:d,toAddr:a,utxoList:f,fromAddr:p,minTransferAmountInt:r,sendAmount:i},A=>{o(H(A))}),lg.default.createElement(Z,null)}var gg=mT;n();s();var Sg=u(x());n();s();var Ag=u(bo()),Ui=u(F());Y();var cT=()=>{let o=(0,Ag.useHistory)(),t=(0,Ui.useSelector)(lt),r=(0,Ui.useSelector)(Rn)?.minTransferInt,{coin:i,coinId:a,address:m,walletId:c}=Ar(),d=pn(c),g=V(),p=N(),f=j(),A=Ws(),C=pt({fromAddr:m,walletId:c,localType:i?.localType});return mo(async()=>{try{let I=await A(g,f,r),h=Us({toAddr:p,fromAddr:m,utxoList:I,minTransferAmountInt:r,sendAmount:g,baseCoinId:i?.baseCoinId,contractAddress:i?.address}),y=await C({params:h}),E=await xo(i?.localType,y),w={coinId:a,txHash:E,signedTx:y,walletId:c,toAdr:p,serviceCharge:f,fromAdr:m,coinAmount:g,walletType:d?.serverWalletType},k=await ns(w);eo({tx_id:k}),o.push(t)}catch(I){zr.error(I?.error_message||P("wallet_home_toast_network_error"))}},[i,g,p,r,f,d?.serverWalletType,A])},Cg=cT;function uT(){let o=Cg();return oo(),Sg.default.createElement(X,{confirmButtonProps:{onSubmit:o}})}var Ig=uT;var dT={match:o=>o===aa,pages:{AmountPage:gg,ConfirmPage:Ig,AddressPage:z}},Tg=dT;n();s();go();n();s();n();s();var Vs=u(x()),xg=u(F());var fT=()=>{let o=(0,xg.useDispatch)(),{coin:t}=S(),e=_(),r=(0,Vs.useCallback)(async()=>{try{let{data:a={}}=await Oe({coinId:t.coinId,address:e});a?.info?.normal?o(H(a.info.normal)):o(L(!0))}catch{o(L(!0))}finally{o(ho(!1))}},[o,e,t.coinId]),{run:i}=Xo(r,{wait:500});(0,Vs.useEffect)(()=>{o(ho(!0)),i()},[e,t.coinId,i,o])},hg=fT;var pT=({children:o})=>(hg(),o),yg=pT;n();s();var _g=u(x());var lT=()=>(Q(),_g.default.createElement(Z,null)),Fg=lT;n();s();var bg=u(x());n();s();var Eg=u(F());we();be();Po();var gT=()=>{let o=fo(),{coin:t}=S(),e=_(),r=io(),i=j(),a=(0,Eg.useSelector)(zo),m=N();return uo(async()=>{let C=await q().getRequestHeaders({walletId:a,needSign:!0,currency:"usd"}),T={coinId:t.coinId,address:e,amount:r,fee:i,accountId:a},{data:I=[]}=await dt(Jo.getSpecialUtxoList,T,{headers:C});return I},(C=[])=>({inputs:C.map((y={})=>({txId:y.txId,vOut:y.index,address:y.address,amount:y.amount})),outputs:[{address:m,amount:r}],address:e,fee:i}),async C=>await q().signTransaction(C,e,t.localType),async C=>{let T=await xo(t.localType,C),I={signedTx:C,coinAmount:r,coinId:t.coinId,fromAdr:e,toAdr:m,serviceCharge:i,txHash:T};return await o(I)},C=>(eo({tx_id:C}),C))},Pg=gT;var AT=()=>{let o=Pg();return oo(),bg.default.createElement(X,{confirmButtonProps:{onSubmit:o}})},kg=AT;var CT={match:o=>o===ma,Container:yg,pages:{AddressPage:z,AmountPage:Fg,ConfirmPage:kg}},wg=CT;n();s();go();n();s();var Ng=u(x());var ST=({children:o})=>{let e=Rt().get("from");return Ng.default.createElement(Do,{fromAddress:e},o)},Bg=ST;n();s();var Rg=u(x());n();s();we();be();var IT=()=>{let{baseCoin:o}=S();return mo(async t=>{let e={address:t,coinId:o.coinId};try{let{data:i}=await dt(Jo.postCheckAddress,e);if(i?.res)return null}catch(i){console.log(i)}return await Yt(t,o.coinId)?null:{key:"wallet_manage_crypto_errortip_invalid_address_tips",args:{}}})},vg=()=>{let o=At(),t=IT();return[o,t]};n();s();var Hs=u(x()),Lg=u(F());co();var TT=()=>{let o=(0,Lg.useDispatch)(),{coin:t}=S(),e=_(),r=N(),i=Ut(),a=(0,Hs.useCallback)(async()=>{try{let c=await i({coinId:t.coinId,address:e,fromAddr:e,toAddr:r});o(Qc({name:"signInfo",value:c}));let d=[],{fee:g,depositMinAmount:p,minTransferTokenValue:f,depositGasFee:A,toAddressCheck:C}=c;t.baseCoinId===0?d.push(g):C===0?d.push(g,f,p,A):d.push(g,f);let T=d.reduce((I,h)=>no(I,h),0);o(H(T))}catch{o(L(!0))}finally{o(ho(!1))}},[o,i,t.coinId,t.baseCoinId,e,r]),{run:m}=Xo(a,{wait:500});(0,Hs.useEffect)(()=>{o(ho(!0)),o(L(!1)),m()},[o,a,m])},Dg=TT;n();s();var Mg=u(x()),Ks=u(F());co();go();var xT=()=>{let o=(0,Ks.useDispatch)(),{coin:t,baseCoin:e}=S(),{baseCoinId:r}=t,i=_(),a=jo(),m=Sn(i,a,ta),d=Re(e.coinId,a,{addressType:m})?.coinAmountInt,f=(0,Ks.useSelector)(Qe)?.signInfo?.storageUsedAmount;(0,Mg.useEffect)(()=>{if(!d||!f)return;let A=_t(d,f);o(r===0?Ro(A):We(A))},[o,r,f,d])},Og=xT;var hT=()=>{Dg(),Og();let o=vg();return Rg.default.createElement(z,{addressProps:{errorFns:{override:!0,fns:o},extraProps:{disableRequestDomain:!0}}})},Ug=hT;n();s();var Kg=u(x());n();s();var Wg=u(F());co();var Gg=()=>{let o=Ct(),t=nc(),e=(0,Wg.useSelector)(Qe),{coin:r,baseCoin:i}=S(),a=j(),m=En();return mo(c=>{let d=no(e?.signInfo?.storageUsedAmount,a),g=So(d,10**i.decimals);return(r.baseCoinId===0?Bo(o,c):Bo(t,"0"))?{key:"wallet_extension_transfer_tip_continue_using_address",args:{num:m(g,i,{useApproximate:!1,isFee:!0})},type:to.FEE_BALANCE_INSUFFICIENT}:null})},Vg=()=>{let o=$m(),t=Gg();Q({fns:[o,t],override:!0})},yT=()=>{let o=Gg();return mo(t=>{let e=o(t);return e?{...e,highlight:pe.AMOUNT}:null})},Hg=()=>{let o=Qm(),t=yT();oo({fns:[o,t],override:!0})};var _T=()=>(Vg(),Kg.default.createElement(Z,{totalAmountProps:{type:"amount"}})),Jg=_T;n();s();var Zg=u(x());n();s();var Yg=u(F()),Wi=u(PA());var FT=()=>{let{coin:o}=S(),t=_(),e=N(),r=io(),i=j(),a=jo(),m=(0,Yg.useSelector)(Qe),c=Ut(),d=fs(),g=pt({fromAddr:t,localType:o.localType,walletId:a}),p=hm({coinId:o.coinId,coinAmount:r,fromAddr:t,toAddr:e,localType:o.localType,networkFee:i,walletId:a}),f=async()=>await c({coinId:o.coinId,address:t,fromAddr:t,toAddr:e}),A=h=>{let{blockHash:y,nonce:E}=h;return{from:t,blockHash:y,type:Wi.NearTypes.TransferNear,nonce:E,receiverId:e,amount:r}},C=h=>{let{blockHash:y,nonce:E}=h,{signInfo:w}=m,{toAddressCheck:k,minTransferTokenValue:v,depositGasFee:b,fee:O,depositMinAmount:R}=w;return{from:t,blockHash:y,type:Wi.NearTypes.TransferToken,nonce:E,receiverId:e,amount:r,contract:o.address,depositGas:b,transferGas:O,depositValue:R,minTransferTokenValue:v,shouldDeposit:Boolean(k===0)}};return uo(f,h=>o.baseCoinId===0?{params:A(h)}:{params:C(h)},g,p,d)},qg=FT;var ET=()=>{let o=qg();return Hg(),Zg.default.createElement(X,{confirmButtonProps:{onSubmit:o}})},zg=ET;var PT={match:o=>o===ca,Container:Bg,pages:{AddressPage:Ug,AmountPage:Jg,ConfirmPage:zg}},Xg=PT;n();s();go();n();s();var oA=u(x());n();s();var jg=u(F());n();s();n();s();var Ys=u(x());n();s();var Gi={TRANSFER:"transfer",JETTON_TRANSFER:"jettonTransfer"};var Js=u(F());function bT({messageAttachedTons:o,invokeNotificationFee:t}){let{coin:e}=S(),r=N(),i=He(),a=V(),m=(0,Js.useSelector)(et),c=(0,Js.useSelector)(tr),d=(0,Js.useSelector)(gt),g=!!m,{fromJettonAccount:p,nonce:f}=m||{},A=(0,Ys.useCallback)((C,T)=>{if(!g)return null;let I={to:r,seqno:f,decimal:e.decimals,amount:C,memo:c};return e.baseCoinId===0?I={...I,type:Gi.TRANSFER,sendMode:T}:I={...I,type:Gi.JETTON_TRANSFER,fromJettonAccount:p,messageAttachedTons:o,invokeNotificationFee:t,sendMode:Ue.PAY_GAS_SEPARATELY+Ue.IGNORE_ERRORS},I},[r,g,p,c,o,t]);return(0,Ys.useMemo)(()=>d?A(i,Ue.CARRY_ALL_REMAINING_BALANCE):A(a,Ue.PAY_GAS_SEPARATELY+Ue.IGNORE_ERRORS),[d,i,a,A])}var qs=bT;var zs=u(x());Po();co();var $g=u(F());n();s();co();function Zs(o){return no(on(So(+new Date,1e3),0),o)}function kT({messageAttachedTons:o,invokeNotificationFee:t}={}){let e=Dt(),{coin:r}=S(),i=_(),a=(0,$g.useSelector)(et),{ttl:m}=a||{},c=qs({messageAttachedTons:o,invokeNotificationFee:t}),[d,g]=(0,zs.useState)(null);return(0,zs.useEffect)(()=>{(async()=>{if(!c)return;c.expireAt=Zs(m);let{TonWallet:p}=await Ta(),f=new p,A=await q().getTransactionBodyForSimulate(c,i,e),{seqno:C}=c,T={address:i,body:A,ignore_chksig:!0};if(ke(C,"0")){let I=await q().getPublicKey(i,r.localType,e),h={workChain:Na,publicKey:I,walletVersion:wa},y=await f.getWalletInformation(h);T={...T,init_code:y.initCode,init_data:y.initData}}g(JSON.stringify(T))})()},[c,m]),d}var Xs=kT;var wT=()=>{let o=(0,jg.useDispatch)(),[t,{setTrue:e,setFalse:r}]=To(!1),{coin:i}=S(),a=_(),m=N(),c=V(),d=Xs(),{coinId:g,localType:p}=i,f=Jt(),A=mr();return{onClick:async()=>{try{e();let T=await A({coinId:g,from:a,to:m,amount:c,inputData:d,localType:p}),{isDefraud:I,isSimilar:h,blackAddressWarning:y}=T;I?(o(rt(Zo.DEFRAUD)),o(Et(y))):h?(o(rt(Zo.SIMILAR)),o(Et(y))):o(rt("")),f()}catch(T){console.log(T)}finally{r()}},loading:t}},Qg=wT;var NT=()=>{let{onClick:o,loading:t}=Qg();return oA.default.createElement(z,{confirmButtonProps:{onClick:o,loading:t}})},tA=NT;n();s();var sA=u(x());n();s();var eA=u(x()),rA=u(F());co();function Vi(){let{coin:o,baseCoin:t}=S(),r=(0,rA.useSelector)(et)?.minTonLimit,i=Je();return(0,eA.useCallback)(()=>{if(o.baseCoinId!==0&&r&&Ko(r,i)){let a=So(r,10**t.decimals);return{key:"wallet_extension_ton_errormessage_insufficient_balance_gas2",args:{amount:a}}}return null},[r,i,o.coinId,t.decimals])}function BT(){let o=Vi();Q([o])}var nA=BT;function vT(){return nA(),sA.default.createElement(Z,null)}var iA=vT;n();s();var kt=u(x()),Jr=u(F());n();s();var mA=u(x());var Kr=u(F());Y();var aA=250;function LT({error:o,onChange:t}){let e=(0,Kr.useDispatch)(),r=(0,Kr.useSelector)(et),i=(0,Kr.useSelector)(tr),m=r?.checkMemo?P("wallet_extension_import_desc_comment_required"):P("wallet_extension_import_desc_comment_optional");return mA.default.createElement(ee,{value:i,placeholder:P("wallet_extension_ton_placeholder_comment_max_character2",{amount:aA}),dashed:!1,title:m,error:o,errorType:yt.TIP_TYPE.always,maxLength:aA,onChange:c=>{let d=c.target.value;e(ou(d)),t()}})}var cA=LT;n();s();Po();var $s=u(F());function DT(){let o=jo(),t=pn(o),e=Ut(),{coin:r,baseCoin:i}=S(),a=_(),m=N(),c=(0,$s.useSelector)(Qo),d=(0,$s.useSelector)(et),g=(0,$s.useSelector)(Wc),p=V(),f=qs({messageAttachedTons:d?.minTonLimit,invokeNotificationFee:g?.invokeNotificationFee}),A=fo();return uo(async()=>(await e({coinId:r.coinId,address:a,fromAddr:a,toAddr:m,value:"0"}))?.nonce,async E=>(f.seqno=E,f.expireAt=Zs(d?.ttl),(await q().signTransaction(f,a,i.localType))?.boc),async E=>{let w=await xo(i.localType,E),k={signedTx:E,coinId:r.coinId,coinAmount:p,fromAdr:a,toAdr:f.to,serviceCharge:c,txHash:w,extJson:JSON.stringify({nonce:f.seqno}),txSource:Yo.NORMAL,accountId:o,walletType:t?.serverWalletType,memo:f.memo};return await A(k)},E=>(eo({tx_id:E}),E))}var uA=DT;n();s();var Hi=u(x());function MT(o){return(0,Hi.useCallback)(()=>o?{key:"wallet_extension_import_alert_fillin_comment",type:to.COMMON_ERROR}:null,[o])}function OT(){let o=Vi();return(0,Hi.useCallback)(()=>{let t=o();return t?{...t,highlight:to.FEE_BALANCE_INSUFFICIENT}:null},[o])}function RT(o){let t=MT(o),e=OT();oo([t,e])}var dA=RT;function UT(){let t=(0,Jr.useSelector)(et)?.checkMemo,e=(0,Jr.useSelector)(tr),r=(0,Jr.useSelector)(wm),[i,a]=(0,kt.useState)(!1),m=uA(),c=async()=>t&&(!e||e.trim()==="")?(a(!0),{pause:!0}):(await m(),null);dA(i);let d=(0,Jr.useSelector)(or);return kt.default.createElement(X,{tipMessageProps:{hidden:r},slot:{bottom:g=>kt.default.createElement(kt.default.Fragment,null,kt.default.createElement(Ao,null,kt.default.createElement(Lo,{...g})),kt.default.createElement(cA,{error:i,onChange:()=>{a(!1)}}))},confirmButtonProps:{onSubmit:c},blockAddressInfo:d})}var fA=UT;n();s();n();s();var pA=u(F()),lA=u(x());function WT(){let o=(0,pA.useDispatch)(),t=Ut(),{coin:e}=S(),r=_(),i=Bt(N(),{wait:500}),{coinId:a}=e;(0,lA.useEffect)(()=>{a&&r&&i&&(async()=>{try{let c=await t({coinId:a,address:r,fromAddr:r,toAddr:i,value:"0"});o(L(!c)),o(di(c))}catch{o(L(!0)),o(di(null))}})()},[i])}var gA=WT;n();s();var js=u(x());var AA=u(F());co();function GT(){let o=(0,AA.useDispatch)(),t=_(),{coin:e,baseCoin:r}=S(),i=(0,js.useRef)(null),a=Bt(Xs(),{wait:500});ft(()=>{o(ho(!0))}),(0,js.useEffect)(()=>{let m=()=>{o(L(!0)),o(fi(null)),o(H("0"))},c=async()=>{try{let{code:g,data:p}=await fn({address:t,tokenAddress:e.address,chainId:r.chainId,coinId:r.coinId,value:"0",inputData:a});if(g!==0||!p||p?.queryGasLimitErrorUseDefault)m();else{o(L(!1)),o(fi(p));let{invokeNotificationFee:f="0",gasLimit:A="0"}=p;o(H(e.baseCoinId===0?A:no(A,f)))}}catch{m()}finally{o(ho(!1))}};return(()=>{!a||(i.current=setInterval(c,7e3),c())})(),()=>{clearInterval(i.current)}},[a])}var CA=GT;function VT({children:o}){return gA(),CA(),o}var SA=VT;var HT={match:o=>o===ua,Container:SA,pages:{AddressPage:tA,AmountPage:iA,ConfirmPage:fA}},IA=HT;var KT=[Pl,Ou,Ad,bd,Qd,bf,Zf,ip,Ap,_p,Rl,Zl,ng,Tg,wg,Xg,IA],TA=KT;var JT=({coinId:o,protocolId:t,baseCoinId:e})=>{let r=TA.find(({match:d})=>d(e,o,t))||{},{Container:i=({children:d})=>st.default.createElement(st.default.Fragment,null,d)}=r,{AddressPage:a,AmountPage:m,ConfirmPage:c}=r.pages||{};return(0,xA.isEmpty)(r)?null:st.default.createElement(i,null,st.default.createElement(me.Switch,null,st.default.createElement(me.Route,{exact:!0,path:`${$o}/:coinId?${cn}`,component:a}),st.default.createElement(me.Route,{exact:!0,path:`${$o}/:coinId?${un}`,component:m}),st.default.createElement(me.Route,{exact:!0,path:`${$o}/:coinId?${De}`,component:c})),st.default.createElement(pu,null))},YT=(0,st.memo)(JT),qT=()=>{let{coinId:o}=(0,me.useParams)(),{coin:t,baseCoin:e}=Cn(o,!0);return st.default.createElement(YT,{coinId:t.coinId,baseCoinId:e.coinId,protocolId:t?.protocolId})},t$=qT;export{t$ as default};

window.inOKXExtension = true;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=SendPageContainer-DCAHNGJW.js.map
