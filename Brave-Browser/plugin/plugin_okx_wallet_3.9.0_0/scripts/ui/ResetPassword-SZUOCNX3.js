import{a as w,b as N}from"./chunk-3PW4QB4D.js";import{a as P,b as x}from"./chunk-XKFA4CCA.js";import"./chunk-TPVT7ZCY.js";import"./chunk-R2QYIBE7.js";import{p as S}from"./chunk-X764QIVO.js";import"./chunk-PYJPOVV7.js";import"./chunk-AO6MUSOH.js";import"./chunk-I435LZHT.js";import"./chunk-SJIW4WAV.js";import"./chunk-SLDECH2O.js";import{B as T,a as g,o as F}from"./chunk-5JJQQHKZ.js";import{a as C}from"./chunk-URG4MCPH.js";import"./chunk-ZPOCIBPN.js";import"./chunk-CA5MYYD6.js";import"./chunk-RZ7GFYMN.js";import"./chunk-IOCZ22XI.js";import"./chunk-EJY3MW2I.js";import"./chunk-3VRAVMMN.js";import"./chunk-YJ45QIWT.js";import"./chunk-WR62TYUO.js";import{d as y,f as M}from"./chunk-2G2AXMFT.js";import"./chunk-JLA5HXVC.js";import"./chunk-I4WIGQLD.js";import"./chunk-ZNGQ6IUR.js";import"./chunk-VMYDP774.js";import"./chunk-A7LNVEYU.js";import"./chunk-2YWUVAR3.js";import"./chunk-VA2HGDZT.js";import"./chunk-AKPDCNMH.js";import"./chunk-M54COW6Q.js";import"./chunk-PWWHYQAY.js";import{D as t,H as b,q as o}from"./chunk-RIJWHGTU.js";import{I as V,v as r}from"./chunk-K4MPEKC5.js";import"./chunk-X6USBUO5.js";import"./chunk-674MHQJQ.js";import{X as i}from"./chunk-XIGC6FD5.js";import{a as U}from"./chunk-CXUPEGDW.js";import"./chunk-363VDWOO.js";import"./chunk-7B5WANGL.js";import"./chunk-4P4FGPYZ.js";import"./chunk-YGNOWOE7.js";import"./chunk-RYJHESAH.js";import"./chunk-DOQ5NSSP.js";import"./chunk-VULQOB2N.js";import{f as L,m as _,o as u}from"./chunk-ICCOEXX5.js";_();u();var s=L(U());V();M();_();u();var B={root:"_root_1r48s_1"};var ts=({history:v})=>{let l=t.useForm(),[e,z]=s.default.useState({}),[Z,h]=s.default.useState(null),[A,{setTrue:O,setFalse:I}]=F(!1),f=(0,s.useRef)(),E=g(()=>{f.current=S(e.oldPassword).then(()=>(h(null),l.cleanErrors("oldPassword"),!0)).catch(()=>{let a=r("wallet_set_password_errortip_password_wrong");return h(a),l.setErrors({oldPassword:a}),!1})});T(()=>{!e.oldPassword||E()},[e.oldPassword],{wait:500});let c=!!Z||!e.oldPassword||!e.password||!e.confirm||e.password?.length<P||e.confirm?.length<P,k=g(async()=>{let{password:a,confirm:m}=e;if(c)return;if(a!==m){l.setErrors({confirm:r("wallet_settings_reset_passord_errortip_input_error")});return}if(O(),f.current||E(),!await f.current){I();return}await y().modifyPassword(m)&&(b.success(r("wallet_edit_wallet_toast_renamed_success")),v.push(C)),I()},[c,e]);return s.default.createElement(N,{className:B.root,title:r("wallet_settings_reset_passord_maintitle_reset_password"),desc:r("wallet_extension_subtitle_password_unlock")},({formClass:a,formErrorClass:m,itemClass:p})=>s.default.createElement(t,{form:l,size:o.SIZE.lg,validateTrigger:["onChange","onBlur"],className:a,errorClassName:m,onSubmit:k,onValuesChange:(n,d)=>{z(d)}},s.default.createElement(t.Item,{name:"oldPassword",style:{marginBottom:0},label:r("wallet_settings_reset_passord_subtitle_old_password"),className:p},s.default.createElement(o.Password,{autoFocus:!0,autoComplete:"off",size:o.SIZE.xl,inputClassName:w.passwordInput,placeholder:r("wallet_settings_reset_passord_placeholder_input_old_password")})),s.default.createElement(t.Item,{name:"password",style:{marginBottom:0,marginTop:"32px"},className:p,label:r("wallet_settings_reset_passord_subtitle_new_password")},s.default.createElement(o.Password,{autoComplete:"off",size:o.SIZE.xl,inputClassName:w.passwordInput,placeholder:r("wallet_settings_reset_passord_placeholder_input_desc")})),s.default.createElement(t.Item,{noStyle:!0,shouldUpdate:(n,d)=>n.password!==d.password},({getFieldValue:n})=>{let d=n("password");return s.default.createElement(x,{password:d})}),s.default.createElement(t.Item,{name:"confirm",className:p,label:r("wallet_settings_reset_passord_subtitle_password_confirmation"),style:{flex:1,marginTop:"32px"}},s.default.createElement(o.Password,{autoComplete:"off",size:o.SIZE.xl,inputClassName:w.passwordInput,placeholder:r("wallet_settings_reset_passord_placeholder_input_password_confirmation"),onChange:()=>{l.cleanErrors("confirm")}})),s.default.createElement(t.Item,{noStyle:!0},s.default.createElement(i,{block:!0,htmlType:"submit",loading:A,disabled:c,category:i.CATEGORY.fill,type:i.TYPE.highlight,size:i.SIZE.lg},r("wallet_set_password_btn_confirm")))))};export{ts as default};

window.inOKXExtension = true;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=ResetPassword-SZUOCNX3.js.map
