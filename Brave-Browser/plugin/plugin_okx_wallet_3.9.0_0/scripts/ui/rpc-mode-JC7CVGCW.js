import{a as Yi,b as qi,c as Zi}from"./chunk-UP7FDVMY.js";import{a as Vi,b as Yt,c as zi}from"./chunk-SP3S3L5M.js";import{a as $i}from"./chunk-TSNGA6WZ.js";import"./chunk-LSZZKHZT.js";import{d as y,e as Ft,g as we,h as Le,i as xo,j as li,k as ci,l as pi,m as di}from"./chunk-CIJ7BYW2.js";import{a as mi}from"./chunk-ODC3QADD.js";import"./chunk-YC4OT6UM.js";import{a as bi,b as vo,c as zo,d as $o,e as zt,f as $t,g as Wi}from"./chunk-GMM7DPS5.js";import{b as gi,c as xi,d as Ut,e as Ci,f as vi,g as Ei,j as yi,k as ki,l as Ii,n as Ni,q as wi}from"./chunk-BJANYOX5.js";import{a as b,b as N,c as Re,d as ui,e as fi,f as Oe,g as _i,h as Mt,i as Ti,k as hi}from"./chunk-UYALNF4Q.js";import{a as Dr,b as he,c as Co}from"./chunk-JPV5PNQX.js";import"./chunk-BOWCSZLW.js";import{a as De}from"./chunk-PZENYLA6.js";import{a as xm}from"./chunk-V7BGSZRM.js";import{a as jn,b as Jn,c as ei,e as oi,f as ti,g as ri,h as ii,i as si}from"./chunk-I4FHXJRY.js";import"./chunk-BQBRVMZJ.js";import"./chunk-XKXVOEIB.js";import"./chunk-HOMBI2ED.js";import"./chunk-JV2QGIZV.js";import"./chunk-FMELEEEB.js";import{a as Rn}from"./chunk-G6RAUYSM.js";import{a as Xn}from"./chunk-JEQ6GJXM.js";import"./chunk-GGPFCAHR.js";import"./chunk-LJK5U7KV.js";import{a as Bt,b as Qn}from"./chunk-IL2ELGO7.js";import"./chunk-D5WHGCWL.js";import"./chunk-UDYIY37L.js";import"./chunk-QNZPWHPG.js";import"./chunk-LHNVUV3G.js";import"./chunk-JR7BDGRI.js";import"./chunk-4ZG74PQY.js";import"./chunk-74GTIAZN.js";import"./chunk-BXKGIUFS.js";import{a as ai}from"./chunk-R77Z6U7Q.js";import{a as ni}from"./chunk-LDMXQFRF.js";import"./chunk-IKIWJ4RT.js";import"./chunk-YVRJEQO6.js";import"./chunk-6XTUWRPU.js";import"./chunk-IM6LLRHH.js";import"./chunk-XVNT5VUK.js";import"./chunk-MRPWIG2O.js";import{a as Kn}from"./chunk-OXTQMA4W.js";import"./chunk-TFCBP6UV.js";import"./chunk-DCMAUS7C.js";import{a as Zn}from"./chunk-D4V7ONZY.js";import"./chunk-R7R6LTH6.js";import"./chunk-TAZU4KSU.js";import{a as Gn,d as Wn}from"./chunk-W327NRHO.js";import"./chunk-DZDHGH5B.js";import"./chunk-UKFSUXAE.js";import"./chunk-U3CLRNWK.js";import"./chunk-M4STRGDO.js";import"./chunk-GYUX3JJ3.js";import"./chunk-2ZLYTJ3L.js";import"./chunk-H43TVLNI.js";import"./chunk-PBOUQOH2.js";import{a as qn}from"./chunk-SG4LXTVB.js";import{a as Ar,b as Vn}from"./chunk-3EYFKVOU.js";import"./chunk-QUUI62AZ.js";import{a as Yn}from"./chunk-SIKYZQW4.js";import"./chunk-MCRNCTJS.js";import{a as zn,b as $n,d as Vo,e as Sr,g as Pr}from"./chunk-YZAK46Y6.js";import{G as go}from"./chunk-VX7CI7XT.js";import"./chunk-D6HSNWGS.js";import{e as br}from"./chunk-7ODXCTBK.js";import"./chunk-GZMWLE4V.js";import"./chunk-C54I6GL3.js";import"./chunk-ZJICRI36.js";import"./chunk-BIBDTDJA.js";import"./chunk-ADIQBHVU.js";import"./chunk-TPVT7ZCY.js";import{a as Nn}from"./chunk-A6HNAUBV.js";import{b as wn,e as Lt,f as Te,g as P,h as On,j as Bn,l as Fn,m as Mn,n as Ot,p as Un}from"./chunk-6GFVKSAR.js";import"./chunk-JVLSBRR5.js";import"./chunk-5IXTSGAM.js";import"./chunk-OR2KMY5L.js";import{a as Hn}from"./chunk-FFJ36R7T.js";import"./chunk-NVCWAHOV.js";import"./chunk-RFEJLMRV.js";import"./chunk-UIABO6UG.js";import"./chunk-KJFAD5C4.js";import"./chunk-BFVA6OLJ.js";import"./chunk-ON3J2WQV.js";import{b as _e}from"./chunk-RC3QMLDN.js";import"./chunk-JINEVGIZ.js";import"./chunk-SRU2IM3A.js";import"./chunk-46NSFYB3.js";import{a as wr,i as In}from"./chunk-FFQESTX4.js";import{a as J}from"./chunk-OCZAVPFZ.js";import"./chunk-P6SDUFQ6.js";import"./chunk-5TNZ4MQV.js";import"./chunk-6YBNTFOQ.js";import"./chunk-XGXABYQN.js";import"./chunk-KKTPGZSO.js";import"./chunk-ESKOSV75.js";import"./chunk-ZDQ5EBGN.js";import"./chunk-2KEW2T4M.js";import"./chunk-R7VTXTCL.js";import"./chunk-LBYCQPAD.js";import{b as Io,c as re,d as Yo,e as Ki}from"./chunk-EWWNKCT6.js";import"./chunk-ZI6GTU5G.js";import{b as R,c as be,d as Ht,e as Eo,f as Ai,g as Gt,h as Si,i as Lr,j as yo,k as Wt,l as ko,m as Or,n as Pi,o as Di,p as Li,q as Oi,r as Bi,s as Fi,t as Br,u as Mi,v as Ui,w as Hi,y as Gi,z as Vt}from"./chunk-IGQY7C6Y.js";import"./chunk-OMKW26U3.js";import"./chunk-3P5YDD2R.js";import"./chunk-L7ZCJVL2.js";import"./chunk-KZR43RPO.js";import"./chunk-QXNKNSJH.js";import"./chunk-KVIYCH5A.js";import"./chunk-U43G73LH.js";import"./chunk-NMSQZNJG.js";import{a as gm}from"./chunk-KDTBVHVU.js";import"./chunk-PRHPRTXY.js";import"./chunk-SQ5W4RLM.js";import"./chunk-I27PVEIN.js";import"./chunk-Y2PED5BF.js";import"./chunk-RUSRHRGO.js";import{b as yn}from"./chunk-IZ5XPPXG.js";import"./chunk-6PN4BR3D.js";import"./chunk-EWK7ZFVN.js";import"./chunk-A23SHFFL.js";import"./chunk-VZ3BFZKL.js";import"./chunk-T6Z2C3RK.js";import"./chunk-R2QYIBE7.js";import"./chunk-KT53NMHD.js";import"./chunk-64STH2HN.js";import"./chunk-EKQH7XTV.js";import"./chunk-R2QKPEWB.js";import"./chunk-RMA2FZOE.js";import{f as Dn,g as Ln}from"./chunk-KRHB66KZ.js";import{d as Dt,e as ho,f as S,g as bn,k as An,l as Sn,m as Pn}from"./chunk-4RHFH7IF.js";import{d as To}from"./chunk-LPTRVNVL.js";import"./chunk-PH2A2GR3.js";import{d as Nr}from"./chunk-2LLM6N6U.js";import"./chunk-LF2PURXZ.js";import"./chunk-JEZIPKDY.js";import{a as kn}from"./chunk-SR2BDP3A.js";import"./chunk-CFT6B56M.js";import"./chunk-WK32FAZW.js";import"./chunk-WMUTUJYX.js";import"./chunk-B23OWGFX.js";import"./chunk-OSWXWF4A.js";import"./chunk-Q7FJER56.js";import"./chunk-RBTIRMSE.js";import"./chunk-7GZ2ZCGI.js";import{P as an,q as sn}from"./chunk-WTP3OIOS.js";import"./chunk-D66ZH3O3.js";import"./chunk-X764QIVO.js";import"./chunk-HISWVX7W.js";import{a as F}from"./chunk-PYJPOVV7.js";import{b as vt}from"./chunk-AO6MUSOH.js";import{a as fe}from"./chunk-I435LZHT.js";import{f as lo,t as co,x as Ie}from"./chunk-SJIW4WAV.js";import"./chunk-SLDECH2O.js";import{A as fn,a as Ne,b as dn,d as Et,e as yt,j,q as un}from"./chunk-5JJQQHKZ.js";import{Aa as Cn,Ba as kt,Ca as It,Da as fo,Ea as ue,Fa as Nt,Ga as wt,Ha as bt,Ia as At,Ja as St,Ka as _o,La as Pt,R as Tn,T as hn,a as W,aa as gn,cb as vn,i as _n,ya as uo,za as xn}from"./chunk-URG4MCPH.js";import{$a as cn,Xa as ln,ab as pn,lb as Ct,o as $,y as C}from"./chunk-ZPOCIBPN.js";import{e as Wo,m as po}from"./chunk-CA5MYYD6.js";import"./chunk-RZ7GFYMN.js";import{a as U}from"./chunk-IOCZ22XI.js";import"./chunk-EJY3MW2I.js";import"./chunk-3VRAVMMN.js";import"./chunk-YJ45QIWT.js";import{a as pm}from"./chunk-WR62TYUO.js";import{d as en,f as um}from"./chunk-2G2AXMFT.js";import"./chunk-XGFQCNHX.js";import"./chunk-7JF42X5G.js";import{a as ae,b as En}from"./chunk-4JZ3HIS7.js";import{s as mn}from"./chunk-JLA5HXVC.js";import{c as hm}from"./chunk-I4WIGQLD.js";import"./chunk-ZNGQ6IUR.js";import"./chunk-JERFAOJH.js";import"./chunk-JXZFOFB5.js";import"./chunk-LYNLETTP.js";import"./chunk-FQ4XEVKF.js";import{c as Je}from"./chunk-VMYDP774.js";import"./chunk-A7LNVEYU.js";import"./chunk-2YWUVAR3.js";import"./chunk-VA2HGDZT.js";import"./chunk-AKPDCNMH.js";import{Bb as _m,Eb as nn,Kb as Tm,Qa as Y,Sa as tn,Ta as Qe,Va as ht,Wa as gt,Xa as Xe,Ya as Go,Za as mo,ac as Ir,cb as je,db as se,ib as xt,la as fm,m as Ke,o as on,pb as te,qb as rn}from"./chunk-M54COW6Q.js";import"./chunk-PWWHYQAY.js";import{B as ie,D as z,G as ao,H as Ho,o as Tt,q as L,y as Rr}from"./chunk-RIJWHGTU.js";import{I as E,j as so,l as G,n as Jr,v as l}from"./chunk-K4MPEKC5.js";import"./chunk-X6USBUO5.js";import"./chunk-674MHQJQ.js";import{L as B,R as kr,X as A,c as X}from"./chunk-XIGC6FD5.js";import{a as _,g as dm}from"./chunk-CXUPEGDW.js";import"./chunk-QAWZYDPQ.js";import"./chunk-PYTKRRY4.js";import"./chunk-363VDWOO.js";import"./chunk-7B5WANGL.js";import"./chunk-4P4FGPYZ.js";import"./chunk-Y47SQ3XQ.js";import"./chunk-YGNOWOE7.js";import"./chunk-N4GKTC7Y.js";import"./chunk-2BD64J7Y.js";import"./chunk-RYJHESAH.js";import"./chunk-DOQ5NSSP.js";import"./chunk-VULQOB2N.js";import{f as m,h as yr,m as n,o as i}from"./chunk-ICCOEXX5.js";n();i();var Bo=m(_()),am=m(C()),no=m(U());n();i();var K=m(_()),oe=m(U());n();i();var w=m(_()),as=m(U()),Zo=m(C());E();_m();Tm();n();i();var Zt=m(_()),qt=m(C()),Xi=m(U());E();n();i();var Em=m(_()),ym=m(C());n();i();var Cm=m(_()),vm=m(X());var Qi="SHOW-SWITCH";var ji=()=>{let e=J(),t=(0,Xi.useHistory)(),o=Te(),r=(0,qt.useSelector)(S),s=_e(),[a,c]=Zt.default.useState(!0),p=(0,qt.useSelector)(Ct),d=(0,qt.useSelector)(ln);j(()=>{e.get("from")==="setting"&&(c(!1),t.replace({search:""}),Jr.listen(Qi,()=>{c(!0)}))});let f=(0,Zt.useMemo)(()=>o.find(({address:T})=>!T)||{},[o]);return{rpcInfo:r,mainToken:f,chainTokens:o,walletAccount:d,ethereumAccount:s,isNotBackupWallet:p,switchVisible:a}};n();i();var me=m(_()),Ji=m(U()),Ri=m(X()),es=m(wr());E();n();i();var qo={button:"_button_l2q1y_1",showButton:"_showButton_l2q1y_5",editIcon:"_editIcon_l2q1y_11"};var km=190,os=({dataSource:e,backupHeight:t,scrollTop:o})=>{let r=(0,me.useMemo)(()=>e.length>=8&&o>km,[e.length,o]),{paddingBottom:s,buttonPaddingBottom:a,absoluteBottom:c}=ri({isButtonAbsolute:r,backupHeight:t});return me.default.createElement("div",{className:qo.wrapper},me.default.createElement("div",{style:{paddingBottom:s}},me.default.createElement(Nr,{className:"rc-mode-home__tokens",dataSource:e,renderItem:p=>me.default.createElement(Nr.Coin,{name:p?.name,symbol:p?.symbol,to:`${_o}?${es.default.stringify({address:p?.address})}`,balance:p.balance||"0",market:!1})})),me.default.createElement("div",{className:`${r?qo.showButton:""} ${qo.button}`,style:{bottom:c,paddingBottom:a}},me.default.createElement(Ji.Link,{to:bt},me.default.createElement(A,{circle:!0,type:A.TYPE.primary,category:A.CATEGORY.outline},me.default.createElement(B,{className:(0,Ri.default)("okx-wallet-plugin-edit-wallet",qo.editIcon)}),l("developer_mode_home_maintitle_managecpt")))))};n();i();var Be=m(_());var rs=m(U()),ns=m(wr());var Fr=m(C());n();i();var ts=[{text:"wallet_home_btn_send",icon:"okx-wallet-plugin-up",type:"SEND"},{text:"wallet_home_btn_receive",icon:"okx-wallet-plugin-down",type:"RECEIVE"},{text:"developer_mode_home_btn_faucet",icon:"okx-wallet-plugin-faucet-1",type:"FAUCET",disabledText:"extension_wallet_home_tooltip_no_faucet"},{text:"developer_mode_home_btn_t_tradinghistory",icon:"okx-wallet-plugin-history-1",type:"HISTORY"},{text:"wallet_extension_home_text_toolkit",icon:"okx-wallet-plugin-toolkit",type:"MORE"}];var is=()=>{let e=(0,Fr.useSelector)(Ct),t=Bt(),o=(0,rs.useHistory)(),r=Te(),s=(0,Fr.useSelector)(S),a=(0,Be.useMemo)(()=>r.filter(({balance:k})=>!!Number(k)),[r]),c=(0,Be.useCallback)(()=>{a.length===1?o.push(`${ue}?${ns.default.stringify({address:a[0]?.address})}`):o.push(wt)},[a]),p=(0,Be.useCallback)(()=>{e?t():o.push(fo)},[e]),d=()=>{o.push(St)},f=(0,Be.useCallback)(()=>{s.faucetUrl&&globalThis.open(s.faucetUrl)},[s.faucetUrl]),{hasNewFeature:T}=oi(),g=()=>{sn({button_name:"more",site:""})},h=()=>{o.push(_n)},x=(0,Be.useCallback)(k=>{switch(k.type){case"SEND":c();break;case"RECEIVE":p();break;case"HISTORY":d();break;case"FAUCET":f();break;case"DAPP_CONNECT":h();break;case"MORE":g();break;default:break}},[h,f,d,p,c]),I=(0,Be.useMemo)(()=>ts.map(k=>k.type==="FAUCET"?{...k,disabled:!s?.faucetUrl}:k.type==="MORE"?{...k,hasNewFeature:T}:k),[T,s]);return{clickHandle:x,iconOptions:I}};n();i();var ss={wrapper:"_wrapper_11hdl_1"};var ms=()=>{let e=(0,as.useHistory)(),t=Bt(),o=(0,Zo.useDispatch)(),{rpcInfo:r,chainTokens:s,isNotBackupWallet:a,mainToken:c,ethereumAccount:p}=ji(),d=In(),f=(0,w.useRef)(null),[T,g]=(0,w.useState)(0),[h,x]=(0,w.useState)(0),I=(0,w.useRef)(null),{unapprovedRequestCount:k,unapprovedPermissionsRequestId:pe}=wi(),V=jn();(0,w.useEffect)(()=>{a&&k!==0?t({text:l("wallet_dapp_conncetion_alert_backup_wallet")},pe):k>0&&e.push(Tn)},[a,k]),(0,w.useEffect)(()=>{(async()=>{k===0&&await o(yn())})()},[k]);let{isRpcMode:Q}=(0,Zo.useSelector)(To);(0,w.useEffect)(()=>{Q||e.replace(W)},[Q]);let qe=(0,Zo.useSelector)(cn),de=nn()===rn;(0,w.useEffect)(()=>{qe&&de&&globalThis.platform.openExtensionInPopup(It)},[]);let Fo=co(c.balance),{clickHandle:Ze,iconOptions:xr}=is(),{isNeedShowDisconnectUpgrade:ft,setDisconnectUpgrade:_t}=Xn(),Cr=(0,w.useCallback)(()=>{ft&&(ao.success({title:l("wallet_extension_card_subtitle_disconnect_update")}),_t())},[ft,_t]),[vr,Mo]=(0,w.useState)(he.init),H=ni(),{run:Er}=un(()=>{x(I.current?.scrollTop||0)},{wait:50,maxWait:50}),Uo=()=>{!r.rpcUrl||(Mo(he.loading),Vi(r.rpcUrl).then(()=>{Mo(he.success)}).catch(()=>{Mo(he.failed)}))};return j(()=>{Uo()}),(0,w.useLayoutEffect)(()=>{f.current&&a&&g(f.current?.clientHeight||0)},[a]),w.default.createElement("div",{className:ss.wrapper,ref:I,onScroll:()=>{Er()}},w.default.createElement("div",null,w.default.createElement(ii,{titleLeft:d?.keyringName,titleRight:d?.walletName,subTitle:$(p),address:p,chainName:r?.name}),w.default.createElement(ei,{balance:Fo,symbol:c.symbol}),w.default.createElement(ti,{clickHandle:Ze,iconOptions:xr}),w.default.createElement(os,{dataSource:s,scrollTop:h,backupHeight:a?T+24:0})),w.default.createElement(Jn,{disconnectCallback:Cr}),w.default.createElement("div",{ref:f},w.default.createElement(Qn,{offsetBottom:24})),w.default.createElement(si,{showBackup:()=>{}}),w.default.createElement(Yt,{visible:vr===he.failed,onRetry:Uo,onChangeNet:()=>{e.push(`${hn}?tab=${H?.networkType??"1"}`)}}),V&&w.default.createElement(Rn,{actionMap:{["RECOVER"]:()=>{e.push(`${vn}?action=${Nn.RECOVER}`)},["SWITCH_WALLET"]:()=>{e.push(`${gn}?fromHome=1`)}}}))};n();i();var hs=m(_());n();i();var ls=m(gm()),cs=m(C());var Ko=m(_());te();var ps=m(Ke());var Mr=class extends ls.default{constructor(){super();yr(this,"DROPPED_BUFFER_COUNT",3);yr(this,"droppedBlocksBufferByTxHash",new Map);this.confirmedTxs=[],this.web3=null}setWeb3(o){this.web3=o}setConfirmedTxs(o){this.confirmedTxs=o}async checkPendingTx(o,r,s){let a=[o,...o.txPool],c=0,p;(await Promise.allSettled(a.map(f=>this.checkOnePendingTx(f)))).forEach(f=>{if(f.status==="fulfilled"){let{value:T={}}=f;if(T.status==="dropped")c++;else if(T.status==="confirmed"){let{txId:g,transactionReceipt:h,timestamp:x}=T;p={id:g,transactionReceipt:h,timestamp:x}}}}),p?r(p,o.id):c===a.length&&s(o.id)}async checkOnePendingTx(o){let{id:r,txHash:s}=o;if(!s||o.status===b.DROPPED||this.checkIfNonceIsTaken(o))return{status:"dropped"};try{let a=await this.web3.eth.getTransactionReceipt(s);if(a?.blockNumber){let{timestamp:c}=await this.web3.eth.getBlock(a?.blockHash);return{status:"confirmed",txId:r,transactionReceipt:a,timestamp:c}}}catch(a){throw new Error(a)}return await this.checkIfTxWasDropped(o)?{status:"dropped"}:{}}checkIfNonceIsTaken(o){return this.confirmedTxs.some(r=>r.id!==o.id&&mo(ae(r.txParams.nonce),ae(o.txParams.nonce)))}async checkIfTxWasDropped(o){let{id:r,txHash:s,txParams:{nonce:a,from:c}}=o,p=`${r}-${s}`,d;try{d=await this.web3.eth.getTransactionCount(c)}catch{return!1}if((0,ps.isNil)(d)||Go(ae(a),d))return!1;this.droppedBlocksBufferByTxHash.has(p)||this.droppedBlocksBufferByTxHash.set(p,0);let f=this.droppedBlocksBufferByTxHash.get(p);return f<this.DROPPED_BUFFER_COUNT?(this.droppedBlocksBufferByTxHash.set(p,f+1),!1):(this.droppedBlocksBufferByTxHash.delete(p),!0)}};function ds(){let e=Lt(),t=gi(),o=(0,cs.useSelector)(Dt),r=Et(_e()),s=Et(Oe()),a=Et(ui()),c=(0,Ko.useRef)(!1),p=(0,Ko.useRef)(new Mr),d=async(g,h,x)=>{let I=await xi({txId:g,replaceTxId:h,tx:x});t(I)},f=g=>{d(g,null,{status:b.DROPPED,finishTime:+new Date})},T=({id:g,transactionReceipt:h},x)=>{let I={blockNumber:h.blockNumber,gasUsed:h.gasUsed,finishTime:+new Date,extraParams:{contractAddress:h.contractAddress}};h.status?I.status=b.SUCCEED:I.status=b.FAILED,d(x,g,I)};(0,Ko.useEffect)(()=>{(async()=>{if(!(s.current.length===0||c.current)){c.current=!0;try{let h=await e();p.current.setWeb3(h),p.current.setConfirmedTxs(a.current);let x=null;try{x=await h.eth.getTransactionCount(r.current,"latest")}catch{}await Promise.all(s.current.map(I=>x!==null&&Go(ae(I.txParams.nonce),x)?null:p.current.checkPendingTx(I,T,f)))}finally{c.current=!1}}})()},[o,e])}n();i();var Kt=m(Ke()),No=m(_()),Qt=m(C());var us=m(pm());var Nm=3*60*1e3,wm={mainTokens:[],chainTokens:[]},fs=()=>{let e=(0,Qt.useDispatch)(),t=(0,No.useRef)(null),o=Bn(),r=(0,No.useRef)(wm),s=Mn(),{isRpcMode:a}=(0,Qt.useSelector)(To);(0,No.useEffect)(()=>{let{chainId:d,chainTokens:f}=s,T=(0,Kt.map)((0,Kt.uniqBy)(f,"address"),({address:g})=>g||"");r.current={chainId:d,tokenAddresses:T}},[s]);let c=()=>{clearInterval(t.current),t.current=null},p=async()=>{try{let{chainId:d,tokenAddresses:f}=r.current;f.length&&(await o(d,f))?.forEach(({price:g="0",address:h})=>{e(Ln({chainId:d,address:h,price:g}))})}catch(d){us.default.debug(`fetch coin price failed 
${d}`)}};j(()=>{p()}),(0,No.useEffect)(()=>(a?t.current=setInterval(()=>{p()},Nm):c(),()=>{c()}),[a])};n();i();var Ur=m(_()),Xt=m(Ke()),_s=m(C());var Ts=()=>{let e=Ot(),t=Un(),{defaultNets:o,customNets:r}=(0,_s.useSelector)(ho),s=Ur.default.useMemo(()=>[...o,...r].map(c=>(0,Xt.omit)(c,"lastUsage")),[o,r]),a=wn(()=>s,s,(c,p)=>!(0,Xt.isEqual)(c,p));Ur.default.useEffect(()=>{let c=t?.reduce((p,{walletIdentities:d})=>[...p,...d.map(({account:{mainnet:f}})=>f)],[]);a.forEach(async p=>{c.forEach(d=>{let f=p.chainId;e(f,void 0,{...p,account:d})})})},[t,a])};var bm=()=>(ai(),bi(),fs(),ds(),Ts(),null),gs=(0,hs.memo)(bm);n();i();var jt=m(_());var xs=m(C());var Cs=m(U());var Am=()=>{let e=(0,Cs.useHistory)(),t=J(),o=t.get("showClose"),r=t.get("address"),s=(0,xs.useSelector)(S),a=P(r),c=_e(),p=`ethereum:${c}`;return jt.default.createElement(Hn,{navigator:{bordered:!1,onClose:o?()=>{e.push(W)}:null,closeable:!0},content:{symbol:a?.symbol,coinLogo:a?.icon,chainName:s?.name,walletAddress:c,aggregation:!1,QRCodeAddress:p}})},vs=(0,jt.memo)(Am);n();i();var xe=m(_());var Ms=m(C());n();i();var Es=m(_());var ys=m(U()),Qo=m(C());var Sm=()=>{let e=(0,ys.useHistory)(),t=(0,Qo.useDispatch)(),r=J().get("showClose"),s=(0,Qo.useSelector)(Wt),a=(0,Qo.useSelector)(R),c=P(a),p=()=>{setTimeout(()=>{t(Vt())},200)},d=()=>{p(),e.goBack()},f=r?()=>{p(),e.push(s||W)}:null;return Es.default.createElement(F,{title:c?.symbol,icon:{text:c?.symbol},onBack:d,onClose:f})},ks=Sm;n();i();var eo=m(_()),Xo=m(C());E();function Pm(){let e=(0,Xo.useDispatch)(),t=(0,Xo.useSelector)(be),o=(0,Xo.useSelector)(Ht),r=(0,eo.useRef)(null),s=c=>{let{value:p}=c.target,d=null;p?p&&!go(p,{allowNonPrefixed:!1})&&(d={key:"wallet_manage_crypto_errortip_invalid_address_tips"}):d={key:"wallet_transfer_errortip_receive_address_empty"},e(Li(p)),e(Oi(d))};(0,eo.useLayoutEffect)(()=>{r.current.focus()},[]);let a=l("wallet_extension_transaction_placeholder_input_address");return eo.default.createElement(De.Row,null,eo.default.createElement(L.TextArea,{onRef:c=>{r.current=c},value:t,label:l("wallet_extension_transaction_input_label_to"),placeholder:a,size:L.SIZE.xl,autoResize:!0,errorType:L.TIP_TYPE.always,error:o&&l(o.key,o.args),onChange:s}))}var Is=Pm;n();i();var ge=m(_()),Fe=m(C());E();te();n();i();var Jt={"max-button":"_max-button_5lu07_1",maxButton:"_max-button_5lu07_1",balance:"_balance_5lu07_12","balance-wrap":"_balance-wrap_5lu07_16",balanceWrap:"_balance-wrap_5lu07_16"};function Dm(){let e=(0,Fe.useDispatch)(),t=(0,Fe.useSelector)(R),o=P(),r=P(t),s=o?.balance,a=zo(),c=!t,{run:p,cancel:d}=fn(f=>{let T=null,g=Qe(s,a);Xe(f,c?g:r?.balance)?T={key:"wallet_transfer_errortip_insufficient_balance"}:ht(g,0)&&(T={key:"wallet_transfer_errortip_mainchain_coin_insufficient",args:{chainSymbol:o?.symbol}}),e(Fi(T))},{wait:100});return yt(d),p}function Lm(){let e=(0,Fe.useDispatch)(),t=P(),o=(0,Fe.useSelector)(R),r=(0,Fe.useSelector)(Eo),s=(0,Fe.useSelector)(Gt),a=P(o),c=a?.balance,p=vo(c,{symbol:a?.symbol,decimals:a?.decimals}),d=Dm(),f=zo(),T=(0,ge.useRef)(!!r),g=x=>{T.current=!0,e(Bi(x))},h=()=>{if(o)g(c);else{let x=Qe(c,f);g(gt(x,0)?"0":x)}};return(0,ge.useEffect)(()=>{T.current&&d(r)},[r,f,t?.balance]),ge.default.createElement(De.Row,null,ge.default.createElement(L.Number,{placeholder:G.showFloorTruncation(0,6,{needZero:!0}),title:l("wallet_extension_send_subtitle_amount"),size:L.SIZE.xl,enableMinus:!1,precision:a?.decimals,value:r,error:s&&l(s.key,s.args),errorType:L.TIP_TYPE.always,onChange:g,action:ge.default.createElement(Ie.Text,{size:Ie.SIZE.xs,type:Ie.TYPE.secondary,className:Jt["balance-wrap"],onClick:h},`${l("wallet_extension_send_text_balance")}:`,ge.default.createElement(Ie.Text,{inherit:!0,ellipsis:{tooltip:!0},className:Jt.balance},p)),suffix:ge.default.createElement(Ie.Text,{className:Jt["max-button"],onClick:h},l("wallet_extension_send_text_max"))}))}var Ns=Lm;n();i();var Me=m(_()),Ae=m(C()),ws=m(hm()),bs=m(Ke());E();te();n();i();function Om(){let e=(0,Ae.useDispatch)(),t=(0,Ae.useSelector)(R),o=P(t),r=(0,Ae.useSelector)(be),s=(0,Ae.useSelector)(Eo);(0,Me.useEffect)(()=>{if(t&&go(r)&&o?.decimals){let a=!s||(0,bs.isNaN)(Number(s));e(Br(qn(r,a?"0":(0,ws.addHexPrefix)(En(Y(s,10**o?.decimals))))))}},[t,o?.decimals,r,s])}function Bm(){let e=(0,Ae.useDispatch)(),o=!(0,Ae.useSelector)(R),r=(0,Ae.useSelector)(Si);return Om(),o?Me.default.createElement(De.Row,null,Me.default.createElement(L,{title:Me.default.createElement("div",{className:"rpc-evm-send-edit-input-data__title"},l("developer_mode_send_maintitle_gasprice"),Me.default.createElement(ie,{title:l("developer_mode_send_tooltip_additional_data"),placement:ie.DIRECTION.topRight},Me.default.createElement(B,{className:"okx-wallet-plugin-information-circle rpc-evm-send-edit-input-data__info-icon"}))),placeholder:l("developer_mode_select_a_token_input_optional"),errorType:L.TIP_TYPE.always,size:L.SIZE.xl,value:r,onChange:s=>{e(Br(s.target.value))}})):null}var As=Bm;n();i();var wo=m(_()),jo=m(C()),Ss=m(X()),Ps=m(Ke());E();te();n();i();function Fm(){let e=(0,jo.useDispatch)(),t=(0,jo.useSelector)(yo),o=(0,jo.useSelector)(ko),r=p=>{e(Mi(p))},s;t&&(Xe(t,o)?s=l("developer_mode_send_tooltip_higher",{num:o}):ht(t,o)&&(s=l("developer_mode_send_tooltip_lower",{num:o})));let a=l("developer_mode_send_maintitle_nonce1"),c=`${(0,Ps.isNil)(o)?"":G.thousandFormat(o)}`;return wo.default.createElement(De.Row,{className:"rpc-evm-send-edit-nonce",noMargin:!0},wo.default.createElement("div",{className:"rpc-evm-send-edit-nonce__inner"},wo.default.createElement(L.Number,{innerClassName:(0,Ss.default)({"rpc-evm-send-edit-nonce__warning-input":!!s}),withOperation:!0,alwaysOperation:!0,enableMinus:!1,title:a,placeholder:c,size:L.SIZE.xl,value:t,onAdd:()=>!t&&o!==null?(r(tn(o,1)),!1):!0,onSub:()=>!t&&Xe(o,0)?(r(Qe(o-1)),!1):!0,onChange:r})),s&&wo.default.createElement("div",{className:"rpc-evm-send-edit-nonce__warning-text"},wo.default.createElement(B,{className:"okx-wallet-plugin-warning-circle rpc-evm-send-edit-nonce__warning-icon"}),s))}var Ds=Fm;n();i();var Ls=m(_()),Os=m(U());E();var Jo=m(C());function Mm(){let e=(0,Jo.useSelector)(be),t=(0,Jo.useSelector)(Ht),o=(0,Jo.useSelector)(Gt);return!e||!!t||!!o}function Um({loading:e}){let t=(0,Os.useHistory)(),o=(0,Jo.useSelector)(R),r=Mm(),s=()=>{let a=Nt;o&&(a+=`?address=${o}`),t.push(a)};return Ls.default.createElement(A,{category:A.CATEGORY.fill,type:A.TYPE.highlight,size:A.SIZE.lg,loading:e,block:!0,disabled:r,onClick:s},l("wallet_extension_send_btn_next"))}var Bs=Um;n();i();var Fs={"rpc-evm-send-edit__inner":"_rpc-evm-send-edit__inner_3qvkv_1",rpcEvmSendEditInner:"_rpc-evm-send-edit__inner_3qvkv_1"};function Hm(){let e=(0,Ms.useDispatch)(),t=J(),{chainGasLimitLoading:o}=zt();return $t(),j(()=>{e(Di(t.get("address")))}),xe.default.createElement(Je.Container,null,xe.default.createElement(ks,null),xe.default.createElement(Je.Box,{className:Fs["rpc-evm-send-edit__inner"]},xe.default.createElement(Is,null),xe.default.createElement(Ns,null),xe.default.createElement(As,null),xe.default.createElement(Ds,null)),xe.default.createElement(fe.FooterActions,null,xe.default.createElement(Bs,{loading:o})))}var Us=Hm;n();i();var Hs=m(Ke());E();var Gs=m(U()),D=m(_());var O=m(C());fm();function Gm({requestNonce:e}){let t=(0,O.useDispatch)(),[o,r]=(0,D.useState)(!1),s=(0,O.useSelector)(yo),a=(0,O.useSelector)(ko);return{loading:o,onChecker:Ne(()=>{let c=[];return s===""&&a===null&&c.push(e().then(({suggestedNonce:p})=>{t(Hi(p))})),c.length===0?Promise.resolve():(r(!0),Promise.all(c).finally(()=>{setTimeout(()=>{r(!1)})}))})}}function Wm(){let e=(0,O.useSelector)(Or),t=(0,O.useSelector)(R),o=!t,r=_e(),s=(0,O.useSelector)(be),a=(0,O.useSelector)(Lr),c=(0,O.useSelector)(Ai),p=(0,O.useSelector)(yo),d=(0,O.useSelector)(ko),f=(0,O.useSelector)(S),T={from:r,to:o?s:t,value:o?c:"0x0",data:a},[g,h]=yi(T),x=ki({data:T.data,type:g}),[I,k]=Ii(T.to),pe=co(x?.amount||0,{decimals:I?.decimals||6});return{txMeta:Ni({tx:T,customGasInfo:e,nonce:p||d,txData:x,tokenInfo:I,chain:f,approvedAmount:pe,formattedAmount:pe,txType:g}),loadingTxData:h||k}}var Vm=()=>{let e=(0,Gs.useHistory)(),t=(0,O.useDispatch)(),o=(0,O.useSelector)(Wt),r=(0,O.useSelector)(R),s=P(r),a=P(),c=(0,O.useSelector)(Eo),p=kn(),d=(0,O.useSelector)(be),f=zo(),T=(0,O.useSelector)(yo),g=(0,O.useSelector)(ko),h=(0,O.useSelector)(Lr),x=(0,O.useSelector)(S),I=Ci(),k=Zn(p),[pe,V]=(0,D.useState)(!1),[Q,qe]=(0,D.useState)(!1),{request:de}=$t(),{chainGasLoading:Fo,chainGasLoadFailed:Ze,stopPollingGasPrice:xr,chainGasLimitLoadFailed:ft}=zt(),_t=(0,O.useSelector)(Or),Cr=(0,O.useSelector)(Pi),{loading:vr,onChecker:Mo}=Gm({requestNonce:de}),{txMeta:H,loadingTxData:Er}=Wm();j(()=>{if(!d){let io=ue;r&&(io+=`?address=${r}`),e.replace(io)}});let Uo=(0,D.useMemo)(()=>[N.AUTHORIZATION,N.CANCEL_AUTHORIZATION].includes(H.type)?!1:H.type===N.TRANS_OUT?H.extraParams?.value:c,[c,H]),Xr=(0,D.useMemo)(()=>H.type===N.TRANS_OUT?H.extraParams?.coinSymbol:[N.AUTHORIZATION,N.CANCEL_AUTHORIZATION].includes(H.type)?l(Re[H.type],{symbol:H.extraParams?.coinSymbol}):l(Re[H.type]),[H]),jr=()=>{setTimeout(()=>{t(Vt())},200),e.push(o||W)},mm=io=>{t(Gi(io)),V(!1)},lm=async()=>{try{qe(!0),await Mo(),an({chain_id:parseInt(x.chainId,16),wallet_address:H.txParams.from}),await I(H),jr()}catch(io){(0,Hs.noop)(io)}finally{qe(!1)}},cm=(0,D.useMemo)(()=>Ze?{type:Pr.TIP_TYPE.FEE_ERROR}:null,[Ze]);return D.default.createElement(Je.Container,null,D.default.createElement(F,{icon:H.type===N.TRANS_OUT&&{text:H.extraParams?.coinSymbol},title:Xr,onClose:jr}),Uo&&D.default.createElement(Vo,null,D.default.createElement($n,{summaryList:[{useMinPrecision:!1,coinAmount:Uo,injectCoin:s,displayEstimate:!1}],title:l("wallet_extension_send_colored_send")})),D.default.createElement(Vo,null,D.default.createElement(Sr,{localType:on,title:l("extension_send_mid_text_from"),walletId:p,onCopyCallback:()=>{k({trade:"send",all_confirmation:"wallet_used_address"})}}),D.default.createElement(Sr,{address:d,title:l("extension_send_mid_text_to"),onCopyCallback:()=>{k({trade:"send",all_confirmation:"to_address"})}})),D.default.createElement(Vo,null,D.default.createElement(Yn,{onClick:()=>{V(!0)},injectCoin:a,estimateFailed:!!Ze,networkFee:Fo?void 0:G.mul(f,10**a?.decimals),loading:Fo})),D.default.createElement(Vo,{bordered:!1},D.default.createElement(zn,{title:l("developer_mode_send_maintitle_nonce1")},D.default.createElement(Ie.Text,{size:Ie.SIZE.sm},T||g)),!!h&&D.default.createElement(Kn,{copyable:!0,defaultExpanded:!0,data:h})),D.default.createElement(fe,{placeholder:!0,offsetBottom:0},D.default.createElement(Pr,{...cm}),D.default.createElement(br,{buttonGroup:[{disabled:!!Ze,onClick:lm,actionType:br.ACTION_TYPE.CONFIRM,loading:(vr||Er||Q||Fo)&&!Ze}]})),pe&&D.default.createElement(Wi,{onBack:()=>V(!1),rpcInfo:x,chainGasInfo:Cr,customGasInfo:_t,stopPollingGasPrice:xr,updateCustomGasInfo:mm,chainGasLimitLoadFailed:ft}))},Ws=Vm;n();i();var We=m(_());E();var da=m(C());n();i();var Vs=m(_()),Rt=m(C());E();function zm(){let e=(0,Rt.useDispatch)(),t=(0,Rt.useSelector)(re),o=Oe(),r=[{text:l("wallet_extension_history_option_pending",{num:o.length}),value:Io.PENDING},{text:l("wallet_extension_history_tab_completed"),value:Io.COMPLETE}];return j(()=>{o.length===0&&e(Yo({status:Io.COMPLETE}))}),Vs.default.createElement(y.FilterTabs,{tabs:r,value:t.status,onSelect:s=>{e(Yo({status:s}))}})}var zs=zm;n();i();var Ro=m(_()),or=m(C()),$s=m(X());E();um();n();i();var er={root:"_root_1iqyp_1",resetNonceIcon:"_resetNonceIcon_1iqyp_12",disabledResetNonceIcon:"_disabledResetNonceIcon_1iqyp_16"};function $m(){let e=(0,or.useDispatch)(),t=(0,or.useSelector)(re),o=Oe(),r=()=>{o.length!==0&&Tt.warn({alignBottom:!1,title:l("extension_wallet_advanced_title_clear_confirm"),text:l("extension_wallet_advanced_subtitle_clear_confirm"),cancelText:l("wallet_extension_btn_general_cancel"),confirmText:l("wallet_extension_btn_general_confirm"),onConfirm:async()=>{await en().rpcEvmClearPendingTransaction(),Ho.success({title:l("extension_wallet_advanced_notification_cleared")})}})};return Ro.default.createElement("div",{className:er.root},Ro.default.createElement(y.DateRangeSelection,{dates:t.dates,onChange:(s,a)=>{e(Yo({dates:a}))}}),Ro.default.createElement(ie,{title:l("wallet_extension_settings_tooltips_reset_nonce"),placement:ie.DIRECTION.bottomRight},Ro.default.createElement(B,{className:(0,$s.default)("okx-wallet-plugin-brush-20",er.resetNonceIcon,{[er.disabledResetNonceIcon]:o.length===0}),onClick:r})))}var Ys=$m;n();i();var Ge=m(_()),ca=m(C());n();i();n();i();var He=m(_());n();i();var Hr=m(_());E();var Ym=({tx:e,onBack:t})=>{let{type:o,extraParams:r}=e,s=Re[o],a=o===N.AUTHORIZATION||o===N.CANCEL_AUTHORIZATION?l(s,{symbol:r?.coinSymbol||""}):l(s);return Hr.default.createElement(F,{title:a,onBack:t})},qs=Hr.default.memo(Ym);n();i();var Ue=m(_());E();n();i();var Gr=m(_()),Wr=m(X());n();i();var qm={lightBlue:{color:"var(--okx-wallet-color-white)",background:"var(--okd-color-semantic-informative)"},deepBlue:{color:"var(--okx-wallet-color-white)",background:"var(--okd-color-semantic-informative)"},lightGray:{background:"var(var(--okd-color-content-contrast))",color:"var(--okx-wallet-color-white)",borderWidth:"1px",borderStyle:"solid",borderColor:"var(--okx-wallet-color-white)"},black:{background:"var(--okx-wallet-color-black)",borderWidth:"1px",borderStyle:"solid",borderColor:"var(var(--okd-color-content-tertiary))",color:"var(--okx-wallet-color-white)"}},Zm={larger:{size:56,fontSize:30},large:{size:32,fontSize:20},normal:{size:24,fontSize:14},small:{size:20,fontSize:12}};function Km({icon:e,className:t,text:o,size:r="normal",fontSize:s,theme:a,color:c,background:p}){if(!o)return null;let d=o[0].toUpperCase(),f,T,g;if(a){let k=qm[a];f=k?.color,T=k?.background,g=k?.border}let h,x;if(typeof r=="string"){let k=Zm[r];h=k?.size,x=k?.fontSize}else h=r.size;let I={width:`${h}px`,height:`${h}px`};return e?Gr.default.createElement("img",{alt:"icon",src:e,style:I,className:(0,Wr.default)("capitalize-letter",t)}):(I={...I,fontSize:`${s||x}px`,color:c||f,background:p||T,border:g},Gr.default.createElement("div",{style:I,className:(0,Wr.default)("capitalize-letter",t)},d))}var q=Km;te();n();i();var ee=m(_()),tr=m(X()),Zs=m(dm());E();n();i();function Qm({className:e,label:t,children:o}){return ee.default.createElement("div",{className:(0,tr.default)("rpc-evm-coin-flow__label",e)},ee.default.createElement("div",{className:"rpc-evm-coin-flow__label-text"},t),ee.default.createElement("div",null,o))}function Xm({isNFT:e,icon:t,title:o,address:r}){let s=typeof t=="string"?ee.default.createElement(Vn,{className:(0,tr.default)({"rpc-evm-coin-flow__record-icon-nft":e}),src:t,alt:""}):t;return ee.default.createElement("div",{className:"rpc-evm-coin-flow__record"},ee.default.createElement("div",{className:"rpc-evm-coin-flow__record-icon"},s),ee.default.createElement("div",{className:"rpc-evm-coin-flow__record-right"},ee.default.createElement("div",{className:"rpc-evm-coin-flow__record-title"},o),r&&ee.default.createElement(Le,{className:"rpc-evm-coin-flow__record-address",label:$(r),value:r,message:l("wallet_extension_popup_title_receiving_address_copied")})))}function Vr({data:e}){if(e=(e||[]).filter(Boolean),e.length===0)return null;let t=e.length===1,o=r=>{if(!r)return null;let{items:s,label:a,...c}=r;return ee.default.createElement(Qm,{...c,label:a,key:r},s.map((p,d)=>ee.default.createElement(Xm,{...p,key:d})))};return ee.default.createElement("div",{className:(0,tr.default)("rpc-evm-coin-flow",{"rpc-evm-coin-flow__hidden-label":t})},e.map(o))}var Ks=Vr;Vr.propTypes={data:Zs.default.array};Vr.defaultProps={data:[]};var{TRANS_OUT:Qs,CONTRACT_CALL:Xs,AUTHORIZATION:rr,CANCEL_AUTHORIZATION:nr,CONTRACT_DEPLOY:js}=N,jm={[rr]:"wallet_extension_header_approval_title_approve",[nr]:"wallet_extension_header_approval_title_cancel_approval"},Jm={[rr]:"wallet_extension_header_approval_title_for",[nr]:"wallet_extension_header_approval_title_for"},Rm="/static/images/tx-history/default-protocol.svg";function el(e){let{type:t}=e,o=P("",!0);switch(t){case Qs:{let{value:r,coinSymbol:s}=e.extraParams||{},a=`- ${G.thousandFormat(r)} ${s||l("wallet_extension_history_text_unknown_token")}`;return{items:[{icon:Ue.default.createElement(q,{icon:!s&&mn,text:s,size:"large",theme:"black"}),title:Ue.default.createElement(Ar,{maxWidth:"284px",text:a})}]}}case Xs:{let{value:r}=e.txParams||{},s=ae(r);if(mo(s,0))return null;let a=`- ${vo(se(s),{symbol:o.symbol,decimals:o?.decimals})}`;return{items:[{icon:Ue.default.createElement(q,{text:o.symbol,size:"large",theme:"black"}),title:Ue.default.createElement(Ar,{text:a,maxWidth:"284px"})}]}}case rr:case nr:{let{coinSymbol:r}=e.extraParams||{};return r?{label:l(jm[t]),items:[{icon:Ue.default.createElement(q,{text:r,size:"large",theme:"black"}),title:r}]}:null}case js:default:return null}}function ol(e){let{type:t,extraParams:o}=e;switch(t){case rr:case nr:{let{approvedAddress:r}=o||{};return{label:l(Jm[t]),items:[{icon:Rm,title:Ue.default.createElement(Le,{className:"rpc-mode-evm-tx-detail-flow__authorization",label:$(r),value:r,message:l("wallet_extension_popup_title_receiving_address_copied")})}]}}case Qs:case Xs:case js:default:return null}}function tl({tx:e}){let t=el(e),o=ol(e);return Ue.default.createElement(Ks,{data:[t,o]})}var Js=tl;n();i();var v=m(_()),et=m(C()),Rs=m(X());E();te();function rl({status:e,isCanceling:t,isSpeeding:o,isShowPending:r}){let s,a="";return e===b.SUCCEED?(s=xo.TxStatusInfoEnum.SUCCESS,a=l("wallet_extension_history_status_completed")):e===b.FAILED||e===b.DROPPED?(s=xo.TxStatusInfoEnum.FAILED,a=l("wallet_extension_history_status_failed")):e===b.PENDING&&(r?(s=xo.TxStatusInfoEnum.PENDING,t?a=l("wallet_extension_send_status_canceling"):o?a=l("wallet_extension_send_status_speedingup"):a=l("wallet_extension_history_list_status_pending")):(s=xo.TxStatusInfoEnum.WAITING,a=l("wallet_extension_history_list_status_waiting"))),v.default.createElement(xo,{label:l("wallet_extension_mid_text_status"),status:s,statusText:a})}function nl({status:e,sendTime:t,finishTime:o}){let r=(0,et.useSelector)(lo);return v.default.createElement(we,{label:l("wallet_extension_mid_text_time"),value:so(e===b.PENDING?t:o,{format:"yyyyMMddHHmmss",locale:r})})}function il({type:e,extraParams:t}){let{approvedAmount:o}=t||{};return e!==N.AUTHORIZATION?null:v.default.createElement(we,{label:l("wallet_extension_mid_text_approved_amount"),value:o>=10**13?l("wallet_extension_mid_text_unlimited"):G.thousandFormat(o||"0")})}function sl({status:e,blockNumber:t}){let o=(0,et.useSelector)(Dt),r=Qe(o,t);return e===b.PENDING||e===b.DROPPED||gt(r,0)||Go(r,14)?null:v.default.createElement(we,{label:l("wallet_extension_mid_text_block_confirmation"),value:r})}function al(){let e=(0,et.useSelector)(S);return v.default.createElement(we,{label:l("wallet_extension_mid_text_network"),value:v.default.createElement(v.default.Fragment,null,v.default.createElement(q,{className:"rpc-mode-evm-tx-detail-info__network-icon",icon:e.icon,text:e.name,size:"small",theme:"lightGray"}),e.name)})}function ml({txParams:e}){let{from:t}=e;return v.default.createElement(we,{label:l("wallet_extension_mid_text_from"),value:v.default.createElement(Le,{label:$(t),value:t,message:l("wallet_extension_popup_title_receiving_address_copied")})})}function ll({status:e,type:t,extraParams:o,txParams:r}){let{toAddress:s,tokenAddress:a,contractAddress:c}=o||{},{to:p}=r,d,f;if(t===N.TRANS_OUT)d=l("wallet_extension_mid_text_to"),f=s;else if(t===N.CONTRACT_DEPLOY)if(e===b.SUCCEED)d=l("developer_mode_history_subtitle_developer"),f=c;else return null;else d=l("wallet_extension_mid_text_interaction_address"),t===N.AUTHORIZATION||t===N.CANCEL_AUTHORIZATION?f=a:f=p;return v.default.createElement(we,{label:d,value:v.default.createElement(Le,{label:$(f),value:f,message:l("wallet_extension_popup_title_receiving_address_copied")})})}function cl({status:e,gasUsed:t,txParams:o}){let r=(0,et.useSelector)(S),{gasLimit:s,maxFeePerGas:a,gasPrice:c}=o,p=Gn(Y,se),d=c||a,f=vo(p(d,t||s),{symbol:r?.symbol,decimals:r?.decimals});return v.default.createElement(li,{label:l("wallet_extension_mid_text_network_fee"),value:f,tip:e===b.PENDING&&l("wallet_extension_popup_cancle_transaction_gasprice_gaslimit",{gasPrice:G.thousandFormat(je(d)),gasLimit:G.thousandFormat(s)})})}function pl({txParams:e}){let{data:t}=e,[o,r]=(0,v.useState)(!1);return t?v.default.createElement("div",{className:"rpc-mode-evm-tx-detail-info-data"},v.default.createElement("div",{className:"rpc-mode-evm-tx-detail-info-data__inner"},v.default.createElement("div",{className:"rpc-mode-evm-tx-detail-info-data__title",onClick:()=>{r(s=>!s)}},l("developer_mode_history_title_transaction_data"),v.default.createElement(B,{className:(0,Rs.default)("okx-wallet-plugin-arrow-small-down rpc-mode-evm-tx-detail-info-data__arrow",{"rpc-mode-evm-tx-detail-info-data__arrow--spread":o})})),o&&v.default.createElement("div",{className:"rpc-mode-evm-tx-detail-info-data__data"},t))):null}function dl({tx:e}){let{txHash:t,txParams:{nonce:o}}=e;return v.default.createElement("div",{className:"rpc-mode-evm-tx-detail-info"},v.default.createElement(rl,{...e}),v.default.createElement(nl,{...e}),v.default.createElement(il,{...e}),v.default.createElement(sl,{...e}),v.default.createElement(al,{...e}),v.default.createElement(ml,{...e}),v.default.createElement(ll,{...e}),v.default.createElement(cl,{...e}),v.default.createElement(we,{label:l("developer_mode_history_title_nonce"),value:ae(o)}),v.default.createElement(we,{label:l("wallet_extension_mid_text_transaction_hash"),value:v.default.createElement(Le,{label:$(t),value:t,message:l("wallet_extension_popup_title_transaction_hash_copied")})}),v.default.createElement(pl,{...e}))}var ea=dl;n();i();var Ce=m(_());E();n();i();n();i();var sr=m(_());te();n();i();te();var ir=e=>{if(!e?.txParams)return{};let{gasPrice:t,maxFeePerGas:o,maxPriorityFeePerGas:r,gasLimit:s,type:a}=e.txParams,c={gasLimit:s};return a===po.FEE_MARKET?(c.maxFeePerGas=xt(Y(o,1.2),0),c.maxPriorityFeePerGas=xt(Y(r,1.2),0)):c.gasPrice=xt(Y(t,1.2),0),c};function ul({txId:e,onClose:t}){let o=Mt(e),r=vi(),[s,a]=(0,sr.useState)(!1),c=ir(o),p=async()=>{if(s)return;a(!0);let Q=await Ut(o.id);if(!Q||Q.status!==b.PENDING){a(!1),t();return}r(o,c).catch(qe=>{console.log(qe)}).finally(()=>{a(!1),t()})},{gasPrice:d,maxFeePerGas:f,gasLimit:T,type:g}=o?.txParams||{},h="",x="";g===po.FEE_MARKET?(h=f,x=c.maxFeePerGas):(h=d,x=c.gasPrice);let I=$o(se(Y(h,T))),k=`=Gas Price(${je(h)})`,pe=$o(se(Y(x,c.gasLimit))),V=`=Gas Price(${je(x)})`;return sr.default.createElement(y.EthereumTxSpeedDialogBase,{visible:!!o,onConfirm:p,loading:s,onClose:t,oldGasFeeDisplay:I,oldGasDetailDisplay:k,newGasFeeDisplay:pe,newGasDetailDisplay:V})}var ot=ul;n();i();var ar=m(_());te();function fl({txId:e,onClose:t}){let o=Mt(e),r=Ei(),s=P(),[a,c]=(0,ar.useState)(!1),p=ir(o),d=async()=>{if(a)return;if(c(!0),(await Ut(o.id)).status!==b.PENDING){c(!1),t();return}r(o,p).catch(I=>{console.log(I)}).finally(()=>{t(),c(!1)})},{type:f}=o?.txParams||{},T="";f===po.FEE_MARKET?T=p.maxFeePerGas:T=p.gasPrice;let g=$o(se(Y(T,p.gasLimit))),h=`Gas Price (${je(T)} GWEI) *Gas Limit(${p.gasLimit}) `;return ar.default.createElement(y.EthereumTxCancelDialogBase,{visible:!!o,onConfirm:d,loading:a,onClose:t,chainSymbol:s?.symbol,newGasFeeDisplay:g,newGasDetailDisplay:h})}var tt=fl;n();i();var Se=m(_());n();i();var oo=m(_()),na=m(C());E();n();i();var rt=m(_());E();var oa=({onClick:e,children:t})=>rt.default.createElement(A,{className:"rpc-evm-tx-actions__button",category:A.CATEGORY.outline,type:A.TYPE.primary,size:A.SIZE.xs,onClick:o=>{o.stopPropagation(),e&&e(o)}},t);function _l({tx:e,onCancel:t,onSpeed:o}){let{isShowPending:r,isCanceling:s}=e,a=s?l("wallet_extension_history_list_status_btn_speed_up_cancellation"):l("wallet_extension_history_list_status_btn_cancel_transaction");return r?rt.default.createElement("div",{className:"rpc-evm-tx-actions"},rt.default.createElement(oa,{onClick:t},a),!s&&rt.default.createElement(oa,{onClick:o},l("wallet_extension_history_list_status_btn_speed_up"))):null}var ta=_l;n();i();E();te();var ra=m(C());function mr({type:e,extraParams:t}){let o=Re[e],r,s=l(o);return e===N.TRANS_OUT?r="okx-wallet-plugin-pointer-up":e===N.AUTHORIZATION||e===N.CANCEL_AUTHORIZATION?(r="okx-wallet-plugin-lock-1",s=l(o,{symbol:t?.coinSymbol})):e===N.CONTRACT_CALL?r="okx-wallet-plugin-report-centre":e===N.CONTRACT_DEPLOY&&(r="okx-wallet-plugin-futures-20"),{icons:[r],title:s}}function lr({type:e,txParams:t,extraParams:o}){let r=(0,ra.useSelector)(S);if(e===N.TRANS_OUT){let c=o?.value;return c&&(c=G.thousandFormat(c)),[{direction:Ir.OUT,coinAmount:`${c||""} ${o?.coinSymbol||""}`}]}let{value:s}=t||{},a=ae(s);return Xe(a,0)?[{direction:Ir.OUT,coinAmount:`${G.thousandFormat(se(a))} ${r.symbol||""}`}]:[]}function cr(e){let t;return e.type===N.TRANS_OUT?t=`${l("wallet_extension_history_list_send_to")}   ${$(e.extraParams.toAddress)}`:e.type===N.AUTHORIZATION||e.type===N.CANCEL_AUTHORIZATION?t=$(e.extraParams?.approvedAddress):t=$(e.txParams.to),t}function Tl({isShowPending:e,isSpeeding:t,isCanceling:o}){let r="",s="";return e?(r=Wo.PENDING,t?s=l("wallet_extension_send_status_speedingup"):o?s=l("wallet_extension_send_status_canceling"):s=l("wallet_extension_history_list_status_pending")):(r=Wo.WAITING,s=l("wallet_extension_history_list_status_waiting")),{labelType:r,labelText:s}}function hl(e){let t=cr(e),o=(0,na.useSelector)(lo),r=[t],s=so(e.sendTime,{format:"yyyyMMddHHmmss",locale:o});return r.push(s),r}function gl({tx:e,onClick:t,onCancel:o,onSpeed:r}){let{icons:s,title:a}=mr(e),{labelType:c,labelText:p}=Tl(e),d=lr(e),f=hl(e),T=Ft(f,d),g=oo.default.createElement(y.Label,{className:"tx-history-ml4",type:c,text:p});return oo.default.createElement(y.ItemContainer,{onClick:h=>{t&&t(e,h)}},oo.default.createElement(y.Row,{assets:d,align:T},oo.default.createElement(y.Info,{icons:s,title:a,label:g,details:f}),oo.default.createElement(y.Assets,{assets:d})),oo.default.createElement(ta,{tx:e,onCancel:o,onSpeed:r}))}var nt=gl;function xl({txs:e,onClick:t}){let[o,r]=(0,Se.useState)(null),[s,a]=(0,Se.useState)(null);return Se.default.createElement(Se.default.Fragment,null,e.map(c=>Se.default.createElement(nt,{key:c.id,tx:c,onClick:t,onSpeed:()=>{r(c.id)},onCancel:()=>{a(c.id)}})),Se.default.createElement(ot,{txId:o,onClose:()=>{r(null)}}),Se.default.createElement(tt,{txId:s,onClose:()=>{a(null)}}))}var it=xl;n();i();var to=m(_());E();var zr=m(C());function Cl({txs:e,onClick:t}){let o=(0,zr.useSelector)(lo),{dates:r}=(0,zr.useSelector)(re),s=(0,to.useMemo)(()=>{let a=e.map(T=>({...T,groupDate:so(T.sortTime,{format:"yyyyMMdd",locale:o})})),c=[],p=0,d,f;return a.forEach(T=>{let{groupDate:g}=T;d!==g&&(d=g,f=[],c[p++]={date:d,list:f}),f.push(T)}),c},[e,r]);return to.default.createElement(y.List,null,s.map(({date:a,list:c},p)=>to.default.createElement("div",{key:p},to.default.createElement(y.Date,null,a),c.map(d=>to.default.createElement(d.Comp,{key:d.id,tx:d,onClick:t})))))}var st=Cl;n();i();var bo=m(_());E();function vl({status:e}){let t="",o="";return(e===b.FAILED||e===b.DROPPED)&&(t=Wo.FAILED,o=l("wallet_extension_history_status_failed")),{labelText:o,labelType:t}}function El(e){return[cr(e)]}function yl({tx:e,onClick:t}){let{icons:o,title:r}=mr(e),s=lr(e),a=El(e),c=Ft(a,s),{labelType:p,labelText:d}=vl(e),f=bo.default.createElement(y.Label,{className:"tx-history-ml4",type:p,text:d});return bo.default.createElement(y.ItemContainer,{onClick:T=>{t&&t(e,T)}},bo.default.createElement(y.Row,{assets:s,align:c},bo.default.createElement(y.Info,{icons:o,title:r,label:f,details:a}),bo.default.createElement(y.Assets,{assets:s})))}var at=yl;function kl({tx:e}){let t=hi(),{status:o,isShowPending:r,isCanceling:s}=e,[a,c]=(0,Ce.useState)(!1),[p,d]=(0,Ce.useState)(!1);return Ce.default.createElement(Ce.default.Fragment,null,(o===b.SUCCEED||o===b.FAILED)&&Ce.default.createElement(ci,{url:t(e.txHash),text:l("wallet_extension_mid_link_explorer")}),r&&o===b.PENDING&&Ce.default.createElement(pi,{isShowCancel:!s,isShowSpeedUp:!s,isShowSpeedupCancel:s,onCancel:()=>{c(!0)},onSpeedUp:()=>{d(!0)}}),p&&Ce.default.createElement(ot,{txId:e?.id,onClose:()=>{d(!1)}}),a&&Ce.default.createElement(tt,{txId:e?.id,onClose:()=>{c(!1)}}))}var ia=kl;function Il({txId:e,onBack:t}){let r=_i().find(({id:s})=>s===e);return r?He.default.createElement(Je.Portal,{className:"rpc-mode-tx-detail"},He.default.createElement(qs,{tx:r,onBack:t}),He.default.createElement(di,{message:r.errorMessage}),He.default.createElement("div",{className:"rpc-mode-tx-detail__content"},He.default.createElement(Js,{tx:r}),He.default.createElement(ea,{tx:r}),He.default.createElement(ia,{tx:r}))):null}var mt=Il;n();i();var $r=m(_());function Nl({symbol:e}){return $r.default.createElement("div",{className:"rpc-mode-evm-title-header__title"},$r.default.createElement(q,{className:"rpc-mode-evm-title-header__icon",text:e,theme:"black"}),e)}var Yr=Nl;n();i();n();i();var pr=m(_()),sa=m(C());function wl({onClick:e}){let{dates:t}=(0,sa.useSelector)(re),o=Oe({dates:t});return o.length===0?pr.default.createElement(y.Empty,{top:72}):pr.default.createElement(y.ListContainer,{style:{paddingTop:"8px"}},pr.default.createElement(it,{txs:o,onClick:e}))}var aa=wl;n();i();var Ao=m(_());var ma=m(C());function bl({onClick:e}){let{dates:t}=(0,ma.useSelector)(re),o=fi({dates:t}),r=(0,Ao.useMemo)(()=>o.map(s=>({...s,sortTime:s.finishTime,Comp:at})),[o]);return r.length===0?Ao.default.createElement(y.Empty,{top:72}):Ao.default.createElement(y.ListContainer,null,Ao.default.createElement(st,{txs:r,onClick:e}))}var la=bl;function Al(){let e=(0,ca.useSelector)(re),[t,o]=(0,Ge.useState)(null),r=s=>{o(s.id)};return Ge.default.createElement(Ge.default.Fragment,null,e.status===Io.PENDING?Ge.default.createElement(aa,{onClick:r}):Ge.default.createElement(la,{onClick:r}),t&&Ge.default.createElement(mt,{txId:t,onBack:()=>{o(null)}}))}var pa=Al;n();i();function Sl(){let e=(0,da.useDispatch)();return yt(()=>{e(Ki())}),We.default.createElement(y.PageContainer,{className:"rpc-evm-tx-history"},We.default.createElement(fe,{className:"rpc-evm-tx-history__top",offsetTop:0},We.default.createElement(F,{sticky:!1,title:l("wallet_extension_header_text_history")}),We.default.createElement(zs,null),We.default.createElement(Ys,null)),We.default.createElement("div",{className:"rpc-evm-tx-history__bottom"},We.default.createElement(pa,null)))}var ua=Sl;n();i();var Po=m(_());n();i();var So=m(_()),fa=m(U());E();n();i();function Ve(){return J().get("address")}var Pl=()=>{let e=(0,fa.useHistory)(),t=Ve(),o=P(t),r=()=>{e.push(W)};return So.default.createElement(F,{title:So.default.createElement(Yr,{symbol:o?.symbol}),onBack:r},t&&So.default.createElement(ie,{title:l("developer_mode_infor_tooltip_token_details"),placement:ie.DIRECTION.bottom},So.default.createElement(B,{className:"okds-information-circle rpc-mode-evm-coin-detail-header__info-icon",onClick:()=>{e.push(`${Pt}?address=${t}`)}})))},_a=So.default.memo(Pl);n();i();var ct=m(_());var ga=m(C());te();n();i();var lt=m(_());E();var Ta=m(U());te();var dr=m(C());function Dl(){let e=(0,Ta.useHistory)(),t=(0,dr.useDispatch)(),o=(0,dr.useSelector)(S),r=Ve(),s=P(r),a=`${_o}?address=${r||""}`,c=!r&&o?.faucetUrl;return lt.default.createElement("div",{className:`rpc-evm-coin-detail-btns ${c?"with-faucet":"without-faucet"}`},lt.default.createElement(vt.IconButtonWithLabel,{disabled:mo(s?.balance,0),icon:"okx-wallet-plugin-up",text:l("wallet_home_btn_send"),onClick:()=>{t(Ui(a));let p=`${ue}?showClose=1`;r&&(p+=`&address=${r}`),e.push(p)}}),lt.default.createElement(vt.IconButtonWithLabel,{icon:"okx-wallet-plugin-down",text:l("wallet_home_btn_receive"),onClick:()=>{let p=r?`&address=${r}`:"";e.push(`${fo}?showClose=1${p}`)}}),c&&lt.default.createElement(vt.IconButtonWithLabel,{icon:"okx-wallet-plugin-faucet-1",text:l("developer_mode_home_btn_faucet"),href:o?.faucetUrl}))}var ha=Dl;function Ll(){let e=Ve(),t=P(e),o=t?.balance||0,{symbol:r,usdToThisRate:s}=(0,ga.useSelector)(pn),a=Y(t?.price,s);return{coinAmount:o,coinSymbol:t?.symbol,coinAmountDisplay:co(o),currencyAmountDisplay:Wn({amount:o,rate:a,symbol:r},{useSign:!0,useFixed:!0})}}function Ol(){let e=_e(),{coinSymbol:t,coinAmountDisplay:o}=Ll();return ct.default.createElement(Zi,null,ct.default.createElement(Yi,{coinSymbol:t,amountDisplay:o,currencyDisplay:null}),ct.default.createElement(qi,{address:e}),ct.default.createElement(ha,null))}var xa=Ol;n();i();var ve=m(_());n();i();var Ca=m(_());function Bl({txs:e,onClick:t}){return e.length===0?null:Ca.default.createElement(it,{txs:e,onClick:t})}var va=Bl;n();i();var ur=m(_());function Fl({txs:e,onClick:t}){let o=(0,ur.useMemo)(()=>e.map(r=>{let s,a;return r.status===b.PENDING?(s=r.sendTime,a=nt):(s=r.finishTime,a=at),{...r,sortTime:s,Comp:a}}),[e]);return o.length===0?null:ur.default.createElement(st,{txs:o,onClick:t})}var Ea=Fl;function Ml(){let e=Ve(),t=Ti({tokenAddress:e}),[o,r]=(0,ve.useState)(null),[s,a]=(0,ve.useMemo)(()=>{let p=[],d=[];return t.forEach(f=>{f.isShowPending?p.push(f):d.push(f)}),[p,d]},[t]),c=p=>{r(p.id)};return t.length===0?ve.default.createElement(y.Empty,null):ve.default.createElement("div",null,ve.default.createElement(va,{txs:s,onClick:c}),ve.default.createElement(Ea,{txs:a,onClick:c}),ve.default.createElement(mt,{txId:o,onBack:()=>{r(null)}}))}var ya=Ml;n();i();function Ul(){return Po.default.createElement("div",{className:"rpc-evm-coin-detail"},Po.default.createElement(_a,null),Po.default.createElement("div",{className:"rpc-evm-coin-detail__content"},Po.default.createElement(xa,null),Po.default.createElement(ya,null)))}var ka=Ul;n();i();var le=m(_()),Pa=m(wr());E();var Da=m(U());n();i();var wa=m(_()),ba=m(X());n();i();var Do=m(_()),Ia=m(X());var Na=({token:e,className:t,children:o,onClick:r})=>Do.default.createElement("div",{onClick:r,className:(0,Ia.default)("rc-mode__token",t)},Do.default.createElement(q,{fontSize:"18px",theme:"black",className:"rc-mode__token__icon",size:"large",text:e?.symbol}),Do.default.createElement("div",{className:"rc-mode__token__info"},Do.default.createElement("div",{className:"rc-mode__token__title"},e.symbol),Do.default.createElement("div",{className:"rc-mode__token__name"},e.name)),o);var Aa=({className:e,dataSource:t=[],renderItem:o,emptyText:r,component:s="div",...a})=>{let c=!t.length;return wa.default.createElement(s,{className:(0,ba.default)("rc-mode__tokens",e),...a},t.map(p=>o(p)),c&&r)};Aa.Item=Na;var ze=Aa;n();i();var pt=m(_());var Sa=()=>{let e=Te(),[t,o]=pt.default.useState(),r=Ne(({target:{value:c}})=>{o(c)},[]),s=(0,pt.useMemo)(()=>e.filter(({balance:c})=>!!Number(c)),[e]);return[(0,pt.useMemo)(()=>t?s.filter(({name:c,symbol:p})=>{let d=t?.toLowerCase();return c?.toLowerCase()?.includes(d)||p?.toLowerCase()?.includes(d)}):s,[t,s]),{onChange:r,value:t,showSearch:!!s.length}]};n();i();var La=()=>{let[e,{showSearch:t,...o}]=Sa();return le.default.createElement("div",{className:"rc-mode-select__token"},le.default.createElement(F,{title:l("developer_mode_send_title_selecta_token")}),t&&le.default.createElement(L.Search,{placeholder:l("developer_mode_send_input_selecta_token"),className:"rc-mode-select__token__search",...o}),le.default.createElement(ze,{dataSource:e,renderItem:r=>le.default.createElement(Da.Link,{to:`${ue}?${Pa.default.stringify({showClose:1,address:r?.address})}`},le.default.createElement(ze.Item,{token:r},le.default.createElement("div",{className:"rc-mode-select__token__balance"},le.default.createElement("div",{className:"rc-mode-select__token__amount"},G.thousandFormat(r.balance||0))))),emptyText:le.default.createElement(Rr.State,{className:"rc-mode-select__token__empty",title:t?l("developer_mode_send_toast_addnewtoken",{crypto:le.default.createElement("span",{className:"rc-mode-select__token__empty__title__special"},o.value)}):l("developer_mode_send_toast_nonetoken")})}))};n();i();var ro=m(_());E();var Ha=m(U());var Ga=m(C());n();i();n();i();var fr=m(_()),Hl=({children:e})=>fr.default.createElement("div",{className:"token-detail-container"},e),Oa=(0,fr.memo)(Hl);n();i();var $e=m(_()),Gl=({image:e,symbol:t,name:o})=>$e.default.createElement("div",{className:"token-detail-intro"},$e.default.createElement("div",{className:"token-detail-intro__image"},e),$e.default.createElement("div",{className:"token-detail-intro__desc"},$e.default.createElement("div",{className:"token-detail-intro__symbol"},t),$e.default.createElement("div",{className:"token-detail-intro__name"},o))),Ba=(0,$e.memo)(Gl);n();i();var Ee=m(_()),Fa=m(X());var Wl=({className:e,title:t,text:o,copyText:r,copyNotificationTitle:s,copyNotificationDesc:a})=>{let c=(0,Fa.default)("token-detail-row",e),[p,d]=mi();return Ee.default.createElement("div",{className:c},Ee.default.createElement("div",{className:"token-detail-row__title"},t),Ee.default.createElement("div",{className:"token-detail-row__content"},Ee.default.createElement("div",{className:"token-detail-row__text"},o),r&&Ee.default.createElement("div",{className:"token-detail-row__copy",onClick:()=>{p||(d(r),ao.success({title:s,desc:Ee.default.createElement("div",{className:"token-detail-row__copy-desc"},a)}))}},Ee.default.createElement(B,{className:"okx-wallet-plugin-copy"}))))},_r=(0,Ee.memo)(Wl);n();i();var dt=m(_()),Ma=m(X());var Vl=({details:e})=>dt.default.createElement("div",{className:"token-detail-details"},e.map((t,o)=>{let r=o===0?"":"token-detail-details__split",s=(0,Ma.default)(t?.className,r);return dt.default.createElement(_r,{...t,className:s})})),Ua=(0,dt.memo)(Vl);var Tr={Container:Oa,Intro:Ba,Row:_r,Details:Ua};n();i();function zl(){let e=(0,Ha.useHistory)(),o=J().get("address"),r=P(o,!0),s=(0,Ga.useSelector)(S),a=[{title:l("developer_mode_infor_subtitle_contractadd"),text:$(o),copyText:o,copyNotificationTitle:l("developer_mode_infor_toast_success"),copyNotificationDesc:o},{title:l("developer_mode_infor_subtitle_tokendecimal"),text:r.decimals},{title:l("developer_mode_infor_subtitle_network"),text:s.name}];return j(()=>{o||e.replace(W)}),ro.default.createElement("div",{className:"rpc-evm-token-detail"},ro.default.createElement(F,{title:l("developer_mode_infor_maintitle_tokendetails")}),ro.default.createElement(Tr.Container,null,ro.default.createElement(Tr.Intro,{image:ro.default.createElement(q,{text:r.symbol,size:"large",theme:"black"}),symbol:r.symbol,name:r.name}),ro.default.createElement(Tr.Details,{details:a})))}var Wa=zl;n();i();var Z=m(_()),$a=m(U()),Ya=m(X()),qr=m(xm());E();n();i();var Va=m(_());var hr=m(C());var za=()=>{let e=(0,hr.useDispatch)(),{chainId:t}=(0,hr.useSelector)(S)||{},o=Te(!0,!0),r=(0,Va.useMemo)(()=>{let a=[],c=[];return o.forEach(p=>{p.isDeleted?c.push(p):a.push(p)}),{usedChainTokens:a,disusedChainTokens:c}},[o]),s=Ne(({address:a,isDeleted:c})=>{e(Dn({chainId:t,address:a,isDeleted:!c}))},[t]);return[r,s]};n();i();var qa=()=>{let[{usedChainTokens:e,disusedChainTokens:t},o]=za();return Z.default.createElement("div",{className:"rpc-mode-manage-crypto"},Z.default.createElement(F,{closeable:!1,title:l("developer_mode_home_maintitle_managecpt")}),Z.default.createElement($a.Link,{to:At},Z.default.createElement("div",{className:"rpc-mode-manage-crypto__custom"},Z.default.createElement("span",{className:"rpc-mode-manage-crypto__custom__title"},l("developer_mode_manage_text_customcpt")),Z.default.createElement(B,{className:"okds-arrow-chevron-right-centered-md rpc-mode-manage-crypto__custom__icon"}))),Z.default.createElement("h2",{className:"rpc-mode-manage-crypto__added"},l("developer_mode_manage_title_addedcpt")),Z.default.createElement(ze,{component:qr.default,className:"rc-mode-home__tokens",dataSource:e,transitionName:"fade",transitionEnterTimeout:300,transitionLeaveTimeout:300,renderItem:r=>{let s=!r.address;return Z.default.createElement(ze.Item,{token:r},Z.default.createElement(B,{className:(0,Ya.default)("okx-wallet-plugin-take","rc-mode-home__token__action","rc-mode-home__token__action__minus",{"rc-mode-home__token__action__disabled":s}),onClick:()=>o(r)}))}}),!!t.length&&Z.default.createElement("h2",{className:"rpc-mode-manage-crypto__added"},l("developer_mode_manage_title_adding")),Z.default.createElement(ze,{component:qr.default,className:"rc-mode-home__tokens",dataSource:t,transitionEnterTimeout:300,transitionLeaveTimeout:300,transitionName:"fade",renderItem:r=>Z.default.createElement(ze.Item,{token:r,key:r?.address},Z.default.createElement(B,{className:"okx-wallet-plugin-add rc-mode-home__token__action rc-mode-home__token__action__add",onClick:()=>o(r)}))}))};n();i();var M=m(_());E();n();i();var Pe=m(_()),Za=m(Ke());var Ka=m(U()),Qa=m(C());E();var $l="0x",Yl=()=>{let e=Lt();return async t=>{try{return!go(t)||await(await e()).eth.getCode(t)===$l}catch(o){return console.log(o),!0}}},Xa=()=>{let e=z.useForm(),t=(0,Ka.useHistory)(),[o,r]=Pe.default.useState(null),[s,a]=Pe.default.useState(!1),[c,p]=Pe.default.useState(!1),d=Ot(),f=On(),T=Fn(),g=Yl(),h=Te(!0,!0),x=(0,Qa.useSelector)(S);Pe.default.useEffect(()=>{e?.setFieldsValue({network:x.name})},[x]);let I=Ne(()=>{let{chainId:V}=x,Q=e.getFieldsValue();d(V,Q.address,Q),T({chainId:V,address:Q.address}),ao.success({title:l("developer_mode_manage_toast_added")}),t.go(-1)},[x]),k=Ne((0,Za.debounce)(async()=>{r(null),p(null);let V=e.getFieldValue("address");if(e.cleanErrors(),!V)return!1;let Q=h.find(de=>de.address===V);if(Q&&!Q.isDeleted)return e.setErrors({address:l("developer_mode_manage_errortip_duplicate_add")});if(a(!0),p(!1),await g(V))return a(!1),e.setErrors({address:l("developer_mode_manage_errortip_request_failed")});try{let de=await f(V);r(de),e.setFieldsValue(de)}catch(de){p(!0),e.setErrors({address:""}),console.log("error",de)}finally{a(!1)}},250),[h]),pe=(0,Pe.useMemo)(()=>c?Pe.default.createElement("div",{className:"rpc-mode-custom-crypto__address__error"},l("developer_mode_manage_errortip_request_failed"),Pe.default.createElement("span",{className:"rpc-mode-custom-crypto__address__refresh",onClick:k},l("developer_mode_manage_errortip_refresh"))):null,[c]);return{form:e,token:o,rpcInfo:x,fetching:s,addressError:pe,onConfirm:I,onAddressTrigger:k}};n();i();var ql=11,ja=()=>{let{form:e,token:t,rpcInfo:o,fetching:r,onConfirm:s,addressError:a,onAddressTrigger:c}=Xa();return M.default.createElement("div",{className:"rpc-mode-custom-crypto"},M.default.createElement(F,{title:l("developer_mode_manage_maintitle_customcpt")}),M.default.createElement(z,{form:e,size:z.SIZE.lg,validateTrigger:["onBlur","onChange"],className:"rpc-mode-custom-crypto__form"},M.default.createElement(z.Item,{name:"network",label:l("developer_mode_manage_title_network")},M.default.createElement(L,{size:z.SIZE.xl,innerClassName:"rpc-mode-custom-crypto__form__input__disabled",prefix:M.default.createElement(q,{theme:"lightGray",icon:o.icon,text:o?.name,className:"rpc-mode-custom-crypto__icon"})})),M.default.createElement(z.Item,{name:"address",label:l("developer_mode_manage_title_contractadd"),extra:a},M.default.createElement(L.TextArea,{autoResize:!0,size:z.SIZE.xl,onChange:c,errorType:L.TIP_TYPE.always,suffix:r&&M.default.createElement(kr.Circle,{size:kr.SIZE.sm})})),M.default.createElement(z.Item,{name:"symbol",hidden:!t,label:l("developer_mode_manage_title_symbol"),rules:[{validator:(p,d)=>d?.length>ql?Promise.reject(l("developer_mode_manage_errortip_symbollimit")):Promise.resolve()}]},M.default.createElement(L,{size:z.SIZE.xl})),M.default.createElement(z.Item,{hidden:!t,name:"decimals",label:l("developer_mode_manage_title_decimals")},M.default.createElement(L,{size:z.SIZE.xl,disabled:!0})),M.default.createElement(z.Item,{hidden:!0,name:"name"},M.default.createElement(L,{size:z.SIZE.xl})),M.default.createElement(z.Item,{noStyle:!0,shouldUpdate:!0},({getFieldsError:p,getFieldValue:d})=>M.default.createElement(fe.FooterActions,{offsetBottom:0},M.default.createElement(A,{size:A.SIZE.lg,type:A.TYPE.highlight,category:A.CATEGORY.fill,disabled:p().length||!d("symbol"),onClick:s},l("developer_mode_manage_btn_confirm"))))))};var Ja=()=>K.default.createElement(K.default.Fragment,null,K.default.createElement(oe.Switch,null,K.default.createElement(oe.Route,{path:It,component:ms,exact:!0}),K.default.createElement(oe.Route,{path:fo,component:vs,exact:!0}),K.default.createElement(oe.Route,{path:ue,component:Us,exact:!0}),K.default.createElement(oe.Route,{path:Nt,component:Ws,exact:!0}),K.default.createElement(oe.Route,{path:wt,component:La,exact:!0}),K.default.createElement(oe.Route,{path:bt,component:qa,exact:!0}),K.default.createElement(oe.Route,{path:At,component:ja,exact:!0}),K.default.createElement(oe.Route,{path:St,component:ua,exact:!0}),K.default.createElement(oe.Route,{path:_o,component:ka,exact:!0}),K.default.createElement(oe.Route,{path:Pt,component:Wa,exact:!0})),K.default.createElement(gs,null));n();i();var ut=m(_()),Oo=m(U());n();i();var ne=m(_()),Lo=m(C());E();n();i();var ke=m(_()),em=m(C());E();n();i();var ye=m(_()),Ra=m(X());var Zr=e=>{let{title:t,networks:o,handleSelect:r,currentRpc:s}=e;return o.length?ye.default.createElement("div",{className:"net-collection"},ye.default.createElement("div",{className:"net-collection__title"},t),ye.default.createElement("div",{className:"net-collection__content"},o.map(a=>ye.default.createElement("div",{className:(0,Ra.default)("net-collection__content-item",{"net-collection__content-item-current":Co(s,a)}),key:a.rpcUrl||a.chainId,onClick:()=>{Co(s,a)||r(a)}},a.icon?ye.default.createElement("img",{alt:a.name,src:a.icon,className:"net-collection__content-item-image"}):ye.default.createElement("div",{className:"net-collection__content-item-icon"},a.name[0]?.toUpperCase()),ye.default.createElement("div",{className:"net-collection__content-item-name"},ye.default.createElement(ie,{title:a.name},ye.default.createElement("div",{className:"net-collection__content-item-name-text"},a.name))))))):null};n();i();var om=e=>{let{handleSelect:t,rpcInfo:o,history:r}=e,s=(0,ke.useCallback)(()=>{r.push(kt)},[r]),{defaultNets:a,customNets:c}=(0,em.useSelector)(ho);return ke.default.createElement("div",{className:"evm-nets"},ke.default.createElement("div",{className:"evm-nets__content"},ke.default.createElement(Zr,{title:l("developer_mode_network_title_test_network"),networks:a,handleSelect:t,currentRpc:o}),ke.default.createElement(Zr,{title:l("developer_mode_network_title_editcustom"),networks:c,handleSelect:t,currentRpc:o})),ke.default.createElement(fe.FooterActions,{offsetBottom:0},ke.default.createElement(A,{block:!0,className:"evm-nets__button",category:A.CATEGORY.outline,type:A.TYPE.primary,size:A.SIZE.md,onClick:s},ke.default.createElement(B,{className:"okx-wallet-plugin-plus evm-nets__icon"}),l("developer_mode_network_maintitle_add_network"))))};var tm=({history:e})=>{let t=(0,Lo.useDispatch)(),o=(0,Lo.useSelector)(S),r=J(),[s,a]=(0,ne.useState)(!!r.get("hideErr")),c=(0,ne.useCallback)(()=>{e.push(Cn)},[e]),p=(0,Lo.useSelector)(Sn),d=(0,Lo.useSelector)(Pn),[f,T]=(0,ne.useState)(!1);dn(()=>{if(p===he.success){if(f)return;e.replace(W)}else p===he.loading&&a(!1)},[p,d]);let g=(0,ne.useCallback)(h=>{T(!1),t(bn(h))},[t]);return ne.default.createElement("div",{className:"net-list"},ne.default.createElement(F,{title:l("developer_mode_top_title_network_management"),backable:{icon:"okx-wallet-plugin-close"},onBack:()=>{e.push(W)},closeable:{icon:"okds-edit"},onClose:c}),ne.default.createElement(om,{handleSelect:g,history:e,rpcInfo:o}),ne.default.createElement(zi,{handleClose:()=>T(!0)}),ne.default.createElement(Yt,{visible:p===he.failed&&!s,onChangeNet:()=>{a(!0)},onClose:()=>{T(!0)}}))};n();i();var Ye=m(_()),nm=m(C());E();n();i();var ce=m(_()),gr=m(C()),rm=m(U()),Kr=m(X());E();var Qr=({title:e,networks:t,disabled:o})=>{let r=(0,gr.useDispatch)(),s=(0,rm.useHistory)(),a=(0,gr.useSelector)(S),c=d=>{if(o)return;if(Co(d,a)){Ho.error({title:l("developer_mode_network_toast_cannot_delete"),top:16});return}let f=Tt.warn({title:l("developer_mode_mid_title_delete"),text:l("developer_mode__mid_subtitle_deleselect"),confirmText:l("developer_mode_mid_btn_confirmdele"),confirmBtnProps:{type:A.TYPE.highlight,size:A.SIZE.lg},cancelText:l("developer_mode_network_btn_botcancel"),alignBottom:!1,onConfirm:()=>{Ho.success(l("developer_mode_network_toast_delete_done")),r(An(d)),f.destroy()}})},p=({rpcUrl:d})=>{s.push(`${kt}?rpcUrl=${encodeURIComponent(d)}&modify=${o?Dr.CANT:Dr.CAN}`)};return ce.default.createElement("div",{className:"edit-group"},ce.default.createElement("div",{className:"edit-group__title"},e),t.map(d=>ce.default.createElement("div",{className:"edit-group__item"},ce.default.createElement("div",{className:(0,Kr.default)("edit-group__item-delete",{disabled:Co(d,a)||o}),onClick:()=>c(d)},ce.default.createElement(B,{className:"okx-wallet-plugin-delete"})),d.icon?ce.default.createElement("img",{src:d.icon,alt:"",className:"edit-group__item-image"}):ce.default.createElement("div",{className:"edit-group__item-icon"},d.name[0].toUpperCase()),ce.default.createElement("div",{className:"edit-group__item-name"},d.name),ce.default.createElement("div",{className:"edit-group__item-pencil",onClick:()=>{p(d)}},ce.default.createElement(B,{className:(0,Kr.default)({"okx-wallet-plugin-report-centre":o,"okx-wallet-plugin-draw":!o})})))))};var im=({history:e})=>{let{defaultNets:t,customNets:o}=(0,nm.useSelector)(ho),r=(0,Ye.useCallback)(()=>{e.goBack()},[e]);return Ye.default.createElement("div",{className:"net-edit"},Ye.default.createElement(F,{onBack:r,title:l("developer_mode_top_title_network_management")},Ye.default.createElement("div",{className:"net-edit__header-done",onClick:r},l("developer_mode_top_text_done"))),Ye.default.createElement(Qr,{title:l("developer_mode_network_title_test_network"),networks:t,disabled:!0}),o.length?Ye.default.createElement(Qr,{title:l("developer_mode_network_title_editcustom"),networks:o}):null)};var sm=()=>ut.default.createElement(Oo.Switch,null,ut.default.createElement(Oo.Route,{path:`${uo}/list`,component:tm,exact:!0}),ut.default.createElement(Oo.Route,{path:`${uo}/edit`,component:im,exact:!0}),ut.default.createElement(Oo.Route,{path:`${uo}/form`,component:$i,exact:!0}));var nk=()=>{let e=(0,no.useHistory)(),{isRpcMode:t}=(0,am.useSelector)(To);return(0,Bo.useEffect)(()=>{t||e.replace(W)},[t]),Bo.default.createElement(no.Switch,null,Bo.default.createElement(no.Route,{path:uo,component:sm}),Bo.default.createElement(no.Route,{path:xn,component:Ja}))};export{nk as default};

window.inOKXExtension = true;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=rpc-mode-JC7CVGCW.js.map
