import{a as pt}from"./chunk-3533736A.js";import{b as mt,c as st,d as lt}from"./chunk-X6XBAGXF.js";import{b as ot,h as rt,j as at,l as nt,p as ct,q as it}from"./chunk-N3VGDA3L.js";import{d as tt}from"./chunk-3QCQMWWZ.js";import"./chunk-TQEP4B6B.js";import"./chunk-E6PQQLEO.js";import"./chunk-R7R6LTH6.js";import"./chunk-TAZU4KSU.js";import"./chunk-W327NRHO.js";import{a as et}from"./chunk-DZDHGH5B.js";import"./chunk-UKFSUXAE.js";import"./chunk-U3CLRNWK.js";import"./chunk-M4STRGDO.js";import"./chunk-GYUX3JJ3.js";import"./chunk-4C2576LU.js";import"./chunk-3EYFKVOU.js";import"./chunk-QUUI62AZ.js";import"./chunk-MCRNCTJS.js";import"./chunk-VX7CI7XT.js";import"./chunk-D6HSNWGS.js";import{a as se,d as Re}from"./chunk-7ODXCTBK.js";import"./chunk-GZMWLE4V.js";import"./chunk-C54I6GL3.js";import"./chunk-ZJICRI36.js";import"./chunk-BIBDTDJA.js";import{a as M}from"./chunk-ADIQBHVU.js";import"./chunk-TPVT7ZCY.js";import"./chunk-A6HNAUBV.js";import"./chunk-6GFVKSAR.js";import"./chunk-JVLSBRR5.js";import"./chunk-5IXTSGAM.js";import"./chunk-OR2KMY5L.js";import"./chunk-FFJ36R7T.js";import"./chunk-NVCWAHOV.js";import"./chunk-RFEJLMRV.js";import{c as je,d as Je}from"./chunk-UIABO6UG.js";import{a as $e}from"./chunk-KJFAD5C4.js";import"./chunk-BFVA6OLJ.js";import"./chunk-ON3J2WQV.js";import"./chunk-RC3QMLDN.js";import"./chunk-JINEVGIZ.js";import"./chunk-SRU2IM3A.js";import"./chunk-46NSFYB3.js";import{f as Xe}from"./chunk-FFQESTX4.js";import{a as Qe}from"./chunk-OCZAVPFZ.js";import"./chunk-P6SDUFQ6.js";import"./chunk-5TNZ4MQV.js";import"./chunk-XGXABYQN.js";import"./chunk-KKTPGZSO.js";import"./chunk-ESKOSV75.js";import"./chunk-ZDQ5EBGN.js";import"./chunk-2KEW2T4M.js";import"./chunk-R7VTXTCL.js";import"./chunk-LBYCQPAD.js";import"./chunk-SQ5W4RLM.js";import"./chunk-I27PVEIN.js";import"./chunk-Y2PED5BF.js";import"./chunk-RUSRHRGO.js";import"./chunk-IZ5XPPXG.js";import{d as Ve}from"./chunk-6PN4BR3D.js";import"./chunk-EWK7ZFVN.js";import"./chunk-A23SHFFL.js";import"./chunk-VZ3BFZKL.js";import"./chunk-T6Z2C3RK.js";import"./chunk-R2QYIBE7.js";import"./chunk-KT53NMHD.js";import"./chunk-64STH2HN.js";import"./chunk-EKQH7XTV.js";import"./chunk-R2QKPEWB.js";import"./chunk-RMA2FZOE.js";import"./chunk-KRHB66KZ.js";import"./chunk-4RHFH7IF.js";import"./chunk-LPTRVNVL.js";import"./chunk-PH2A2GR3.js";import{d as D}from"./chunk-2LLM6N6U.js";import"./chunk-LF2PURXZ.js";import"./chunk-JEZIPKDY.js";import{a as qe}from"./chunk-SR2BDP3A.js";import{d as Ke}from"./chunk-CFT6B56M.js";import"./chunk-WK32FAZW.js";import"./chunk-WMUTUJYX.js";import"./chunk-B23OWGFX.js";import"./chunk-OSWXWF4A.js";import"./chunk-Q7FJER56.js";import"./chunk-RBTIRMSE.js";import"./chunk-7GZ2ZCGI.js";import"./chunk-WTP3OIOS.js";import"./chunk-D66ZH3O3.js";import"./chunk-X764QIVO.js";import"./chunk-HISWVX7W.js";import{a as me}from"./chunk-PYJPOVV7.js";import{b as Z}from"./chunk-AO6MUSOH.js";import{a as ie}from"./chunk-I435LZHT.js";import{x as s}from"./chunk-SJIW4WAV.js";import"./chunk-SLDECH2O.js";import{a as Ge,b as Ze,j as Me,l as He,o as Q}from"./chunk-5JJQQHKZ.js";import{a as ce}from"./chunk-URG4MCPH.js";import{o as _e,r as ke,y as eo}from"./chunk-ZPOCIBPN.js";import{b as ze,d as Ue,m as Ye}from"./chunk-CA5MYYD6.js";import"./chunk-RZ7GFYMN.js";import{a as ve}from"./chunk-IOCZ22XI.js";import"./chunk-EJY3MW2I.js";import"./chunk-3VRAVMMN.js";import"./chunk-YJ45QIWT.js";import"./chunk-WR62TYUO.js";import{d as G,f as ae}from"./chunk-2G2AXMFT.js";import"./chunk-XGFQCNHX.js";import"./chunk-7JF42X5G.js";import{a as $,b as q}from"./chunk-4JZ3HIS7.js";import"./chunk-JLA5HXVC.js";import"./chunk-I4WIGQLD.js";import"./chunk-ZNGQ6IUR.js";import"./chunk-JERFAOJH.js";import"./chunk-JXZFOFB5.js";import"./chunk-LYNLETTP.js";import"./chunk-FQ4XEVKF.js";import{c as T}from"./chunk-VMYDP774.js";import"./chunk-A7LNVEYU.js";import"./chunk-2YWUVAR3.js";import"./chunk-VA2HGDZT.js";import"./chunk-AKPDCNMH.js";import{$b as De,E as be,Ha as Be,Pa as Qt,R as Ee,S as ne,Ub as Oe,Xb as de,Ya as Le,ca as xe,la as Se,m as Jt,na as Ne,pb as Rt,q as Fe}from"./chunk-M54COW6Q.js";import"./chunk-PWWHYQAY.js";import{D as Y,G as ye,a as Pe,o as re}from"./chunk-RIJWHGTU.js";import{I as v,l as ue,v as d}from"./chunk-K4MPEKC5.js";import"./chunk-X6USBUO5.js";import"./chunk-674MHQJQ.js";import{X as F,c as Ae}from"./chunk-XIGC6FD5.js";import{a as N}from"./chunk-CXUPEGDW.js";import"./chunk-QAWZYDPQ.js";import"./chunk-PYTKRRY4.js";import"./chunk-363VDWOO.js";import"./chunk-7B5WANGL.js";import"./chunk-4P4FGPYZ.js";import"./chunk-Y47SQ3XQ.js";import"./chunk-YGNOWOE7.js";import"./chunk-N4GKTC7Y.js";import"./chunk-2BD64J7Y.js";import"./chunk-RYJHESAH.js";import"./chunk-DOQ5NSSP.js";import"./chunk-VULQOB2N.js";import{f as P,m as i,o as m}from"./chunk-ICCOEXX5.js";i();m();var g=P(N());v();var zt=P(ve());Se();ae();i();m();var H=P(N()),ft=P(Ae());i();m();var _={"wax-create-account-confirm":"_wax-create-account-confirm_gnpt7_1",waxCreateAccountConfirm:"_wax-create-account-confirm_gnpt7_1","wax-create-account-confirm-form":"_wax-create-account-confirm-form_gnpt7_4",waxCreateAccountConfirmForm:"_wax-create-account-confirm-form_gnpt7_4","wax-create-account-confirm-form-select":"_wax-create-account-confirm-form-select_gnpt7_7",waxCreateAccountConfirmFormSelect:"_wax-create-account-confirm-form-select_gnpt7_7","wax-create-account-confirm-form-select-disabled":"_wax-create-account-confirm-form-select-disabled_gnpt7_14",waxCreateAccountConfirmFormSelectDisabled:"_wax-create-account-confirm-form-select-disabled_gnpt7_14","wax-create-account-confirm-form-select-free":"_wax-create-account-confirm-form-select-free_gnpt7_18",waxCreateAccountConfirmFormSelectFree:"_wax-create-account-confirm-form-select-free_gnpt7_18","wax-create-account-confirm-form-select-free-text":"_wax-create-account-confirm-form-select-free-text_gnpt7_21",waxCreateAccountConfirmFormSelectFreeText:"_wax-create-account-confirm-form-select-free-text_gnpt7_21","wax-create-account-confirm-form-select-free-amount":"_wax-create-account-confirm-form-select-free-amount_gnpt7_25",waxCreateAccountConfirmFormSelectFreeAmount:"_wax-create-account-confirm-form-select-free-amount_gnpt7_25","wax-create-account-confirm-form-select-space":"_wax-create-account-confirm-form-select-space_gnpt7_29",waxCreateAccountConfirmFormSelectSpace:"_wax-create-account-confirm-form-select-space_gnpt7_29","wax-create-account-confirm-form-payInfo":"_wax-create-account-confirm-form-payInfo_gnpt7_32",waxCreateAccountConfirmFormPayInfo:"_wax-create-account-confirm-form-payInfo_gnpt7_32","wax-create-account-confirm-form-payInfo-icon":"_wax-create-account-confirm-form-payInfo-icon_gnpt7_37",waxCreateAccountConfirmFormPayInfoIcon:"_wax-create-account-confirm-form-payInfo-icon_gnpt7_37","wax-create-account-confirm-form-payCrypto-dialog":"_wax-create-account-confirm-form-payCrypto-dialog_gnpt7_41",waxCreateAccountConfirmFormPayCryptoDialog:"_wax-create-account-confirm-form-payCrypto-dialog_gnpt7_41","wax-create-account-confirm-form-payCrypto-title":"_wax-create-account-confirm-form-payCrypto-title_gnpt7_44",waxCreateAccountConfirmFormPayCryptoTitle:"_wax-create-account-confirm-form-payCrypto-title_gnpt7_44","wax-create-account-confirm-form-payCrypto-list":"_wax-create-account-confirm-form-payCrypto-list_gnpt7_50",waxCreateAccountConfirmFormPayCryptoList:"_wax-create-account-confirm-form-payCrypto-list_gnpt7_50","wax-create-account-confirm-form-payWallet":"_wax-create-account-confirm-form-payWallet_gnpt7_53",waxCreateAccountConfirmFormPayWallet:"_wax-create-account-confirm-form-payWallet_gnpt7_53","wax-create-account-confirm-form-payWallet-navigator":"_wax-create-account-confirm-form-payWallet-navigator_gnpt7_56",waxCreateAccountConfirmFormPayWalletNavigator:"_wax-create-account-confirm-form-payWallet-navigator_gnpt7_56","wax-create-account-confirm-form-payWallet-wallet-item":"_wax-create-account-confirm-form-payWallet-wallet-item_gnpt7_59",waxCreateAccountConfirmFormPayWalletWalletItem:"_wax-create-account-confirm-form-payWallet-wallet-item_gnpt7_59","wax-create-account-confirm-form-payWallet-accordion":"_wax-create-account-confirm-form-payWallet-accordion_gnpt7_62",waxCreateAccountConfirmFormPayWalletAccordion:"_wax-create-account-confirm-form-payWallet-accordion_gnpt7_62","wax-create-account-confirm-form-payWallet-accordion-header":"_wax-create-account-confirm-form-payWallet-accordion-header_gnpt7_68",waxCreateAccountConfirmFormPayWalletAccordionHeader:"_wax-create-account-confirm-form-payWallet-accordion-header_gnpt7_68","wax-create-account-confirm-form-payWallet-accordion-content":"_wax-create-account-confirm-form-payWallet-accordion-content_gnpt7_72",waxCreateAccountConfirmFormPayWalletAccordionContent:"_wax-create-account-confirm-form-payWallet-accordion-content_gnpt7_72","wax-create-account-confirm-form-payWallet-accordion-icon":"_wax-create-account-confirm-form-payWallet-accordion-icon_gnpt7_75",waxCreateAccountConfirmFormPayWalletAccordionIcon:"_wax-create-account-confirm-form-payWallet-accordion-icon_gnpt7_75","wax-create-account-confirm-form-payWallet-account-item":"_wax-create-account-confirm-form-payWallet-account-item_gnpt7_78",waxCreateAccountConfirmFormPayWalletAccountItem:"_wax-create-account-confirm-form-payWallet-account-item_gnpt7_78","wax-create-account-confirm-form-payWallet-account-item-main":"_wax-create-account-confirm-form-payWallet-account-item-main_gnpt7_82",waxCreateAccountConfirmFormPayWalletAccountItemMain:"_wax-create-account-confirm-form-payWallet-account-item-main_gnpt7_82","wax-create-account-confirm-form-payWallet-tag":"_wax-create-account-confirm-form-payWallet-tag_gnpt7_85",waxCreateAccountConfirmFormPayWalletTag:"_wax-create-account-confirm-form-payWallet-tag_gnpt7_85","wax-create-account-confirm-form-payWallet-selected-icon":"_wax-create-account-confirm-form-payWallet-selected-icon_gnpt7_94",waxCreateAccountConfirmFormPayWalletSelectedIcon:"_wax-create-account-confirm-form-payWallet-selected-icon_gnpt7_94","wax-create-account-confirm-form-payWallet-footer":"_wax-create-account-confirm-form-payWallet-footer_gnpt7_97",waxCreateAccountConfirmFormPayWalletFooter:"_wax-create-account-confirm-form-payWallet-footer_gnpt7_97","wax-create-account-confirm-form-insufficient-error":"_wax-create-account-confirm-form-insufficient-error_gnpt7_100",waxCreateAccountConfirmFormInsufficientError:"_wax-create-account-confirm-form-insufficient-error_gnpt7_100","wax-create-account-confirm-form-fill-up":"_wax-create-account-confirm-form-fill-up_gnpt7_103",waxCreateAccountConfirmFormFillUp:"_wax-create-account-confirm-form-fill-up_gnpt7_103"};var to=({type:t,value:e,disabled:a,placeholder:c,onClick:o})=>H.default.createElement(T.FlexBox,{align:T.ALIGN.center,onClick:()=>{o?.(t)},className:(0,ft.default)(_["wax-create-account-confirm-form-select"],{[_["wax-create-account-confirm-form-select-disabled"]]:a})},H.default.createElement(T.Space,{className:_["wax-create-account-confirm-form-select-space"],space:0,direction:T.DIRECTION.vertical},!e&&c&&H.default.createElement(s.Text,{type:s.TYPE.secondary},c),!!e&&H.default.createElement(s.Text,null,e?.label||e),!!e?.desc&&H.default.createElement(s.Text,{size:s.SIZE.xs,type:s.TYPE.secondary},e?.desc||e)),!a&&H.default.createElement(Z,{icon:"okds-arrow-chevron-right-centered-md",size:Z.SIZE.xs})),ge=H.default.memo(to);i();m();var X=P(N());v();var ut=P(Ae());var oo=({coinAmount:t,decimals:e,symbol:a})=>X.default.createElement(T.FlexBox,{align:T.ALIGN.center,className:(0,ut.default)(_["wax-create-account-confirm-form-select"],_["wax-create-account-confirm-form-select-free"])},X.default.createElement(T.Space,{space:6,align:T.ALIGN.center,direction:T.DIRECTION.horizontal},X.default.createElement(s.Text,{className:_["wax-create-account-confirm-form-select-free-text"]},d("wallet_extension_mid_colored_free")),X.default.createElement(s.DisplayAmount,{className:_["wax-create-account-confirm-form-select-free-amount"],mode:s.CRYPTO,size:s.SIZE.sm,symbol:a,amount:t,decimals:e}))),yt=X.default.memo(oo);i();m();var V=P(N());v();var ro=({symbol:t,decimals:e,value:a={}})=>{let c=[{symbol:t,decimals:e,label:"extension_wallet_create_colored_cpu",value:a?.cpuAmount},{symbol:t,decimals:e,label:"extension_wallet_create_colored_network",value:a?.netAmount},{decimals:0,symbol:"bytes",label:"extension_wallet_create_colored_ram",value:a?.ramAmount},{symbol:t,decimals:e,label:"extension_wallet_create_colored_price",value:a?.sumAmount,icon:{icon:"okds-information-circle",tooltip:"extension_wallet_create_tooltip_20percent_transferfee"}}];return V.default.createElement(D,{space:20,className:_["wax-create-account-confirm-form-payInfo"],dataSource:c,renderItem:({icon:o,label:n,value:y,symbol:l,decimals:p})=>V.default.createElement(D.Line,{size:s.SIZE.sm,label:V.default.createElement(V.default.Fragment,null,d(n),!!o&&V.default.createElement(Z,{className:_["wax-create-account-confirm-form-payInfo-icon"],icon:o?.icon,size:Z.SIZE.xs,tooltip:o?.tooltip?d(o?.tooltip):!1})),value:V.default.createElement(s.DisplayAmount,{symbol:l,decimals:p,mode:s.CRYPTO,size:s.SIZE.sm},y)})})},xt=V.default.memo(ro);i();m();var z=P(N());v();var ao=({name:t,value:e,visible:a,options:c,onChange:o,onClose:n})=>z.default.createElement(re,{windowClass:_["wax-create-account-confirm-form-payCrypto-dialog"],alignBottom:!0,onClose:()=>{n?.(t)},visible:a},z.default.createElement(s.Text,{className:_["wax-create-account-confirm-form-payCrypto-title"],strong:700,ellipsis:{tooltip:!0}},d("extension_wallet_popup_maintitle_select_crypto")),z.default.createElement(D,{className:_["wax-create-account-confirm-form-payCrypto-list"],space:16,dataSource:c,renderItem:y=>{let{icon:l}=y;return z.default.createElement(D.Card,{icon:{src:l},onClick:()=>{o?.({[t]:y}),n?.(t)},selected:e?.coinId===y.coinId},z.default.createElement(T.Space,{space:2,direction:T.DIRECTION.vertical},z.default.createElement(s.Text,null,y.label),z.default.createElement(s.Text,{type:s.TYPE.secondary,size:s.SIZE.sm},y.message)))}})),_t=z.default.memo(ao);i();m();var R=P(N());v();i();m();i();m();i();m();var dt=P(N()),no=({coinId:t,sendAmount:e,fromAddr:a,toAddr:c})=>{let[o,n]=(0,dt.useState)({});return{props:{visible:!1,coinId:t,address:a,inputData:"",tokenAddress:c,value:e,onGasChange:n},ethereumGasInfo:o}},gt=no;i();m();var co=({coinId:t,coinAmount:e,fromAddr:a,toAddr:c,ethereumGasInfo:o,btnProps:n,beforeClick:y,onClick:l})=>{let w={fetchParams:{coinId:t,from:a,to:c,amount:e,gasPrice:o.gasPrice},userGasInfo:o,baseCoinAmountUse:e};return{props:{beforeClick:y,dataForCheck:w,btnProps:n,onClick:l}}},Ct=co;i();m();var wt=P(eo());Qt();ae();var io=({coinId:t,walletId:e,sendAmount:a,fromAddr:c,toAddr:o,ethereumGasInfo:n,onPublish:y})=>{let l=(0,wt.useDispatch)(),{coin:p}=M(t,!1),w=x=>{let{updateGasInfo:u}=x;return u?{...u,gasLimit:n.gasLimit,supportEip1559:n.supportEip1559,networkFee:n.networkFee}:{...n}},r=({updateData:x,finallyGasInfo:u})=>{let{nonce:W}=x,h=Be(p.localType)?.realChainIdHex,A={from:c,gasLimit:q(u.gasLimit),nonce:q(W),chainId:h};return u.supportEip1559?(A.maxFeePerGas=q(u.maxFeePerGas),A.maxPriorityFeePerGas=q(u.maxPriorityFeePerGas),A.type=Ye.FEE_MARKET):A.gasPrice=q(u.gasPrice),A.value=q(a),A.to=o,ke(A)},f=({txParams:x,finallyGasInfo:u})=>{let W=$(x.value),h=$(x.gasLimit),A=$(n.supportEip1559?x.maxFeePerGas:x.gasPrice),S={...x,value:W,from:c,to:o,gas:h,gasPrice:A,priorityFee:$(n.supportEip1559?x.maxPriorityFeePerGas:0),nonce:$(x.nonce),repeatTxType:Ue.CONFIRMING,oldTxHash:""};return{coinId:p.coinId,coinAmount:a,fromAdr:c,toAdr:o,serviceCharge:u.networkFee,extJson:JSON.stringify(S),txSource:De.NORMAL,inputData:x.data?x.data:""}};return async x=>{let u=w(x),W=r({updateData:x,finallyGasInfo:u}),h={...W,walletId:e},A=f({txParams:W,finallyGasInfo:u});await l(Ve({txParams:h,walletId:e}));let S=await G().signAndGetEthereumPublishParams({signParams:h,from:W.from,baseChain:Ne,publishParams:A});typeof y=="function"&&await y(S)}},ht=io;var mo=({toAddr:t,coinId:e,walletId:a,fromAddr:c,sendAmount:o,btnProps:n,onBeforeClick:y=()=>{},onPublishTrascation:l=()=>{},onClickWrap:p=()=>{}})=>{let{props:w,ethereumGasInfo:r}=gt({coinId:e,toAddr:t,fromAddr:c,sendAmount:o}),f=r?.networkFee,C=ht({coinId:e,walletId:a,sendAmount:o,fromAddr:c,toAddr:t,ethereumGasInfo:r,onPublish:l}),{props:x}=Ct({toAddr:t,coinId:e,fromAddr:c,ethereumGasInfo:r,coinAmount:o,btnProps:n,beforeClick:()=>y?.(f),onClick:(...u)=>{p(async()=>{await C(...u)})}});return R.default.createElement(R.default.Fragment,null,R.default.createElement(tt,{...w}),R.default.createElement(pt,{...x},d("wallet_extension_btn_general_confirm")))},Tt=mo;i();m();var It=P(N());v();var so=({fromAddr:t,coinId:e,toAddr:a,disabled:c,loading:o,walletId:n,walletType:y,sendAmount:l,hideLoading:p,onBeforeClick:w=()=>{},onPublishTrascation:r=()=>{},onClickWrap:f=()=>{}})=>{let{coin:C}=M(e,!1),x=et({coinId:e,address:t,chainId:C?.chainId},{pollingInterval:20*1e3}),u=x?.normal,[,W]=at({coinId:e,walletId:n,address:t},{refreshDeps:[n,t]}),[,h]=ct({coinId:e,toAddr:a,walletId:n,fromAddr:t,satBytes:u,coinAmount:l,canTransferAmount:W}),A=it({coinId:e,toAddr:a,walletId:n,fromAddr:t,satBytes:u,networkFee:h,coinAmount:l,localType:C?.localType,dustSize:x?.minOutput}),S=rt({coinId:e,walletId:n,address:t,utxoType:ot.TRANSFER}),B=nt({coinId:e,txType:ze.TRANS_OUT,address:t}),L=async()=>{f(async()=>{w&&await w(h,W);let I=await S(l,h);await B(I,()=>{p?.()});let O=await A({utxoList:I}),U=await se(C.localType,O);r?.({coinId:e,txHash:U,signedTx:O,walletId:n,walletType:y,toAdr:a,serviceCharge:h,fromAdr:t,coinAmount:l})})};return It.default.createElement(F,{loading:o,disabled:c,size:F.SIZE.lg,category:F.CATEGORY.fill,type:F.TYPE.highlight,onClick:L},d("wallet_extension_btn_general_confirm"))},Wt=so;i();m();var At=P(N());v();ae();var lo=({fromAddr:t,coinId:e,toAddr:a,disabled:c,loading:o,walletId:n,walletType:y,sendAmount:l,onBeforeClick:p=()=>{},onPublishTrascation:w=()=>{},onClickWrap:r=()=>{}})=>{let{coin:f}=M(e,!1),C=async()=>{r(async()=>{typeof p=="function"&&p("0");let x=await Ke({coinId:e,address:t},{fromAddr:t,toAddr:a}),{info:u}=x||{},{chainid:W,compression:h,refBlockNumber:A,refBlockId:S,refBlockTimestamp:B,expireSeconds:L}=u,I={type:0,from:t,to:a,amount:l,memo:"",common:{chainId:W,compression:h,refBlockNumber:A,refBlockId:S,refBlockTimestamp:B,expireSeconds:L}},O=await G().signTransaction(I,t,f.localType),U=await se(f.localType,O);typeof w=="function"&&await w({coinId:e,txHash:U,signedTx:O,walletId:n,walletType:y,toAdr:a,serviceCharge:"0",fromAdr:t,coinAmount:l})})};return At.default.createElement(F,{loading:o,disabled:c,size:F.SIZE.lg,category:F.CATEGORY.fill,type:F.TYPE.highlight,onClick:C},d("wallet_extension_btn_general_confirm"))},Pt=lo;i();m();var Ft=P(N());v();var bt=P(ve());var po=600001,fo=({loading:t,disabled:e,fromPage:a,retryCreateAccount:c,onPublishTrascation:o=()=>{}})=>{let n=(0,bt.useHistory)(),y=async()=>{let l=await o?.();if(Number(l?.code)===po){let p=re.warn({alignBottom:!1,title:d("wallet_extension_wax_modaltitle_account_unavailable"),text:d("wallet_extension_wax_modaldesc_free_account_unsupported"),cancelText:d("wallet_extension_btn_general_cancel"),confirmText:d("wallet_extension_mid_btn_retry"),onCancel:()=>{p.destroy(),n.push(a||ce)},onConfirm:()=>{p.destroy(),c?.()}})}};return Ft.default.createElement(F,{loading:t,disabled:e,size:F.SIZE.lg,category:F.CATEGORY.fill,type:F.TYPE.highlight,onClick:y},d("wallet_extension_btn_general_confirm"))},Et=fo;i();m();var E=P(N());v();var uo=({name:t,value:e,visible:a,options:c=[],onChange:o,onClose:n})=>{let[y,l]=(0,E.useState)(e);return(0,E.useEffect)(()=>{l(e)},[e]),a?E.default.createElement(T.Portal,{component:T.Container,className:_["wax-create-account-confirm-form-payWallet"]},E.default.createElement(me,{className:_["wax-create-account-confirm-form-payWallet-navigator"],title:d("extension_wallet_header_title_select_wallet"),closeable:!1,onBack:()=>{n?.(t)}}),E.default.createElement(D,{className:_["wax-create-account-confirm-form-payWallet-wallet-item"],space:12,dataSource:c||[],renderItem:({keyringName:p,keyringColor:w,walletIdentities:r})=>E.default.createElement(Pe,{defaultExpanded:!0,iconClassName:_["wax-create-account-confirm-form-payWallet-accordion-icon"],title:E.default.createElement(s.Text,{strong:!0,size:s.SIZE.lg,style:{color:w}},p),className:_["wax-create-account-confirm-form-payWallet-accordion"],headerClassName:_["wax-create-account-confirm-form-payWallet-accordion-header"],contentClassName:_["wax-create-account-confirm-form-payWallet-accordion-content"]},E.default.createElement(D,{dataSource:r,renderItem:f=>E.default.createElement(T.FlexBox,{className:_["wax-create-account-confirm-form-payWallet-account-item"],align:T.ALIGN.center,onClick:()=>{l(f)}},E.default.createElement(T.Space,{className:_["wax-create-account-confirm-form-payWallet-account-item-main"],space:0,direction:T.DIRECTION.vertical},E.default.createElement(T.Space,{space:8,align:T.ALIGN.center},E.default.createElement(s.Text,{size:s.SIZE.md},f?.walletName),!!f.addressType&&E.default.createElement(T.Box,{className:_["wax-create-account-confirm-form-payWallet-tag"]},d(Oe[f.addressType]))),E.default.createElement(s.DisplayAmount,{mode:s.CRYPTO,decimals:f?.decimals,symbol:f?.symbol,size:s.SIZE.xs,type:s.TYPE.secondary},f?.coinAmountInt)),y?.address===f?.address&&E.default.createElement(Z,{className:_["wax-create-account-confirm-form-payWallet-selected-icon"],icon:"okds-success-circle-fill"}))}))}),E.default.createElement(ie.FooterActions,{className:_["wax-create-account-confirm-form-payWallet-footer"]},E.default.createElement(F,{size:F.SIZE.lg,category:F.CATEGORY.fill,type:F.TYPE.highlight,onClick:()=>{n?.(t),o?.({[t]:y})}},d("wallet_extension_btn_general_confirm")))):null},St=uo;i();m();Se();ae();Rt();var yo=()=>{let t=Je(),e=Xe({hasBackup:!0}),a=je();return Ge(async(c,o)=>{let n=await t(c),y=n?.localType;if(!c||!y)return null;let l=await G().getCreatedWalletIds(),p=await a({walletIds:l,chainId:n.chainId,coinId:c,flatten:!0});return(e?.map(r=>{let{walletIdentities:f}=r;return{...r,walletIdentities:f.map(C=>{let x=p[C?.walletId]||[];return{...C,coins:x.filter(u=>u?.coinId===c&&Le(u.coinAmountInt,o))}}).filter(({coins:C})=>C?.length)}}).filter(({walletIdentities:r})=>r?.some(({coins:f})=>f?.length))).map(r=>{let f=r?.walletIdentities;return c===ne?f=f?.reduce((C,{coins:x,walletName:u,addressType:W,...h})=>[...C,...x.map(({coinAmountInt:A,addressType:S,...B})=>{let L=W?.[Fe]?.find(I=>I?.addressType===de[S])?.address;return{...h,...B,walletName:u,coinAmountInt:A,label:`${r?.keyringName} - ${u}`,desc:_e(L),addressType:de[S],address:L}})],[]):f=f.map(({account:C,walletName:x,coins:u,...W})=>{let h=C?.[y];return{...u[0],...W,address:h,walletName:x,label:`${r?.keyringName} - ${x}`,desc:_e(h)}}),{...r,walletIdentities:f}})},[e])},Nt=yo;i();m();var j=P(N()),xo=()=>{let t=Y.useForm(),[e,a]=(0,j.useState)({}),[c,o]=(0,j.useState)({payCrypto:!1,payWallet:!1}),n=(0,j.useCallback)(l=>{o(p=>({...p,[l]:!p[l]}))},[]),y=(0,j.useCallback)(l=>{t.setFieldsValue(l),a((p={})=>({...p,...l}))},[]);return{form:t,visible:c,payValues:e,onPayValuesChange:y,onToggleSelectPanel:n}},Bt=xo;i();m();var J=P(N()),_o=({form:t,payInfo:e,payValues:a,isFreeCreate:c,walletOptions:o,payCryptoOptions:n,onPayValuesChange:y,setPayWalletError:l})=>{let p=(0,J.useRef)({payCrypto:!1,payWallet:!1}),w=r=>{y?.(r),t.setFieldsValue(r)};(0,J.useEffect)(()=>{w({payInfo:e})},[e]),(0,J.useEffect)(()=>{if(!p.current.payCrypto&&n?.length){let r=n.find(({recommend:f})=>f);w({payCrypto:r}),p.current={...p.current,payCrypto:!0}}if(p.current.payCrypto&&n?.length){let r=n.find(({coinId:f})=>f===a?.payCrypto?.coinId);r&&w({payCrypto:r})}},[n]),(0,J.useEffect)(()=>{if(!c){if(!p.current.payWallet&&o?.length){let[{walletIdentities:[r]}]=o;w({payWallet:r}),p.current={...p.current,payWallet:!0}}if(p.current.payWallet){o?.length||(w({payWallet:null}),l?.(!1));let{coinId:r}=a?.payCrypto||{},{coinId:f}=a?.payWallet||{};if(o?.length&&r!==f){let[{walletIdentities:[C]}]=o;w({payWallet:C}),l?.(!1)}}}},[c,o])},Lt=_o;i();m();var kt=P(Jt());var K=P(N());var go=60*1e3,Co=t=>{let[e,a]=(0,K.useState)({}),[c,{set:o}]=Q(!1),[n,{set:y}]=Q(),[l,p]=(0,K.useState)([]),w=$e(),r=(0,K.useMemo)(()=>(0,kt.isEmpty)(w)?[]:l.map(u=>{let{coinId:W,coinAmount:h}=u,A=w[W]||{},{image:S,symbol:B,decimals:L}=A;return{...A,...u,icon:S,label:K.default.createElement(s.DisplayAmount,{noStyle:!0,symbol:B,decimals:L,mode:s.CRYPTO},h)}}),[w,l]),f=async()=>{let{eosMarket:u,coins:W,freeAccount:h}=await mt({coinId:t});a(u),p(W),y(h)},{runAsync:C,refreshAsync:x}=He(f,{manual:!0,pollingInterval:go,pollingWhenHidden:!1,pollingErrorRetryCount:3});return Me(()=>{(async()=>{try{o(!0),await C()}catch(u){console.log(u)}finally{o(!1)}})()}),[c,n,e,r,x]},vt=Co;i();m();v();var Ot=P(N()),wo=({sendAmount:t,availableBalance:e="0",onCheckCallback:a})=>(0,Ot.useCallback)((c="0",o)=>ue.gt(ue.add(t,c),o!==void 0?o:e)?a?.(!0):a?.(!1),[t,e]),Dt=wo;var ho=()=>{let t=Qe(),e=(0,zt.useHistory)(),[a,c]=(0,g.useState)(null),o=Number(t.get("coinId"))||xe,{coin:n}=M(o,!1),y=qe(),[l,p]=(0,g.useState)(!1),[w,r,f,C,x]=vt(o),[u,W]=(0,g.useState)(!1),[h,{setTrue:A,setFalse:S}]=Q(!1),{form:B,visible:L,payValues:I,onPayValuesChange:O,onToggleSelectPanel:U}=Bt({payInfo:f,payCryptoOptions:C}),le=Nt();Ze(()=>{(async()=>{if(!r&&I?.payCrypto?.coinId){let k=await le(I?.payCrypto?.coinId,I?.payCrypto?.coinAmount);c(k)}})()},[r,I?.payCrypto?.coinId,I?.payCrypto?.coinAmount]),Lt({form:B,payInfo:f,payValues:I,isFreeCreate:r,walletOptions:a,payCryptoOptions:C,setPayWalletError:p,onPayValuesChange:O});let{coinId:ee,coinAmount:Ce,toAddress:Ut}=I?.payCrypto||{},{walletId:Yt,serverWalletType:we,address:he,coinAmountInt:Te}=I?.payWallet||{},Gt=async k=>{try{A(),await k()}catch(oe){let fe=oe?.msg||d("extension_wallet_transaction_notif_waxaccount_failed");ye.error({title:fe})}finally{S()}},Zt=Dt({sendAmount:Ce,availableBalance:Te,onCheckCallback:k=>(p(k),k?Promise.reject():Promise.resolve())}),Ie=async k=>{let oe=await G().getPublicKeyByWalletId(y,be),{coinAmount:fe,symbol:Ht}=I?.payCrypto||{},{ramBytes:Vt,cpuAmount:qt,ramAmount:Kt,netAmount:$t,sumAmount:Xt}=I?.payInfo||{},jt={transaction:k,order:{payCoin:Ht,ramBytes:Vt,payAmount:fe,eosAmount:Xt,cpuAmount:qt,ramAmount:Kt,netAmount:$t,ownerKey:oe,activeKey:oe,payAddress:he,account:t.get("account"),coinId:n?.coinId,chainId:n?.chainId}},We=await(r?lt:st)(jt,y);return Number(We.code)===0&&(ye.success({title:d("extension_wallet_transaction_notif_waxaccount_created"),desc:t.get("account")}),e.push(t.get("from")||ce)),We},pe={coinId:ee,toAddr:Ut,walletId:Yt,fromAddr:he,sendAmount:Ce,onBeforeClick:Zt,onPublishTrascation:Ie,onClickWrap:Gt},te=!r&&(!I?.payCrypto||!I?.payWallet),Mt=(0,g.useMemo)(()=>r?C.find(k=>k?.coinId===o)||C?.[0]:{},[r,o,C]);return g.default.createElement(T.Container,{loading:w,className:_["wax-create-account-confirm"]},g.default.createElement(me,{closeable:!1,title:d("extension_wallet_header_title_waxaccount_opening")}),g.default.createElement(Y,{form:B,className:_["wax-create-account-confirm-form"]},g.default.createElement(Y.Item,{name:"payCrypto",label:d("extension_wallet_create_text_payment_crypto")},r?g.default.createElement(yt,{...Mt}):g.default.createElement(ge,{type:"payCrypto",onClick:U})),!r&&g.default.createElement(Y.Item,{name:"payWallet",extra:!!l&&g.default.createElement(T.Space,{space:7},g.default.createElement(s.Text,{className:_["wax-create-account-confirm-form-insufficient-error"],size:s.SIZE.sm},d("extension_wallet_create_errortip_insufficient_balance")),g.default.createElement(s.Text,{className:_["wax-create-account-confirm-form-fill-up"],size:s.SIZE.sm,onClick:()=>{W(!0)}},d("extension_wallet_create_textbtn_fill_up",{crypto:I?.payCrypto?.symbol}))),label:d("extension_wallet_create_text_payment_wallet")},g.default.createElement(ge,{type:"payWallet",onClick:U,disabled:!a?.length,placeholder:d("extension_wallet_create_input_no_available_wallets")})),g.default.createElement(Y.Item,{name:"payInfo",label:d("extension_wallet_create_text_pay_toopen")},g.default.createElement(xt,{symbol:n?.symbol,decimals:n.decimals})),g.default.createElement(Y.Item,null,g.default.createElement(ie.FooterActions,{placeholder:!1},!r&&ee===ne&&g.default.createElement(Wt,{loading:h,disabled:te,walletType:we,hideLoading:S,availableAmount:Te,...pe}),!r&&ee===Ee&&g.default.createElement(Tt,{btnProps:{loading:h,disabled:te},...pe}),!r&&ee===xe&&g.default.createElement(Pt,{loading:h,disabled:te,walletType:we,...pe}),r&&g.default.createElement(Et,{loading:h,disabled:te,fromPage:t.get("from"),retryCreateAccount:x,onPublishTrascation:Ie})))),g.default.createElement(_t,{name:"payCrypto",value:I.payCrypto,visible:L.payCrypto,options:C,onChange:O,onClose:U}),g.default.createElement(St,{name:"payWallet",value:I?.payWallet,visible:L?.payWallet,options:a,onClose:U,onChange:O}),g.default.createElement(Re,{visible:u,closeCallback:()=>W(!1),address:I?.payWallet?.address,coinId:I?.payCrypto?.coinId,receiveOnly:!0}))},kn=g.default.memo(ho);export{kn as default};

window.inOKXExtension = true;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=ConfirmPay-JDAYYL2R.js.map
