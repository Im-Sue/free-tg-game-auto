import{a as Jo}from"./chunk-T7DK3P23.js";import{a as Vo}from"./chunk-TQIDOAVN.js";import{a as $o}from"./chunk-BOWCSZLW.js";import{a as Ko}from"./chunk-4FZQLD6G.js";import{a as jo}from"./chunk-LHVA7Q62.js";import{a as Yo}from"./chunk-LGYOLZMN.js";import{g as Go,j as qo,k as zo,l as Xo,m as Ho,n as Zo}from"./chunk-757PCK3N.js";import"./chunk-XCM743XO.js";import"./chunk-HNQ4OXOH.js";import{a as be,b as Be}from"./chunk-PFNFAQEP.js";import{a as Ee}from"./chunk-6UR6D26Y.js";import"./chunk-PCZ7TQOH.js";import{a as Ne}from"./chunk-OXTQMA4W.js";import"./chunk-YWELIV7Q.js";import"./chunk-EHDEZCO2.js";import"./chunk-TFCBP6UV.js";import{f as Ro}from"./chunk-FORV77D5.js";import{a as Qt}from"./chunk-D4V7ONZY.js";import{a as Se,b as Ae}from"./chunk-MTAR53YL.js";import{b as Ut,f as Ce,h as vo,i as Mo,j as ge,l as we,o as Do,p as Oo,q as Uo}from"./chunk-N3VGDA3L.js";import"./chunk-TQEP4B6B.js";import"./chunk-E6PQQLEO.js";import"./chunk-W327NRHO.js";import{a as Ie}from"./chunk-DZDHGH5B.js";import{d as ko}from"./chunk-UKFSUXAE.js";import"./chunk-U3CLRNWK.js";import"./chunk-M4STRGDO.js";import{c as Fo}from"./chunk-GYUX3JJ3.js";import"./chunk-4C2576LU.js";import"./chunk-H43TVLNI.js";import"./chunk-QUUI62AZ.js";import{a as Jt}from"./chunk-SIKYZQW4.js";import"./chunk-MCRNCTJS.js";import{a as Wo,b as Kt,c as Ze,d as W,e as Wt,g as $}from"./chunk-YZAK46Y6.js";import"./chunk-VX7CI7XT.js";import"./chunk-D6HSNWGS.js";import{e as q}from"./chunk-7ODXCTBK.js";import"./chunk-GZMWLE4V.js";import{b as jt}from"./chunk-C54I6GL3.js";import"./chunk-ZJICRI36.js";import"./chunk-BIBDTDJA.js";import"./chunk-ADIQBHVU.js";import"./chunk-TPVT7ZCY.js";import"./chunk-A6HNAUBV.js";import"./chunk-6GFVKSAR.js";import"./chunk-JVLSBRR5.js";import"./chunk-5IXTSGAM.js";import"./chunk-OR2KMY5L.js";import"./chunk-FFJ36R7T.js";import"./chunk-NVCWAHOV.js";import"./chunk-RFEJLMRV.js";import{e as Bt,h as Lo}from"./chunk-UIABO6UG.js";import"./chunk-KJFAD5C4.js";import{c as ye}from"./chunk-BFVA6OLJ.js";import"./chunk-ON3J2WQV.js";import"./chunk-RC3QMLDN.js";import"./chunk-JINEVGIZ.js";import"./chunk-SRU2IM3A.js";import"./chunk-46NSFYB3.js";import{l as $t,m as Vt}from"./chunk-FFQESTX4.js";import"./chunk-OCZAVPFZ.js";import"./chunk-P6SDUFQ6.js";import"./chunk-5TNZ4MQV.js";import"./chunk-6YBNTFOQ.js";import{a as So}from"./chunk-R35K7G2A.js";import"./chunk-KKTPGZSO.js";import"./chunk-ESKOSV75.js";import"./chunk-ZDQ5EBGN.js";import"./chunk-2KEW2T4M.js";import"./chunk-R7VTXTCL.js";import"./chunk-LBYCQPAD.js";import"./chunk-542JHSZH.js";import"./chunk-X6EEBMFW.js";import"./chunk-U43G73LH.js";import{b as Bo}from"./chunk-IGCT3RWS.js";import"./chunk-SQ5W4RLM.js";import"./chunk-Y2PED5BF.js";import"./chunk-RUSRHRGO.js";import{b as Q}from"./chunk-IZ5XPPXG.js";import{g as bo}from"./chunk-6PN4BR3D.js";import"./chunk-EWK7ZFVN.js";import"./chunk-A23SHFFL.js";import"./chunk-VZ3BFZKL.js";import"./chunk-T6Z2C3RK.js";import"./chunk-R2QYIBE7.js";import"./chunk-KT53NMHD.js";import"./chunk-64STH2HN.js";import{q as Z,r as rt}from"./chunk-EKQH7XTV.js";import{a as He}from"./chunk-R2QKPEWB.js";import"./chunk-RMA2FZOE.js";import"./chunk-KRHB66KZ.js";import"./chunk-4RHFH7IF.js";import"./chunk-LPTRVNVL.js";import"./chunk-PH2A2GR3.js";import{d as ho}from"./chunk-2LLM6N6U.js";import"./chunk-LF2PURXZ.js";import"./chunk-JEZIPKDY.js";import"./chunk-SR2BDP3A.js";import{k as Po}from"./chunk-CFT6B56M.js";import"./chunk-WK32FAZW.js";import"./chunk-WMUTUJYX.js";import"./chunk-B23OWGFX.js";import"./chunk-OSWXWF4A.js";import"./chunk-Q7FJER56.js";import"./chunk-RBTIRMSE.js";import"./chunk-7GZ2ZCGI.js";import"./chunk-WTP3OIOS.js";import"./chunk-D66ZH3O3.js";import"./chunk-X764QIVO.js";import"./chunk-HISWVX7W.js";import{a as bt}from"./chunk-PYJPOVV7.js";import{b as J}from"./chunk-AO6MUSOH.js";import{a as Zt}from"./chunk-I435LZHT.js";import{i as yo,x as b}from"./chunk-SJIW4WAV.js";import{a as Yr}from"./chunk-SLDECH2O.js";import{a as Xe,c as xe,l as No,o as At,y as Eo}from"./chunk-5JJQQHKZ.js";import{a as Ot}from"./chunk-URG4MCPH.js";import{b as de,c as Te,e as qe,o as _o,p as fo,y as Xt}from"./chunk-ZPOCIBPN.js";import{D as H,R as wo,T as St,b as h,c as Co,ca as Dt,i as go}from"./chunk-CA5MYYD6.js";import"./chunk-RZ7GFYMN.js";import{a as ze}from"./chunk-IOCZ22XI.js";import{k as se,o as Ao}from"./chunk-EJY3MW2I.js";import"./chunk-3VRAVMMN.js";import"./chunk-YJ45QIWT.js";import"./chunk-WR62TYUO.js";import{d as lo,f as Or}from"./chunk-2G2AXMFT.js";import"./chunk-XGFQCNHX.js";import"./chunk-7JF42X5G.js";import"./chunk-4JZ3HIS7.js";import{s as To,u as xo}from"./chunk-JLA5HXVC.js";import"./chunk-I4WIGQLD.js";import"./chunk-ZNGQ6IUR.js";import"./chunk-JERFAOJH.js";import"./chunk-JXZFOFB5.js";import"./chunk-LYNLETTP.js";import"./chunk-FQ4XEVKF.js";import{c as _}from"./chunk-VMYDP774.js";import{a as uo,b as Rr}from"./chunk-A7LNVEYU.js";import{c as po,h as Ur}from"./chunk-2YWUVAR3.js";import"./chunk-VA2HGDZT.js";import"./chunk-AKPDCNMH.js";import{$b as Mt,Pa as co,Qa as Ge,S as ct,T as pe,U as ue,gc as Ht,kc as Io,la as _e,pa as fe,pb as Wr,r as le,s as ce}from"./chunk-M54COW6Q.js";import"./chunk-PWWHYQAY.js";import{G as so,H as io,N as Ye,O as ao,U as mo,b as vt,o as me,p as Re,y as no}from"./chunk-RIJWHGTU.js";import{I as ot,l as A,v as i}from"./chunk-K4MPEKC5.js";import"./chunk-X6USBUO5.js";import"./chunk-674MHQJQ.js";import{L as oo,R as ro,X as Et,c as We}from"./chunk-XIGC6FD5.js";import{a as U}from"./chunk-CXUPEGDW.js";import"./chunk-QAWZYDPQ.js";import"./chunk-PYTKRRY4.js";import"./chunk-363VDWOO.js";import"./chunk-7B5WANGL.js";import"./chunk-4P4FGPYZ.js";import"./chunk-Y47SQ3XQ.js";import"./chunk-YGNOWOE7.js";import"./chunk-N4GKTC7Y.js";import"./chunk-4WUMETG6.js";import"./chunk-TAJDMRFA.js";import"./chunk-2BD64J7Y.js";import"./chunk-RYJHESAH.js";import"./chunk-DOQ5NSSP.js";import"./chunk-VULQOB2N.js";import{f as I,m as a,n as E,o as m}from"./chunk-ICCOEXX5.js";a();m();var yt=I(U());a();m();var he=I(U());ot();a();m();var Qo=({unapproved:t})=>he.default.createElement(_.Container,null,he.default.createElement(bt,{title:i("wallet_trade_maintitle_transaction_confirm"),backable:!1,closeable:!1}),he.default.createElement(Yo,{unapproved:t}));a();m();var C=I(U()),tr=I(Xt());ot();Or();_e();var Gr=({unapproved:t})=>{let e=ct,o=Bt(e),r=(0,tr.useDispatch)(),n=t.walletId,s=t.params.transaction.from,c=Vt(n),T=t.params.transaction.amount||2,[,p]=Ie({coinId:e,address:s,chainId:o?.chainId}),S=p?.transferReminder,P=p?.dummyOutput,[x,u]=(0,C.useState)({level:St.STANDARD,satBytes:p?.normal}),f=x?.satBytes;(0,C.useEffect)(()=>{if(!f&&p?.normal&&u({level:St.STANDARD,satBytes:p?.normal}),f&&x?.level!==St.CUSTOM){let G=p[Se[x?.level]?.satBytes];u({...x,satBytes:G})}},[p]);let[O,{toggle:g}]=At(!1),[k,{set:L}]=At(!1),[y,{set:v}]=At(!1),[w,It]=(0,C.useState)(),[Y,N]=ge({coinId:e,walletId:n,address:s,batchDummyNum:T,utxoType:Ut.SPLIT_UTXO}),[ut,tt,M]=Mo({coinId:e,walletId:n,address:s,networkFee:w,utxoType:Ut.SPLIT_UTXO,batchDummyNum:T,coinAmount:A.mul(P,T)},{ready:!!P}),X=(0,C.useMemo)(()=>tt.findIndex(({dummy:G})=>G!==!0),[tt]),st=(0,C.useMemo)(()=>X===-1?[]:tt.slice(X),[X,tt]),et=(0,C.useMemo)(()=>X===-1?0:Math.max(T-X,0),[T,X]),_t=A.gt(et,0),Ct=A.mul(P,et),Lt=Do({coinId:e,fromAddr:s,satBytes:f}),V=(0,C.useCallback)(async()=>{try{if(!f)return;L(!0);let G=await Lt({inputs:st,outputs:Array.from({length:et}).map(()=>({address:s,amount:P}))});v(!1),It(G)}catch{v(!0)}finally{L(!1)}},[P,Lt,s,st,et,f,v,L]);(0,C.useEffect)(()=>{V()},[V]);let j=(0,C.useMemo)(()=>N===void 0||!w?!0:A.gt(N,w),[N,w]),ft=(0,C.useMemo)(()=>c?{type:$.TIP_TYPE.COMMON_ERROR,message:i("wallet_extension_top_toast_dapp_comingsoon")}:y?{type:$.TIP_TYPE.FEE_ERROR}:j?{type:vt.TYPE.warn,message:S}:{coinId:e,type:$.TIP_TYPE.FEE_BALANCE_INSUFFICIENT},[e,y,c,j,S]),Ft=ko({coinId:e,walletId:n,coinAmount:0,fromAddr:s,toAddr:s,localType:o?.localType,networkFee:w,extJson:JSON.stringify({}),txSource:Mt.DAPP,txType:h.BTC_SPLIT_UTXO}),gt=we({coinId:e,txType:h.BTC_SPLIT_UTXO,address:s}),kt=$t(n),[K,dt]=(0,C.useState)(!1),Yt=(0,C.useCallback)(async()=>{await r(Z(t.id)),await r(Q()),dt(!1)},[r,t.id]),Gt=(0,C.useCallback)(async()=>{if(_t)try{if(!await jt({walletId:n,callback:async()=>{await r(Z(t.id))}}))return;await gt(st),dt(!0);let{signed:wt,utxos:De}=await lo().splitUtxo({splitAmount:et,inputs:Ce(st),amount:P,feePerB:x.satBytes},s,n);await Ft(wt);let Oe=tt.filter(re=>re.dummy),Ue=[...Ce(Oe),...De.map(re=>({...re,rawTransaction:wt}))];await r(rt(t.id,{utxos:Ue}))}catch(G){console.log(G)}finally{dt(!1)}else{let G=tt.slice(0,T);await r(rt(t.id,{utxos:Ce(G)}))}},[T,r,P,tt,s,_t,st,Ft,et,x.satBytes,t.id,gt,n]),oe=(0,C.useMemo)(()=>{let G={actionType:q.ACTION_TYPE.CANCEL,btnText:i("wallet_dapp_connection_btn_reject"),onClick:Yt},wt={actionType:q.ACTION_TYPE.CONFIRM,disabled:Y||k||ut||y||M||!Number(w)||c,onClick:Gt};return j||(wt={coinId:e,walletId:n,address:s,actionType:q.ACTION_TYPE.FILL_UP}),[G,wt]},[e,w,y,k,s,c,j,Y,Yt,Gt,M,ut,n]);return C.default.createElement(_.Container,null,C.default.createElement(bt,{backable:!1,closeable:!1,title:i("wallet_extension_send_title_send")}),C.default.createElement(W,null,C.default.createElement(Kt,{title:i("wallet_extension_send_colored_send"),summaryList:[{coinId:e,coinAmount:Ct}]})),C.default.createElement(W,null,C.default.createElement(Wt,{walletId:n,address:s,title:i("wallet_extension_network_address_title_walletused")},!!N&&C.default.createElement(be,{coinBalance:N,tooltip:i("extension_defi_bot_popuptext_avail_amount")}))),C.default.createElement(W,{bordered:!1},C.default.createElement(Jt,{coinId:e,loading:k,feeError:y,networkFee:w,onClick:g})),C.default.createElement(Zt,{placeholder:!0,offsetBottom:0,borderTop:!0},C.default.createElement($,{coinId:e,...ft}),C.default.createElement(q,{buttonGroup:oe})),C.default.createElement(Ae,{coinId:e,visible:O,signInfo:p,value:x,estimatedFee:w,onChange:u,onToggleVisible:g}),C.default.createElement(Be,{visible:kt&&K}))},er=Gr;a();m();var or=I(U());var rr=({unapproved:t})=>{let e=t.params?.message,o=Jo({unapproved:t});return or.default.createElement(jo,{needCheckMpc:!0,message:e,unapproved:t,tipMessage:o})};a();m();var pt=I(U()),nr=I(Xt()),sr=I(ze());co();a();m();var Rt={AMOUNT:1,CONFIRM:2};var $e=Rt.AMOUNT;function qr({unapproved:t}){let{from:e,type:o=h.BRC20_INSCRIBE,tick:r="",tid:n,amount:s,txSource:c=Mt.DAPP}=t?.params?.transaction||{},[T,p]=(0,pt.useState)($e),S=(0,nr.useDispatch)(),P=(0,sr.useHistory)(),u=+ye({localType:fe})?.netWorkId,f=xe(()=>o===h.BRC20_INSCRIBE?{chainId:u,coinType:de,symbol:r}:o===h.BRC30_INSCRIBE?{chainId:u,coinType:Te,address:`btc-brc20s-${n}`}:null,[o,n,r,u]),g=Bt(void 0,{},f)?.coinId,k=(0,pt.useCallback)(async()=>{await S(Z(t.id)),await S(Q()),P.push(Ot)},[S,P,t.id]),L=(0,pt.useCallback)(()=>{p(Rt.CONFIRM),$e=Rt.CONFIRM},[]),y=(0,pt.useCallback)(async({txIds:w,commitTx:It,revealTxs:Y})=>{await S(rt(t.id,{txIds:w,commitTx:It,revealTxs:Y})),await S(Q()),P.push(Ot)},[S,P,t.id]),v=(0,pt.useCallback)(()=>{p(Rt.AMOUNT),$e=Rt.AMOUNT},[]);return pt.default.createElement(Go,{fromAddress:e,coinId:g},T===Rt.AMOUNT?pt.default.createElement(Ho,{amount:s,walletId:t.walletId,onCancel:k,onConfirm:L,headerProps:{closeable:!1,backable:!1}}):pt.default.createElement(Zo,{txSource:c,onCancel:k,onConfirm:y,walletId:t.walletId,headerProps:{onBack:v,closeable:!1,backable:!0}}))}var ir=qr;a();m();var l=I(U()),wr=I(Xt()),Nr=I(ze());ot();a();m();var Ve=I(U());a();m();function ar(t=[]){if(!Array.isArray(t))throw new Error("assetChange should be an array");return t.map(e=>{let{direction:o,amount:r,usdAmount:n,symbol:s,logo:c}=e;return{operator:o===1?"+":"-",usdValue:n,rawValue:r,asset:{assetType:Fo.NATIVE,amount:r,symbol:s,imageUrl:c}}})}var zr=({address:t,hexStringList:e=[],chainIndex:o=0},r={})=>{let n=e?.toString(),s={ready:o!==void 0&&!!e?.length,refreshDeps:[t,n,o],...r},{loading:c,data:T,error:p}=No(async()=>(await Po({address:t,hexStringList:e,chainIndex:o})).data,s);return{loading:c,data:T,error:p}},Xr=t=>(0,Ve.useMemo)(()=>!t||!t.length?[]:t.map(e=>{let{assetChange:o=[],assetInversion:r}=e;return{status:e.analysisStatus,gasFee:e?.gasFee||0,exploreUrl:e?.exploreUrl,inputInfo:e?.inputInfo||[],outputInfo:e?.outputInfo||[],assetChange:ar(o),assetInversion:r||!1}}),[t]),Hr=(t=[])=>(0,Ve.useMemo)(()=>!t||!t.length?null:t.some(o=>o.status>0)?Dt.EXECUTE_ERROR:null,[t]);function mr(t={},e={}){let{loading:o,data:r,error:n}=zr(t,e),{utxoAllInfos:s}=r||{},c=Xr(s),T=Hr(c);return{loading:o,error:n||T,data:c}}a();m();var d=I(U()),ee=I(We());ot();a();m();var te=I(U());var cr=I(Yr());ot();a();m();var lr={address:"_address_11ipy_1"};function je({children:t,addresses:e=[],exploreUrl:o=""}){let r=e[0],n=Xe(()=>{(0,cr.default)(r),so.success({title:i("wallet_receive_toast_address_copied"),desc:""})},[r]),s=Xe(()=>{o&&globalThis.platform.openTab({url:`${o}${r}`})},[r,o]);return e.length>1?t:te.default.createElement(Re.WhiteBoard,{rebirthPopper:!0,popupStyle:{marginLeft:16,marginRight:16,padding:12,borderRadius:8},content:te.default.createElement(_.FlexBox,{align:_.ALIGN.center,justify:"center"},te.default.createElement(b.Text,{forceWrap:!0,size:b.SIZE.sm,className:lr.address},r),te.default.createElement(J,{size:J.SIZE.xs,icon:"okds-copy",onClick:n,style:{marginLeft:8}}),te.default.createElement(J,{size:J.SIZE.sm,icon:"okx-wallet-plugin-open-link",onClick:s,style:{marginLeft:8}})),trigger:Re.TRIGGER.hover},t)}a();m();function Ke(t){return t===Io.XRC_NFT}a();m();var F={content:"_content_1i550_1",none:"_none_1i550_4",title:"_title_1i550_10",input:"_input_1i550_15",utxoContainer:"_utxoContainer_1i550_18",isCurrentAddr:"_isCurrentAddr_1i550_18",signTag:"_signTag_1i550_18",addrContainer:"_addrContainer_1i550_24",address:"_address_1i550_29",amount:"_amount_1i550_38",xrcAssetsContainer:"_xrcAssetsContainer_1i550_50",xrcAssetsTitle:"_xrcAssetsTitle_1i550_56",xrcAssetContainer:"_xrcAssetContainer_1i550_62",logo:"_logo_1i550_65",isNFT:"_isNFT_1i550_72",isNft:"_isNFT_1i550_72",amountText:"_amountText_1i550_75",protocol:"_protocol_1i550_78",moreXRCContainer:"_moreXRCContainer_1i550_85",moreXrcContainer:"_moreXRCContainer_1i550_85",showMoreTitle:"_showMoreTitle_1i550_89",moreAssetsLogos:"_moreAssetsLogos_1i550_95",moreAssetsLogo:"_moreAssetsLogo_1i550_95",expandContainer:"_expandContainer_1i550_106",expandContainer_title:"_expandContainer_title_1i550_110",expandContainerTitle:"_expandContainer_title_1i550_110",expandContainer_leftTotal:"_expandContainer_leftTotal_1i550_116",expandContainerLeftTotal:"_expandContainer_leftTotal_1i550_116",expandContainer_icon:"_expandContainer_icon_1i550_123",expandContainerIcon:"_expandContainer_icon_1i550_123"};var Je="inputInfo",pr="outputInfo",Pe={xrcAsset:10,utxo:50},Zr=({coinId:t,data:e={},currentAddr:o})=>{let[r,n]=(0,d.useState)({}),[,s]=Lo(t,{withPrice:!0}),c=(0,d.useMemo)(()=>[Je,pr].map(f=>{let O=e[f]||[],g=r[f]||!1;return O.map((k,L)=>{let y=r[`${f}-${L}`]||!1,v=k.xrcAssets||[];return k.xrcToShow=y?v:v.slice(0,Pe.xrcAsset),k.moreXRC=v.slice(Pe.xrcAsset),k}),{key:f,exploreUrl:e.exploreUrl,allData:O,dataToShow:g?O:O.slice(0,Pe.utxo),moreData:O.slice(Pe.utxo)}}),[e,r]),T=(0,d.useCallback)((u=[])=>u.reduce((f,{amount:O})=>A.add(f,O),0),[]),p=(0,d.useCallback)(u=>{switch(u){case Je:return i("wallet_extension_asset_input_inputs_num",{amount:c[0].allData.length});case pr:return i("wallet_extension_asset_outputs",{amount:c[1].allData.length});default:return""}},[c]),S=(0,d.useCallback)(u=>{n(f=>({...f,[u]:!0}))},[]),P=u=>{let{protocolType:f}=u||{};return Ke(f)?u.logo||xo:u.logo||To},x=d.default.memo(({xrcAssets:u=[]})=>d.default.createElement(_.FlexBox,{align:_.ALIGN.center,className:F.moreAssetsLogos},u.slice(0,3).map(f=>d.default.createElement("img",{className:F.moreAssetsLogo,src:f.logo||"",alt:f.symbol}))));return d.default.createElement(Ne,{copyable:!1,title:i("wallet_extension_asset_btn_transaction_details")},c.map(u=>d.default.createElement("div",{className:(0,ee.default)(F.content,u.key===Je?F.input:"",u.dataToShow.length===0?F.none:"")},d.default.createElement("div",{className:(0,ee.default)(F.title)},p(u.key)),u.dataToShow.map((f,O)=>d.default.createElement(d.default.Fragment,null,d.default.createElement(_.FlexBox,{align:_.ALIGN.center,justify:"space-between",className:(0,ee.default)(F.utxoContainer,o===f.address[0]?F.isCurrentAddr:"")},d.default.createElement("div",{className:(0,ee.default)(F.addrContainer)},d.default.createElement(je,{addresses:f.address,exploreUrl:u.exploreUrl},d.default.createElement("div",{className:F.address},f.address.length>1?i("wallet_extension_asset_title_multisig"):_o(f.address[0]))),d.default.createElement(mo,{className:F.signTag,size:Ye.SIZE.sm},i("wallet_extension_asset_tag_sign"))),d.default.createElement("div",{className:F.amount},d.default.createElement(b.DisplayAmount,{noStyle:!0,amount:f.amount,mode:b.CRYPTO,symbol:s?.symbol,decimals:s?.decimals}))),f.xrcToShow.length>0&&d.default.createElement("div",{className:F.xrcAssetsContainer},d.default.createElement(b.Text,{size:b.SIZE.xs,className:F.xrcAssetsTitle},i("wallet_extension_asset_include_asset")),f.xrcToShow.map(g=>d.default.createElement(_.FlexBox,{align:_.ALIGN.center,className:F.xrcAssetContainer},d.default.createElement("img",{className:(0,ee.default)(F.logo,Ke(g.protocolType)?F.isNFT:""),src:P(g),alt:g.symbol}),d.default.createElement(b.Text,{nowrap:!0,size:b.SIZE.xs,ellipsis:{tooltip:!0},className:F.amountText},`${g.amount} ${g.symbol}`),d.default.createElement(ao,{className:F.protocol,size:Ye.SIZE.sm},g.protocolName))),f.moreXRC.length>0&&!r[`${u.key}-${O}`]?d.default.createElement(_.FlexBox,{align:_.ALIGN.center,onClick:()=>{S(`${u.key}-${O}`)},className:F.moreXRCContainer},d.default.createElement(x,{xrcAssets:f.moreXRC}),d.default.createElement("div",{className:F.showMoreTitle},i("wallet_extension_asset_btn_show_num_asset",{amount:A.thousandFormat(f.moreXRC.length)})),d.default.createElement(J,{icon:"okds-arrow-chevron-down-md",size:J.SIZE.xs})):null))),u.moreData.length>0&&!r[u.key]?d.default.createElement("div",{className:F.expandContainer,onClick:()=>{S(u.key)}},d.default.createElement(_.FlexBox,{align:_.ALIGN.center,justify:"space-between"},d.default.createElement("div",{className:F.expandContainer_title},i("wallet_extension_asset_more_amount_inputs",{amount:A.thousandFormat(u.moreData.length)})),d.default.createElement(_.FlexBox,null,d.default.createElement("div",{className:F.expandContainer_leftTotal},d.default.createElement(b.DisplayAmount,{noStyle:!0,amount:T(u.moreData),mode:b.CRYPTO,symbol:s?.symbol,decimals:s?.decimals})),d.default.createElement(J,{icon:"okds-arrow-chevron-down-md",size:yo.xs,className:F.expandContainer_icon})))):null)))},ur=Zr;a();m();var R=I(U()),_r=I(We());ot();a();m();var nt={main:"_main_asg9r_1",title:"_title_asg9r_8",scrollArea:"_scrollArea_asg9r_17",item:"_item_asg9r_22",subTitle:"_subTitle_asg9r_25",content:"_content_asg9r_32",loading:"_loading_asg9r_38",arrow:"_arrow_asg9r_43",icon:"_icon_asg9r_48"};function $r({psbts:t=[],loading:e,onClick:o}){let r=(0,R.useCallback)(s=>{o(s)},[o]),n=()=>e?R.default.createElement("div",{className:nt.scrollArea},R.default.createElement("div",{className:nt.loading},R.default.createElement(ro.Circle,null))):t.length===0?R.default.createElement(no.State,{className:nt.empty}):R.default.createElement("div",{className:nt.scrollArea},(t||[]).map((s,c)=>R.default.createElement(_.FlexBox,{className:nt.item,align:_.ALIGN.center,key:s,onClick:()=>{r(c)}},R.default.createElement(_.FlexBox,{className:nt.content,direction:_.DIRECTION.vertical},R.default.createElement("div",{className:nt.subTitle},i("wallet_extension_asset_transaction_confirmation",{amount:He(c+1)})),R.default.createElement("div",{className:nt.content},fo(s))),R.default.createElement("div",{className:nt.arrow},R.default.createElement(J,{className:(0,_r.default)("okx-wallet-plugin-arrow-small-right",nt.icon)})))));return R.default.createElement(_.FlexBox,{className:nt.main},R.default.createElement("div",{className:nt.title},i("",{number:He(t.length)})),n())}var fr=(0,R.memo)($r);Ao();_e();a();m();var mt=I(U()),dr=I(We());ot();a();m();var ht={main:"_main_1w6ta_1",box:"_box_1w6ta_6",tipImg:"_tipImg_1w6ta_12",tipImgIcon:"_tipImgIcon_1w6ta_21",title:"_title_1w6ta_25",decs:"_decs_1w6ta_33",w100:"_w100_1w6ta_39",footerWrap:"_footerWrap_1w6ta_42"};var Vr=({visible:t,onCancel:e,onConfirm:o,headerProps:r,psbtHasMultiXRCAsset:n,paymentUseXRCAsset:s,assetInversion:c})=>{let T=(0,mt.useMemo)(()=>n?i("wallet_extension_tip_multiple_inscription_use"):s?i("wallet_extension_desc_inscription_asset"):c?i("wallet_extension_transaction_desc_risky_greater_pay"):"",[c,s,n]);return mt.default.createElement(me,{visible:t,alignBottom:!0,noMargin:!0,maskClosable:!0,noContentPadding:!0,transitionProps:{type:"slide",placement:"bottom",timeout:300},confirmBtnProps:{size:Et.SIZE.lg},cancelBtnProps:{size:Et.SIZE.lg},cancelText:i("wallet_extension_function_btn_continue_transaction"),confirmText:i("wallet_extension_mid_dialog_btn_cancel"),onCancel:e,onConfirm:o,onClose:e},mt.default.createElement(_.FlexBox,{className:ht.main,direction:_.DIRECTION.vertical},mt.default.createElement(_.Box,{className:ht.box},mt.default.createElement(_.Box,{className:ht.tipImg},mt.default.createElement(oo,{className:(0,dr.default)("okx-wallet-plugin-risk-trading",ht.tipImgIcon)})),mt.default.createElement(b.Text,{className:ht.title,align:b.ALIGN.center},i("wallet_extension_title_transaction_risk")),mt.default.createElement(b.Text,{className:ht.decs,size:b.SIZE.sm,align:b.ALIGN.center},T)),mt.default.createElement(_.Box,{className:ht.w100},mt.default.createElement(Ee,{...r,showDappInfo:!1,loading:!1,noFold:!0}))))},Tr=Vr;a();m();Rr();Ur();var Le=I(U()),jr=()=>{let[t,e]=(0,Le.useState)(""),o=async()=>{let{data:r}=await po(uo.getSignPrompt);r.assetReminder?e(r.assetReminder):e(null)};return(0,Le.useEffect)(()=>{o()},[]),{assetReminder:t}},xr=jr;a();m();var yr=I(U());ot();var Kr=({onConfirm:t})=>(0,yr.useCallback)(()=>{me.warn({title:i("wallet_extension_asset_alertbanner_title_alert"),alignBottom:!1,maskClosable:!1,hideCloseBtn:!0,text:i("wallet_extension_asset_alertbanner_desc_utxo_lost"),confirmBtnProps:{type:Et.TYPE.outline,size:Et.SIZE.lg},cancelBtnProps:{type:Et.TYPE.highlight,size:Et.SIZE.lg},onConfirm(e){e.destroy(),t()},async onCancel(e){e.destroy()},cancelText:i("commonall_text_btn_cancel"),confirmText:i("wallet_extension_asset_btn_continue")})},[t]),Ir=Kr;a();m();ot();a();m();var Qe=I(So());var Cr=t=>{try{return Qe.Psbt.fromHex(t).toBase64()}catch{return Qe.Psbt.fromBase64(t),t}};var Fe=I(So()),Tt={LIST:"list",UNLIST:"unlist",TRADE:"trade",RUNES:"runes"},gr=t=>{try{let e=Fe.Psbt.fromBase64(Cr(t)),o=e?.data?.inputs||[],r=e?.data?.globalMap?.unsignedTx?.tx?.outs||[],n=[];return o.forEach((s,c)=>{if(s.witnessUtxo)n.push({...s,value:s.witnessUtxo.value});else if(s.nonWitnessUtxo){let T=Fe.Transaction.fromBuffer(s.nonWitnessUtxo),p=e?.data?.globalMap?.unsignedTx?.tx?.ins||[],P=T.outs[p[c]?.index]?.value;n.push({...s,value:P})}}),{inputs:n,outputs:r}}catch{return{inputs:[],outputs:[]}}},Pt=(t,e=0,o)=>!Array.isArray(t)||o===0?0:t.slice(e,o?e+o:void 0).reduce((r,{value:n})=>A.add(r,n),0);var Er=({unapproved:t})=>{let{psbt:e,psbts:o,type:r,from:n,amount:s=1,psbtOpts:c}=t.params.transaction,{origin:T}=t,p=t.method===H.SIGNPSBTS,S=t?.walletId,P=t?.localType,x=ct;P===le?x=pe:P===ce&&(x=ue);let u=$t(S),f=Vt(S),O=Qt(S),{loading:g,data:k,error:L}=mr({address:n,hexStringList:p?o:[e],chainIndex:0}),[y,v]=(0,l.useState)(!1),[w,It]=(0,l.useState)(0),Y=(0,l.useMemo)(()=>p&&!y,[p,y]),N=(0,l.useMemo)(()=>k[w]||{},[k,w]),{assetReminder:ut}=xr(),tt=r==="list",M=(0,wr.useDispatch)(),X=(0,Nr.useHistory)(),st=Ro(t),{name:et,icon:_t,host:Ct}=st,{inputs:Lt,outputs:V}=gr(p?o[w]:e),j=(0,l.useMemo)(()=>A.sub(Pt(Lt),Pt(V)),[Lt,V]),ft=$o(),Ft=(0,l.useMemo)(()=>{if(r!==Tt.TRADE&&r!==Tt.RUNES)return null;let z=Number(s);if(r===Tt.RUNES){let qt=Pt(V,1,z),zt=A.add(Pt(V,0,1),Pt(V,V.length-z+1,z-1));return`${A.sub(zt,A.add(qt,j))}`}let lt=Pt(V,z+1,z),Nt=Pt(V,1,z);return`${A.sub(Nt,A.add(lt,j))}`},[s,j,V,r]),gt=(0,l.useMemo)(()=>u&&p?{type:$.TIP_TYPE.COMMON_ERROR,message:i("extension_wallet_contractual_interaction_wallet_unavailable")}:f?{type:$.TIP_TYPE.COMMON_ERROR,message:i("wallet_extension_top_toast_dapp_comingsoon")}:L?{type:vt.TYPE.warn,message:i("wallet_extension_asset_alert_trust_network")}:ut&&!T?.includes("okx.com")?{type:vt.TYPE.warn,message:ut}:{},[f,u,ut,L,T]),kt=(0,l.useCallback)(async()=>{await M(Z(t.id)),await M(Q()),await se(M)},[M,t.id]),K=(0,l.useCallback)(async()=>{if(!!await jt({walletId:S,callback:async()=>{await M(Z(t.id))}})){try{let lt=await bo(p?o:e,n,S,{localType:P,isPsbts:p},c);await M(rt(t.id,{signedTx:lt}))}catch(lt){await ft({id:t.id,error:lt?.message||"Error"})}await M(Q()),X.push(Ot)}},[X,n,ft,M,p,P,e,c,o,t.id,S]),dt=Ir({onConfirm:K}),[Yt,Gt]=(0,l.useState)(!1),oe=(0,l.useMemo)(()=>{let z=N?.inputInfo||[],lt=N?.outputInfo||[],Nt=z.filter(it=>it.address?.includes(n)),qt=lt.filter(it=>it.address?.includes(n)),zt=[],ae=[];return Nt.forEach(it=>{it.xrcAssets&&it.xrcAssets.forEach(at=>{zt.some(ne=>ne.symbol===at.symbol&&ne.protocolId===at.protocolId)||zt.push({symbol:at.symbol,protocolId:at.protocolId})})}),qt.forEach(it=>{it.xrcAssets&&it.xrcAssets.forEach(at=>{ae.some(ne=>ne.symbol===at.symbol&&ne.protocolId===at.protocolId)||ae.push({symbol:at.symbol,protocolId:at.protocolId})})}),zt.length>0&&ae.length>0?!zt.every(it=>ae.some(at=>it.symbol===at.symbol&&it.protocolId===at.protocolId)):!1},[N,n]),G=(0,l.useMemo)(()=>{let z=N.inputInfo||[],lt=N.outputInfo||[];return[...z,...lt].some(Nt=>!!(Nt.xrcAssets&&Nt.xrcAssets.length>1))},[N]),wt=(0,l.useMemo)(()=>k.some(z=>{let lt=z.inputInfo||[],Nt=z.outputInfo||[];return[...lt,...Nt].some(qt=>!!(qt.xrcAssets&&qt.xrcAssets.length>1))}),[k]);(0,l.useEffect)(()=>{Y||(G||oe||N.assetInversion)&&Gt(!0)},[k,Y,G,oe,N.assetInversion]);let De=(0,l.useCallback)(()=>{if(!wt||!Y){K();return}dt()},[wt,K,dt,Y]),Oe=(0,l.useCallback)(z=>{v(!0),It(z)},[v]),Ue=(0,l.useMemo)(()=>[{actionType:q.ACTION_TYPE.CANCEL,btnText:Y?i("wallet_extension_asset_btn_cancel_all"):i("wallet_dapp_connection_btn_reject"),onClick:kt},{disabled:f||g||gt.type===$.TIP_TYPE.COMMON_ERROR,actionType:q.ACTION_TYPE.CONFIRM,btnText:Y?i("wallet_extension_asset_btn_confirm_all"):i("extension_transactions_btn_confirm"),onClick:De}],[f,kt,gt,Y,g]),re=(0,l.useMemo)(()=>{switch(r){case Tt.LIST:return i("extension_wallet_transfer_maintitle_list");case Tt.UNLIST:return i("extension_wallet_transfer_maintitle_cancel_listing");case Tt.TRADE:return i("extension_wallet_transfer_maintitle_transaction");default:return i("extension_wallet_transfer_maintitle_transaction")}},[r]),eo=!tt&&(A.gt(N.gasFee,0)||A.gt(j,0)),Mr=(0,l.useMemo)(()=>!L||L===Dt.EXECUTE_ERROR&&N.status!==Dt.PSBT_ANALYSIS_FAILED,[L,N]),Dr=(0,l.useMemo)(()=>L&&L!==Dt.EXECUTE_ERROR||N?.status===Dt.PSBT_ANALYSIS_FAILED,[L,N]);return l.default.createElement(_.Container,null,l.default.createElement(bt,{title:re,backable:p&&y,closeable:!1,onBack:()=>{v(!1)}}),Y?l.default.createElement("div",null,l.default.createElement(W,null,l.default.createElement(Ze,{summaryList:[{title:et,desc:Ct,icon:{src:_t}}],title:i("extension_contract_interaction_maintitle_request_from")})),l.default.createElement(fr,{psbts:o,loading:g,onClick:Oe})):null,Y?null:l.default.createElement(l.default.Fragment,null,Mr&&l.default.createElement(Ee,{coinId:x,txType:h.TRANS_OUT,loading:g,dappInfo:{name:et,host:Ct,icon:_t},analyzeRet:N}),Dr&&l.default.createElement(W,null,(r===Tt.TRADE||r===Tt.RUNES)&&l.default.createElement(Kt,{summaryList:[{coinId:x,coinAmount:Ft}],tooltip:i("extension_infor_tooltip_asset_changestips"),title:i("extension_contract_interaction_maintitle_asset_changes")}),l.default.createElement(Ze,{summaryList:[{title:et,desc:Ct,icon:{src:_t}}],title:i("extension_contract_interaction_maintitle_request_from")})),eo&&l.default.createElement(W,null,l.default.createElement(Jt,{coinId:x,networkFee:N.gasFee||j})),l.default.createElement(W,null,l.default.createElement(Wt,{title:i("wallet_extension_network_address_title_walletused"),address:n,walletId:S,onCopyCallback:()=>{O({trade:"approve",all_confirmation:"wallet_used_address"})}})),!eo&&l.default.createElement(W,null,l.default.createElement(Ko,{coinId:x})),l.default.createElement(W,null,l.default.createElement(ur,{coinId:x,data:N,currentAddr:n})),l.default.createElement(W,null,l.default.createElement(Ne,{data:p?o[w]:e,copyable:{hideDesc:!0}}))),y?null:l.default.createElement(Zt,{placeholder:!0,offsetBottom:0,borderTop:!0},l.default.createElement($,{coinId:ct,...gt}),l.default.createElement(q,{buttonGroup:Ue})),l.default.createElement(Tr,{visible:Yt,onCancel:()=>{Gt(!1)},onConfirm:()=>{Gt(!1),kt()},headerProps:{coinId:x,txType:h.TRANS_OUT,analyzeRet:N},psbtHasMultiXRCAsset:G,paymentUseXRCAsset:oe,assetInversion:N.assetInversion}))};a();m();var B=I(U()),Sr=I(Xt()),Ar=I(ze());ot();_e();var br=({unapproved:t})=>{let e=t.walletId,o=Vt(e),{memo:r,value:n,memoPos:s,to:c,satBytes:T,from:p,extraParams:S}=t.params.transaction,{localType:P}=t,x=ct;P===le?x=pe:P===ce&&(x=ue);let u=Bt(x),[f,{toggle:O}]=At(!1),[g,k]=(0,B.useState)(T?{level:St.CUSTOM,satBytes:T}:{}),L=g?.satBytes,y=(0,Sr.useDispatch)(),v=(0,Ar.useHistory)(),[,w]=Ie({coinId:x,address:p,chainId:u?.chainId}),It=w?.transferReminder;(0,B.useEffect)(()=>{if(!L&&w?.normal&&k({level:St.STANDARD,satBytes:w?.normal}),L&&g?.level!==St.CUSTOM){let K=w[Se[g?.level]?.satBytes];k({...g,satBytes:K})}},[w]);let[Y,N]=ge({coinId:x,walletId:e,address:p,satBytes:L},{}),ut=Qt(e),[tt,M,X]=Oo({coinId:x,toAddr:c,walletId:e,fromAddr:p,satBytes:L,coinAmount:n,canTransferAmount:N},{}),st=(0,B.useMemo)(()=>N===void 0||M===void 0?!0:A.gte(N,A.add(M,n)),[N,n,M]),et=we({coinId:x,txType:h.TRANS_OUT,address:p}),_t=Uo({memo:r,memoPos:s,coinId:x,toAddr:c,walletId:e,coinAmount:n,fromAddr:p,localType:u?.localType,dustSize:w?.minOutput,networkFee:M,satBytes:g.satBytes}),Ct=vo({coinId:x,walletId:e,satBytes:L,address:p,utxoType:Ut.TRANSFER}),Lt=$t(e),[V,j]=(0,B.useState)(!1),ft=(0,B.useCallback)(async()=>{await y(Z(t.id)),await y(Q()),j(!1),v.push(Ot)},[y,v,t.id]),Ft=(0,B.useCallback)(async()=>{if(!await jt({walletId:e,callback:async()=>{await y(Z(t.id))}}))return;let dt=await Ct(n,M);await et(dt,()=>{ft()}),j(!0);let Yt=await _t({utxoList:dt});t.id&&(await y(rt(t.id,{signedTx:Yt,coinAmount:n,serviceCharge:M,satPerByte:L,coinId:x,...S})),await y(Q())),j(!1)},[et,n,y,M,S,Ct,ft,L,_t,t.id]),gt=(0,B.useMemo)(()=>o?{type:$.TIP_TYPE.COMMON_ERROR,message:i("wallet_extension_top_toast_dapp_comingsoon")}:st?X?{type:$.TIP_TYPE.FEE_ERROR}:{type:vt.TYPE.warn,message:It}:{type:$.TIP_TYPE.FEE_BALANCE_INSUFFICIENT},[X,o,st,It]),kt=(0,B.useMemo)(()=>{let K=[{actionType:q.ACTION_TYPE.CANCEL,btnText:i("wallet_dapp_connection_btn_reject"),onClick:ft}];return st?K=[...K,{disabled:Y||tt||X||o||!Number(M),actionType:q.ACTION_TYPE.CONFIRM,onClick:Ft}]:K=[...K,{coinId:x,address:p,walletId:e,actionType:q.ACTION_TYPE.FILL_UP}],K},[x,M,X,tt,p,o,st,Y,ft,Ft,e]);return B.default.createElement(_.Container,null,B.default.createElement(bt,{title:i("wallet_trade_maintitle_transaction_confirm"),backable:!1,closeable:!1}),B.default.createElement(W,null,B.default.createElement(Kt,{title:i("wallet_extension_send_colored_send"),summaryList:[{coinId:x,coinAmount:n}]})),B.default.createElement(W,null,B.default.createElement(Wt,{walletId:e,address:p,title:i("extension_send_mid_text_from"),onCopyCallback:()=>{ut({trade:"send",all_confirmation:"wallet_used_address"})}},!!N&&B.default.createElement(be,{coinBalance:N,coinId:x})),B.default.createElement(Wt,{address:c,title:i("extension_send_mid_text_to"),onCopyCallback:()=>{ut({trade:"send",all_confirmation:"to_address"})}})),B.default.createElement(W,{bordered:!1},B.default.createElement(Jt,{coinId:x,loading:tt,estimateFailed:X,networkFee:M,level:g?.level,onClick:()=>{O(),ut({trade:"send",all_confirmation:"network_fee"})}})),B.default.createElement(Zt,{placeholder:!0,offsetBottom:0,borderTop:!0},B.default.createElement($,{coinId:x,...gt}),B.default.createElement(q,{buttonGroup:kt})),B.default.createElement(Ae,{coinId:x,visible:f,signInfo:w,value:g,estimatedFee:M,onChange:k,onToggleVisible:O}),B.default.createElement(Be,{visible:Lt&&V}))};a();m();var ie=I(U());_e();Wr();co();a();m();function Br(t){try{return[JSON.parse(t),null]}catch{return[null,new Error("Illegal JSON string")]}}a();m();var ve=I(U());ot();var Pr=I(Xt());a();m();var D=I(U());ot();a();m();var xt={"inscription-preview":"_inscription-preview_yy6vc_1",inscriptionPreview:"_inscription-preview_yy6vc_1","inscription-preview__inner":"_inscription-preview__inner_yy6vc_13",inscriptionPreviewInner:"_inscription-preview__inner_yy6vc_13","inscription-preview-text":"_inscription-preview-text_yy6vc_21",inscriptionPreviewText:"_inscription-preview-text_yy6vc_21","inscription-preview-image":"_inscription-preview-image_yy6vc_26",inscriptionPreviewImage:"_inscription-preview-image_yy6vc_26","inscription-item__content":"_inscription-item__content_yy6vc_30",inscriptionItemContent:"_inscription-item__content_yy6vc_30","inscription-exceedTip":"_inscription-exceedTip_yy6vc_34",inscriptionExceedTip:"_inscription-exceedTip_yy6vc_34","inscription-extend":"_inscription-extend_yy6vc_39",inscriptionExtend:"_inscription-extend_yy6vc_39","inscription-extend__icon":"_inscription-extend__icon_yy6vc_43",inscriptionExtendIcon:"_inscription-extend__icon_yy6vc_43"};var to=24,ke={TEXT:"text",IMAGE:"image"},Jr=D.default.memo(({type:t,contentType:e,body:o})=>{let[{inscriptionType:r,inscriptionContent:n},s]=Eo({inscriptionType:ke.TEXT,inscriptionContent:o});return(0,D.useEffect)(()=>{if(t===h.ORDINAL_NFT||e?.startsWith("image/"))try{let c=URL.createObjectURL(new Blob([o]));s({inscriptionType:ke.IMAGE,inscriptionContent:c})}catch{s({inscriptionType:ke.TEXT,inscriptionContent:o})}finally{s({initing:!1})}},[o,e,s,t]),D.default.createElement(_.Box,{className:xt["inscription-preview"]},r===ke.IMAGE?D.default.createElement("img",{alt:"",src:n,className:xt["inscription-preview-image"]}):D.default.createElement(_.Box,{className:xt["inscription-preview__inner"]},D.default.createElement(b.Text,{forceWrap:!0,className:xt["inscription-preview-text"]},n)))}),Qr=({type:t,contentType:e,body:o,rawBody:r})=>{let n=(0,D.useMemo)(()=>{let T=o?.length;return A.lt(T,1024)?`${T} B`:`${A.floorTruncate(A.div(T,1024),3)} KB`},[o?.length]),s=t===h.ORDINAL_NFT||e?.startsWith("image/"),c=s?r?.slice(0,200):r;return D.default.createElement(_.FlexBox,null,D.default.createElement(Jr,{type:t,body:o,contentType:e}),D.default.createElement(_.FlexBox,{direction:_.DIRECTION.vertical,className:xt["inscription-item__content"]},D.default.createElement(b.Text,{strong:!0,ellipsis:{tooltip:!s},size:b.SIZE.xs},c),D.default.createElement(b.Text,{size:b.SIZE.xs,type:b.TYPE.secondary},n)))},tn=({type:t,dataSource:e=[]})=>{let o=e?.length||0,[r,{toggle:n}]=At(!1),s=(0,D.useMemo)(()=>r?e?.slice(0,to):e?.slice(0,3),[e,r]),c=(0,D.useMemo)(()=>go(t),[t]);return D.default.createElement(Wo,{space:16,title:i(c,{num:o})},D.default.createElement(ho,{space:24,renderEmpty:!1,dataSource:s,renderItem:T=>D.default.createElement(Qr,{...T,type:t})}),r&&o>to&&D.default.createElement(b.Text,{size:b.SIZE.xs,type:b.TYPE.secondary,className:xt["inscription-exceedTip"]},i("wallet_info_dialog_desc_replicate_hide",{num:A.sub(o,to)})),o>3&&D.default.createElement(_.FlexBox,{justify:"center",className:xt["inscription-extend"],onClick:n},D.default.createElement(J,{size:J.SIZE.xs,className:xt["inscription-extend__icon"],icon:r?"okds-arrow-chevron-up-md":"okx-wallet-plugin-add-arrow-chevrons"})))},hr=tn;function en({unapproved:t}){let e=(0,Pr.useDispatch)(),{id:o}=t,{type:r}=t.params?.transaction||{},n=Co[r],s=async()=>{await e(Q()),await e(Z(t.id))},c=async p=>{await e(rt(t.id,p)),await e(Q())},{inscriptions:T}=qo();return ve.default.createElement(zo,{txId:o,headerProps:{title:n?i(n):null,closeable:!1,backable:!1},confirmButtonProps:{onCancel:s,onConfirm:c},slot:{top:ve.default.createElement(W,null,ve.default.createElement(hr,{type:r,dataSource:T}))}})}var Lr=en;var on=[h.BRC20_MINT,h.BRC20_INSCRIBE,h.BRC20_DEPLOY],rn=[h.EARN_BRC30_APPLY,h.EARN_BRC30_REDEEM,h.EARN_BRC30_CLAIM,h.EARN_BRC30_DEPLOY],nn=[h.RUNES_ETCH];function sn(t){let e=Ht.BRC_NFT;return on.includes(t)?e=Ht.BRC_20:rn.includes(t)?e=Ht.BRC_20S:nn.includes(t)&&(e=Ht.RUNEMAIN),e}function an(t,e){return e.map(({contentType:o,body:r})=>{let n=r;try{(t===h.ORDINAL_NFT||typeof t!="number"&&o?.startsWith("image/"))&&(n=E.Buffer.from(r,"hex"))}catch{}return{contentType:o,body:n,rawBody:r}})}function mn({unapproved:t}){let{tick:e,tid:o,type:r,from:n,to:s,txSource:c,inscriptions:T=[],amount:p,mintType:S=wo.parallel}=t.params?.transaction||{},P=(0,ie.useMemo)(()=>an(r,T),[r,T]),u=+ye({localType:fe})?.netWorkId,f=xe(()=>{if(r===h.RUNES_ETCH){let[y,v]=Br(T[0]?.body);if(v)return{chainId:u,coinType:qe,symbol:e,address:"btc-runesMain-invalid-inscriptions"};let w=y?.id||"";return{chainId:u,coinType:qe,symbol:e,address:`btc-runesMain-${w}`}}return o?{chainId:u,coinType:Te,address:`btc-brc20s-${o}`}:e?{chainId:u,coinType:de,symbol:e}:null},[o,e,r,u]),O=sn(r),g=Bt(void 0,{},f),k=(y,v)=>{let w=0;if(r===h.RUNES_ETCH){y.coinAmount=Ge(p,10**g?.decimals),y.coinId=g?.coinId||ct,y.txSource=c||Mt.DAPP;return}p&&g?.decimals&&(w=Ge(p,10**g?.decimals)),y.coinAmount=w,y.coinId=v?ct:g?.coinId||ct,y.txSource=c||Mt.DAPP},L=(y,v)=>{y&&k(y,!0),Array.isArray(v)&&v.forEach(w=>{k(w,!1)})};return ie.default.createElement(Xo,{params:{walletId:t.walletId,utxoType:Ut.INSCRIPTION_USE_NFT_UTXO,from:n,to:s,inscriptions:P,txType:r,protocolId:O,mintType:S},lifecycle:{beforePostTx:L}},ie.default.createElement(Lr,{unapproved:t}))}var Fr=mn;a();m();ot();var Me=I(U()),kr=I(Xt());Ao();var ln=({unapproved:t})=>{let e=(0,kr.useDispatch)(),{targetCoin:o}=t.params||{},r={image:o.logo,decimals:o.decimals,name:o.name,address:o.contractAddress,symbol:o.symbol},n={name:o.blockChain||o.localType},s=Qt(),c=(0,Me.useMemo)(()=>{let T={actionType:q.ACTION_TYPE.CANCEL,async onClick(){s({all_confirmation:"cancel",trade:"add_token"}),await e(Z(t.id)),await se(e)},btnText:i("wallet_dapp_connection_btn_reject")},p={actionType:q.ACTION_TYPE.CONFIRM,async onClick(){try{s({all_confirmation:"confirm",trade:"add_token"}),await Bo(o),await e(rt(t.id)),await se(e)}catch(S){io.error(S?.data?.originalError?.msg||i("wallet_extenshion_toast_add_failed"))}}};return[T,p]},[s,e,o,t.id]);return Me.default.createElement(Vo,{token:r,provider:n,buttonGroup:c})},vr=ln;var Hl=({unapproved:t})=>{switch(t.method){case H.TRANSFER_NFT:case H.SEND_INSCRIPTION:return yt.default.createElement(Qo,{unapproved:t});case H.SPLITUTXO:return yt.default.createElement(er,{unapproved:t});case H.INSCRIBE:case H.INSCRIBE_TRANSFER:return yt.default.createElement(ir,{unapproved:t});case H.SIGNPSBT:case H.SIGNPSBTS:return yt.default.createElement(Er,{unapproved:t});case H.SIGN_MESSAGE:return yt.default.createElement(rr,{unapproved:t});case H.MINT:return yt.default.createElement(Fr,{unapproved:t});case H.WATCHASSET:return yt.default.createElement(vr,{unapproved:t});case H.SEND:case H.SEND_BTC:return yt.default.createElement(br,{unapproved:t});default:return""}};export{Hl as default};

window.inOKXExtension = true;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=Bitcoin-YXW2SRUV.js.map
