import{c as ao}from"./chunk-ZJICRI36.js";import{a as Ro}from"./chunk-ADIQBHVU.js";import{rc as Ze,sc as ro,tc as Ho}from"./chunk-OR2KMY5L.js";import{f as rt}from"./chunk-FFJ36R7T.js";import{e as Qo}from"./chunk-UIABO6UG.js";import{a as Xo,b as Jo}from"./chunk-BFVA6OLJ.js";import{b as qe,c as je}from"./chunk-46NSFYB3.js";import{h as jo,i as Ko}from"./chunk-FFQESTX4.js";import{a as et}from"./chunk-OCZAVPFZ.js";import{m as Uo}from"./chunk-RUSRHRGO.js";import{a as Mo}from"./chunk-EWK7ZFVN.js";import{p as ot,q as tt}from"./chunk-EKQH7XTV.js";import{d as te}from"./chunk-2LLM6N6U.js";import{N as $o,O as Zo,P as qo,Q as no,b as Yo,e as Vo,s as Wo}from"./chunk-CFT6B56M.js";import{a as $e}from"./chunk-PYJPOVV7.js";import{b as P}from"./chunk-AO6MUSOH.js";import{a as We}from"./chunk-I435LZHT.js";import{n as oo,x as u}from"./chunk-SJIW4WAV.js";import{a as ve,c as Do,l as zo,o as to}from"./chunk-5JJQQHKZ.js";import{$a as Ve}from"./chunk-URG4MCPH.js";import{$a as Oo,Pa as Bo,ab as Go,y as Ye}from"./chunk-ZPOCIBPN.js";import{ha as v,ia as Le,ja as J,k as Po,m as Fo}from"./chunk-CA5MYYD6.js";import{a as vo}from"./chunk-IOCZ22XI.js";import{d as Ee,f as Co}from"./chunk-2G2AXMFT.js";import{a as Pe,b as we}from"./chunk-4JZ3HIS7.js";import{s as Ie}from"./chunk-JLA5HXVC.js";import{c as p}from"./chunk-VMYDP774.js";import{a as Lo,b as Jt}from"./chunk-A7LNVEYU.js";import{f as Ao,h as jt}from"./chunk-2YWUVAR3.js";import{Ea as Re,Fb as Ne,Kb as Xt,Nb as eo,Pa as qt,Qa as ko,Ta as Eo,la as Zt,m as Io,o as So,pb as Kt}from"./chunk-M54COW6Q.js";import{E as Te,G as he,b as oe,o as xe,q as bo,y as Qe}from"./chunk-RIJWHGTU.js";import{I as H,l as M,v as t}from"./chunk-K4MPEKC5.js";import{L as wo,R as ke,X as b,c as ye}from"./chunk-XIGC6FD5.js";import{a as L}from"./chunk-CXUPEGDW.js";import{a as $t}from"./chunk-RYJHESAH.js";import{f as g,m as r,o as n}from"./chunk-ICCOEXX5.js";r();n();var I=g(L()),Ft=g(Ye());H();r();n();var A=g(L()),Et=g(vo());H();r();n();var Ke=g(L());r();n();var Q=g(L()),it=g(Ye()),st=g(ye());H();r();n();var Fe=g(L()),nt=g(Ye());function at({chainId:o,walletId:e}){let[a,s]=(0,Fe.useState)(!1),[i,l]=(0,Fe.useState)([]),y=(0,nt.useSelector)(Bo);e=e||y;let x=ve(async()=>{s(!0),l([]);try{let c=await Zo({chainId:o,walletId:e}),{data:T=[]}=c;l(T)}catch{l([])}finally{s(!1)}});return(0,Fe.useEffect)(()=>{o&&x()},[x,o]),{loading:a,coinList:i}}r();n();var q={container:"_container_unn00_1",scrollable:"_scrollable_unn00_7",wrapContainer:"_wrapContainer_unn00_12",icon:"_icon_unn00_20",tokenLogo:"_tokenLogo_unn00_23",tokenLogoLarger:"_tokenLogoLarger_unn00_30",chainLogo:"_chainLogo_unn00_37",tab:"_tab_unn00_52",list:"_list_unn00_55",chainSmall:"_chainSmall_unn00_58",chainLarge:"_chainLarge_unn00_62"};var Qt=({iconUrl:o,chainUrl:e})=>Q.default.createElement(p.Box,{className:(0,st.default)(q.icon,e?q.chainSmall:q.chainLarge)},Q.default.createElement(Te,{className:e?q.tokenLogo:q.tokenLogoLarger,alt:"coin-icon",errorImg:Ie,src:o}),!!e&&Q.default.createElement(Te,{className:q.chainLogo,alt:"coin-icon",errorImg:Ie,src:e,width:16,height:16}));function io({onSelect:o,onBack:e,chainId:a,walletId:s,chainName:i}){let{usdToThisRate:l}=(0,it.useSelector)(Go),{coinList:y}=at({chainId:a,walletId:s}),x=c=>{o({...c}),e()};return Q.default.createElement(p.Container,{className:q.container},Q.default.createElement(We,{offsetTop:0},Q.default.createElement($e,{title:t("wallet_extension_swapforgas_dialog_header_chain_token",{chain:i}),onBack:e,closeable:!1,sticky:!1})),Q.default.createElement(te,{className:q.list,loading:!y.length&&{size:ke.SIZE.lg},dataSource:y,renderItem:c=>{let{amountNum:T,tokenSymbol:_,tokenLogoUrl:h,currencyAmount:m,tokenName:C}=c;return Q.default.createElement(te.Coin,{icon:Q.default.createElement(Qt,{iconUrl:h}),symbol:_,balance:T,name:C,market:M.mul(m,l),onClick:()=>{x(c)}})}}))}var lt=({visible:o,closeCallback:e,onSelect:a,chainId:s,walletId:i,chainName:l})=>Ke.default.createElement(p.Portal,{noStyle:!0},o&&Ke.default.createElement(p.Box,{className:q.wrapContainer},Ke.default.createElement(io,{onSelect:a,onBack:e,chainId:s,chainName:l,walletId:i})));r();n();var ct=g(ye()),so=g(L());r();n();var mt={errorContainer:"_errorContainer_12hl2_1"};var _t=({errorText:o,onClick:e,btnText:a,className:s})=>so.default.createElement("div",{className:(0,ct.default)(mt.errorContainer,s)},so.default.createElement(Qe.State,{type:Qe.State.TYPE.noNetwork,title:o,onButtonClick:e,buttonText:a}));r();n();var lo=g(L());var pt=g(Io());H();var ut=({visible:o,checkFlag:e,code:a,enoughFlag:s,onCancel:i,onConfirm:l,onClose:y,chainName:x})=>{let c=[{message:t("swaptrade_dialog_text_irregular_operations"),confirmName:t("swaptrade_dialog_modal_oneorder_pending_okbtn"),cancelName:null,checkFlag:v.BLACK_LIST,code:J.BLACK_LIST},{message:t("swaptrade_dialog_modal_service_closed"),confirmName:t("swaptrade_dialog_modal_oneorder_pending_okbtn"),cancelName:null,checkFlag:v.CLOSE,code:J.CLOSE},{message:t("swaptrade_dialog_text_daily_orderlimit"),confirmName:t("swaptrade_dialog_modal_oneorder_pending_okbtn"),cancelName:null,checkFlag:v.LIMIT,code:J.LIMIT},{message:t("swaptrade_extension_dialog_desc_swapgas_inprogress"),confirmName:t("swaptrade_extension_dialog_btn_view_pending_order"),cancelName:t("swaptrade_dialog_modal_oneorder_pending_okbtn"),title:t("wallet_extension_swapforgas_dialog_title_order_pending"),checkFlag:v.PENDING_GAS_STATION,code:J.PENDING_GAS_STATION},{message:t("swaptrade_extension_dialog_desc_similar_order_processing"),confirmName:t("swaptrade_extension_dialog_btn_view_pending_order"),cancelName:t("swaptrade_extension_dialog_btn_continue_submit_swap"),title:t("wallet_extension_swapforgas_dialog_title_order_pending"),checkFlag:v.PENDING_SWAP,enoughFlag:Le.ENOUGH,code:J.PENDING_SWAP},{message:t("swaptrade_extension_dialog_desc_swap_order_processing"),confirmName:t("swaptrade_extension_dialog_btn_view_pending_order"),cancelName:t("swaptrade_dialog_modal_oneorder_pending_okbtn"),title:t("wallet_extension_swapforgas_dialog_title_order_pending"),checkFlag:v.PENDING_SWAP,enoughFlag:Le.NOT_ENOUGH,code:J.PENDING_SWAP},{message:t("swaptrade_swapforgas_desc_in_progress",{chain:x}),confirmName:t("swaptrade_dialog_modal_oneorder_pending_okbtn"),cancelName:null,checkFlag:v.WALLET_HAS_PENDING_ORDER},{message:t("defi_dextrade_errormsg_tron_change"),confirmName:t("swaptrade_dialog_modal_oneorder_pending_okbtn"),cancelName:null,checkFlag:v.TRON_PERMISSION,code:J.TRON_PERMISSION},{title:t("wallet_extension_swapforgas_dialog_title_high_payment"),message:t("wallet_extension_swapforgas_dialog_desc_high_payment"),confirmName:t("swaptrade_dialog_modal_oneorder_pending_okbtn"),cancelName:null,checkFlag:v.PAY_TOO_LARGE,code:J.PAY_TOO_LARGE},{title:t("wallet_extension_swapforgas_dialog_title_low_payment"),message:t("wallet_extension_swapforgas_dialog_desc_low_payment"),confirmName:t("swaptrade_dialog_modal_oneorder_pending_okbtn"),cancelName:null,checkFlag:v.PAY_TOO_SMALL,code:J.PAY_TOO_SMALL}],{confirmName:T,cancelName:_,message:h,title:m}=c.find(C=>(0,pt.isUndefined)(e)?C.code===+a:C.checkFlag===v.PENDING_SWAP?C.checkFlag===+e&&C.enoughFlag===+s:C.checkFlag===+e)||c[1];return lo.default.createElement(xe.Tip,{visible:o,title:m,confirmText:T,cancelText:_,onConfirm:l,onCancel:i,onClose:y,btnFull:!1},lo.default.createElement("div",null,h))};r();n();H();var Oe=g(L());r();n();var Be={alert:"_alert_1txjs_1"};r();n();var dt=({priceInfo:o})=>{let{fromTokenSymbol:e,toTokenSymbol:a,currencyAbnormalType:s}=o;switch(s){case"1":return Oe.default.createElement(oe,{className:Be.alert,title:t("swaptrade_top_reminder_paysymbol_failed",{paySymbol:e}),type:oe.TYPE.error,closable:!1});case"2":return Oe.default.createElement(oe,{className:Be.alert,title:t("swaptrade_top_reminder_receivesymbol_failed",{receiveSymbol:a}),type:oe.TYPE.error,closable:!1});case"3":return Oe.default.createElement(oe,{className:Be.alert,title:t("swaptrade_top_reminder_payreceive_failed",{paySymbol:e,receiveSymbol:a}),type:oe.TYPE.error,closable:!1});default:break}return o.isQuoteAvailable==="0"?Oe.default.createElement(oe,{className:Be.alert,title:t("wallet_extension_swapforgas_error_gas_price_flux"),type:oe.TYPE.error,closable:!1}):null};r();n();var co=g(L()),Ge=g(Ye()),Tt=g(vo()),_o=g($t());H();r();n();var gt={min:"0",max:"0",normal:"0",minGasPrice:"0",supportEip1559:!1,suggestBaseFee:"0",safePriorityFee:"0",proposePriorityFee:"0",fastPriorityFee:"0",baseFee:"0"};Xt();Zt();Kt();r();n();qt();r();n();var mo=(o,e)=>`Failed to get tx hash, localType is ${o}, signedTx is ${e}`;async function yt(o,e){try{let s=Re({localType:o})?.coinType,{wallet:i}=await eo(s);return await i?.calcTxHash({data:e})}catch{throw new Error(mo(o,e))}}async function En(o,e){try{e=e||[];let s=Re({localType:o})?.coinType,{wallet:i}=await eo(s);return await Promise.all(e.map(y=>i?.calcTxHash({data:y})))}catch{throw new Error(mo(o,e.toString()))}}Co();var ht=({priceInfo:o,setLoading:e,loading:a,setErrorInfo:s,coinId:i,toChainId:l,chainList:y,txId:x,amount:c,isValidateAmount:T})=>{let _=(0,Ge.useDispatch)(),h=(0,Tt.useHistory)(),{toTokenSymbol:m,fromTokenValue:C,fromTokenContractAddress:d,toTokenAddress:D,currencyAbnormalType:W,fromChainName:k,fromTokenSymbol:z,balance:F,fromChainId:B,balanceAbnormalType:K,isQuoteAvailable:se}=o,{allAddress:le,currentAddress:U}=(0,Ge.useSelector)(w=>ao(w,B)),{currentAddress:me}=(0,Ge.useSelector)(w=>ao(w,l)),X=()=>se==="0"||W!=="0"||K!=="0"?!1:F&&c&&T?+F>=+c:!1,Y=()=>W!=="0"||K!=="0"?t("swaptrade_footer_btn_fill_up",{nativeToken:m}):F&&c?+F>=+c?t("swaptrade_footer_btn_fill_up",{nativeToken:m}):t("swaptrade_bot_btn_insufficient_balance",{token:z}):t("swaptrade_footer_btn_fill_up",{nativeToken:m}),ce=async()=>{let w={amount:c,chainId:B,currentUserWalletAddress:U,fromTokenAddress:d,toChainId:l,toTokenAddress:D,walletAddresses:le},{data:N}=await qo(w);return N},be=async()=>{let{data:w}=await Yo({coinId:i,address:U});return w},Me=async({from:w,to:N,data:O,value:$},_e)=>{let pe={address:U,inputData:O,coinId:i,value:$,tokenAddress:N},{data:Z}=await Vo(pe),ue=_e?.info?.gasPrice||gt,ge=_e?.info?.newNonce,{normal:Ce}=ue,Se={chainId:B,from:w,to:N,data:O,gasPrice:Ne(we(Ce)),value:Ne(we($)),nonce:Ne(we(ge)),gas:Ne(we(Z.gasLimit)),gasLimit:Ne(we(Z.gasLimit))},Ae=await Ee().signTransaction(Se,Se.from),He=await yt(So,Ae);return{rawTx:Ae,txHash:He,txParams:Se,gasLimitInfo:Z}},zt=async w=>await Ee().silentOfflineSignTron(w),ho=w=>({chainId:B,fromAmount:c,fromTokenAddress:d,payValue:C,toChainId:l,userWalletAddress:U,walletAddresses:le,receiveWalletAddress:me,...w}),Ut=async(w,N)=>{let{txID:O,signedTx:$}=w,{to:_e,data:pe}=N,{info:{fee:Z}}=await Wo({coinId:i,address:U},{fromAddr:U,scenario:Po.SCENARIO_INTERACTION,inputData:pe,toAddr:_e,dataLength:pe.length}),ue=JSON.stringify({chainId:B,serviceCharge:Z,inputData:N.data,toAdr:N.to,coinAmount:N.value,signedTx:$,txSource:3,fromAdr:N.from,txHash:O,extJson:JSON.stringify({nonce:"",priorityFee:"",feeType:"",oldTxHash:"",maxBaseFee:"",gasPrice:"",gas:"",decimal:6})}),ge=ho({inputData:ue,approveTransactionHash:O,signedTx:$});return await no(ge)},Mt=async(w,N,O)=>{let{txHash:$,rawTx:_e,gasLimitInfo:pe,txParams:Z}=w,{gasPrice:ue,nonce:ge,gas:Ce}={...Z,nonce:Pe(Z.nonce),gasPrice:Pe(Z.gasPrice),value:Pe(Z.value),gas:Pe(Z.gas)},{normal:Se,proposePriorityFee:Ae,supportEip1559:He}=O.info.gasPrice,Je=Ce;pe?.originGasLimit&&N.approveGasLimitCoefficient&&(Je=M.floorMul(pe.originGasLimit,N.approveGasLimitCoefficient,0).toString());let Yt=ko(ue,Ce),Vt=JSON.stringify({chainId:B,serviceCharge:Yt,inputData:N.data,toAdr:N.to,coinAmount:N.value,signedTx:_e,txSource:3,fromAdr:N.from,txHash:$,extJson:JSON.stringify({nonce:ge,priorityFee:Ae||"",feeType:He?Fo.FEE_MARKET:"",oldTxHash:"",maxBaseFee:He?Eo(Se,Ae):"",gasPrice:ue,gas:Je})}),Wt=ho({inputData:Vt,approveTransactionHash:$,approveGasLimit:Je,approveGasPrice:ue,approveNonce:ge});return await no(Wt)},No=async w=>{let N;if(+B==+_o.Currency.TRX){let O=await zt(w);N=await Ut(O,w)}else{w.networkType=y.find(_e=>+_e.netWorkId==+B)?.chain;let O=await be(),$=await Me(w,O);N=await Mt($,w,O)}N.code!==0?s({...N,visible:!0}):h.replace(`${Ve}/${N.data}`)},Ht=async()=>{if(a)return;e(!0);let w=await ce(),{checkFlag:N,approveInfo:O}=w;N===0&&x&&(_(ot.setKeepOpen({show:!0})),await _(Uo({id:x},!1)),+l==+_o.Currency.TRX&&await _(tt(x)));try{N!==0?s({...w,visible:!0,chainName:k,reConfirm:()=>{No(O)}}):await No(O),e(!1)}catch{he.error({title:t("wallet_extension_toast_asset_error_try_again"),duration:1,placement:he.DIRECTION.top}),e(!1)}finally{e(!1)}};return co.default.createElement(We.FooterActions,null,co.default.createElement(b,{block:!0,category:b.CATEGORY.fill,type:b.TYPE.highlight,size:b.SIZE.lg,onClick:Ht,disabled:!X()},Y()))};r();n();H();var go=g(ye()),S=g(L());r();n();var re=g(L()),Nt=g(ye());r();n();var R={container:"_container_1hqzh_1",textContainer:"_textContainer_1hqzh_10",tokenName:"_tokenName_1hqzh_17",chainName:"_chainName_1hqzh_21",imgContainer:"_imgContainer_1hqzh_26",tokenImg:"_tokenImg_1hqzh_31",chainImg:"_chainImg_1hqzh_36",arrowIcon:"_arrowIcon_1hqzh_44",disabled:"_disabled_1hqzh_47"};var Rt=({onClick:o,token:e,chain:a,disabled:s,className:i})=>re.default.createElement(p.Box,{onClick:o,className:(0,Nt.default)(R.container,i,{[R.disabled]:s})},re.default.createElement(p.Box,{className:R.imgContainer},re.default.createElement(Te,{className:R.tokenImg,alt:"token-img",errorImg:Ie,src:e.imgSrc}),re.default.createElement(Te,{className:R.chainImg,alt:"chain-img",errorImg:Ie,src:a.imgSrc})),re.default.createElement(p.Box,{className:R.textContainer},re.default.createElement(u.Text,{strong:700,className:R.tokenName,ellipsis:{tooltip:e.name}},e.name),re.default.createElement(u.Text,{size:"sm",className:R.chainName,ellipsis:{tooltip:a.name}},a.name)),!s&&re.default.createElement(P,{size:P.SIZE.xxs,className:`okx-wallet-plugin-select-unfold ${R.arrowIcon}`})),uo=Rt;r();n();var E=g(L());H();r();n();var j={container:"_container_1dcmx_1",infoIcon:"_infoIcon_1dcmx_6",exchangeRate:"_exchangeRate_1dcmx_9",exchangeRateValue:"_exchangeRateValue_1dcmx_19",finalReceive:"_finalReceive_1dcmx_24",finalReceiveValue:"_finalReceiveValue_1dcmx_25",max:"_max_1dcmx_29",rangeAmount:"_rangeAmount_1dcmx_35",amountText:"_amountText_1dcmx_38",receiveText:"_receiveText_1dcmx_41",displayAmount:"_displayAmount_1dcmx_44",tradeTimes:"_tradeTimes_1dcmx_47"};var De="--",It=({priceInfo:o,pay:e})=>{let[{symbol:a,usdToThisRate:s}]=je(qe.selectedCurrency),{toTokenSymbol:i,toAmount:l,rate:y,tradeTimes:x,currencyAbnormalType:c,toTokenValue:T}=o,_=()=>!y||c!=="0"?De:u.formatCryptoNumbericalValue(y),h=`1 ${e.token.name} \u2248 ${_()} ${i}`;return E.default.createElement(p.Box,{className:j.container},E.default.createElement(te.Line,{size:"sm",label:E.default.createElement(p.FlexBox,{align:p.ALIGN.center},E.default.createElement("div",{className:j.exchangeRate},t("swaptrade_list_title_reference")),E.default.createElement(oo,{title:t("swaptrade_intro_text_gassation_reference_explained")},E.default.createElement(P,{size:P.SIZE.xs,className:`okx-wallet-plugin-information-circle ${j.infoIcon}`})))},E.default.createElement(p.FlexBox,{align:p.ALIGN.center,className:j.exchangeRateValue},E.default.createElement(u.Text,{size:u.SIZE.md,ellipsis:{tooltip:`${h} ${i}`}},`1 ${e.token.name} \u2248 ${_()} ${i}`))),E.default.createElement(te.Line,{className:j.receiveText,size:"sm",label:E.default.createElement(p.FlexBox,{align:p.ALIGN.center},E.default.createElement("div",{className:j.finalReceive},t("swaptrade_list_title_you_receive")),E.default.createElement(oo,{title:t("swaptrade_list_tooltip_receive_describe")},E.default.createElement(P,{size:P.SIZE.xs,className:`okx-wallet-plugin-information-circle ${j.infoIcon}`}))),value:E.default.createElement(p.FlexBox,{align:"center",className:j.finalReceiveValue},E.default.createElement(u.DisplayAmount,{className:j.displayAmount,size:"lg",strong:700,mode:u.CRYPTO,symbol:i},l))}),E.default.createElement(p.FlexBox,{justify:"flex-end",className:j.tradeTimes},E.default.createElement(u.Text,{size:u.SIZE.sm},t("wallet_extension_swapforgas_label_num_transactions",{num:x||De})),E.default.createElement(u.Text,{type:u.TYPE.secondary,size:u.SIZE.sm},`${Ze(M.mul(T,s),a)}`)))};r();n();var ne=g(L());H();var fo=g(ye());r();n();var ee={swapInput:"_swapInput_6oxu1_1",inputWrapper:"_inputWrapper_6oxu1_8",input:"_input_6oxu1_8",inputInner:"_inputInner_6oxu1_15",inputClass:"_inputClass_6oxu1_22",symbol:"_symbol_6oxu1_31",currency:"_currency_6oxu1_34",currencyError:"_currencyError_6oxu1_38",error:"_error_6oxu1_41"};var er=12,wt=({priceInfo:o,setAmount:e,amount:a,error:s})=>{let{fromTokenValue:i,fromTokenSymbol:l,currencyAbnormalType:y,fromTokenDecimals:x}=o,c=Math.min(er,Number(x)),T,[{symbol:_,usdToThisRate:h}]=je(qe.selectedCurrency),m=(0,ne.useMemo)(()=>y==="1"||y==="3",[y]),C=(0,ne.useMemo)(()=>m?`${_}0.0`:Number(a)?`${Ze(M.mul(i,h),_)}`:"",[a,i,m,_,h]);return ne.default.createElement(p.FlexBox,{className:(0,fo.default)(ee.swapInput,{[ee.error]:s}),direction:p.DIRECTION.vertical,onClick:()=>{T?.focus()}},ne.default.createElement(p.FlexBox,{className:ee.inputWrapper,align:p.ALIGN.center},ne.default.createElement(bo.Number,{onRef:d=>{T=d},placeholder:"0.0",precision:c,inputMode:"decimal",className:ee.input,inputClassName:ee.inputClass,innerClassName:ee.inputInner,onChange:d=>{d!==a&&e(d)},value:a}),ne.default.createElement(u.Text,{strong:700,className:ee.symbol},l)),ne.default.createElement(u.Text,{size:u.SIZE.sm,className:(0,fo.default)(ee.currency,{[ee.currencyError]:m}),type:u.TYPE.secondary},C))};r();n();var G={container:"_container_khgyn_1",swapTokenContainer:"_swapTokenContainer_khgyn_4",swapToken:"_swapToken_khgyn_4",swapIcon:"_swapIcon_khgyn_12",rightArrow:"_rightArrow_khgyn_16",walletIcon:"_walletIcon_khgyn_19",rate:"_rate_khgyn_22",flex:"_flex_khgyn_25",infoIcon:"_infoIcon_khgyn_29",exchangeRate:"_exchangeRate_khgyn_32",exchangeRateValue:"_exchangeRateValue_khgyn_42",finalReceive:"_finalReceive_khgyn_47",finalReceiveValue:"_finalReceiveValue_khgyn_48",max:"_max_khgyn_52",rangeAmount:"_rangeAmount_khgyn_58",error:"_error_khgyn_61",disabled:"_disabled_khgyn_64",textContainer:"_textContainer_khgyn_69",selectCoinText:"_selectCoinText_khgyn_76",selectAmountText:"_selectAmountText_khgyn_79",rateText:"_rateText_khgyn_82",receiveText:"_receiveText_khgyn_85",displayAmount:"_displayAmount_khgyn_88"};var or=({coinInfo:o,priceInfo:e,clickPayToken:a,setAmount:s,amount:i,isValidateAmount:l})=>{let{toTokenSymbol:y,toTokenLogoUrl:x,toChainName:c,toChainLogoUrl:T,fromTokenSymbol:_,fromTokenLogoUrl:h,balance:m,fromChainLogoUrl:C,fromChainName:d,minimumAmount:D,maximumAmount:W,currencyAbnormalType:k,balanceAbnormalType:z,isQuoteAvailable:F}=e,B=o?{token:{name:o.tokenSymbol,imgSrc:o.tokenLogoUrl},chain:{name:o.chainName,imgSrc:o.chainLogoUrl}}:{token:{name:_,imgSrc:h},chain:{name:d,imgSrc:C}},K={token:{name:y,imgSrc:x},chain:{name:c,imgSrc:T}},se=(0,S.useMemo)(()=>{let Y=F==="1",ce=t("wallet_extension_swapforgas_label_amount_range",{minAmount:Y?ro(D):De}),be=t("wallet_extension_swapforgas_label_amount_limit",{maxAmount:Y?ro(W):De});return`${ce} \uFF5E ${be}`},[F,W,D]),le=()=>{let Y=Ho(m,{ifFromMax:!0,noNeedThousandth:!0});s(Y)},U=(0,S.useMemo)(()=>k!=="0"||z!=="0"?!1:l,[z,k,l]),me=(0,S.useMemo)(()=>z!=="0",[z]),X=(0,S.useMemo)(()=>i!==""&&!l,[i,l]);return S.default.createElement(p.Box,{className:G.container},S.default.createElement(te.Line,{className:G.selectCoinText,size:"sm",label:t("swaptrade_function_title_select_token")}),S.default.createElement(p.Box,{className:G.swapTokenContainer},S.default.createElement(uo,{...B,onClick:a,className:G.swapToken}),S.default.createElement(P,{size:P.SIZE.md,className:`okx-wallet-plugin-to ${G.rightArrow}`}),S.default.createElement(uo,{disabled:!0,...K,className:G.swapToken})),S.default.createElement(te.Line,{className:G.selectAmountText,size:"sm",label:S.default.createElement("div",{className:G.flex},t("wallet_extension_swapforgas_label_pay_amount"),S.default.createElement(P,{size:P.SIZE.xs,className:(0,go.default)("okx-wallet-plugin-wallet",G.walletIcon,{[G.error]:me})}),me?S.default.createElement(u.Text,{className:G.error,size:u.SIZE.sm},t("wallet_extension_swapforgas_error_unknown_balance")):S.default.createElement(S.default.Fragment,null,S.default.createElement(u.DisplayAmount,{noStyle:!0,mode:u.CRYPTO},m),m&&M.BigNumber(m).gt(0)&&S.default.createElement(u.Text,{className:G.max,onClick:le,size:u.SIZE.sm},t("wallet_extension_transaction_input_max"))))}),S.default.createElement(wt,{priceInfo:e,setAmount:s,amount:i,error:X}),S.default.createElement(u.Text,{type:u.TYPE.secondary,size:u.SIZE.sm,className:(0,go.default)(G.rangeAmount,{[G.error]:X})},se),U&&S.default.createElement(It,{priceInfo:e,pay:B}))},bt=or;r();n();var ie=g(L());H();r();n();var ae=g(L());H();r();n();var ze={container:"_container_klk6c_1",title:"_title_klk6c_5",content:"_content_klk6c_9",footer:"_footer_klk6c_14"};var Ct=({visible:o,closeCallback:e})=>ae.default.createElement(xe.Action,{onClose:()=>{e()},visible:o,maskClosable:!0,hideCloseBtn:!0,noTopRadius:!1,windowStyle:{overflow:"hidden"}},ae.default.createElement(ae.default.Fragment,null,ae.default.createElement("div",{className:ze.container},ae.default.createElement(u.Text,{strong:700,className:ze.title},t("swaptrade_intro_title_swap_forgas")),ae.default.createElement(u.Text,{size:u.SIZE.sm,className:ze.content},t("swaptrade_intro_text_swap_forgas_desc"))),ae.default.createElement("div",{className:ze.footer},ae.default.createElement(b,{block:!0,category:b.CATEGORY.fill,type:b.TYPE.highlight,size:b.SIZE.lg,onClick:()=>e(!1)},t("swaptrade_intro_btn_ok")))));r();n();var yo={title:"_title_vcieq_1",infoIcon:"_infoIcon_vcieq_5"};var St=({onClose:o=()=>{}})=>{let[e,a]=(0,ie.useState)(!1);return ie.default.createElement(ie.default.Fragment,null,ie.default.createElement($e,{title:ie.default.createElement("div",{className:yo.title},t("swaptrade_header_title_swap_forgas"),ie.default.createElement(P,{size:P.SIZE.sm,className:`okx-wallet-plugin-information-circle ${yo.infoIcon}`,onClick:()=>a(!0)})),closeable:!1,onBack:o}),ie.default.createElement(Ct,{visible:e,closeCallback:a}))};r();n();Co();H();Jt();jt();var At=g(Io()),fe=g(L());var kt=({coinInfo:o,chainId:e,walletId:a,setLoading:s})=>{let[i,l]=(0,fe.useState)({tradeTimes:"",balance:"",balanceAbnormalType:"0",currencyAbnormalType:"0"}),y=jo(),x=a||y,c=(0,fe.useCallback)(h=>{l({...h,...i})},[]),T=(0,fe.useCallback)(async h=>{if(M.BigNumber(h).isZero())return;let m;o?m={fromChainId:o.chainId,fromTokenContractAddress:o.tokenContractAddress,toChainId:e}:m={toChainId:e};try{let C=await Ee().getUserUniqueId(),{data:d}=await Ao(Lo.getPriceInfoUrl,{...m,userUniqueId:C,walletId:x,amount:h===""?"":M.BigNumber(h).toString(10)});s(!1),l(d)}catch{c({error:!0}),s(!1)}},[e,o,x,c,s]),_=(0,fe.useMemo)(()=>(0,At.debounce)(T,500),[T]);return{priceInfo:i,fetchPriceInfo:_}};r();n();var Ue={container:"_container_1g0r0_1",contentContainer:"_contentContainer_1g0r0_8",loaderContainer:"_loaderContainer_1g0r0_14",errorContainer:"_errorContainer_1g0r0_17"};var tr=o=>{let e=(0,Et.useHistory)(),a=et(),s=o.chainId||a.get("chainId"),i=o.txId||a.get("txId"),l=o.walletId||a.get("walletId"),[y,x]=(0,A.useState)(!0),[c,T]=(0,A.useState)(!1),[_,h]=(0,A.useState)(null),[m,C]=(0,A.useState)(""),[d,D]=(0,A.useState)({orderId:"",checkFlag:-1,enoughFlag:0,visible:!1,code:0,reConfirm:()=>{}}),W=Xo(),{priceInfo:k,fetchPriceInfo:z}=kt({coinInfo:_,chainId:s,walletId:l,setLoading:x});(0,A.useEffect)(()=>{_&&k.error&&he.error({title:t("wallet_extension_toast_asset_error_try_again"),placement:he.DIRECTION.top})},[k.error,_]);let F=Mo(),{coinId:B}=Do(()=>F.find(X=>+X.chainId==+k.fromChainId)||{},[F,k?.fromChainId]);(0,A.useEffect)(()=>{let X=setInterval(()=>{z(m)},1e4);return z?.(m),()=>clearInterval(X)},[m,z]);let K=!_&&k.error,se=(0,A.useMemo)(()=>Number(m)>=Number(k?.minimumAmount)&&Number(m)<=Number(k?.maximumAmount),[m,k]),le=()=>K?A.default.createElement(_t,{className:Ue.errorContainer,errorText:t("swaptrade_mid_title_network_error"),btnText:t("swaptrade_mid_btn_reload"),onClick:()=>{x(!0),z(m)}}):null,U=()=>K?null:A.default.createElement("div",{className:Ue.contentContainer},A.default.createElement(bt,{coinInfo:_,priceInfo:k,amount:m,setAmount:C,isValidateAmount:se,clickPayToken:()=>T(!0)}),A.default.createElement(dt,{priceInfo:k})),me=()=>A.default.createElement(p.Box,{className:Ue.loaderContainer},A.default.createElement(ke.Circle,{hasMask:!0,maskColor:"var(--okd-color-background-base-primary)",size:ke.SIZE.xl}));return A.default.createElement("div",{className:Ue.container},A.default.createElement(St,{onClose:o.onClose}),le(),y?me():U(),!K&&A.default.createElement(ht,{priceInfo:k,setLoading:x,loading:y,setErrorInfo:D,coinId:B,toChainId:s,chainList:W,txId:i,amount:m,isValidateAmount:se}),A.default.createElement(ut,{...d,onConfirm:()=>{(d.checkFlag===v.PENDING_GAS_STATION||d.checkFlag===v.PENDING_SWAP)&&e.replace(`${Ve}/${d.orderId}`),D({...d,visible:!1})},onCancel:()=>{d.checkFlag===v.PENDING_SWAP&&d.enoughFlag===Le.ENOUGH&&d.reConfirm(),D({...d,visible:!1})},onClose:()=>{D({...d,visible:!1})}}),A.default.createElement(lt,{visible:c,closeCallback:()=>T(!1),chainName:o.chainName,onSelect:h,chainId:s,walletId:l}))},Lt=tr;r();n();var vt=g(L());var rr="DEX_CHAIN_LIST";function nr({toChainId:o}){let e=Jo(),a=Ko(),s=(0,vt.useMemo)(()=>[...new Set(Object.values(a?.account||{}))].filter(Boolean),[a?.account]),{data:i,loading:l,error:y}=zo(async()=>{if(!o)return Promise.reject();try{let{data:x,code:c}=await $o({deviceId:"",userWalletAddresses:s,toChainId:o});if(Number(c)===0){let{gasStationSupportChainList:T=[],isInBlackList:_}=x;return _===1?[]:T.filter(h=>!!e.find(m=>Number(m.chainId)===Number(h.chainId)))}return Promise.reject()}catch{return Promise.reject()}},{cacheKey:rr,onError:()=>{},ready:!!o});return{chainList:i||[],isError:!!y,loading:l}}var Pt=nr;r();n();var Bt=({visible:o,closeCallback:e,receiveOnly:a,walletId:s,coinId:i,txId:l,address:y})=>{let[x,c]=(0,I.useState)(!1),[T,_]=(0,I.useState)(!1),[h,m]=(0,I.useState)(!1),C=(0,Ft.useSelector)(Oo),{coin:d}=Ro(i,!1),{chainList:D,loading:W,isError:k}=Pt({toChainId:d?.chainId}),z=(0,I.useMemo)(()=>{if(a||C||k)return!1;let{chainId:Y}=d;return!!D.find(ce=>`${ce.chainId}`==`${Y}`)},[C,d,D,a,k]);(0,I.useEffect)(()=>{o&&!W?z?m(!0):_(!0):(_(!1),m(!1),c(!1))},[o,z,W]);let F={GAS_STATION:"gas-station",GAS_RECEIVE:"gas-receive"},B=[{title:t("swaptrade_transfer_title_swap_forgas"),label:t("swaptrade_transfer_tag_recommend"),desc:t("swaptrade_transfer_text_swap_forgasdesc",{token:d?.symbol}),type:F.GAS_STATION},{title:t("swaptrade_transfer_title_receive_gas"),label:null,desc:t("swaptrade_transfer_text_receive_gasdesc",{token:d?.symbol}),type:F.GAS_RECEIVE}],K=()=>{c(!0)},se=()=>{c(!1)},le=()=>{_(!0)},U=()=>{_(!1),h||e()},me=Y=>{switch(Y){case F.GAS_STATION:K();break;case F.GAS_RECEIVE:default:le();break}},X=()=>I.default.createElement("div",{className:"supply-gas"},I.default.createElement("div",{className:"supply-gas__nav"},I.default.createElement("div",null,t("swaptrade_header_title_fillup_gas",{token:d?.symbol})),I.default.createElement(wo,{className:"supply-gas__nav-icon okx-wallet-plugin-close",onClick:e})),B.map(({title:Y,label:ce,desc:be,type:Me})=>I.default.createElement("div",{className:"supply-gas__item",key:Me,onClick:()=>{me(Me)}},I.default.createElement("div",{className:"supply-gas__main"},I.default.createElement("div",{className:"supply-gas__title"},I.default.createElement("div",{className:"supply-gas__title-text"},Y),ce&&I.default.createElement("div",{className:"supply-gas__title-label"},ce)),I.default.createElement("div",{className:"supply-gas__desc"},be)))));return W||k?null:I.default.createElement(I.default.Fragment,null,I.default.createElement(xe.Action,{onClose:()=>{e()},visible:h,maskClosable:!0,hideCloseBtn:!0,noTopRadius:!1,windowStyle:{overflow:"hidden"},zIndex:1e3,alignBottom:!0,noContentPadding:!0},X()),I.default.createElement(p.Portal,{noStyle:!0},x?I.default.createElement(p.Box,{className:"supply-gas__container"},I.default.createElement(Lt,{walletId:s,onClose:se,chainId:d?.chainId,chainName:d?.chainName,txId:l})):null),I.default.createElement(p.Portal,{noStyle:!0},T?I.default.createElement(p.Box,{className:"supply-gas__container"},I.default.createElement(rt,{coinId:i,address:y,onBack:U,onClose:U,closeable:!1,showTop:!0})):null))};r();n();var V=g(L());var Ot=g(ye());H();r();n();var de={FILL_UP:"FILL_UP",CONFIRM:"CONFIRM",CANCEL:"CANCEL",ETH_SIGN:"ETH_SIGN"},xo=o=>{o&&typeof o!="string"&&(o=String(o));let e=o?.length;return e<14?16:e<16?14:12},ar=o=>{o&&typeof o!="string"&&(o=String(o));let e=o?.length;return e<8?16:e<9?14:12},To={[de.ETH_SIGN]:{size:b.SIZE.lg,type:b.TYPE.red,category:b.CATEGORY.fill,btnText:"extension_transactions_btn_confirm",autoSize:xo},[de.CONFIRM]:{size:b.SIZE.lg,type:b.TYPE.highlight,category:b.CATEGORY.fill,btnText:"extension_transactions_btn_confirm",autoSize:xo},[de.CANCEL]:{size:b.SIZE.lg,type:b.TYPE.primary,category:b.CATEGORY.outline,autoSize:ar,btnText:"wallet_extension_btn_general_cancel"},[de.FILL_UP]:{size:b.SIZE.lg,type:b.TYPE.highlight,category:b.CATEGORY.fill,autoSize:xo,btnText:"wallet_extension_placeorder_textbtn_replenish"}};r();n();var Xe={"action-buttons":"_action-buttons_j3bvq_1",actionButtons:"_action-buttons_j3bvq_1","action-button":"_action-button_j3bvq_1",actionButton:"_action-button_j3bvq_1","action-button__content":"_action-button__content_j3bvq_12",actionButtonContent:"_action-button__content_j3bvq_12"};var Gt=({coinId:o,onClick:e,onAction:a,actionType:s,btnText:i,children:l,autoSize:y,...x})=>{let[c,{toggle:T}]=to(!1),{btnText:_,autoSize:h,...m}=To[s]||{},C=(0,V.useMemo)(()=>i||t(_),[i,_]),d=ve(async()=>{if(typeof e=="function"||typeof a=="function")try{T(),e&&await e?.(s),!e&&a&&await a?.(s)}catch(D){console.log(D)}finally{T()}},[s,e,a]);return V.default.createElement(b,{loading:c,...m,...x,className:Xe["action-button"],contentClassName:Xe["action-button__content"],onClick:d},V.default.createElement(u.AdaptiveText,{inherit:!0,autoSize:y||h,ellipsis:{tooltip:!0},style:{lineHeight:"20px"}},C))},ir=({txId:o,coinId:e,walletId:a,address:s,actionType:i,onClick:l,receiveOnly:y,...x})=>{let c=Qo(e),[T,{toggle:_}]=to(),{btnText:h}=To[i],m=ve(async()=>{_(),l&&await l()},[]);return V.default.createElement(V.default.Fragment,null,V.default.createElement(Gt,{onClick:m,actionType:i,btnText:t(h,{token:c?.symbol}),...x}),V.default.createElement(Bt,{walletId:a,address:s,visible:T,closeCallback:_,coinId:e,txId:o,receiveOnly:y}))},Dt=({className:o,buttonGroup:e,children:a,onAction:s})=>V.default.createElement(p.FlexBox,{className:(0,Ot.default)(Xe["action-buttons"],o)},(e||[])?.map((i,l)=>i?i?.children?i?.children:i?.actionType===de.FILL_UP?V.default.createElement(ir,{...i,key:l}):V.default.createElement(Gt,{...i,key:l,onCallback:s}):null),a);Dt.ACTION_TYPE=de;var fl=Dt;export{yt as a,En as b,gt as c,Bt as d,fl as e};

window.inOKXExtension = true;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=chunk-7ODXCTBK.js.map
