import{a as mt,c as lt,g as pt}from"./chunk-GMM7DPS5.js";import{a as ct,b as dt,d as ft,e as _t}from"./chunk-WUTQBPLS.js";import{m as to,o as it,q as at,r as st}from"./chunk-BJANYOX5.js";import"./chunk-UYALNF4Q.js";import"./chunk-JPV5PNQX.js";import{a as ut}from"./chunk-TQIDOAVN.js";import"./chunk-BOWCSZLW.js";import"./chunk-4FZQLD6G.js";import"./chunk-LHVA7Q62.js";import{a as rt}from"./chunk-PZENYLA6.js";import"./chunk-LHNVUV3G.js";import{a as nt}from"./chunk-R77Z6U7Q.js";import"./chunk-DQUBHXFU.js";import{b as et}from"./chunk-PCZ7TQOH.js";import{a as Xo}from"./chunk-OXTQMA4W.js";import"./chunk-53Z372L4.js";import{h as W,t as tt}from"./chunk-EHDEZCO2.js";import"./chunk-TFCBP6UV.js";import{d as Ro,e as ot}from"./chunk-FORV77D5.js";import{a as Ko,b as Qo}from"./chunk-QIJYKINJ.js";import{a as Jo}from"./chunk-D4V7ONZY.js";import"./chunk-W327NRHO.js";import"./chunk-U3CLRNWK.js";import"./chunk-M4STRGDO.js";import"./chunk-GYUX3JJ3.js";import"./chunk-H43TVLNI.js";import"./chunk-SG4LXTVB.js";import"./chunk-3EYFKVOU.js";import"./chunk-QUUI62AZ.js";import{a as $o}from"./chunk-SIKYZQW4.js";import"./chunk-MCRNCTJS.js";import{d as F,e as fo,g as oo}from"./chunk-YZAK46Y6.js";import"./chunk-VX7CI7XT.js";import"./chunk-D6HSNWGS.js";import{e as b}from"./chunk-7ODXCTBK.js";import"./chunk-GZMWLE4V.js";import{b as qo}from"./chunk-C54I6GL3.js";import"./chunk-ZJICRI36.js";import"./chunk-BIBDTDJA.js";import"./chunk-ADIQBHVU.js";import"./chunk-TPVT7ZCY.js";import"./chunk-A6HNAUBV.js";import{g as jo,o as Zo}from"./chunk-6GFVKSAR.js";import"./chunk-JVLSBRR5.js";import"./chunk-5IXTSGAM.js";import"./chunk-OR2KMY5L.js";import{c as Vo}from"./chunk-FFJ36R7T.js";import"./chunk-NVCWAHOV.js";import"./chunk-RFEJLMRV.js";import"./chunk-UIABO6UG.js";import"./chunk-KJFAD5C4.js";import"./chunk-BFVA6OLJ.js";import"./chunk-ON3J2WQV.js";import"./chunk-RC3QMLDN.js";import"./chunk-JINEVGIZ.js";import"./chunk-SRU2IM3A.js";import"./chunk-46NSFYB3.js";import"./chunk-FFQESTX4.js";import"./chunk-OCZAVPFZ.js";import"./chunk-P6SDUFQ6.js";import"./chunk-5TNZ4MQV.js";import"./chunk-6YBNTFOQ.js";import"./chunk-KKTPGZSO.js";import"./chunk-ESKOSV75.js";import"./chunk-ZDQ5EBGN.js";import"./chunk-2KEW2T4M.js";import"./chunk-R7VTXTCL.js";import"./chunk-LBYCQPAD.js";import"./chunk-IGQY7C6Y.js";import"./chunk-OMKW26U3.js";import"./chunk-3P5YDD2R.js";import"./chunk-CWTKVHHS.js";import"./chunk-PRHPRTXY.js";import"./chunk-IGCT3RWS.js";import"./chunk-Y2PED5BF.js";import"./chunk-RUSRHRGO.js";import{b as Uo}from"./chunk-IZ5XPPXG.js";import"./chunk-6PN4BR3D.js";import"./chunk-EWK7ZFVN.js";import{a as O,b as Oo}from"./chunk-A23SHFFL.js";import"./chunk-VZ3BFZKL.js";import"./chunk-T6Z2C3RK.js";import"./chunk-R2QYIBE7.js";import"./chunk-KT53NMHD.js";import"./chunk-64STH2HN.js";import{c as Ho,d as X,g as Wo}from"./chunk-EKQH7XTV.js";import"./chunk-R2QKPEWB.js";import"./chunk-RMA2FZOE.js";import"./chunk-KRHB66KZ.js";import{f as R}from"./chunk-4RHFH7IF.js";import"./chunk-LPTRVNVL.js";import"./chunk-PH2A2GR3.js";import"./chunk-2LLM6N6U.js";import"./chunk-LF2PURXZ.js";import"./chunk-JEZIPKDY.js";import"./chunk-SR2BDP3A.js";import"./chunk-CFT6B56M.js";import"./chunk-WK32FAZW.js";import"./chunk-WMUTUJYX.js";import"./chunk-B23OWGFX.js";import"./chunk-OSWXWF4A.js";import"./chunk-Q7FJER56.js";import"./chunk-RBTIRMSE.js";import"./chunk-7GZ2ZCGI.js";import{p as zo}from"./chunk-WTP3OIOS.js";import"./chunk-D66ZH3O3.js";import"./chunk-X764QIVO.js";import"./chunk-HISWVX7W.js";import{a as Yo}from"./chunk-PYJPOVV7.js";import"./chunk-AO6MUSOH.js";import{a as Q}from"./chunk-I435LZHT.js";import{x as $}from"./chunk-SJIW4WAV.js";import"./chunk-SLDECH2O.js";import{a as J,o as K}from"./chunk-5JJQQHKZ.js";import{a as Go,h as Mo}from"./chunk-URG4MCPH.js";import{Ka as Po,y as Y}from"./chunk-ZPOCIBPN.js";import{b as q}from"./chunk-CA5MYYD6.js";import"./chunk-RZ7GFYMN.js";import{a as Zt}from"./chunk-IOCZ22XI.js";import{k as uo,o as Vt}from"./chunk-EJY3MW2I.js";import"./chunk-3VRAVMMN.js";import"./chunk-YJ45QIWT.js";import"./chunk-WR62TYUO.js";import"./chunk-2G2AXMFT.js";import"./chunk-XGFQCNHX.js";import"./chunk-7JF42X5G.js";import{b as Do}from"./chunk-4JZ3HIS7.js";import{s as Fo,v as H}from"./chunk-JLA5HXVC.js";import"./chunk-I4WIGQLD.js";import"./chunk-ZNGQ6IUR.js";import"./chunk-JERFAOJH.js";import"./chunk-JXZFOFB5.js";import"./chunk-LYNLETTP.js";import"./chunk-FQ4XEVKF.js";import{c as z}from"./chunk-VMYDP774.js";import"./chunk-A7LNVEYU.js";import"./chunk-2YWUVAR3.js";import"./chunk-VA2HGDZT.js";import"./chunk-AKPDCNMH.js";import{Fb as Bo,Kb as jt,Qa as Z,Sa as V,Ta as Eo,Va as bo,Xa as po,Ya as So,_a as No,db as Lo,la as Wt,m as j,o as vo,pb as co}from"./chunk-M54COW6Q.js";import"./chunk-PWWHYQAY.js";import{F as Co,H as Io,b as U,o as wo,q as lo,r as yo}from"./chunk-RIJWHGTU.js";import{I as B,l as xo,v as r}from"./chunk-K4MPEKC5.js";import"./chunk-X6USBUO5.js";import"./chunk-674MHQJQ.js";import{L as ko,X as v,c as Ht}from"./chunk-XIGC6FD5.js";import{a as E}from"./chunk-CXUPEGDW.js";import"./chunk-QAWZYDPQ.js";import"./chunk-PYTKRRY4.js";import"./chunk-363VDWOO.js";import"./chunk-7B5WANGL.js";import"./chunk-4P4FGPYZ.js";import"./chunk-Y47SQ3XQ.js";import"./chunk-YGNOWOE7.js";import"./chunk-N4GKTC7Y.js";import"./chunk-2BD64J7Y.js";import"./chunk-RYJHESAH.js";import"./chunk-DOQ5NSSP.js";import"./chunk-VULQOB2N.js";import{f as c,m as e,o as n}from"./chunk-ICCOEXX5.js";e();n();var S=c(E()),ro=c(Zt()),io=c(Y());var ho=c(j());e();n();var no=c(E());e();n();var l=c(E());B();co();var It=c(Y());e();n();var ht=c(E());var gt=c(Y());B();var qt=({chainGasLoadFailed:o,isSufficientBalance:t,transaction:u,actions:m,modifiedDataError:i,walletInfo:a,unapprovedTx:d})=>{let p=(0,gt.useSelector)(R),{chain:s,nonce:f,loading:_,gas:h}=u,{sign:C,cancel:x}=m,{chainGasLoading:y}=h,I=(0,ht.useCallback)(async()=>{await x()},[x]),k={actionType:b.ACTION_TYPE.CANCEL,onClick:I},g=async()=>{try{if(!await qo({walletId:a?.walletId,callback:x}))return;zo({chain_id:parseInt(s.chainId,16),wallet_address:d.from})}catch(M){console.error(M)}C(a?.walletId)},G=()=>{globalThis.open(p.faucetUrl)},L={disabled:y||o||!t&&!p.faucetUrl||f.pending||_.sign||_.token||i,actionType:b.ACTION_TYPE.CONFIRM,onClick:g};return!t&&p.faucetUrl&&(L.actionType=b.ACTION_TYPE.FILL_UP,L.onClick=G,L.btnText=r("wallet_extension_transfer_btn_via_faucet")),[k,L]},Tt=qt;e();n();B();var At=c(j());var $t=({chainGasLoadFailed:o,modifiedDataError:t,isSufficientBalance:u,isRevokeTx:m,transaction:i,loading:a})=>{let{auth:d,chain:p}=i,s=W(d.name||H),f=W(d.symbol||H),_=()=>t?{}:null,h=()=>u?null:{type:U.TYPE.warn,message:r("wallet_extension_popup_insufficient_network_fee",{token:p.symbol})},C=()=>o?{type:oo.TIP_TYPE.FEE_ERROR}:null,x=()=>m?{type:U.TYPE.info,message:r("extension_revoke_approval_alert_evoke_authorization",{contract:s,asset:f})}:null,y=()=>X(d.customApproveAmount)?{type:U.TYPE.warn,message:r("wallet_extension_popup_unlimited_transfer",{contract:s,asset:f})}:(0,At.gt)(d.customApproveAmount,0)?{type:U.TYPE.warn,message:r("extension_approve_alert_authorized_tips",{contract:s,asset:f})}:null;if(a)return null;let I=[_,h,x,y,C];for(let k=0;k<I.length;k++){let g=I[k],G=g();if(G)return G}return null},xt=$t;e();n();var P=c(E());var _o=c(Ht());co();var kt=c(j());B();e();n();var D={RpcEvmSendEditNonce:"_RpcEvmSendEditNonce_1jypd_1",rpcEvmSendEditNonce:"_RpcEvmSendEditNonce_1jypd_1",content:"_content_1jypd_1",inner:"_inner_1jypd_5","rpc-evm-send-edit-nonce__warning-input":"_rpc-evm-send-edit-nonce__warning-input_1jypd_5",rpcEvmSendEditNonceWarningInput:"_rpc-evm-send-edit-nonce__warning-input_1jypd_5",warningText:"_warningText_1jypd_9",icon:"_icon_1jypd_13"};function Jt({nonce:o,suggestedNonce:t,setNonce:u}){let m=a=>{u(a)},i;return o&&(po(o,t)?i=r("developer_mode_send_tooltip_higher",{num:t}):bo(o,t)&&(i=r("developer_mode_send_tooltip_lower",{num:t}))),P.default.createElement(rt.Row,{className:D.RpcEvmSendEditNonce,noMargin:!0,noPadding:!0},P.default.createElement("div",{className:D.content},P.default.createElement("div",{className:D.inner},P.default.createElement(lo.Number,{innerClassName:(0,_o.default)({"rpc-evm-send-edit-nonce__warning-input":!!i}),withOperation:!0,alwaysOperation:!0,enableMinus:!1,title:r("developer_mode_send_maintitle_nonce"),placeholder:`${(0,kt.isNil)(t)?"":xo.thousandFormat(t)}`,size:lo.SIZE.xl,value:o,onAdd:()=>!o&&t!==null?(m(V(t,1)),!1):!0,onSub:()=>!o&&po(t,0)?(m(Eo(t-1)),!1):!0,onChange:m})),i&&P.default.createElement("div",{className:D.warningText},P.default.createElement(ko,{className:(0,_o.default)(D.icon,"okx-wallet-plugin-warning-circle")}),i)))}var wt=Jt;e();n();var w=c(E());B();jt();co();e();n();var A=c(E());B();e();n();var N={AuthorizationToken:"_AuthorizationToken_g68hx_1",authorizationToken:"_AuthorizationToken_g68hx_1",title:"_title_g68hx_1",content:"_content_g68hx_4",unlimited_text:"_unlimited_text_g68hx_13",unlimitedText:"_unlimited_text_g68hx_13",balance:"_balance_g68hx_17",amount:"_amount_g68hx_22",checkAll:"_checkAll_g68hx_26",checkAll__text:"_checkAll__text_g68hx_30",checkAllText:"_checkAll__text_g68hx_30",footerActions:"_footerActions_g68hx_33"};var Kt=({onClose:o,onConfirm:t,approveToken:u})=>{let{symbol:m,decimals:i,customApproveAmount:a}=u,d=W(m,10),p=X(a),[s,f]=(0,A.useState)(!1),[_,h]=(0,A.useState)(p?"0":a),C=g=>{h(g)},[x,{set:y}]=K(!1),I=(0,A.useMemo)(()=>et(s,_),[s,_]),k=J(async()=>{try{y(!0),await t?.(s?Ho:_),o?.()}catch(g){console.log(g)}finally{y(!1)}});return A.default.createElement(z.FlexBox,{className:N.AuthorizationToken,direction:z.DIRECTION.vertical,align:z.ALIGN.center},A.default.createElement($.Text,{strong:700,className:N.title},r("wallet_contract_interaction_approval_permission_authorized_amount")),A.default.createElement(z.Box,{className:N.content},s?A.default.createElement($.Text,{strong:500,size:$.SIZE.xl,className:N.unlimited_text},r("wallet_extension_transfer_title_unlimited_amount",{token:d})):A.default.createElement(Vo,{symbol:d,autoSize:Wo,placeholder:"0",decimals:i||0,value:_,onChange:C,style:{fontWeight:500,height:"48px"}})),A.default.createElement(yo,{className:N.checkAll,checked:s,textClass:N.checkAll__text,onChange:({target:{checked:g}})=>{f(g)}},r("wallet_extension_transfer_dialog_checkbox_set_to_unlimited")),A.default.createElement(Q.FooterActions,{affixStyle:{position:"none"},placeholder:!1,className:N.footerActions},A.default.createElement(v,{loading:x,disabled:I,category:v.CATEGORY.fill,type:v.TYPE.primary,size:v.SIZE.lg,onClick:k},r("commonall_filter_btn_save"))))},yt=Kt;e();n();var eo={edit_btn:"_edit_btn_rw6lw_1",editBtn:"_edit_btn_rw6lw_1",authorization_token_dialog:"_authorization_token_dialog_rw6lw_5",authorizationTokenDialog:"_authorization_token_dialog_rw6lw_5",authorization_token_dialog__content:"_authorization_token_dialog__content_rw6lw_5",authorizationTokenDialogContent:"_authorization_token_dialog__content_rw6lw_5"};var Qt=({onUpdateAuthAmount:o,dappInfo:t,isOffline:u,approveToken:m})=>{let{isApprove:i,isRevoke:a,address:d,customApproveAmount:p=0,symbol:s=H,decimals:f=0,icon:_=Fo}=m,h=(0,w.useMemo)(()=>{let k=a?q.CANCEL_AUTHORIZATION:q.AUTHORIZATION,g=Bo(Do(Z(p,No.pow(10,f))));return{approvalType:k,asset:{symbol:s,decimals:f,address:d,imageUrl:_},approvalRaw:g}},[s,f,d,p,a,_]),[C,{set:x}]=K(!1),y=J(()=>{x(!1)}),I=()=>{x(!0)};return u?w.default.createElement(ot,null):i?w.default.createElement(w.default.Fragment,null,w.default.createElement(tt,{approveInfo:h,editBtnSlot:!a&&w.default.createElement(v,{size:v.SIZE.xs,type:v.TYPE.primary,category:v.CATEGORY.outline,className:eo.edit_btn,onClick:I},r("wallet_extension_transfer_text_edit"))}),w.default.createElement(wo,{className:eo.authorization_token_dialog,alignBottom:!0,noContentPadding:!0,onClose:y,visible:C,windowClass:eo.authorization_token_dialog__content},w.default.createElement(yt,{txType:q.AUTHORIZATION,onConfirm:o,approveToken:m,onClose:y}))):w.default.createElement(F,null,w.default.createElement(Ro,{...t}))},Ct=Qt;var vt=({unapprovedTx:o})=>{let[t,u]=(0,l.useState)(""),[m,i]=(0,l.useState)(!1),a=Qo(t),d=(0,It.useSelector)(R),p=ct(o.origin,o.from),[s,f]=it({...o,walletId:p?.walletId}),{title:_,auth:h,meta:C,nonce:x,gas:y,loading:I,data:k}=s,{setNonce:g,setAuthAmount:G}=f,{chainGasInfo:go,customGasInfo:L,chainGasLoading:M,chainGasLoadFailed:ao,stopPollingGasPrice:Gt,updateCustomGasInfo:Mt,chainGasLimitLoadFailed:Ot}=y,so=jo(),To=lt(L);nt(),mt(o.from);let Ao=So(so?.balance,V(To,Lo(o.value||0))),Dt=xt({chainGasLoadFailed:ao,isSufficientBalance:Ao,isRevokeTx:h.isRevoke,modifiedDataError:a,transaction:s,loading:M}),Ut=Tt({chainGasLoadFailed:ao,isSufficientBalance:Ao,transaction:s,actions:f,modifiedDataError:a,walletInfo:p,unapprovedTx:o}),Yt=mo=>{Mt(mo),i(!1)};return l.default.createElement(z.Container,null,l.default.createElement(Yo,{title:_,closeable:!1,backable:!1}),l.default.createElement(Ct,{confirmBuryPointFn:()=>{},onUpdateAuthAmount:mo=>{G(mo)},dappInfo:C.originInfo,isOffline:I.token,approveToken:h}),l.default.createElement(F,null,l.default.createElement($o,{onClick:()=>{i(!0)},injectCoin:so,loading:M,estimateFailed:ao,networkFee:M?void 0:Z(To,10**so?.decimals)})),l.default.createElement(F,null,l.default.createElement(fo,{title:r("wallet_extension_network_address_title_walletused"),address:p.address,walletId:p.walletId}),!!o.to&&l.default.createElement(fo,{title:r("wallet_extension_popup_text_interact_with"),address:o.to})),l.default.createElement(wt,{nonce:x.custom,suggestedNonce:x.suggested,setNonce:g}),k?l.default.createElement(F,{bordered:!1},l.default.createElement(Xo,{data:k,copyable:{hideDesc:!0}})):l.default.createElement(F,{bordered:!1},l.default.createElement(Ko,{value:t,error:a,onChange:u})),l.default.createElement(Q,{placeholder:!0,offsetBottom:0,borderTop:!0},!a&&l.default.createElement(oo,{...Dt}),l.default.createElement(b,{buttonGroup:Ut})),m?l.default.createElement(pt,{onBack:()=>{i(!1)},rpcInfo:d,chainGasInfo:go,customGasInfo:L,updateCustomGasInfo:Yt,stopPollingGasPrice:Gt,chainGasLimitLoadFailed:Ot}):null)};var Et=({unapprovedTxList:o})=>{let t=o[o.length-1];return no.default.createElement(no.default.Fragment,null,no.default.createElement(vt,{unapprovedTx:t}))};e();n();var Nt=c(E());e();n();B();var bt=c(Y());Vt();var Xt=o=>{let t=(0,bt.useDispatch)(),{address:u}=o,m=dt(),i=Jo(),a={actionType:b.ACTION_TYPE.CANCEL,btnText:r("wallet_dapp_connection_btn_reject"),async onClick(){i({all_confirmation:"cancel",trade:"add_token"}),await m(u,!1),await uo(t)}},d=to(),{url:p,chainId:s}=d,f=Zo(p),_={actionType:b.ACTION_TYPE.CONFIRM,async onClick(){try{i({all_confirmation:"confirm",trade:"add_token"}),await f(s,o.address),await m(u,!0),await uo(t)}catch{Io.error(r("wallet_extenshion_toast_add_failed"))}}};return[a,_]},St=Xt;var Rt=({unapproved:o})=>{let t=to(),u=st(o),m=St(u);return Nt.default.createElement(ut,{token:u,provider:t,buttonGroup:m})},Lt=Rt;e();n();var Bt=c(E()),zt=c(j()),Ft=c(Y());Wt();var Pt=()=>{let o=(0,Ft.useSelector)(Po),t=(0,zt.last)(o);return Bt.default.createElement(ft,{unapproved:{...t,localType:vo}})};e();n();var Fr=()=>{let{unapprovedTxList:o,unapprovedTxCount:t,unapprovedStList:u,unapprovedStCount:m,unapprovedSnList:i,unapprovedSnCount:a,unapprovedPermissionsRequestId:d,unapprovedRequestCount:p,unapprovedPermissionCount:s}=at(),f=(0,io.useDispatch)(),_=(0,ro.useHistory)(),h=(0,io.useSelector)(Oo);switch((0,S.useEffect)(()=>{(async()=>{p===0&&(await f(Uo()),_.push(Go))})()},[p]),!0){case(h===O.connect&&s>0):return S.default.createElement(ro.Redirect,{to:`${Mo}/${d}`});case h===O.msg:return S.default.createElement(Pt,null);case(h===O.addToken&&m>0):return S.default.createElement(Lt,{unapproved:(0,ho.last)(u)});case(h===O.addChain&&a>0):return S.default.createElement(_t,{unapproved:(0,ho.last)(i)});case(h===O.transaction&&t>0):return S.default.createElement(Et,{unapprovedTxList:o});default:return S.default.createElement(Co,{delayTime:5e3})}};export{Fr as default};

window.inOKXExtension = true;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=RpcMode-TRW4Z77U.js.map
