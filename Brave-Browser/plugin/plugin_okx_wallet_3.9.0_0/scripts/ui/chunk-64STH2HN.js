import{Pa as m,Xa as d,jb as a}from"./chunk-ZPOCIBPN.js";import{m as P}from"./chunk-M54COW6Q.js";import{f as I,m as s,o as i}from"./chunk-ICCOEXX5.js";s();i();var f=I(P());s();i();var p={exposedAccounts:"exposedAccounts",primaryAccountOnly:"primaryAccountOnly"};function l(e){return e.metamask.domains||{}}function g(e){return e.metamask.domainMetadata||{}}function E(e){let t=l(e);return Object.keys(t).reduce((n,r)=>{let o=x(A(t[r]));return o.length>0&&(n[r]=o),n},{})}function _(e){let t=m(e),n=l(e),r=g(e),o=[];return(0,f.forOwn)(n,(c,u)=>{if(!b(c).includes(t))return;let{extensionId:y,name:k,icon:v,host:C,isOkx:O}=r[u]||{};o.push({extensionId:y,origin:u,isOkx:O,name:k,icon:v,host:C})}),o}function b(e){return x(A(e))}function A(e={}){return Array.isArray(e.permissions)?e.permissions.find(t=>t.parentCapability==="eth_accounts"):{}}function x(e){let t=h(e);return t&&Array.isArray(t.value)?t.value:[]}function h(e={}){return Array.isArray(e.caveats)&&e.caveats.find(t=>t.name===p.exposedAccounts)}function j(e){let{permissionsHistory:t={}}=e.metamask;return Object.keys(t).reduce((n,r)=>{let o=JSON.parse(JSON.stringify(t[r].eth_accounts));return{...n,[r]:o}},{})}function B(e){let t=g(e);return Object.values(t).reduce((n,{host:r})=>(r&&(n[r]?n[r]+=1:n[r]=1),n),{})}function D(e){return(e.metamask.permissionsRequests||[]).map(n=>({...n,time:e.metamask.pendingApprovals[n.metadata.id]?.time||Date.now(),providerType:e.metamask.pendingApprovals[n.metadata.id]?.requestData?.providerType,method:e.metamask.pendingApprovals[n.metadata.id]?.requestData?.method,exts:e.metamask.pendingApprovals[n.metadata.id]?.requestData?.exts}))}function q(e){let t=D(e);return t&&t[0]?t[t.length-1]:null}function W(e){let t=q(e);return t&&t.metadata?t.metadata.id:null}function H(e){let{domainMetadata:t={}}=e.metamask,n=a(e);return{...t[n],origin:n}}function J(e){let{domains:t={}}=e.metamask,n=a(e);return Boolean(t[n])}function V(e){let{domains:t={}}=e.metamask,n=a(e);if(t[n]){let r=t[n].permissions.filter(o=>o.parentCapability==="eth_accounts");if(r.length){let o=r[0].caveats.filter(c=>c.name==="exposedAccounts");if(o.length)return o[0].value}}return[]}function $(e){let t=d(e);return`${t.keyringName} - ${t.walletName}`}export{g as a,E as b,_ as c,j as d,B as e,D as f,q as g,W as h,H as i,J as j,V as k,$ as l};

window.inOKXExtension = true;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=chunk-64STH2HN.js.map
