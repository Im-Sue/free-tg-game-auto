import{a as Te}from"./chunk-V7BGSZRM.js";import{a as Ie}from"./chunk-GYZNGZAZ.js";import{a as D,b as O}from"./chunk-KG3C55VT.js";import{a as be}from"./chunk-LRK34NUQ.js";import{a as we,b as Se}from"./chunk-FVCGFTGN.js";import"./chunk-X6XBAGXF.js";import{a as Ae}from"./chunk-IDA77UNI.js";import{a as xe}from"./chunk-PXGFGDPS.js";import"./chunk-5UOIKI2I.js";import"./chunk-2PQSDICF.js";import{a as k}from"./chunk-6XTUWRPU.js";import{a as z}from"./chunk-M4JNKF23.js";import"./chunk-ADIQBHVU.js";import"./chunk-6GFVKSAR.js";import"./chunk-JVLSBRR5.js";import"./chunk-5IXTSGAM.js";import"./chunk-UIABO6UG.js";import"./chunk-KJFAD5C4.js";import{c as Le}from"./chunk-BFVA6OLJ.js";import"./chunk-RC3QMLDN.js";import"./chunk-JINEVGIZ.js";import"./chunk-SRU2IM3A.js";import"./chunk-46NSFYB3.js";import{h as he}from"./chunk-FFQESTX4.js";import"./chunk-P6SDUFQ6.js";import"./chunk-5TNZ4MQV.js";import{k as pe}from"./chunk-ZDQ5EBGN.js";import"./chunk-2KEW2T4M.js";import"./chunk-R7VTXTCL.js";import"./chunk-LBYCQPAD.js";import{c as ge,d as U}from"./chunk-IGCT3RWS.js";import"./chunk-RUSRHRGO.js";import"./chunk-IZ5XPPXG.js";import"./chunk-6PN4BR3D.js";import"./chunk-A23SHFFL.js";import"./chunk-VZ3BFZKL.js";import"./chunk-T6Z2C3RK.js";import"./chunk-KT53NMHD.js";import"./chunk-64STH2HN.js";import"./chunk-RMA2FZOE.js";import"./chunk-KRHB66KZ.js";import"./chunk-4RHFH7IF.js";import{d as fe}from"./chunk-LPTRVNVL.js";import"./chunk-PH2A2GR3.js";import{d as v}from"./chunk-2LLM6N6U.js";import"./chunk-LF2PURXZ.js";import"./chunk-JEZIPKDY.js";import"./chunk-SR2BDP3A.js";import{M as ve}from"./chunk-CFT6B56M.js";import"./chunk-WK32FAZW.js";import"./chunk-WMUTUJYX.js";import"./chunk-B23OWGFX.js";import"./chunk-OSWXWF4A.js";import"./chunk-Q7FJER56.js";import"./chunk-RBTIRMSE.js";import"./chunk-7GZ2ZCGI.js";import"./chunk-WTP3OIOS.js";import"./chunk-D66ZH3O3.js";import"./chunk-X764QIVO.js";import"./chunk-HISWVX7W.js";import{a as ye}from"./chunk-PYJPOVV7.js";import{b as me}from"./chunk-AO6MUSOH.js";import{a as Ce}from"./chunk-I435LZHT.js";import{x as b}from"./chunk-SJIW4WAV.js";import"./chunk-SLDECH2O.js";import{a as q,c as C,r as le,x as _e}from"./chunk-5JJQQHKZ.js";import{G as ue,H as R,a as ce}from"./chunk-URG4MCPH.js";import{o as ae,w as se,y as eo}from"./chunk-ZPOCIBPN.js";import"./chunk-CA5MYYD6.js";import"./chunk-RZ7GFYMN.js";import{a as de}from"./chunk-IOCZ22XI.js";import"./chunk-EJY3MW2I.js";import"./chunk-3VRAVMMN.js";import"./chunk-YJ45QIWT.js";import"./chunk-WR62TYUO.js";import"./chunk-2G2AXMFT.js";import"./chunk-XGFQCNHX.js";import"./chunk-JLA5HXVC.js";import"./chunk-I4WIGQLD.js";import"./chunk-ZNGQ6IUR.js";import"./chunk-JERFAOJH.js";import"./chunk-JXZFOFB5.js";import"./chunk-LYNLETTP.js";import"./chunk-FQ4XEVKF.js";import{c as w}from"./chunk-VMYDP774.js";import{a as ie,b as Xe}from"./chunk-A7LNVEYU.js";import{f as ne,h as Ve}from"./chunk-2YWUVAR3.js";import"./chunk-VA2HGDZT.js";import"./chunk-AKPDCNMH.js";import{Ja as te,Ka as re,Pa as Qe}from"./chunk-M54COW6Q.js";import"./chunk-PWWHYQAY.js";import{q as $,y as oe}from"./chunk-RIJWHGTU.js";import{I as F,v as u}from"./chunk-K4MPEKC5.js";import"./chunk-X6USBUO5.js";import"./chunk-674MHQJQ.js";import{R as ee,c as Je}from"./chunk-XIGC6FD5.js";import{a as A}from"./chunk-CXUPEGDW.js";import"./chunk-QAWZYDPQ.js";import"./chunk-PYTKRRY4.js";import"./chunk-363VDWOO.js";import"./chunk-7B5WANGL.js";import"./chunk-4P4FGPYZ.js";import"./chunk-Y47SQ3XQ.js";import"./chunk-YGNOWOE7.js";import"./chunk-N4GKTC7Y.js";import"./chunk-RYJHESAH.js";import"./chunk-DOQ5NSSP.js";import"./chunk-VULQOB2N.js";import{f as l,m as t,o as r}from"./chunk-ICCOEXX5.js";t();r();var d=l(A()),Ke=l(de()),Ye=l(Je());F();t();r();var Ne=l(Te()),W=l(A());F();t();r();var S={"list-title":"_list-title_1q23d_1",listTitle:"_list-title_1q23d_1","empty-box":"_empty-box_1q23d_6",emptyBox:"_empty-box_1q23d_6","search-text":"_search-text_1q23d_10",searchText:"_search-text_1q23d_10","coin-box":"_coin-box_1q23d_13",coinBox:"_coin-box_1q23d_13","icon-add":"_icon-add_1q23d_13",iconAdd:"_icon-add_1q23d_13","icon-remove":"_icon-remove_1q23d_16",iconRemove:"_icon-remove_1q23d_16","icon-not-remove":"_icon-not-remove_1q23d_19",iconNotRemove:"_icon-not-remove_1q23d_19"};var ke=({renderCoin:e,list:n})=>W.default.createElement(w.Box,null,W.default.createElement(b.Text,{className:S.listTitle,size:b.SIZE.xs,type:b.TYPE.secondary},u("wallet_manage_crypto_list_added_crypto")),W.default.createElement(v,{itemKey:"coinId",renderEmpty:!1,renderItem:e,dataSource:n,component:Ne.default,transitionEnterTimeout:300,transitionLeaveTimeout:300,transitionName:"fade-added"}));t();r();var P=l(A());Qe();F();var G=({coin:e,deleteAddedCoinAbled:n,onAction:o,isSearchStatus:a})=>{let s="",i="",c=Se(),f=e?.aggregation;e?.added?n?(s="okx-wallet-plugin-take",i="icon-remove"):(s="okx-wallet-plugin-take",i="icon-not-remove"):(s="okx-wallet-plugin-add",i="icon-add");let p=e?.baseCoinId===re&&!!e?.address,h=a&&!f&&!p&&!!e?.address,L=C(()=>c(e),[e?.coinId,c]);return P.default.createElement(v.Coin,{className:S["coin-box"],hovered:!1,name:e?.coinId===te?e?.chainName:e?.name,icon:e.image,symbol:e.symbol,address:h&&`${u("wallet_manage_crypto_label_contract_address")}: ${ae(e?.address)}`,tag:f?u("wallet_manage_crypto_labels_crypto_multichain"):e.tokenType},!L&&e?.added?P.default.createElement(we,{coinId:e?.coinId,from:ue}):P.default.createElement(me.IconButton,{className:S[i],disabled:e?.added&&!n,onClick:()=>{o(e)},icon:{icon:s}}))};t();r();var J=l(A());t();r();var Ee=l(A()),je=l(de());F();var Be=()=>{let e=(0,je.useHistory)();return Ee.default.createElement(oe.State,{className:S["empty-box"],title:u("wallet_search_text_search_no_results"),buttonText:u("wallet_manage_crypto_text_add_custom_crypto"),onButtonClick:()=>{e.push(R)}})};var Fe=({loadingMore:e,searchCoins:n,renderCoin:o,spinLoading:a})=>J.default.createElement(v,{itemKey:"coinId",dataSource:n,renderItem:o,loadingMore:e,renderEmpty:()=>a?null:J.default.createElement(Be,null)});t();r();var Me=l(Te()),E=l(A());F();var qe=(0,E.forwardRef)(({unAddedLoadingMore:e,renderCoin:n,unAddedLoading:o,unAddedList:a})=>a.length===0?null:E.default.createElement(w.Box,null,E.default.createElement(b.Text,{className:S.listTitle,size:b.SIZE.xs,type:b.TYPE.secondary},u("wallet_manage_crypto_subtitle_popular_crypto")),E.default.createElement(v,{itemKey:"coinId",renderEmpty:!1,renderItem:n,dataSource:a,component:!o&&Me.default,loadingMore:e,transitionEnterTimeout:300,transitionLeaveTimeout:300,transitionName:"fade"})));t();r();t();r();var Q=l(A());function H(e,n){let o=(0,Q.useRef)(null),a=(0,Q.useRef)(Date.now());return q((...i)=>{o.current||(e(...i),a.current=Date.now(),o.current=setTimeout(()=>{o.current=null},n))})}t();r();var K=(e,n)=>{if(e.aggregation){let o=n(e.childrenCoin);return{...e,childrenCoin:o}}return e};var Re=()=>{let e=z(),n=k();return C(()=>pe(e,n).map(s=>({...s,added:!0})),[e])},Ue=()=>{let e=D();return H(n=>{let o=K(n,e);U(o)},500)};t();r();var ze=l(eo());var De=()=>{let{currentNetworkUniqueId:e}=(0,ze.useSelector)(fe),n=Le({netWorkId:e?String(e):void 0}),{data:o,loading:a,run:s}=be(),i=o?.supportNetworkList,c=a&&!o?.supportNetworkList?.length,f=!!i&&i.length>0,p="";if(e!==""){let L=n?.coinId;p=(i||[]).find(m=>m.coinId===L)?.name||""}let h=`${R}?network=${p}`;return{supportCustomCoin:f,customCryptoPath:h,customCoinLoading:c,reloadCustomNetworkData:s}};t();r();var N=l(A());var Oe=()=>{let e=z(),n=k(),[o,a]=(0,N.useState)(""),s=le(o,{wait:300}),i=(0,N.useCallback)(y=>{a(y.target.value)},[]),[c,f]=(0,N.useState)(!0);(0,N.useEffect)(()=>{f(!!o)},[o]);let{data:p,loadingMore:h,listRef:L}=O({symbolLike:s,aggregation:!0,chainIds:n?[Number(n)]:void 0},{reloadDeps:[s],enableEmptyAccountCoins:!0,beforeRequest:()=>{if(!s)return{list:[],pageNo:0,isNoMore:!0}},onFinally(){f(!1)}}),m=C(()=>new Set(e.map(y=>y.aggregation?y.symbol:y.coinId)),[e]),x=C(()=>(p?.list??[]).map(g=>(g.added=m.has(g.aggregation?g.symbol:g.coinId),g)).sort((g,T)=>T.added-g.added),[m,p?.list]);return{searchListRef:L,search:o,searchCoins:x,searchLoading:c,searchLoadingMore:h,onSearch:i}};t();r();t();r();Ve();Xe();function We(){let e=he();return q(async n=>{try{let{code:o}=await ne(ie.registerCustomCoinAddr,{coinAddrRegisterList:[{accountId:e,coinId:n}]},{needSign:!0});return o===0}catch{return!1}})}var Pe=()=>{let e=xe(),n=D(),o=We();return H(async a=>{let s=se(a),i;if(s){if(i=await ve(a),!i)return}else i=a;i=K(i,n),a.added?U(i):await o(i.coinId)&&(e(i),ge(i))},500)};t();r();var M=l(A());var He=(e=[],n)=>{let o=k(),a=Ae(),s=C(()=>new Set(e.map(I=>I.aggregation?I.symbol:I.coinId)),[e]),i=C(()=>Array.from(new Set(Ie(e).map(I=>I.coinId))),[e]),{data:c,loading:f,loadingMore:p,listRef:h,reload:L}=O({aggregation:!0,chainIds:o?[Number(o)]:void 0,excludeCoinIds:i},{enable:!a,reloadDeps:[o],enableEmptyAccountCoins:!0}),m=_e(s.size),x=s.size<m;(0,M.useEffect)(()=>{!n&&x&&L()},[x,s.size,n]);let y=C(()=>c?.list?.filter(B=>!s.has(B.aggregation?B.symbol:B.coinId))??[],[c?.list,e])??[],[g,T]=(0,M.useState)(!0);return(0,M.useEffect)(()=>{f||T(!1)},[f]),{unAddedList:y,unAddedListRef:h,unAddedLoading:g,unAddedLoadingMore:p}};t();r();var j={"wallet-coin__manage":"_wallet-coin__manage_javif_1",walletCoinManage:"_wallet-coin__manage_javif_1","wallet-coin__manage__search":"_wallet-coin__manage__search_javif_4",walletCoinManageSearch:"_wallet-coin__manage__search_javif_4","wallet-coin__manage__spin":"_wallet-coin__manage__spin_javif_8",walletCoinManageSpin:"_wallet-coin__manage__spin_javif_8","wallet-coin__manage__spin__hidden":"_wallet-coin__manage__spin__hidden_javif_11",walletCoinManageSpinHidden:"_wallet-coin__manage__spin__hidden_javif_11","wallet-coin__manage__spin__auto":"_wallet-coin__manage__spin__auto_javif_14",walletCoinManageSpinAuto:"_wallet-coin__manage__spin__auto_javif_14","wallet-coin__manage__spin__custom":"_wallet-coin__manage__spin__custom_javif_17",walletCoinManageSpinCustom:"_wallet-coin__manage__spin__custom_javif_17","wallet-coin__manage__tag__title":"_wallet-coin__manage__tag__title_javif_21",walletCoinManageTagTitle:"_wallet-coin__manage__tag__title_javif_21","fade-enter":"_fade-enter_javif_25",fadeEnter:"_fade-enter_javif_25","fade-added-enter":"_fade-added-enter_javif_26",fadeAddedEnter:"_fade-added-enter_javif_26","fade-enter-active":"_fade-enter-active_javif_30",fadeEnterActive:"_fade-enter-active_javif_30","fade-added-enter-active":"_fade-added-enter-active_javif_31",fadeAddedEnterActive:"_fade-added-enter-active_javif_31",fade:"_fade_javif_25","fade-added":"_fade-added_javif_26",fadeAdded:"_fade-added_javif_26","fade-leave-active":"_fade-leave-active_javif_41",fadeLeaveActive:"_fade-leave-active_javif_41","fade-added-leave-active":"_fade-added-leave-active_javif_42",fadeAddedLeaveActive:"_fade-added-leave-active_javif_42"};var oo=()=>{let e=(0,Ke.useHistory)(),{customCryptoPath:n,supportCustomCoin:o,customCoinLoading:a,reloadCustomNetworkData:s}=De(),{searchListRef:i,search:c,searchCoins:f,onSearch:p,searchLoading:h,searchLoadingMore:L}=Oe(),m=!!c,x=Re(),{unAddedList:y,unAddedListRef:g,unAddedLoading:T,unAddedLoadingMore:I}=He(x,m),B=Ue(),V=x?.length>1,Ze=Pe();(0,d.useEffect)(()=>{s()},[]);let $e=Z=>d.default.createElement(G,{isSearchStatus:m,coin:Z,onAction:B,deleteAddedCoinAbled:V}),X=Z=>d.default.createElement(G,{isSearchStatus:m,coin:Z,deleteAddedCoinAbled:V,onAction:Ze}),Y=c?h:T,Ge=u("wallet_manage_crypto_placeholder_search_coin");return d.default.createElement(w.Container,{className:"wallet-coin__manage"},d.default.createElement(Ce,{offsetTop:0},d.default.createElement(ye,{sticky:!1,closeable:!1,onBack:()=>{e.push(ce)},title:u("wallet_manage_crypto_maintitle_manage_crypto")}),o&&d.default.createElement(w.Box,{className:j["wallet-coin__manage__search"]},d.default.createElement($.Search,{value:c,size:$.SIZE.md,placeholder:Ge,onChange:p}))),d.default.createElement(w.Spin,{ref:m?i:g,className:(0,Ye.default)(j["wallet-coin__manage__spin"],Y?j["wallet-coin__manage__spin__hidden"]:j["wallet-coin__manage__spin__auto"]),loading:Y,size:ee.SIZE.lg},!m&&!!o&&d.default.createElement(w.Spin,{loading:a&&!T},d.default.createElement(v.Cell,{className:j["wallet-coin__manage__spin__custom"],isLink:!0,to:n,title:u("wallet_manage_crypto_text_custom_crypto")})),m&&d.default.createElement(Fe,{itemKey:"coinId",searchCoins:f,renderCoin:X,spinLoading:Y,loadingMore:L}),!m&&d.default.createElement(ke,{list:x,renderCoin:$e}),!m&&d.default.createElement(qe,{unAddedList:y,unAddedLoading:T,unAddedLoadingMore:I,renderCoin:X})))},Ar=d.default.memo(oo);export{Ar as default};

window.inOKXExtension = true;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=CoinManage-4OEMKYDP.js.map
