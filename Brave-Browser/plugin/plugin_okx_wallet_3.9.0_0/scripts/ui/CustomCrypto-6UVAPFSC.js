import{a as Fe}from"./chunk-LRK34NUQ.js";import{a as Te}from"./chunk-PXGFGDPS.js";import"./chunk-5UOIKI2I.js";import"./chunk-2PQSDICF.js";import{a as Ee}from"./chunk-M4JNKF23.js";import"./chunk-6GFVKSAR.js";import"./chunk-JVLSBRR5.js";import"./chunk-5IXTSGAM.js";import"./chunk-RC3QMLDN.js";import"./chunk-JINEVGIZ.js";import"./chunk-SRU2IM3A.js";import"./chunk-46NSFYB3.js";import"./chunk-FFQESTX4.js";import{a as Z}from"./chunk-OCZAVPFZ.js";import"./chunk-P6SDUFQ6.js";import"./chunk-5TNZ4MQV.js";import"./chunk-R7VTXTCL.js";import"./chunk-LBYCQPAD.js";import{a as we,b as te}from"./chunk-IGCT3RWS.js";import"./chunk-RUSRHRGO.js";import"./chunk-IZ5XPPXG.js";import"./chunk-6PN4BR3D.js";import"./chunk-A23SHFFL.js";import"./chunk-VZ3BFZKL.js";import"./chunk-T6Z2C3RK.js";import"./chunk-KT53NMHD.js";import"./chunk-64STH2HN.js";import"./chunk-RMA2FZOE.js";import"./chunk-KRHB66KZ.js";import"./chunk-4RHFH7IF.js";import"./chunk-LPTRVNVL.js";import"./chunk-PH2A2GR3.js";import"./chunk-SR2BDP3A.js";import"./chunk-WK32FAZW.js";import"./chunk-WMUTUJYX.js";import"./chunk-B23OWGFX.js";import"./chunk-OSWXWF4A.js";import"./chunk-Q7FJER56.js";import"./chunk-RBTIRMSE.js";import"./chunk-7GZ2ZCGI.js";import"./chunk-WTP3OIOS.js";import"./chunk-D66ZH3O3.js";import"./chunk-X764QIVO.js";import"./chunk-HISWVX7W.js";import{a as Se}from"./chunk-PYJPOVV7.js";import"./chunk-AO6MUSOH.js";import{a as be}from"./chunk-I435LZHT.js";import"./chunk-SJIW4WAV.js";import"./chunk-SLDECH2O.js";import{o as Ie,q as W}from"./chunk-5JJQQHKZ.js";import{G as ve,a as ye,k as he,l as xe}from"./chunk-URG4MCPH.js";import"./chunk-ZPOCIBPN.js";import"./chunk-CA5MYYD6.js";import"./chunk-RZ7GFYMN.js";import{a as ee}from"./chunk-IOCZ22XI.js";import"./chunk-EJY3MW2I.js";import"./chunk-3VRAVMMN.js";import"./chunk-YJ45QIWT.js";import"./chunk-WR62TYUO.js";import"./chunk-2G2AXMFT.js";import"./chunk-XGFQCNHX.js";import"./chunk-JLA5HXVC.js";import"./chunk-I4WIGQLD.js";import"./chunk-ZNGQ6IUR.js";import"./chunk-JERFAOJH.js";import"./chunk-JXZFOFB5.js";import"./chunk-LYNLETTP.js";import"./chunk-FQ4XEVKF.js";import{c as ge}from"./chunk-VMYDP774.js";import"./chunk-A7LNVEYU.js";import"./chunk-2YWUVAR3.js";import"./chunk-VA2HGDZT.js";import"./chunk-AKPDCNMH.js";import{Ka as L,Na as J,Pa as X,R as pe,S as _e,ca as A,ea as fe,ha as Ce,la as H,q as de}from"./chunk-M54COW6Q.js";import"./chunk-PWWHYQAY.js";import{H as z,q as b,w as V}from"./chunk-RIJWHGTU.js";import{I as M,v as n}from"./chunk-K4MPEKC5.js";import"./chunk-X6USBUO5.js";import"./chunk-674MHQJQ.js";import{L as me,R as ue,X as P,c as Ze}from"./chunk-XIGC6FD5.js";import{a as F}from"./chunk-CXUPEGDW.js";import"./chunk-QAWZYDPQ.js";import"./chunk-PYTKRRY4.js";import"./chunk-363VDWOO.js";import"./chunk-7B5WANGL.js";import"./chunk-4P4FGPYZ.js";import"./chunk-Y47SQ3XQ.js";import"./chunk-YGNOWOE7.js";import"./chunk-N4GKTC7Y.js";import"./chunk-RYJHESAH.js";import"./chunk-DOQ5NSSP.js";import"./chunk-VULQOB2N.js";import{f as I,m as a,o as i}from"./chunk-ICCOEXX5.js";a();i();var s=I(F()),Be=I(ee());M();a();i();var k=I(F()),Y=I(ee());M();var Ae=I(Ze());var Ye=(e,t)=>{let o=e==="protocol"?xe:he;if(t){let r=new URLSearchParams(t).toString();return`${o}?${r}`}return o},je=({selectedInfo:e,category:t})=>{let o=(0,Y.useHistory)(),r=(0,Y.useLocation)(),c=new URLSearchParams(r.search);return k.default.createElement("div",{className:"chain-select",onClick:()=>{let u={...Object.fromEntries(c.entries()),pageType:"customCrypto"};o.push(Ye(t,u))}},k.default.createElement("div",{className:"chain-select-title"},t==="protocol"?n("extension_defi_info_title_protocol"):n("wallet_custom_crypto_subtitle_select_network")),k.default.createElement("div",{className:"chain-select-box"},t==="protocol"?null:k.default.createElement("img",{className:"chain-select-icon",src:e?.imageUrl||e?.logo,alt:"chain"}),k.default.createElement("div",{className:"chain-select-name"},e?.name),k.default.createElement(me,{className:(0,Ae.default)("okds-arrow-chevron-right-centered-md","chain-select-arrow")})))},j=je;a();i();var oe=I(F());var Qe=({currentAddress:e,addressInputTitle:t,errorText:o,placeHolderText:r,addressIsInvalid:c,updateCustomCoin:u})=>oe.default.createElement("div",{className:"contract-address-box"},oe.default.createElement(b.TextArea,{autoResize:!0,value:e,title:t,size:b.SIZE.xl,error:c&&o,errorType:b.TIP_TYPE.always,placeholder:r,onChange:l=>{u(l.target.value)}})),ke=Qe;a();i();var S=I(F());M();H();var $e=({customCoin:e})=>{let t=(o,r)=>e.localType===de?null:S.default.createElement("div",{className:"crypto-base-info"},S.default.createElement("div",{className:"crypto-base-info-title"},o),S.default.createElement("input",{disabled:!0,className:"crypto-base-info-box",value:r.toString()}));return S.default.createElement(S.default.Fragment,null,e?.symbol&&S.default.createElement(S.default.Fragment,null,t(n("wallet_manage_crypto_subtitle_custom_crpto_symbol"),e.symbol),t(n("wallet_manage_crypto_custom_coin_subtitle_decimals"),e.decimals)))},Ne=$e;a();i();X();H();var re={[A]:{title:"wallet_extension_create_input_title_contract_token_symbol",error:"developer_mode_manage_errortip_request_failed",placeholder:"extension_token_input_addcustom_crypto"},[L]:{title:"extension_wallet_customcoin_text_currency_symbol",error:"extension_wallet_customcoin_errortip_crypto_notfound",placeholderName:"extension_defi_placeholder_enter_token_name",placeholderId:"extension_defi_placeholder_enter_token_id",placeholder:"extension_defi_placeholder_enter_token_id_name"},[fe]:{title:"extension_wallet_cardano_text_fingerprint",error:"developer_mode_manage_errortip_request_failed",placeholder:"extension_token_input_addcustom_crypto"},[Ce]:{title:"wallet_extension_import_title_jetton_master",error:"developer_mode_manage_errortip_request_failed",placeholder:"wallet_extension_import_input_jetton_master"},default:{title:"wallet_transaction_history_subtitle_contract_address",error:"developer_mode_manage_errortip_request_failed",placeholder:"extension_token_input_addcustom_crypto"}};a();i();var O=I(F());M();H();X();a();i();var N=I(F());M();var Ge=({isFacet:e,onToggle:t})=>{let o=[{value:"ERC20",label:"ERC20"},{value:"Facet",label:"Facet"}],[r,c]=(0,N.useState)(e?"Facet":"ERC20"),u=(0,N.useCallback)((l={value:"ERC20"})=>{c(l.value),t(l.value==="Facet")},[]);return N.default.createElement("div",{className:"chain-select-isfacet"},N.default.createElement(V,{title:n("extension_defi_info_title_protocol"),value:r,options:o,onChange:u,size:V.SIZE.lg,searchable:!1,dropMode:!0}))},Oe=Ge;var Ke=({selectedNetwork:e,account:t,accountIsInvalid:o,accountErrorMessage:r,setAccount:c,updateCustomCoin:u,accountRef:l,setProtocol:x,protocol:p,protocolList:_,isFacet:f,setIsFacet:C})=>{let g=Z(),d=Number(g.get("protocolId"));return(0,O.useEffect)(()=>{let m=null;if(e.coinId!==L){x("");return}if(d&&_?.length&&(m=_.find(v=>v.protocolId===d)),!m&&_.length>0&&(m=_[0]),m){let v={...m,name:m.protocolName};x(v)}},[_,e]),{renderCustomForm:()=>e?.coinId===A?O.default.createElement("div",{className:"contract-address-box"},O.default.createElement(b.TextArea,{autoResize:!0,value:t,title:n("wallet_extension_create_input_title_contract_account_name"),size:b.SIZE.xl,error:o&&r,errorType:b.TIP_TYPE.always,placeholder:n("wallet_extension_create_input_title_contract_token_symbol"),onChange:m=>{c(m.target.value),l.current=m.target.value,u()}})):e?.coinId===pe?O.default.createElement(Oe,{isFacet:f,onToggle:m=>{C(m),u()}}):e?.coinId===L&&p?O.default.createElement(j,{selectedInfo:p,category:"protocol"}):null}},Me=Ke;a();i();var E=I(F());H();var Ve=(e,t,o,r,c,u)=>{let[l,x]=(0,E.useState)({}),[p,_]=(0,E.useState)(!1),[f,C]=(0,E.useState)(""),[g,d]=(0,E.useState)(!0),[B,m]=(0,E.useState)(""),[v,T]=(0,E.useState)(!1),[D,U]=(0,E.useState)(!1),Q=y=>`facet_${y}`,{run:$}=W(async({addr:y,accountName:R,protocolId:G})=>{U(!1);let w;try{w=await we({contractAddress:o?Q(y):y,chainInfo:e,account:R,isFacet:o,...e?.coinId===_e?{protocolId:G}:{}})}catch(K){w={},K?.data?.originalError?.data?.code==="ERR_NETWORK"&&U(!0)}if(y===t){if(x(w),e.coinId===A&&!w?.accountValid){_(!0),C(w.msg),d(!0);return}else if(!B&&e?.coinId===A){T(!1),d(!0);return}_(!1),C(""),y&&w?.symbol?(T(!1),d(!1)):y?(T(!0),d(!0)):(T(!1),d(!0))}},{wait:500});return{customCoin:l,accountIsInvalid:p,accountErrorMessage:f,stateOnLock:g,account:B,addressIsInvalid:v,setAccount:m,updateCustomCoin:()=>{x({}),d(!0),$({addr:r.current,accountName:c.current,protocolId:u?.protocolId})},networkError:D}},Pe=Ve;a();i();var Le=I(ee());M();a();i();function Je(e,t){if(e.key&&t.key)return e.key===t.key;if(e.coinId&&t.coinId)return e.coinId===t.coinId;let o=e.address||e.contractAddress,r=t.address||t.contractAddress;return o&&r?o.toLowerCase()===r.toLowerCase()&&e.localType===t.localType:!1}function ne(e,t){for(let o=0;o<t.length;o++){let r=t[o];if(Je(r,e)||r.childrenCoin&&ne(e,r.childrenCoin))return!0}return!1}X();function se(e,t,o){let r=(0,Le.useHistory)(),[c,{setTrue:u,setFalse:l}]=Ie(),x=Ee(),p=Te(),_=async C=>{t.coinId===J&&await p({...e,baseCoinId:J,address:e.contractAddress},async()=>{C||await te(e)},l)},{run:f}=W(async()=>{u();let C=ne(e,x);if(await _(C),C){z.error(n("wallet_manage_crypto_errortip_crypto_added")),l();return}try{await te({...e,protocolId:o}),z.success(n("wallet_manage_crypto_toast_custom_crypto_success")),r.push(ye)}catch(g){let d=g?.data?.originalError?.msg||n("wallet_extenshion_toast_add_failed");z.error(d)}finally{l()}},{wait:100});return{isSubmitting:c,submitAction:f}}a();i();var Xe="Ethereum",et=()=>{let e=(0,Be.useHistory)(),t=s.default.useRef(""),o=s.default.useRef(""),r=s.default.useRef(""),[c,u]=(0,s.useState)(!1),[l,x]=(0,s.useState)(""),[p,_]=(0,s.useState)(""),[f,C]=(0,s.useState)({imageUrl:"",name:""}),{data:{supportNetworkList:g,protocolList:d}={}}=Fe(),m=Z().get("network"),{title:v,error:T,placeholder:D,placeholderName:U,placeholderId:Q}=re[f?.coinId]||re.default,$=(0,s.useMemo)(()=>n(v),[v]),ae=(0,s.useMemo)(()=>f?.coinId===1&&p?.searchType?p.searchType===1?n(U):n(Q):n(D),[D,p]),{customCoin:y,accountIsInvalid:R,accountErrorMessage:G,stateOnLock:w,account:K,addressIsInvalid:ie,setAccount:De,updateCustomCoin:ce,networkError:le}=Pe(f,l,c,r,t,p),Ue=(0,s.useMemo)(()=>le?n("developer_mode_manage_errortip_network_error"):n(T),[T,le]),{renderCustomForm:Re}=Me({selectedNetwork:f,account:K,accountIsInvalid:R,accountErrorMessage:G,setAccount:De,updateCustomCoin:ce,accountRef:t,protocolRef:o,setProtocol:_,protocol:p,protocolList:d,isFacet:c,setIsFacet:u}),{isSubmitting:qe,submitAction:ze}=se(y,f,p.protocolId);return(0,s.useEffect)(()=>{async function q(){if(g.length>0){let He=m||Xe;C(g.filter(We=>We.name===He)[0]||g[0])}}q()},[g]),s.default.createElement("div",{className:"custom-crypto-page main-container"},s.default.createElement(Se,{title:n("wallet_manage_crypto_maintitle_custom_crypto"),onBack:()=>{e.push(ve)}}),s.default.createElement(ge.Spin,{loading:!g?.length||!d?.length,size:ue.SIZE.lg},s.default.createElement("div",{className:"custom-crypto--body"},s.default.createElement(j,{selectedInfo:f}),Re(),s.default.createElement(ke,{updateCustomCoin:q=>{r.current=q,x(q),ce()},currentAddress:l,addressInputTitle:$,errorText:Ue,placeHolderText:ae,addressIsInvalid:ie}),s.default.createElement(Ne,{customCoin:y})),s.default.createElement(be.FooterActions,null,s.default.createElement(P,{onClick:ze,size:P.SIZE.lg,type:P.TYPE.highlight,category:P.CATEGORY.fill,loading:qe,disabled:ie||w||R},n("wallet_set_password_btn_confirm")))))},So=et;export{So as default};

window.inOKXExtension = true;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=CustomCrypto-6UVAPFSC.js.map
