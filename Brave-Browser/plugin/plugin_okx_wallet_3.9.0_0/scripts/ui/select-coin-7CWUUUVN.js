import{a as Re}from"./chunk-7ZL3TT5L.js";import{a as Me}from"./chunk-XF2FQGGG.js";import{a as Ke}from"./chunk-OPGS4CCJ.js";import"./chunk-53XGQLJX.js";import"./chunk-EMIDMJCA.js";import"./chunk-T2LI56ZH.js";import{a as Je}from"./chunk-GYZNGZAZ.js";import{b as He}from"./chunk-KG3C55VT.js";import{a as Fe,b as F}from"./chunk-AC4REGKH.js";import{a as Ue}from"./chunk-IDA77UNI.js";import{a as Oe}from"./chunk-PXGFGDPS.js";import"./chunk-5UOIKI2I.js";import{a as te}from"./chunk-74GTIAZN.js";import{a as Ve}from"./chunk-6XTUWRPU.js";import{a as Pe}from"./chunk-C3P5GP5W.js";import{a as ee}from"./chunk-M4JNKF23.js";import{a as $e}from"./chunk-NRUOGYUU.js";import"./chunk-BZTTFC54.js";import"./chunk-WSSHN373.js";import"./chunk-ADIQBHVU.js";import"./chunk-6GFVKSAR.js";import"./chunk-JVLSBRR5.js";import"./chunk-5IXTSGAM.js";import"./chunk-UIABO6UG.js";import"./chunk-KJFAD5C4.js";import"./chunk-BFVA6OLJ.js";import"./chunk-RC3QMLDN.js";import"./chunk-JINEVGIZ.js";import"./chunk-SRU2IM3A.js";import"./chunk-46NSFYB3.js";import"./chunk-FFQESTX4.js";import"./chunk-OCZAVPFZ.js";import"./chunk-P6SDUFQ6.js";import"./chunk-5TNZ4MQV.js";import{l as ke}from"./chunk-ZDQ5EBGN.js";import"./chunk-2KEW2T4M.js";import"./chunk-R7VTXTCL.js";import"./chunk-LBYCQPAD.js";import"./chunk-6PN4BR3D.js";import"./chunk-VZ3BFZKL.js";import"./chunk-T6Z2C3RK.js";import"./chunk-KT53NMHD.js";import"./chunk-64STH2HN.js";import"./chunk-R2QKPEWB.js";import"./chunk-RMA2FZOE.js";import"./chunk-KRHB66KZ.js";import"./chunk-4RHFH7IF.js";import"./chunk-LPTRVNVL.js";import"./chunk-PH2A2GR3.js";import"./chunk-2LLM6N6U.js";import"./chunk-LF2PURXZ.js";import"./chunk-JEZIPKDY.js";import{g as Q,h as X}from"./chunk-SR2BDP3A.js";import{M as Be}from"./chunk-CFT6B56M.js";import"./chunk-WK32FAZW.js";import"./chunk-WMUTUJYX.js";import"./chunk-B23OWGFX.js";import"./chunk-OSWXWF4A.js";import"./chunk-Q7FJER56.js";import"./chunk-RBTIRMSE.js";import"./chunk-7GZ2ZCGI.js";import"./chunk-WTP3OIOS.js";import"./chunk-D66ZH3O3.js";import{b as J}from"./chunk-YUPWBXXL.js";import"./chunk-HISWVX7W.js";import{a as V}from"./chunk-PYJPOVV7.js";import"./chunk-AO6MUSOH.js";import"./chunk-I435LZHT.js";import{s as Ae,t as be}from"./chunk-SJIW4WAV.js";import"./chunk-SLDECH2O.js";import{a as Le,c as q}from"./chunk-5JJQQHKZ.js";import{Y,f as U,ma as O,w as H}from"./chunk-URG4MCPH.js";import{_a as we,ab as De,o as Se,t as G,u as Z,w as Te,y as Ne}from"./chunk-ZPOCIBPN.js";import"./chunk-CA5MYYD6.js";import"./chunk-RZ7GFYMN.js";import{a as _e}from"./chunk-IOCZ22XI.js";import"./chunk-EJY3MW2I.js";import"./chunk-3VRAVMMN.js";import"./chunk-YJ45QIWT.js";import"./chunk-WR62TYUO.js";import"./chunk-2G2AXMFT.js";import{f as xe}from"./chunk-XGFQCNHX.js";import{s as j,y as fe}from"./chunk-JLA5HXVC.js";import"./chunk-I4WIGQLD.js";import"./chunk-ZNGQ6IUR.js";import"./chunk-JERFAOJH.js";import"./chunk-JXZFOFB5.js";import"./chunk-LYNLETTP.js";import"./chunk-FQ4XEVKF.js";import{c as Ie}from"./chunk-VMYDP774.js";import"./chunk-A7LNVEYU.js";import"./chunk-2YWUVAR3.js";import"./chunk-VA2HGDZT.js";import"./chunk-AKPDCNMH.js";import{S as ye,Ub as ze,Xa as pe,Xb as Ee,ja as ve,la as Ce,pb as at,q as he}from"./chunk-M54COW6Q.js";import"./chunk-PWWHYQAY.js";import{B as de,E as W,o as K,y as R}from"./chunk-RIJWHGTU.js";import{I as P,v as l}from"./chunk-K4MPEKC5.js";import"./chunk-X6USBUO5.js";import"./chunk-674MHQJQ.js";import{L as ue,X as ge,c as lt}from"./chunk-XIGC6FD5.js";import{a as k}from"./chunk-CXUPEGDW.js";import"./chunk-QAWZYDPQ.js";import"./chunk-PYTKRRY4.js";import"./chunk-363VDWOO.js";import"./chunk-7B5WANGL.js";import"./chunk-4P4FGPYZ.js";import"./chunk-Y47SQ3XQ.js";import"./chunk-YGNOWOE7.js";import"./chunk-N4GKTC7Y.js";import"./chunk-RYJHESAH.js";import"./chunk-DOQ5NSSP.js";import"./chunk-VULQOB2N.js";import{f as A,m as i,o as r}from"./chunk-ICCOEXX5.js";i();r();var rt=A(k());i();r();var h=A(k());at();P();var qe=A(_e());i();r();var M=A(k());P();function ct({list:o,pageType:s,isVirtualList:a,onSearch:t,renderEmpty:c,getItemProps:d,loading:p,loadingMore:y,...T},v){let{currentNetworkUniqueId:C}=te(),E=(0,M.useMemo)(()=>{let m=o.map(L=>({...L,symbolName:L.symbol}));return ke(m,C,s==="send")},[C,o]),w=m=>{let u,{baseCoinId:L,childrenCoin:e,tokenType:S,aggregation:D}=m;if(s==="send"){let B=(e||[]).filter(N=>N.currencyAmount>0);D&&B.length>1?u=l("wallet_manage_crypto_labels_crypto_multichain"):u=L===0?"":S}else u=D?l("wallet_manage_crypto_labels_crypto_multichain"):S;let x=d?d(m):{};return{name:m.name,tag:u,...x}};return M.default.createElement(Fe,{headerProps:{closeable:!1,title:l("wallet_transfer_send_select_coin_maintitle_select_coin")},...T,searchPlaceholder:l("wallet_transfer_send_select_coin_placeholder_input_name"),list:E,onSearch:t,getItemProps:w,renderEmpty:c,isVirtualList:a,loadingMore:y,loading:p,ref:v})}var oe=(0,M.forwardRef)(ct);i();r();function dt(){let o=Me(),s=Ke(),a=$e(),t=Oe();return async c=>{let d=await o(c),p=await s({coinId:c.coinId}),y=await a({coinId:c.coinId});return!d||!p||!y?Promise.reject():(await t(c),Promise.resolve())}}var ie=dt;i();r();var n=A(k());var je=A(lt());P();i();r();P();var We=A(Ne()),pt=o=>{let s=(0,We.useSelector)(De);return a=>{let t=Ee[a.addressType],c=Se(o[t]),d=l(ze[t]),p=be(a.coinAmount),y=Ae(a.currencyAmount,{useApproximate:!1,symbol:s.symbol});return{addressDisplay:c,addressTypeDisplay:d,amountDisplay:p,currencyAmountDisplay:y}}},re=pt;i();r();var Ge=A(_e());var _t=(o,s)=>{let a=(0,Ge.useHistory)();return t=>{let c=J({from:o[t.addressType]}),d=J({coinId:t.coinId,addressType:t.addressType}),p=s==="send"?`${U}/${t.coinId}${O}${c}`:`${H}${d}`;a.push(p)}},ne=_t;i();r();var f={container:"_container_zvzhn_1","setting-nav":"_setting-nav_zvzhn_6",settingNav:"_setting-nav_zvzhn_6",body:"_body_zvzhn_9",item:"_item_zvzhn_12","item-left":"_item-left_zvzhn_21",itemLeft:"_item-left_zvzhn_21","item-right":"_item-right_zvzhn_24",itemRight:"_item-right_zvzhn_24","item-right-top":"_item-right-top_zvzhn_27",itemRightTop:"_item-right-top_zvzhn_27","item-right-bottom":"_item-right-bottom_zvzhn_32",itemRightBottom:"_item-right-bottom_zvzhn_32","item-icon":"_item-icon_zvzhn_37",itemIcon:"_item-icon_zvzhn_37","item-address":"_item-address_zvzhn_41",itemAddress:"_item-address_zvzhn_41","item-address-type":"_item-address-type_zvzhn_48",itemAddressType:"_item-address-type_zvzhn_48","item-currency-amount":"_item-currency-amount_zvzhn_60",itemCurrencyAmount:"_item-currency-amount_zvzhn_60","item-amount":"_item-amount_zvzhn_71",itemAmount:"_item-amount_zvzhn_71",infoIcon:"_infoIcon_zvzhn_82",title:"_title_zvzhn_85",tip:"_tip_zvzhn_93",subTitle:"_subTitle_zvzhn_94"};var Ze="SelectBTCAddress_has_opened_tip_on_dlg",ft=({visible:o,onClose:s,coin:a,type:t})=>{let c=localStorage.getItem(Ze),d=Q(),[p,y]=(0,n.useState)(!c),T=Pe(a),v=t==="send"?T.filter(u=>u.coinAmount>0):T,C=re(d),E=ne(d,t),w=()=>{y(!1),localStorage.setItem(Ze,!0)},m=()=>t==="send"?l("extension_defi_top_tooltips_only_usage_utxo_value"):l("extension_defi_top_tooltips_only_usage_utxo");return n.default.createElement("div",null,n.default.createElement(K.Action,{onClose:s,visible:o,width:"lg",noTopRadius:!0,animateDisable:!0,mask:!1,hideCloseBtn:!0,alignBottom:!0,noContentPadding:!0,windowStyle:{height:"100vh",maxHeight:"100%",overflow:"hidden",width:"100%"}},n.default.createElement("div",{className:f.container},n.default.createElement(V,{className:"setting-nav",title:l("extension_defi_top_header_title_select_address_type"),onBack:()=>{s()},closeable:!1},n.default.createElement(de,{width:310,placement:de.DIRECTION.bottomRight,title:m()},n.default.createElement(ue,{"data-testid":"top-header-info-icon",className:(0,je.default)("okds-information-circle",f.infoIcon)}))),n.default.createElement("div",{className:f.body},n.default.createElement("div",{className:f.list},v.map(u=>{let{addressDisplay:L,addressTypeDisplay:e,amountDisplay:S,currencyAmountDisplay:D}=C(u);return n.default.createElement("div",{"data-testid":"select-btc-address-item",className:f.item,onClick:()=>{E(u)}},n.default.createElement("div",{className:f.itemLeft},n.default.createElement(W,{width:32,height:32,alt:e,src:u.image,errorImg:j,className:f.itemIcon})),n.default.createElement("div",{className:f.itemRight},n.default.createElement("div",{className:f.itemRightBottom},n.default.createElement("div",{className:f.itemAddressType},e),n.default.createElement("div",{className:f.itemAmount},S)),n.default.createElement("div",{className:f.itemRightTop},n.default.createElement("div",{className:f.itemAddress},L),n.default.createElement("div",{className:f.itemCurrencyAmount},D))))}))))),n.default.createElement(K.Confirmation,{visible:o&&p,confirmText:l("wallet_extension_btn_general_gotit"),onConfirm:w,onClose:w,confirmBtnProps:{size:ge.SIZE.lg}},n.default.createElement("div",{className:f.container},n.default.createElement("div",{className:f.title},l("extension_defi_popup_title_btc_address_type")),n.default.createElement("div",{className:f.tip},l("extension_defi_popup_desc_btc_address_type")))))},se=ft;i();r();var g=A(k());P();i();r();var I={container:"_container_10hvf_1",body:"_body_10hvf_6",item:"_item_10hvf_9","item-left":"_item-left_10hvf_18",itemLeft:"_item-left_10hvf_18","item-right":"_item-right_10hvf_21",itemRight:"_item-right_10hvf_21","item-right-top":"_item-right-top_10hvf_24",itemRightTop:"_item-right-top_10hvf_24","item-right-bottom":"_item-right-bottom_10hvf_29",itemRightBottom:"_item-right-bottom_10hvf_29","item-icon":"_item-icon_10hvf_34",itemIcon:"_item-icon_10hvf_34","item-address":"_item-address_10hvf_38",itemAddress:"_item-address_10hvf_38","item-address-type":"_item-address-type_10hvf_45",itemAddressType:"_item-address-type_10hvf_45","item-currency-amount":"_item-currency-amount_10hvf_57",itemCurrencyAmount:"_item-currency-amount_10hvf_57","item-amount":"_item-amount_10hvf_68",itemAmount:"_item-amount_10hvf_68"};var ut=({visible:o,onClose:s,coin:a,type:t})=>{let c=X(),d=Re(a),p=t==="send"?d.filter(v=>v.coinAmount>0):d,y=re(c),T=ne(c,t);return g.default.createElement("div",null,g.default.createElement(K.Action,{noTopRadius:!0,alignBottom:!0,hideCloseBtn:!0,animateDisable:!0,noContentPadding:!0,onClose:s,visible:o,windowStyle:{width:"100%",height:"100%",maxHeight:"100%",overflow:"hidden"}},g.default.createElement("div",{className:I.container},g.default.createElement(V,{className:"setting-nav",title:l("extension_defi_top_header_title_select_address_type"),onBack:s,closeable:!1}),g.default.createElement("div",{className:I.body},g.default.createElement("div",{className:I.list},p.map(v=>{let{addressDisplay:C,addressTypeDisplay:E,amountDisplay:w,currencyAmountDisplay:m}=y(v);return g.default.createElement("div",{className:I.item,onClick:()=>{T(v)}},g.default.createElement("div",{className:I.itemLeft},g.default.createElement(W,{width:32,height:32,alt:E,src:v.image,errorImg:j,className:I.itemIcon})),g.default.createElement("div",{className:I.itemRight},g.default.createElement("div",{className:I.itemRightBottom},g.default.createElement("div",{className:I.itemAddressType},E),g.default.createElement("div",{className:I.itemAmount},w)),g.default.createElement("div",{className:I.itemRightTop},g.default.createElement("div",{className:I.itemAddress},C),g.default.createElement("div",{className:I.itemCurrencyAmount},m))))}))))))},me=ut;i();r();var le={empty:"_empty_68vmq_1",emptyResult:"_emptyResult_68vmq_5"};function gt(){let o=(0,qe.useHistory)(),s=F(),a=ee(),t=(0,h.useMemo)(()=>(a||[]).filter(e=>pe(e.coinAmount,0)),[a]),c=ie(),[d,p]=(0,h.useState)(!1),[y,T]=(0,h.useState)(!1),[v,C]=(0,h.useState)(null),E=Q(),w=X(),m=(e,S)=>{let D=e.childrenCoin.filter(x=>x.coinId===e.coinId&&pe(x.coinAmount,0));if(D.length===1){let x=S[D[0].addressType];o.push({pathname:`${U}/${e.coinId}${O}`,search:`?from=${x}`})}return null},u=async e=>{if(G(e)){m(e,E),C(e),p(!0);return}if(Z(e)){m(e,w),C(e),T(!0);return}await c(e);let S,D,B=(e.childrenCoin||[]).filter(N=>N.currencyAmount>0);B.length>1&&e.aggregation?(S=Y,D=`coinKey=${encodeURIComponent(e.key)}&aggregationSymbol=${e.symbol}&type=${s}`):B.length===1&&e.aggregation?S=`${U}/${B[0].coinId}${O}`:S=`${U}/${e.coinId}${O}`,o.push({pathname:S,search:D})};return t.length===0?h.default.createElement(Ie.Container,null,h.default.createElement(V,{closeable:!1,title:l("wallet_transfer_send_select_coin_maintitle_select_coin")}),h.default.createElement(R.State,{className:le.empty,title:l("wallet_transfer_maintitle_not_any_token")})):h.default.createElement(h.default.Fragment,null,h.default.createElement(oe,{list:t,renderEmpty:e=>h.default.createElement(R.State,{className:le.emptyResult,title:l("wallet_extension_send_toast_unfoundcrypto",{crypto:h.default.createElement("span",{className:le.emptyText},e)})}),onClick:u,pageType:"send"}),h.default.createElement(se,{visible:d,onClose:()=>{p(!1)},coin:v,type:"send"}),h.default.createElement(me,{visible:y,onClose:()=>{T(!1)},coin:v,type:"send"}))}var Ye=gt;i();r();var z=A(k()),tt=A(Ne()),ot=A(_e());P();i();r();var Qe=A(k());Ce();function Xe(){let o=ee(),s=q(()=>Array.from(new Set(Je(o).map(m=>m.coinId))),[o]),a=Ue(),[t,c]=(0,Qe.useState)(""),d=Le(m=>{c(m)}),p=Ve(),{data:y,loading:T,loadingMore:v,listRef:C}=He({aggregation:!0,symbolLike:t,chainIds:p!==""?[Number(p)]:void 0,excludeCoinIds:s},{reloadDeps:[t],enable:!a}),E=q(()=>new Set(o.map(m=>m.aggregation?m.symbol:m.coinId)),[o]);return{list:q(()=>{let m=y?.list??[];return[...t?o.filter(e=>e.symbol?.toLowerCase().includes(t.toLowerCase())):o,...m].filter(({coinId:e,baseCoinId:S})=>!ve(e,S))},[o,E,y?.list]),listRef:C,search:t,onSearch:d,loading:T,loadingMore:v,isSearching:T&&!!t}}Ce();i();r();var et={empty:"_empty_1umri_1"};function ht(){let o=(0,ot.useHistory)(),{keyringIdentityType:s}=(0,tt.useSelector)(we),{currentNetworkUniqueId:a}=te(),t=F(),c=ie(),{list:d,listRef:p,onSearch:y,loading:T,loadingMore:v,isSearching:C}=Xe(),[E,w]=(0,z.useState)(!1),[m,u]=(0,z.useState)(!1),[L,e]=(0,z.useState)(null),S=N=>{if(N?.childrenCoin?.length===1){let{addressType:$}=N.childrenCoin[0]||{},_=J({coinId:N.coinId,addressType:$});o.push(`${H}${_}`)}},D=async N=>{let $=Te(N),_;if($){if(_=await Be(N),a!==""&&_?.aggregation&&(_=_.childrenCoin?.find(mt=>mt.chainId===Number(a))??null),!_)return}else _=N;if(G(_)){e(_),w(!0);return}if(Z(_)){S(_),e(_),u(!0);return}await c(_);let ae,ce,nt=_.aggregation,st=_.childrenCoin??[];nt&&st.length>0?(ae=Y,ce=`coinKey=${encodeURIComponent(_.key)}&aggregationSymbol=${_.symbol}&type=${t}`):(ae=H,ce=`coinId=${_.coinId}`),o.push({pathname:ae,search:ce})},x=(0,z.useCallback)(N=>{let $={};return N.localType===he&&N.coinId===ye&&xe(s)&&($.tag=l("extension_wallet_footer_alert_asset_notsupported")),$},[s]);return z.default.createElement(z.default.Fragment,null,z.default.createElement(oe,{list:C?[]:d,onClick:D,getItemProps:x,isVirtualList:!1,onSearch:y,ref:p,renderEmpty:()=>z.default.createElement(R.State,{className:et.empty,title:l("commonall_emptystate_text_no_results")}),loadingMore:v||T&&!C,loading:C}),z.default.createElement(se,{visible:E,onClose:()=>{w(!1)},coin:L,type:"receive"}),z.default.createElement(me,{visible:m,onClose:()=>{u(!1)},coin:L,type:"receive"}))}var it=ht;var yt={[fe.SEND]:Ye,[fe.RECEIVE]:it};function vt(){let o=F(),s=yt[o];return s?rt.default.createElement(s,null):null}var Fi=vt;export{Fi as default};

window.inOKXExtension = true;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=select-coin-7CWUUUVN.js.map
