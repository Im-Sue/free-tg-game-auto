import{a as Rt}from"./chunk-FSXW45U6.js";import{a as Qt}from"./chunk-6UR6D26Y.js";import{a as Kt,b as eo}from"./chunk-RMPNHDVC.js";import{a as Ie,c as fe,d as Zt,f as Ae,g as qt,h as ze,k as jt}from"./chunk-EHDEZCO2.js";import{a as zt}from"./chunk-5NV3TIKF.js";import{d as Wt}from"./chunk-DCMAUS7C.js";import{a as Jt,b as $t}from"./chunk-QIJYKINJ.js";import{a as Vt}from"./chunk-D4V7ONZY.js";import{a as Dt,b as ke,d as Ot}from"./chunk-3QCQMWWZ.js";import{d as Gt}from"./chunk-UKFSUXAE.js";import{a as Bt}from"./chunk-U3CLRNWK.js";import{b as St}from"./chunk-M4STRGDO.js";import{a as Xt}from"./chunk-M4JNKF23.js";import{a as Yt}from"./chunk-SIKYZQW4.js";import{b as Ft}from"./chunk-MCRNCTJS.js";import{d as de,e as We,f as Ht,g as Ut}from"./chunk-YZAK46Y6.js";import{a as Lt,e as oe}from"./chunk-7ODXCTBK.js";import{a as Mt}from"./chunk-TPVT7ZCY.js";import{c as Nt}from"./chunk-JVLSBRR5.js";import{e as Z,g as At}from"./chunk-UIABO6UG.js";import{b as It}from"./chunk-BFVA6OLJ.js";import{a as bt}from"./chunk-ESKOSV75.js";import{a as Ee}from"./chunk-PRHPRTXY.js";import{a as Ct,b as wt}from"./chunk-IGCT3RWS.js";import{d as Ue}from"./chunk-RUSRHRGO.js";import{d as Pt}from"./chunk-EKQH7XTV.js";import{a as ht,d as kt}from"./chunk-2LLM6N6U.js";import{T as pt,c as mt}from"./chunk-WTP3OIOS.js";import{a as Et}from"./chunk-PYJPOVV7.js";import{b as ue}from"./chunk-AO6MUSOH.js";import{a as he}from"./chunk-I435LZHT.js";import{v as ut,x as D}from"./chunk-SJIW4WAV.js";import{a as R,o as Q,y as Tt,z as xt}from"./chunk-5JJQQHKZ.js";import{Ga as _t}from"./chunk-ZPOCIBPN.js";import{T as A,W as He,Y as ce,b as ft,d as yt}from"./chunk-CA5MYYD6.js";import{a as h}from"./chunk-4JZ3HIS7.js";import{r as ct,v as Ye}from"./chunk-JLA5HXVC.js";import{g as gt}from"./chunk-JXZFOFB5.js";import{a as vt}from"./chunk-LYNLETTP.js";import{c as b}from"./chunk-VMYDP774.js";import{a as lt,b as Go}from"./chunk-A7LNVEYU.js";import{c as nt,h as No}from"./chunk-2YWUVAR3.js";import{$b as dt,Hb as it,Kb as So,Ta as rt,Xa as pe,db as at,la as Po,m as Ce,o as ot,pb as st}from"./chunk-M54COW6Q.js";import{B as Oe,H as tt,b as U,c as De,f as we,o as et}from"./chunk-RIJWHGTU.js";import{I as me,l as B,u as Be,v as d}from"./chunk-K4MPEKC5.js";import{X as $}from"./chunk-XIGC6FD5.js";import{a as G}from"./chunk-CXUPEGDW.js";import{f as k,m as p,o as c}from"./chunk-ICCOEXX5.js";p();c();var so=k(G());p();c();p();c();var Fe=k(G());No();Go();var Bo=()=>{let[e,{setFalse:o}]=Q(!0),[n,t]=(0,Fe.useState)([]),r=async()=>{try{let a=await nt(lt.getMevList,{},{});return t(a.data),a.data}catch{return[]}finally{o()}};return(0,Fe.useEffect)(()=>{r()},[]),[e,n]},to=Bo;var X=k(G()),Do=e=>{let[o,n]=to(),[t,r]=(0,X.useState)(""),[a,v]=(0,X.useState)([]);(0,X.useEffect)(()=>{let m=n.find(i=>window.localStorage.getItem("mevCheckedName")===i.name&&i.chainIds.includes(Number(e))),f=n.find(i=>i.chainIds.includes(Number(e))),u=n.filter(i=>i.chainIds.includes(Number(e)));v(u),r(m||f)},[n,e]);let s=(0,X.useMemo)(()=>t&&n.length>0&&!o,[t,n,o]);return[t,a,s,r]},oo=Do;p();c();var l=k(G());me();p();c();var w={"mev-control-enter":"_mev-control-enter_1l6py_1",mevControlEnter:"_mev-control-enter_1l6py_1","mev-control-content":"_mev-control-content_1l6py_6",mevControlContent:"_mev-control-content_1l6py_6","mev-control-content-title":"_mev-control-content-title_1l6py_9",mevControlContentTitle:"_mev-control-content-title_1l6py_9","mev-control-content-desc":"_mev-control-content-desc_1l6py_14",mevControlContentDesc:"_mev-control-content-desc_1l6py_14","list-content":"_list-content_1l6py_18",listContent:"_list-content_1l6py_18","list-item":"_list-item_1l6py_21",listItem:"_list-item_1l6py_21","item-icon":"_item-icon_1l6py_24",itemIcon:"_item-icon_1l6py_24","list-item-text":"_list-item-text_1l6py_28",listItemText:"_list-item-text_1l6py_28","mev-control-title":"_mev-control-title_1l6py_32",mevControlTitle:"_mev-control-title_1l6py_32","mev-control-sub-title":"_mev-control-sub-title_1l6py_37",mevControlSubTitle:"_mev-control-sub-title_1l6py_37","mev-control-picture":"_mev-control-picture_1l6py_42",mevControlPicture:"_mev-control-picture_1l6py_42","mev-control-divider":"_mev-control-divider_1l6py_46",mevControlDivider:"_mev-control-divider_1l6py_46","mev-control-text-content":"_mev-control-text-content_1l6py_50",mevControlTextContent:"_mev-control-text-content_1l6py_50"};p();c();var O=k(G());var Oo=({mevList:e,mevChecked:o,setMevChecked:n,...t})=>{let r=(0,O.useRef)(null);if(!e.length)return null;let a=xt(r),v=m=>{n(m)},s=m=>O.default.createElement(ht,{icon:{size:ue.SIZE.lg,src:m.vendorIcon||ct,type:ue.TYPE.image},className:w["list-item"],onClick:()=>{v(m)},...t},O.default.createElement(b.FlexBox,{direction:b.DIRECTION.vertical},O.default.createElement(b.FlexBox,{align:b.ALIGN.center},O.default.createElement(D.Text,{className:w["list-item-text"]},m.name))),m.name===o.name&&O.default.createElement(b.FlexBox,{className:w["item-icon"],justify:"flex-end"},O.default.createElement(ue,{icon:"okds-success-circle-fill",size:ue.SIZE.sm})));return O.default.createElement("div",{ref:r,className:w["list-content"]},O.default.createElement(kt,{itemKey:"id",height:a?.height??408,searchable:!1,dataSource:e,renderItem:s}))},no=Oo;var ro="mevOperated",Yo=2e3,Ho=({isMev:e,isShowBlockSwapMevTooltip:o,onMevChange:n,mevChecked:t,mevList:r,setMevChecked:a})=>{let[v,{setFalse:s,setTrue:m}]=Q(!1),[f,{toggle:u}]=Q(!1),i=vt(),[x,T]=(0,l.useState)(""),[_]=(0,l.useState)(e);(0,l.useEffect)(()=>{let E=!e&&o,I=!e&&Be.get(ro)===void 0,Y=()=>{s()},W=()=>{Be.set(ro,1)};return E?(T("wallet_extension_trade_tooltip_enable_mev"),m(),document.addEventListener("click",Y,!1)):I&&(T("wallet_extension_mev_pop_turnon_mev"),m(),document.addEventListener("click",Y,!1),document.addEventListener("click",W,!1)),()=>{document.removeEventListener("click",Y,!1),document.removeEventListener("click",W,!1)}},[]);let C=()=>{window.localStorage.setItem("mevCheckedName",t.name)};(0,l.useEffect)(()=>{_&&t&&(C(),n(_,t))},[_,t]);let M=R(E=>{E.stopPropagation(),typeof n=="function"&&(C(),n(!e,t)),pt({mev:!e}),T(e?"wallet_extension_mev_pop_mev_off":"wallet_extension_mev_pop_mev_on"),u(),m(),setTimeout(()=>{s()},Yo)}),P=gt({dark:"/cdn/assets/imgs/245/127CAD27DF691613.png",light:"/cdn/assets/imgs/2311/700F36AE20EC394E.png"});return t?l.default.createElement(l.default.Fragment,null,l.default.createElement(Oe,{show:v,title:d(x),placement:Oe.DIRECTION.bottomRight},l.default.createElement(De,{onClick:u,className:w["mev-control-enter"],src:`${i}${e?"/cdn/assets/imgs/2311/18FBF293424BC832.png":"/cdn/assets/imgs/2311/06B1F3EF7FDBD381.png"}`})),l.default.createElement(et,{visible:f,onClose:u,onCancel:u,alignBottom:!0,isFull:!1,noContentPadding:!0,noMargin:!0},l.default.createElement(b.Box,{className:w["mev-control-content"]},l.default.createElement(b.FlexBox,{justify:"space-between",align:b.ALIGN.center},l.default.createElement(b.Space,{direction:b.DIRECTION.vertical,space:12},l.default.createElement(D.Text,{className:w["mev-control-title"]},d("wallet_extension_mev_grouptitle_mev_protection")),l.default.createElement(D.Text,{style:{color:e?"var(--okd-color-semantic-positive)":"var(--okd-color-content-primary)"},className:w["mev-control-sub-title"]},d(e?"wallet_extension_mev_label_enabled":"wallet_extension_mev_label_disabled"))),l.default.createElement(De,{className:w["mev-control-picture"],src:P})),l.default.createElement(ut,{className:w["mev-control-divider"]}),l.default.createElement(b.Space,{className:w["mev-control-text-content"],direction:b.DIRECTION.vertical,space:24},l.default.createElement(b.Box,null,l.default.createElement(D.Text,{className:w["mev-control-content-title"]},d("wallet_extension_mev_title_mev_attack")),l.default.createElement(D.Text,{className:w["mev-control-content-desc"]},d("wallet_extension_mev_subtitle_mev_attack"))),l.default.createElement(b.Box,null,l.default.createElement(D.Text,{className:w["mev-control-content-title"]},d("wallet_extension_mev_title_prevent_attacks")),l.default.createElement(D.Text,{className:w["mev-control-content-desc"]},d("wallet_extension_mev_subtitle_prevent_attacks"))),l.default.createElement(b.Box,null,l.default.createElement(D.Text,{className:w["mev-control-content-desc"]},d("wallet_extension_mev_subtitle_mev_reset"))),l.default.createElement(b.Box,null,l.default.createElement(D.Text,{className:w["mev-control-content-title"]},d("wallet_extension_mev_title_provider")),l.default.createElement(no,{mevList:r,mevChecked:t,setMevChecked:a})))),l.default.createElement(he.FooterActions,{affixStyle:{position:"absolute",bottom:0,left:0}},l.default.createElement($,{onClick:M,category:e?$.CATEGORY.outline:$.CATEGORY.fill,type:e?$.TYPE.primary:$.TYPE.highlight,size:$.SIZE.lg},d(e?"wallet_extension_mev_btn_disable_mev":"wallet_extension_mev_btn_activate_protection"))))):null},ao=Ho;var Uo=({isMev:e,chainId:o,isShowBlockSwapMevTooltip:n,onMevChange:t})=>{let[r,a,v,s]=oo(o);return v&&so.default.createElement(ao,{isMev:e,isShowBlockSwapMevTooltip:n,onMevChange:t,mevChecked:r,mevList:a,setMevChecked:s})},io=Uo;p();c();var y=k(G());var Ke=k(Ce());me();p();c();var lo=[{constant:!0,inputs:[],name:"name",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"spender",type:"address"},{name:"value",type:"uint256"}],name:"approve",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"totalSupply",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"from",type:"address"},{name:"to",type:"address"},{name:"value",type:"uint256"}],name:"transferFrom",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"decimals",outputs:[{name:"",type:"uint8"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"spender",type:"address"},{name:"addedValue",type:"uint256"}],name:"increaseAllowance",outputs:[{name:"success",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[],name:"unpause",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"account",type:"address"}],name:"isPauser",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"paused",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[],name:"renouncePauser",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"owner",type:"address"}],name:"balanceOf",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"account",type:"address"}],name:"addPauser",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[],name:"pause",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"symbol",outputs:[{name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"spender",type:"address"},{name:"subtractedValue",type:"uint256"}],name:"decreaseAllowance",outputs:[{name:"success",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{name:"to",type:"address"},{name:"value",type:"uint256"}],name:"transfer",outputs:[{name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{name:"owner",type:"address"},{name:"spender",type:"address"}],name:"allowance",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{inputs:[{name:"name",type:"string"},{name:"symbol",type:"string"},{name:"decimals",type:"uint8"},{name:"totalSupply",type:"uint256"}],payable:!1,stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!1,name:"account",type:"address"}],name:"Paused",type:"event"},{anonymous:!1,inputs:[{indexed:!1,name:"account",type:"address"}],name:"Unpaused",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"account",type:"address"}],name:"PauserAdded",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"account",type:"address"}],name:"PauserRemoved",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"from",type:"address"},{indexed:!0,name:"to",type:"address"},{indexed:!1,name:"value",type:"uint256"}],name:"Transfer",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"owner",type:"address"},{indexed:!0,name:"spender",type:"address"},{indexed:!1,name:"value",type:"uint256"}],name:"Approval",type:"event"}];p();c();var K=k(G());me();var mo=k(Ce());var Wo=3,po=({address:e,coins:o,baseCoinId:n})=>{if(Array.isArray(o))return o.find(t=>t?.baseCoinId===n&&bt(t?.address,e,{baseCoinId:n})||po({address:e,baseCoinId:n,coins:t?.childrenCoin}))},zo=({to:e,chainInfo:o,baseCoinId:n})=>{let t=Xt(),r=(0,K.useCallback)(async(a=0)=>{if(!po({address:e,coins:t,baseCoinId:n}))try{let s=await Ct({contractAddress:e,chainInfo:o});await wt(s)}catch(s){++a<Wo?r(a):tt.error({title:s?.msg||d("wallet_home_toast_network_error")})}},[n,o,t,e]);return r},Vo=({txType:e,walletId:o,txParams:n,analyzeRet:t,coinId:r})=>{let[a,v]=(0,K.useState)({}),[s,m]=(0,K.useState)("0"),f=Z(r),{to:u}=n||{},i=It({},o),x=(0,K.useMemo)(()=>i?.find(C=>C.localType===f?.localType),[f?.localType,i?.length]),T=zo({to:u,chainInfo:x,baseCoinId:r}),_=(0,mo.get)(t,"approveList.0",{});return(0,K.useEffect)(()=>{if(_?.asset?.address&&Ie(e)){T();let{approvalRaw:C}=_,{decimals:M=0,symbol:P,imageUrl:E}=_.asset;m(B.div(h(C),B.pow(10,M))),v({symbol:P,decimals:M,address:u,image:E,chainId:f?.chainId})}},[_?.asset?.address,e]),[{...a,authAmount:s},m]},co=Vo;p();c();var Me=k(G());var uo=k(Ce());Po();var Ko=({txId:e,coinId:o,txType:n,txParams:t,isMev:r,mevInfo:a,localType:v,preExecuteError:s,verifyGasLimitRet:m,modifiedData:f,walletAccount:u,customGasInfo:i,isSufficientGas:x,isSufficientBalance:T,gasReturnActivity:_,modifiedDataError:C,baseCoinBalanceInt:M,reportGasReturnActivityDataInConfirm:P,onCancel:E,onConfirm:I,onConfirmReplace:Y})=>{let{walletId:W,address:ae}=u||{},{isPreExecuteNonGasError:H}=m||{},ye=zt(),{networkFee:ee,gasType:te,gasPrice:_e}=i||{},q=Wt({coinId:o,walletId:W,localType:v,fromAddr:t?.from}),S=Gt({coinId:o,toAddr:t?.to,fromAddr:t?.from,txSource:dt.DAPP,coinAmount:(Ee(t?.value)?h(t?.value):t?.value)||0,serviceCharge:ee,inputData:f,mev:r?a?.name:"",activityId:_?.activityId}),N=(0,Me.useMemo)(()=>i?.isNetworkFeeLoading||ke(i,n)||H||!!s||(0,uo.isNil)(M)||C,[s,i,n,H,M,C]),j=R(async()=>{if(Y&&typeof I=="function")return I({isMev:r,coinId:o,mevInfo:a,txParams:t,customGasInfo:i,modifiedData:f,gasReturnActivity:_,reportGasReturnActivityDataInConfirm:P});let{nonce:Ne,updateGasInfo:se}=await ye({to:t?.to,from:t?.from,coinId:o,gasPrice:_e,userGasInfo:i,amount:h(t?.value)||0,baseCoinAmountUse:h(t?.value||0)});P();let g={...t,...i,...se||{},nonce:Ne,data:f};try{let z=await q(g),L=await Lt(ot,z);return await S(z,{txHash:L,extJson:JSON.stringify({to:g?.to,gasType:te,from:g?.from,value:Ee(g?.value)?h(g?.value):g?.value,nonce:Ee(g?.nonce)?h(g?.nonce):g?.nonce,data:g?.data,gas:g?.gasLimit,oldTxHash:"",gasPrice:g?.supportEip1559?g?.maxFeePerGas:g?.gasPrice,repeatTxType:yt.CONFIRMING,priorityFee:g?.supportEip1559?g.maxPriorityFeePerGas:0})}),I?.({txHash:L})}catch(z){return I?.({error:z})}}),ve=(0,Me.useMemo)(()=>!T||!x?{txId:e,coinId:o,address:ae,walletId:W,receiveOnly:x,actionType:oe.ACTION_TYPE.FILL_UP}:{disabled:N,actionType:oe.ACTION_TYPE.CONFIRM,onClick:j},[ae,o,N,j,T,x,e,W]);return(0,Me.useMemo)(()=>[{onClick:E,actionType:oe.ACTION_TYPE.CANCEL},ve],[ve,E])},fo=Ko;p();c();var Le=k(G());me();var Zo=e=>{let[o,n]=(0,Le.useState)({isNetworkFeeLoading:!0,gasLimit:"0",gasPrice:"0",maxFeePerGas:"0",maxPriorityFeePerGas:"0",supportEip1559:!1,gasType:A.STANDARD}),{gasLimitInfo:t={},gasLimit:r,gasPrice:a,maxFeePerGas:v,gasType:s,supportEip1559:m,customConfirmed:f,isGasLimitLoading:u,isNetworkFeeLoading:i,networkFee:x,maxPriorityFeePerGas:T,gasPriceInfo:_,extFee:C}=o,{minGasFee:M}=Dt({gasLimit:r,gasPrice:a,maxPriorityFeePerGas:T,maxFeePerGas:v,supportEip1559:m,extFee:C,gasPriceInfo:_,gasLimitInfo:t,gasType:s}),P=(0,Le.useMemo)(()=>s===A.CUSTOM&&!f?d("extension_send_mid_text_dapps_suggested_fee"):s||A.STANDARD,[f,s]),E=ke(o,e),I=i&&u&&!t?.gasLimit;return{level:P,estimateFailed:E,customGasInfo:o,loading:i,networkFee:I?void 0:M,maxNetworkFee:I?void 0:x,onCustomGasInfoChange:n}},yo=Zo;p();c();var ne=k(G());So();st();var qo=({txType:e,walletId:o,coinId:n,txParams:t,customGasInfo:r,preExecuteLoading:a})=>{let[v,s]=(0,ne.useState)(""),m=Z(n),{from:f,to:u}=t||{},[i,x]=(0,ne.useState)("");(0,ne.useEffect)(()=>{a||(fe(e)||Ae(e)?(s(Ue.approval),x(fe(e)?"approve":"revoke_approve")):(s(Ue.dapp),x("Contract interaction")))},[a,e]);let T=Ft({walletId:o,coinId:n,fromAddress:f,toAddress:u,txType:v,fee:at(r?.networkFee),disabled:!u,unavailable:r.gasType===A.CUSTOM&&r.customConfirmed}),{status:_,activity:C,activityId:M,tip:P,clear:E}=T,I=()=>{it({activityId:M,activity:C,status:_,tip:P,walletId:o,address:f})},Y=C?.errorCode;return(0,ne.useEffect)(()=>{!i||Y===0&&mt({wallet_address:f,interactive_address:u,chain_id:m?.chainId,transaction_type:i})},[Y,i,f,u,m?.chainId]),{gasReturnActivity:T,clearGasReturnInfo:E,reportGasReturnActivityDataInConfirm:I}},_o=qo;p();c();var re=k(G()),Pe=k(Ce());me();var jo=(e,o)=>e?.isPreExecuteNonGasError||o?{type:U.TYPE.error,message:e?.msg||d("wallet_extension_toast_text_unknown_error")}:null,Jo=(e,o)=>{let n=e?.approveList?.[0]||{},t=n?.asset||{},r=ze(n?.name||Ye),a=ze(t?.symbol||t?.name||Ye);return fe(o)||Zt(o)?Ie(o)&&Pt(B.div(n?.approvalRaw,B.pow(10,t?.decimals||0)))?{type:U.TYPE.warn,message:d("wallet_extension_popup_unlimited_transfer",{contract:r,asset:a})}:{type:U.TYPE.warn,message:d("extension_approve_alert_authorized_tips",{contract:r,asset:a})}:Ae(o)?{type:U.TYPE.info,message:d("extension_revoke_approval_alert_evoke_authorization",{contract:r,asset:a})}:null},$o=({coinId:e,txType:o,analyzeRet:n,estimateFailed:t,preExecuteError:r,preExecuteLoading:a,isDappCustomIllegal:v,isSufficientBalance:s,isSufficientGas:m,verifyGasLimitRet:f})=>{let u=Mt(),i=Z(e),x=eo({loading:a,kysRet:n});return(0,re.useMemo)(()=>{if((0,Pe.isNil)(i?.coinId))return null;let T=jo(f,r);if(T)return T;if(!m)return{type:U.TYPE.warn,message:d("wallet_extension_popup_insufficient_for_net",{Symbol:i?.symbol})};if(!s)return{type:U.TYPE.warn,message:d("wallet_extension_popup_dapp_insufficient_balance")};if(t)return{type:Ht.FEE_ERROR};if(!(0,Pe.isEmpty)(n?.blackAddress))return{type:U.TYPE.error,message:re.default.createElement(re.default.Fragment,null,n.blackAddress.msg,re.default.createElement(we,{underline:!0,type:we.TYPE.secondary,size:we.SIZE.sm,onClick:()=>{globalThis.platform.openTab({url:u?.scamsUrl})}},d("wallet_extension_scam_toast_link_view_scams")))};let _=Jo(n,o);if(_)return _;if(v===He[A.SLOW])return{type:U.TYPE.normal,message:d("wallet_extension_popup_text_dapp_fee_low")};if(v===He[A.FAST])return{type:U.TYPE.normal,message:d("wallet_extension_dapp_toast_high_network_fee")};let C=x();return C||null},[i?.coinId,i?.symbol,f,r,m,s,t,n,o,v,u?.scamsUrl,x])},vo=$o;p();c();st();var Ro=e=>{let{txParams:o={},type:n}=e,{gasPrice:t,maxFeePerGas:r,maxPriorityFeePerGas:a}=o,v=o.gas||o.gasLimit,s=A.STANDARD,m,f,u,i=h(v),x=h(t),T=h(r),_=h(a);return pe(x,0)&&(s=A.CUSTOM,m=x),pe(T,0)&&pe(_,0)&&pe(T,_)&&(s=A.CUSTOM,f=T,u=_),n===Bt.DEPLOY_CONTRACT&&(s=A.CUSTOM),{initialGasType:s,initialCustomMaxPriorityFee:u,initialCustomGasLimit:i,initialCustomGasPrice:m,initialCustomMaxBaseFee:rt(f,u)}},To=Ro;p();c();var Ve={"data-input":"_data-input_1k4cq_1",dataInput:"_data-input_1k4cq_1","data-input-error-tip":"_data-input-error-tip_1k4cq_5",dataInputErrorTip:"_data-input-error-tip_1k4cq_5"};var Qo=e=>Number(e)===ft.INCREASE_ALLOWANCE?lo:[],Xo=e=>{let{txId:o,chainId:n,walletId:t,txParams:r,dappInfo:a={},needMev:v=!1,openMev:s=!1,coinId:m,isShowBlockSwapMevTooltip:f,txType:u,onMevChange:i,onConfirm:x,onConfirmReplace:T,onCancel:_}=e||{},{host:C}=a,[M,P]=(0,y.useState)(""),[E,I]=Tt({mevInfo:{},isMev:s}),[Y,{toggle:W}]=Q(!1),{from:ae,to:H,value:ye="0x0",data:ee}=r||{},[te,_e]=(0,y.useState)(""),q=Z(m,void 0,{chainId:n}),S=q?.coinId,N=Nt(q?.localType,t),j=h(ye),ve={to:H,from:ae,coinId:S,chainId:q?.chainId,amount:j,checkTypes:[ce.KYS,ce.VERIFY_GAS_LIMIT],domain:C,tokenAddress:H,inputData:ee||"0x"},[Ne,se,g]=St(ve,{ready:!!H}),z=Ne||!se&&!g&&!!H,L=se?.[ce.KYS]||{},Te=se?.[ce.VERIFY_GAS_LIMIT]||{},J=At(S,N?.walletId)?.coinAmountInt||0,V=(0,y.useMemo)(()=>L?.txType?L?.txType:u,[L?.txType,u]),xo=To({txParams:r,type:V}),go=Kt(L?.intention,V),Se=Vt(N.walletId),xe=(0,y.useMemo)(()=>$t(te),[te]),{isMev:ge,mevInfo:Ge}=E,Ze=te||ee||"",bo=R((le,be)=>{I({isMev:le,mevInfo:be}),i?.(le,be)}),{level:Co,networkFee:wo,maxNetworkFee:ie,customGasInfo:qe,estimateFailed:je,loading:ho,onCustomGasInfoChange:ko}=yo(V),{gasReturnActivity:Je,reportGasReturnActivityDataInConfirm:Eo}=_o({txType:V,coinId:S,txParams:r,customGasInfo:qe,preExecuteLoading:z,walletId:N.walletId}),$e=(0,y.useMemo)(()=>(0,Ke.isNil)(J)||B.gte(J,ie)&&!Te?.isPreExecuteGasError,[J,ie,Te?.isPreExecuteGasError]),Re=(0,y.useMemo)(()=>!B.eq(j,0)&&!(0,Ke.isNil)(J)?B.lte(j,B.sub(J,ie)):!0,[J,ie,j]),Io=vo({txType:V,coinId:S,analyzeRet:L,preExecuteError:g,preExecuteLoading:z,estimateFailed:je,isSufficientGas:$e,verifyGasLimitRet:Te,isDappCustomIllegal:M,isSufficientBalance:Re}),Ao=fo({txId:o,coinId:S,txType:V,txParams:r,isMev:ge,mevInfo:Ge,analyzeRet:L,verifyGasLimitRet:Te,walletAccount:N,customGasInfo:qe,isSufficientGas:$e,isSufficientBalance:Re,gasReturnActivity:Je,modifiedDataError:xe,preExecuteError:g,localType:q?.localType,modifiedData:Ze,walletId:N?.walletId,baseCoinBalanceInt:J,reportGasReturnActivityDataInConfirm:Eo,onCancel:_,onConfirm:x,onConfirmReplace:T}),[Qe,Fo]=co({coinId:S,txType:V,txParams:r,analyzeRet:L,walletId:N?.walletId}),Mo=R(le=>{let be=Qo(V),Xe=_t(r?.data,be);if(Xe){let Lo=qt(r?.data,{customPermissionAmount:le,decimals:Qe?.decimals},Xe);Fo(le),_e(Lo)}});return jt({kysRet:L,handleCancel:_}),y.default.createElement(b.Container,null,y.default.createElement(Et,{closeable:!1,backable:!1,title:go,loading:z},!!v&&y.default.createElement(io,{isMev:ge,chainId:q?.chainId,onMevChange:bo,isShowBlockSwapMevTooltip:f})),y.default.createElement(Qt,{coinId:S,txType:V,dappInfo:a,loading:z,analyzeRet:L,approveToken:Qe,walletId:N?.walletId,onAuthTokenAmountChange:Mo}),y.default.createElement(de,null,y.default.createElement(Yt,{level:Co,coinId:S,networkFee:wo,loading:ho,maxNetworkFee:ie,estimateFailed:je,onClick:()=>{W(),Se({trade:"contract_interaction",all_confirmation:"network_fee"})}})),y.default.createElement(de,null,y.default.createElement(We,{address:N.address,walletId:N?.walletId,title:d("wallet_extension_network_address_title_walletused"),onCopyCallback:()=>{Se({trade:"contract_interaction",all_confirmation:"wallet_used_address"})}}),!!H&&y.default.createElement(We,{title:d("wallet_extension_popup_text_interact_with"),address:H,onCopyCallback:()=>{Se({trade:"contract_interaction",all_confirmation:"contract_address"})}})),ee?y.default.createElement(de,{bordered:!1},y.default.createElement(Rt,{data:ee,kysRet:L,copyable:{hideDesc:!0},tooltipZIndex:101})):y.default.createElement(de,{bordered:!1},y.default.createElement(Jt,{value:te,error:xe,onChange:_e,className:Ve["data-input"],errorTipClass:Ve["data-input-error-tip"]})),y.default.createElement(he,{placeholder:!0,offsetBottom:0,style:{zIndex:205},borderTop:!0},!xe&&y.default.createElement(Ut,{...Io}),y.default.createElement(oe,{buttonGroup:Ao})),y.default.createElement(Ot,{visible:Y,coinId:S,address:ae,inputData:Ze,tokenAddress:H,value:h(ye),onBack:W,onClose:null,initialGasData:xo,onGasChange:ko,minimumGasLimit:ge?Ge.gas:0,isMev:ge,mevInfo:Ge,gasReturn:Je,onDappGasIllegal:P,gasLimitOptions:{disabled:xe}}))},ja=Xo;export{io as a,ja as b};

window.inOKXExtension = true;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=chunk-NR5M2562.js.map
