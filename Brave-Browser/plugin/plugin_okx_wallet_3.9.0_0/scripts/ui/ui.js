import{h as al,i as sl}from"./chunk-V5HFLARX.js";import{a as mp,b as ll}from"./chunk-YTAZ2TZI.js";import{a as rl,f as nl}from"./chunk-EWWNKCT6.js";import{I as il}from"./chunk-SGLPDLO2.js";import{e as ol}from"./chunk-MH6FRMLQ.js";import{j as tl}from"./chunk-B4ZLH2BY.js";import{a as Qs,y as el}from"./chunk-ZI6GTU5G.js";import{a as tr}from"./chunk-CG5TVOTY.js";import{A as Js,a as Zs}from"./chunk-IGQY7C6Y.js";import{a as pt}from"./chunk-OMKW26U3.js";import"./chunk-3P5YDD2R.js";import{a as Xr}from"./chunk-542JHSZH.js";import{a as bs}from"./chunk-BBQX3JAI.js";import{a as cs}from"./chunk-3LQX6HRP.js";import{c as Ks}from"./chunk-EYEZZYSI.js";import{a as dp,f as $s}from"./chunk-RBHUA4Z3.js";import"./chunk-CH3OIAHP.js";import"./chunk-L7ZCJVL2.js";import"./chunk-FV6MP3UU.js";import{a as Gs}from"./chunk-X6EEBMFW.js";import{a as ae}from"./chunk-245PXJQJ.js";import{a as Gi}from"./chunk-KZR43RPO.js";import{a as Ss}from"./chunk-QXNKNSJH.js";import{i as zs}from"./chunk-5YO2I2QP.js";import"./chunk-WGXT6BHY.js";import{a as Xs}from"./chunk-FMNMD7QE.js";import{n as Hs}from"./chunk-KVIYCH5A.js";import"./chunk-U43G73LH.js";import{b as Ys,c as Vs}from"./chunk-NMSQZNJG.js";import{c as wi,d as fo,e as co,f as po}from"./chunk-CCCFHF2B.js";import{a as gp,b as wp,c as yp}from"./chunk-PAEQZ7UN.js";import{a as _p}from"./chunk-KDTBVHVU.js";import{a as vs}from"./chunk-CWTKVHHS.js";import"./chunk-PRHPRTXY.js";import{e as ys}from"./chunk-IGCT3RWS.js";import{a as Re,b as ce,c as ht,d as sr,e as xs,f as Cs}from"./chunk-SQ5W4RLM.js";import"./chunk-I27PVEIN.js";import{a as Vr}from"./chunk-Y2PED5BF.js";import"./chunk-RUSRHRGO.js";import"./chunk-IZ5XPPXG.js";import"./chunk-6PN4BR3D.js";import{a as ks}from"./chunk-EWK7ZFVN.js";import{b as us,c as fs}from"./chunk-A23SHFFL.js";import"./chunk-VZ3BFZKL.js";import{a as ps}from"./chunk-T6Z2C3RK.js";import{a as ee}from"./chunk-R2QYIBE7.js";import"./chunk-KT53NMHD.js";import{h as as}from"./chunk-64STH2HN.js";import{o as Ls}from"./chunk-EKQH7XTV.js";import{a as Rs}from"./chunk-R2QKPEWB.js";import"./chunk-RMA2FZOE.js";import{a as Fs,i as js}from"./chunk-KRHB66KZ.js";import{c as Bs,o as qs}from"./chunk-4RHFH7IF.js";import{a as ss,d as ls}from"./chunk-LPTRVNVL.js";import{b as Ws,c as Us}from"./chunk-PH2A2GR3.js";import{d as dt}from"./chunk-2LLM6N6U.js";import{a as pp,b as Ps,c as Ns,g as Ms}from"./chunk-LF2PURXZ.js";import{c as Ds}from"./chunk-JEZIPKDY.js";import{a as Ts,b as Es}from"./chunk-SR2BDP3A.js";import"./chunk-CFT6B56M.js";import"./chunk-WK32FAZW.js";import{a as Os,b as Is}from"./chunk-WMUTUJYX.js";import"./chunk-B23OWGFX.js";import"./chunk-OSWXWF4A.js";import{a as hp}from"./chunk-Q7FJER56.js";import"./chunk-RBTIRMSE.js";import"./chunk-7GZ2ZCGI.js";import{a as $i}from"./chunk-WTP3OIOS.js";import"./chunk-D66ZH3O3.js";import{a as As}from"./chunk-J66W6G6U.js";import"./chunk-YUPWBXXL.js";import"./chunk-XOEPAT5H.js";import{a as Ui,b as Yr}from"./chunk-2TEY7VNJ.js";import"./chunk-CF7BWS4J.js";import{s as _s}from"./chunk-X764QIVO.js";import"./chunk-HISWVX7W.js";import"./chunk-PYJPOVV7.js";import{b as Z}from"./chunk-AO6MUSOH.js";import"./chunk-I435LZHT.js";import{b as ho,c as mo,d as go,e as wo}from"./chunk-SJIW4WAV.js";import"./chunk-SLDECH2O.js";import{a as ct,c as Io,d as Po,e as Do,j as ko,k as No,q as $r,t as Mo,z as Ro}from"./chunk-5JJQQHKZ.js";import{$ as Ca,A as Qo,B as ea,C as ta,D as ra,E as na,F as ia,G as oa,H as aa,I as sa,J as la,K as ua,L as fa,M as ca,Ma as Ya,N as da,O as pa,P as ha,Q as ma,R as ga,Ra as Va,S as wa,T as _a,U as ya,Ua as Xa,V as ba,Va as za,W as va,Wa as Za,X as Sa,Y as Ta,Z as Ea,Za as ar,_ as xa,a as te,aa as Aa,ab as Ja,b as nr,ba as Oa,bb as Qa,c as ir,ca as Ia,cb as es,d as qo,da as Pa,db as ts,e as or,ea as Da,eb as rs,f as Fo,fa as ka,fb as ns,g as jo,ga as Na,gb as is,h as Ho,ha as Ma,hb as os,i as Ko,ia as Ra,ja as La,k as Go,ka as Wa,l as $o,la as Ua,m as Yo,pa as Ba,ra as qa,sa as Fa,ta as ja,u as Vo,ua as Ha,v as Xo,va as Ka,w as zo,wa as Ga,x as Zo,xa as $a,y as Jo,z as Ye}from"./chunk-URG4MCPH.js";import{A as _o,B as $e,C as Gr,Fa as vo,Pa as So,Sa as To,Ta as Ae,Ua as er,ab as Eo,gb as xo,kb as Co,lb as Ao,qa as yo,ra as bo,v as Ge,x as Yi,y as xe}from"./chunk-ZPOCIBPN.js";import"./chunk-CA5MYYD6.js";import"./chunk-RZ7GFYMN.js";import{a as Ce}from"./chunk-IOCZ22XI.js";import{a as Qt,b as Ki,c as fp,g as hs,h as ms,l as gs,o as ws}from"./chunk-EJY3MW2I.js";import"./chunk-3VRAVMMN.js";import{K as oo,L as ao,V as so,W as lo,X as uo,Z as cp,a as Vi,d as Xi,g as zi,h as Zi,i as Ji,j as Qi,k as eo,l as to,m as ro,p as no,q as io}from"./chunk-YJ45QIWT.js";import{a as _i}from"./chunk-WR62TYUO.js";import{b as Ii,d as Me,f as Gt}from"./chunk-2G2AXMFT.js";import{b as ds}from"./chunk-XGFQCNHX.js";import"./chunk-7JF42X5G.js";import"./chunk-4JZ3HIS7.js";import"./chunk-JLA5HXVC.js";import{a as Wi,b as He}from"./chunk-I4WIGQLD.js";import"./chunk-ZNGQ6IUR.js";import"./chunk-JERFAOJH.js";import{b as rr,d as Lo,f as Wo,g as Uo,i as Bo}from"./chunk-JXZFOFB5.js";import{a as Oo}from"./chunk-LYNLETTP.js";import"./chunk-FQ4XEVKF.js";import{c as Kr}from"./chunk-VMYDP774.js";import{a as Ke,b as Hr}from"./chunk-A7LNVEYU.js";import{a as Mi,c as $t,f as Ri,g as Li,h as Yt}from"./chunk-2YWUVAR3.js";import{a as sp,b as lp}from"./chunk-VA2HGDZT.js";import{a as Pi,b as Di,d as ki,e as Ni,f as ft,g as Fr}from"./chunk-AKPDCNMH.js";import{Bb as zt,Cb as Zt,Db as up,Eb as ge,Jb as Hi,Kb as Jt,a as X,b as Fe,c as oe,d as Ne,e as Wr,f as he,h as Ur,m as Ti,qb as Vt,rb as Bi,sb as qi,tb as jr,ub as Xt,vb as Fi,wb as ji}from"./chunk-M54COW6Q.js";import"./chunk-PWWHYQAY.js";import{G as z,H as Oi,I as ut,a as xi,b as Ci,f as Br,j as Ai,n as ap,o as me,r as qr,y as lt}from"./chunk-RIJWHGTU.js";import{A as G,I as Ee,l as yi,o as bi,t as vi,v as B,y as Si}from"./chunk-K4MPEKC5.js";import{a as je}from"./chunk-X6USBUO5.js";import"./chunk-674MHQJQ.js";import{X as st,c as Ei,y as at}from"./chunk-XIGC6FD5.js";import{a as U,g as ot}from"./chunk-CXUPEGDW.js";import"./chunk-QAWZYDPQ.js";import"./chunk-PYTKRRY4.js";import"./chunk-363VDWOO.js";import"./chunk-7B5WANGL.js";import"./chunk-4P4FGPYZ.js";import"./chunk-Y47SQ3XQ.js";import"./chunk-YGNOWOE7.js";import"./chunk-N4GKTC7Y.js";import"./chunk-RYJHESAH.js";import{c as ue,f as Ht,g as fe,p as Kt,q as gi}from"./chunk-DOQ5NSSP.js";import{d as mi}from"./chunk-VULQOB2N.js";import{c as I,f as w,h as ke,l as process,m as a,n as c,o as s}from"./chunk-ICCOEXX5.js";var mt=I((nw,zr)=>{"use strict";a();s();typeof process>"u"||!process.version||process.version.indexOf("v0.")===0||process.version.indexOf("v1.")===0&&process.version.indexOf("v1.8.")!==0?zr.exports={nextTick:bp}:zr.exports=process;function bp(e,t,r,n){if(typeof e!="function")throw new TypeError('"callback" argument must be a function');var i=arguments.length,o,l;switch(i){case 0:case 1:return process.nextTick(e);case 2:return process.nextTick(function(){e.call(null,t)});case 3:return process.nextTick(function(){e.call(null,t,r)});case 4:return process.nextTick(function(){e.call(null,t,r,n)});default:for(o=new Array(i-1),l=0;l<o.length;)o[l++]=arguments[l];return process.nextTick(function(){e.apply(null,o)})}}});var fl=I((aw,ul)=>{a();s();var vp={}.toString;ul.exports=Array.isArray||function(e){return vp.call(e)=="[object Array]"}});var Zr=I((uw,cl)=>{a();s();cl.exports=Ht().EventEmitter});var gt=I((Jr,pl)=>{a();s();var lr=mi(),we=lr.Buffer;function dl(e,t){for(var r in e)t[r]=e[r]}we.from&&we.alloc&&we.allocUnsafe&&we.allocUnsafeSlow?pl.exports=lr:(dl(lr,Jr),Jr.Buffer=Ve);function Ve(e,t,r){return we(e,t,r)}dl(we,Ve);Ve.from=function(e,t,r){if(typeof e=="number")throw new TypeError("Argument must not be a number");return we(e,t,r)};Ve.alloc=function(e,t,r){if(typeof e!="number")throw new TypeError("Argument must be a number");var n=we(e);return t!==void 0?typeof r=="string"?n.fill(t,r):n.fill(t):n.fill(0),n};Ve.allocUnsafe=function(e){if(typeof e!="number")throw new TypeError("Argument must be a number");return we(e)};Ve.allocUnsafeSlow=function(e){if(typeof e!="number")throw new TypeError("Argument must be a number");return lr.SlowBuffer(e)}});var ml=I((hw,Qr)=>{"use strict";a();s();function Sp(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var hl=gt().Buffer,wt=Kt();function Tp(e,t,r){e.copy(t,r)}Qr.exports=function(){function e(){Sp(this,e),this.head=null,this.tail=null,this.length=0}return e.prototype.push=function(r){var n={data:r,next:null};this.length>0?this.tail.next=n:this.head=n,this.tail=n,++this.length},e.prototype.unshift=function(r){var n={data:r,next:this.head};this.length===0&&(this.tail=n),this.head=n,++this.length},e.prototype.shift=function(){if(this.length!==0){var r=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,r}},e.prototype.clear=function(){this.head=this.tail=null,this.length=0},e.prototype.join=function(r){if(this.length===0)return"";for(var n=this.head,i=""+n.data;n=n.next;)i+=r+n.data;return i},e.prototype.concat=function(r){if(this.length===0)return hl.alloc(0);if(this.length===1)return this.head.data;for(var n=hl.allocUnsafe(r>>>0),i=this.head,o=0;i;)Tp(i.data,n,o),o+=i.data.length,i=i.next;return n},e}();wt&&wt.inspect&&wt.inspect.custom&&(Qr.exports.prototype[wt.inspect.custom]=function(){var e=wt.inspect({length:this.length});return this.constructor.name+" "+e})});var en=I((ww,_l)=>{"use strict";a();s();var gl=mt();function Ep(e,t){var r=this,n=this._readableState&&this._readableState.destroyed,i=this._writableState&&this._writableState.destroyed;return n||i?(t?t(e):e&&(!this._writableState||!this._writableState.errorEmitted)&&gl.nextTick(wl,this,e),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(o){!t&&o?(gl.nextTick(wl,r,o),r._writableState&&(r._writableState.errorEmitted=!0)):t&&t(o)}),this)}function xp(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function wl(e,t){e.emit("error",t)}_l.exports={destroy:Ep,undestroy:xp}});var rn=I((bw,Cl)=>{"use strict";a();s();var Le=mt();Cl.exports=j;function bl(e){var t=this;this.next=null,this.entry=null,this.finish=function(){Hp(t,e)}}var Cp=!process.browser&&["v0.10","v0.9."].indexOf(process.version.slice(0,5))>-1?setImmediate:Le.nextTick,Xe;j.WritableState=yt;var vl=Object.create(fe());vl.inherits=ue();var Ap={deprecate:gi()},Sl=Zr(),fr=gt().Buffer,Op=globalThis.Uint8Array||function(){};function Ip(e){return fr.from(e)}function Pp(e){return fr.isBuffer(e)||e instanceof Op}var Tl=en();vl.inherits(j,Sl);function Dp(){}function yt(e,t){Xe=Xe||We(),e=e||{};var r=t instanceof Xe;this.objectMode=!!e.objectMode,r&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var n=e.highWaterMark,i=e.writableHighWaterMark,o=this.objectMode?16:16*1024;n||n===0?this.highWaterMark=n:r&&(i||i===0)?this.highWaterMark=i:this.highWaterMark=o,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var l=e.decodeStrings===!1;this.decodeStrings=!l,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(f){Up(t,f)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new bl(this)}yt.prototype.getBuffer=function(){for(var t=this.bufferedRequest,r=[];t;)r.push(t),t=t.next;return r};(function(){try{Object.defineProperty(yt.prototype,"buffer",{get:Ap.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}})();var ur;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(ur=Function.prototype[Symbol.hasInstance],Object.defineProperty(j,Symbol.hasInstance,{value:function(e){return ur.call(this,e)?!0:this!==j?!1:e&&e._writableState instanceof yt}})):ur=function(e){return e instanceof this};function j(e){if(Xe=Xe||We(),!ur.call(j,this)&&!(this instanceof Xe))return new j(e);this._writableState=new yt(e,this),this.writable=!0,e&&(typeof e.write=="function"&&(this._write=e.write),typeof e.writev=="function"&&(this._writev=e.writev),typeof e.destroy=="function"&&(this._destroy=e.destroy),typeof e.final=="function"&&(this._final=e.final)),Sl.call(this)}j.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))};function kp(e,t){var r=new Error("write after end");e.emit("error",r),Le.nextTick(t,r)}function Np(e,t,r,n){var i=!0,o=!1;return r===null?o=new TypeError("May not write null values to stream"):typeof r!="string"&&r!==void 0&&!t.objectMode&&(o=new TypeError("Invalid non-string/buffer chunk")),o&&(e.emit("error",o),Le.nextTick(n,o),i=!1),i}j.prototype.write=function(e,t,r){var n=this._writableState,i=!1,o=!n.objectMode&&Pp(e);return o&&!fr.isBuffer(e)&&(e=Ip(e)),typeof t=="function"&&(r=t,t=null),o?t="buffer":t||(t=n.defaultEncoding),typeof r!="function"&&(r=Dp),n.ended?kp(this,r):(o||Np(this,n,e,r))&&(n.pendingcb++,i=Rp(this,n,o,e,t,r)),i};j.prototype.cork=function(){var e=this._writableState;e.corked++};j.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,!e.writing&&!e.corked&&!e.finished&&!e.bufferProcessing&&e.bufferedRequest&&El(this,e))};j.prototype.setDefaultEncoding=function(t){if(typeof t=="string"&&(t=t.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+t);return this._writableState.defaultEncoding=t,this};function Mp(e,t,r){return!e.objectMode&&e.decodeStrings!==!1&&typeof t=="string"&&(t=fr.from(t,r)),t}Object.defineProperty(j.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function Rp(e,t,r,n,i,o){if(!r){var l=Mp(t,n,i);n!==l&&(r=!0,i="buffer",n=l)}var f=t.objectMode?1:n.length;t.length+=f;var h=t.length<t.highWaterMark;if(h||(t.needDrain=!0),t.writing||t.corked){var d=t.lastBufferedRequest;t.lastBufferedRequest={chunk:n,encoding:i,isBuf:r,callback:o,next:null},d?d.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else tn(e,t,!1,f,n,i,o);return h}function tn(e,t,r,n,i,o,l){t.writelen=n,t.writecb=l,t.writing=!0,t.sync=!0,r?e._writev(i,t.onwrite):e._write(i,o,t.onwrite),t.sync=!1}function Lp(e,t,r,n,i){--t.pendingcb,r?(Le.nextTick(i,n),Le.nextTick(_t,e,t),e._writableState.errorEmitted=!0,e.emit("error",n)):(i(n),e._writableState.errorEmitted=!0,e.emit("error",n),_t(e,t))}function Wp(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}function Up(e,t){var r=e._writableState,n=r.sync,i=r.writecb;if(Wp(r),t)Lp(e,r,n,t,i);else{var o=xl(r);!o&&!r.corked&&!r.bufferProcessing&&r.bufferedRequest&&El(e,r),n?Cp(yl,e,r,o,i):yl(e,r,o,i)}}function yl(e,t,r,n){r||Bp(e,t),t.pendingcb--,n(),_t(e,t)}function Bp(e,t){t.length===0&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}function El(e,t){t.bufferProcessing=!0;var r=t.bufferedRequest;if(e._writev&&r&&r.next){var n=t.bufferedRequestCount,i=new Array(n),o=t.corkedRequestsFree;o.entry=r;for(var l=0,f=!0;r;)i[l]=r,r.isBuf||(f=!1),r=r.next,l+=1;i.allBuffers=f,tn(e,t,!0,t.length,i,"",o.finish),t.pendingcb++,t.lastBufferedRequest=null,o.next?(t.corkedRequestsFree=o.next,o.next=null):t.corkedRequestsFree=new bl(t),t.bufferedRequestCount=0}else{for(;r;){var h=r.chunk,d=r.encoding,S=r.callback,T=t.objectMode?1:h.length;if(tn(e,t,!1,T,h,d,S),r=r.next,t.bufferedRequestCount--,t.writing)break}r===null&&(t.lastBufferedRequest=null)}t.bufferedRequest=r,t.bufferProcessing=!1}j.prototype._write=function(e,t,r){r(new Error("_write() is not implemented"))};j.prototype._writev=null;j.prototype.end=function(e,t,r){var n=this._writableState;typeof e=="function"?(r=e,e=null,t=null):typeof t=="function"&&(r=t,t=null),e!=null&&this.write(e,t),n.corked&&(n.corked=1,this.uncork()),!n.ending&&!n.finished&&jp(this,n,r)};function xl(e){return e.ending&&e.length===0&&e.bufferedRequest===null&&!e.finished&&!e.writing}function qp(e,t){e._final(function(r){t.pendingcb--,r&&e.emit("error",r),t.prefinished=!0,e.emit("prefinish"),_t(e,t)})}function Fp(e,t){!t.prefinished&&!t.finalCalled&&(typeof e._final=="function"?(t.pendingcb++,t.finalCalled=!0,Le.nextTick(qp,e,t)):(t.prefinished=!0,e.emit("prefinish")))}function _t(e,t){var r=xl(t);return r&&(Fp(e,t),t.pendingcb===0&&(t.finished=!0,e.emit("finish"))),r}function jp(e,t,r){t.ending=!0,_t(e,t),r&&(t.finished?Le.nextTick(r):e.once("finish",r)),t.ended=!0,e.writable=!1}function Hp(e,t,r){var n=e.entry;for(e.entry=null;n;){var i=n.callback;t.pendingcb--,i(r),n=n.next}t.corkedRequestsFree?t.corkedRequestsFree.next=e:t.corkedRequestsFree=e}Object.defineProperty(j.prototype,"destroyed",{get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(e){!this._writableState||(this._writableState.destroyed=e)}});j.prototype.destroy=Tl.destroy;j.prototype._undestroy=Tl.undestroy;j.prototype._destroy=function(e,t){this.end(),t(e)}});var We=I((Tw,Pl)=>{"use strict";a();s();var Al=mt(),Kp=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t};Pl.exports=_e;var Ol=Object.create(fe());Ol.inherits=ue();var Il=an(),on=rn();Ol.inherits(_e,Il);for(nn=Kp(on.prototype),cr=0;cr<nn.length;cr++)dr=nn[cr],_e.prototype[dr]||(_e.prototype[dr]=on.prototype[dr]);var nn,dr,cr;function _e(e){if(!(this instanceof _e))return new _e(e);Il.call(this,e),on.call(this,e),e&&e.readable===!1&&(this.readable=!1),e&&e.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,e&&e.allowHalfOpen===!1&&(this.allowHalfOpen=!1),this.once("end",Gp)}Object.defineProperty(_e.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function Gp(){this.allowHalfOpen||this._writableState.ended||Al.nextTick($p,this)}function $p(e){e.end()}Object.defineProperty(_e.prototype,"destroyed",{get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(e){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=e,this._writableState.destroyed=e)}});_e.prototype._destroy=function(e,t){this.push(null),this.end(),Al.nextTick(t,e)}});var un=I(kl=>{"use strict";a();s();var ln=gt().Buffer,Dl=ln.isEncoding||function(e){switch(e=""+e,e&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function Yp(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}function Vp(e){var t=Yp(e);if(typeof t!="string"&&(ln.isEncoding===Dl||!Dl(e)))throw new Error("Unknown encoding: "+e);return t||e}kl.StringDecoder=bt;function bt(e){this.encoding=Vp(e);var t;switch(this.encoding){case"utf16le":this.text=eh,this.end=th,t=4;break;case"utf8":this.fillLast=Zp,t=4;break;case"base64":this.text=rh,this.end=nh,t=3;break;default:this.write=ih,this.end=oh;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=ln.allocUnsafe(t)}bt.prototype.write=function(e){if(e.length===0)return"";var t,r;if(this.lastNeed){if(t=this.fillLast(e),t===void 0)return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<e.length?t?t+this.text(e,r):this.text(e,r):t||""};bt.prototype.end=Qp;bt.prototype.text=Jp;bt.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length};function sn(e){return e<=127?0:e>>5===6?2:e>>4===14?3:e>>3===30?4:e>>6===2?-1:-2}function Xp(e,t,r){var n=t.length-1;if(n<r)return 0;var i=sn(t[n]);return i>=0?(i>0&&(e.lastNeed=i-1),i):--n<r||i===-2?0:(i=sn(t[n]),i>=0?(i>0&&(e.lastNeed=i-2),i):--n<r||i===-2?0:(i=sn(t[n]),i>=0?(i>0&&(i===2?i=0:e.lastNeed=i-3),i):0))}function zp(e,t,r){if((t[0]&192)!==128)return e.lastNeed=0,"\uFFFD";if(e.lastNeed>1&&t.length>1){if((t[1]&192)!==128)return e.lastNeed=1,"\uFFFD";if(e.lastNeed>2&&t.length>2&&(t[2]&192)!==128)return e.lastNeed=2,"\uFFFD"}}function Zp(e){var t=this.lastTotal-this.lastNeed,r=zp(this,e,t);if(r!==void 0)return r;if(this.lastNeed<=e.length)return e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,t,0,e.length),this.lastNeed-=e.length}function Jp(e,t){var r=Xp(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=r;var n=e.length-(r-this.lastNeed);return e.copy(this.lastChar,0,n),e.toString("utf8",t,n)}function Qp(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"\uFFFD":t}function eh(e,t){if((e.length-t)%2===0){var r=e.toString("utf16le",t);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function th(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,r)}return t}function rh(e,t){var r=(e.length-t)%3;return r===0?e.toString("base64",t):(this.lastNeed=3-r,this.lastTotal=3,r===1?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-r))}function nh(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function ih(e){return e.toString(this.encoding)}function oh(e){return e&&e.length?this.write(e):""}});var an=I((Pw,Kl)=>{"use strict";a();s();var Ze=mt();Kl.exports=L;var ah=fl(),vt;L.ReadableState=Bl;var Iw=Ht().EventEmitter,Ll=function(e,t){return e.listeners(t).length},hn=Zr(),St=gt().Buffer,sh=globalThis.Uint8Array||function(){};function lh(e){return St.from(e)}function uh(e){return St.isBuffer(e)||e instanceof sh}var Wl=Object.create(fe());Wl.inherits=ue();var fn=Kt(),P=void 0;fn&&fn.debuglog?P=fn.debuglog("stream"):P=function(){};var fh=ml(),Ul=en(),ze;Wl.inherits(L,hn);var cn=["error","close","destroy","pause","resume"];function ch(e,t,r){if(typeof e.prependListener=="function")return e.prependListener(t,r);!e._events||!e._events[t]?e.on(t,r):ah(e._events[t])?e._events[t].unshift(r):e._events[t]=[r,e._events[t]]}function Bl(e,t){vt=vt||We(),e=e||{};var r=t instanceof vt;this.objectMode=!!e.objectMode,r&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var n=e.highWaterMark,i=e.readableHighWaterMark,o=this.objectMode?16:16*1024;n||n===0?this.highWaterMark=n:r&&(i||i===0)?this.highWaterMark=i:this.highWaterMark=o,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new fh,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(ze||(ze=un().StringDecoder),this.decoder=new ze(e.encoding),this.encoding=e.encoding)}function L(e){if(vt=vt||We(),!(this instanceof L))return new L(e);this._readableState=new Bl(e,this),this.readable=!0,e&&(typeof e.read=="function"&&(this._read=e.read),typeof e.destroy=="function"&&(this._destroy=e.destroy)),hn.call(this)}Object.defineProperty(L.prototype,"destroyed",{get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(e){!this._readableState||(this._readableState.destroyed=e)}});L.prototype.destroy=Ul.destroy;L.prototype._undestroy=Ul.undestroy;L.prototype._destroy=function(e,t){this.push(null),t(e)};L.prototype.push=function(e,t){var r=this._readableState,n;return r.objectMode?n=!0:typeof e=="string"&&(t=t||r.defaultEncoding,t!==r.encoding&&(e=St.from(e,t),t=""),n=!0),ql(this,e,t,!1,n)};L.prototype.unshift=function(e){return ql(this,e,null,!0,!1)};function ql(e,t,r,n,i){var o=e._readableState;if(t===null)o.reading=!1,mh(e,o);else{var l;i||(l=dh(o,t)),l?e.emit("error",l):o.objectMode||t&&t.length>0?(typeof t!="string"&&!o.objectMode&&Object.getPrototypeOf(t)!==St.prototype&&(t=lh(t)),n?o.endEmitted?e.emit("error",new Error("stream.unshift() after end event")):dn(e,o,t,!0):o.ended?e.emit("error",new Error("stream.push() after EOF")):(o.reading=!1,o.decoder&&!r?(t=o.decoder.write(t),o.objectMode||t.length!==0?dn(e,o,t,!1):Fl(e,o)):dn(e,o,t,!1))):n||(o.reading=!1)}return ph(o)}function dn(e,t,r,n){t.flowing&&t.length===0&&!t.sync?(e.emit("data",r),e.read(0)):(t.length+=t.objectMode?1:r.length,n?t.buffer.unshift(r):t.buffer.push(r),t.needReadable&&pr(e)),Fl(e,t)}function dh(e,t){var r;return!uh(t)&&typeof t!="string"&&t!==void 0&&!e.objectMode&&(r=new TypeError("Invalid non-string/buffer chunk")),r}function ph(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||e.length===0)}L.prototype.isPaused=function(){return this._readableState.flowing===!1};L.prototype.setEncoding=function(e){return ze||(ze=un().StringDecoder),this._readableState.decoder=new ze(e),this._readableState.encoding=e,this};var Nl=8388608;function hh(e){return e>=Nl?e=Nl:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}function Ml(e,t){return e<=0||t.length===0&&t.ended?0:t.objectMode?1:e!==e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=hh(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}L.prototype.read=function(e){P("read",e),e=parseInt(e,10);var t=this._readableState,r=e;if(e!==0&&(t.emittedReadable=!1),e===0&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return P("read: emitReadable",t.length,t.ended),t.length===0&&t.ended?pn(this):pr(this),null;if(e=Ml(e,t),e===0&&t.ended)return t.length===0&&pn(this),null;var n=t.needReadable;P("need readable",n),(t.length===0||t.length-e<t.highWaterMark)&&(n=!0,P("length less than watermark",n)),t.ended||t.reading?(n=!1,P("reading or ended",n)):n&&(P("do read"),t.reading=!0,t.sync=!0,t.length===0&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=Ml(r,t)));var i;return e>0?i=jl(e,t):i=null,i===null?(t.needReadable=!0,e=0):t.length-=e,t.length===0&&(t.ended||(t.needReadable=!0),r!==e&&t.ended&&pn(this)),i!==null&&this.emit("data",i),i};function mh(e,t){if(!t.ended){if(t.decoder){var r=t.decoder.end();r&&r.length&&(t.buffer.push(r),t.length+=t.objectMode?1:r.length)}t.ended=!0,pr(e)}}function pr(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(P("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?Ze.nextTick(Rl,e):Rl(e))}function Rl(e){P("emit readable"),e.emit("readable"),mn(e)}function Fl(e,t){t.readingMore||(t.readingMore=!0,Ze.nextTick(gh,e,t))}function gh(e,t){for(var r=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(P("maybeReadMore read 0"),e.read(0),r!==t.length);)r=t.length;t.readingMore=!1}L.prototype._read=function(e){this.emit("error",new Error("_read() is not implemented"))};L.prototype.pipe=function(e,t){var r=this,n=this._readableState;switch(n.pipesCount){case 0:n.pipes=e;break;case 1:n.pipes=[n.pipes,e];break;default:n.pipes.push(e);break}n.pipesCount+=1,P("pipe count=%d opts=%j",n.pipesCount,t);var i=(!t||t.end!==!1)&&e!==process.stdout&&e!==process.stderr,o=i?f:y;n.endEmitted?Ze.nextTick(o):r.once("end",o),e.on("unpipe",l);function l(b,v){P("onunpipe"),b===r&&v&&v.hasUnpiped===!1&&(v.hasUnpiped=!0,S())}function f(){P("onend"),e.end()}var h=wh(r);e.on("drain",h);var d=!1;function S(){P("cleanup"),e.removeListener("close",x),e.removeListener("finish",p),e.removeListener("drain",h),e.removeListener("error",m),e.removeListener("unpipe",l),r.removeListener("end",f),r.removeListener("end",y),r.removeListener("data",C),d=!0,n.awaitDrain&&(!e._writableState||e._writableState.needDrain)&&h()}var T=!1;r.on("data",C);function C(b){P("ondata"),T=!1;var v=e.write(b);v===!1&&!T&&((n.pipesCount===1&&n.pipes===e||n.pipesCount>1&&Hl(n.pipes,e)!==-1)&&!d&&(P("false write response, pause",r._readableState.awaitDrain),r._readableState.awaitDrain++,T=!0),r.pause())}function m(b){P("onerror",b),y(),e.removeListener("error",m),Ll(e,"error")===0&&e.emit("error",b)}ch(e,"error",m);function x(){e.removeListener("finish",p),y()}e.once("close",x);function p(){P("onfinish"),e.removeListener("close",x),y()}e.once("finish",p);function y(){P("unpipe"),r.unpipe(e)}return e.emit("pipe",r),n.flowing||(P("pipe resume"),r.resume()),e};function wh(e){return function(){var t=e._readableState;P("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,t.awaitDrain===0&&Ll(e,"data")&&(t.flowing=!0,mn(e))}}L.prototype.unpipe=function(e){var t=this._readableState,r={hasUnpiped:!1};if(t.pipesCount===0)return this;if(t.pipesCount===1)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,r),this);if(!e){var n=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var o=0;o<i;o++)n[o].emit("unpipe",this,r);return this}var l=Hl(t.pipes,e);return l===-1?this:(t.pipes.splice(l,1),t.pipesCount-=1,t.pipesCount===1&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,r),this)};L.prototype.on=function(e,t){var r=hn.prototype.on.call(this,e,t);if(e==="data")this._readableState.flowing!==!1&&this.resume();else if(e==="readable"){var n=this._readableState;!n.endEmitted&&!n.readableListening&&(n.readableListening=n.needReadable=!0,n.emittedReadable=!1,n.reading?n.length&&pr(this):Ze.nextTick(_h,this))}return r};L.prototype.addListener=L.prototype.on;function _h(e){P("readable nexttick read 0"),e.read(0)}L.prototype.resume=function(){var e=this._readableState;return e.flowing||(P("resume"),e.flowing=!0,yh(this,e)),this};function yh(e,t){t.resumeScheduled||(t.resumeScheduled=!0,Ze.nextTick(bh,e,t))}function bh(e,t){t.reading||(P("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),mn(e),t.flowing&&!t.reading&&e.read(0)}L.prototype.pause=function(){return P("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(P("pause"),this._readableState.flowing=!1,this.emit("pause")),this};function mn(e){var t=e._readableState;for(P("flow",t.flowing);t.flowing&&e.read()!==null;);}L.prototype.wrap=function(e){var t=this,r=this._readableState,n=!1;e.on("end",function(){if(P("wrapped end"),r.decoder&&!r.ended){var l=r.decoder.end();l&&l.length&&t.push(l)}t.push(null)}),e.on("data",function(l){if(P("wrapped data"),r.decoder&&(l=r.decoder.write(l)),!(r.objectMode&&l==null)&&!(!r.objectMode&&(!l||!l.length))){var f=t.push(l);f||(n=!0,e.pause())}});for(var i in e)this[i]===void 0&&typeof e[i]=="function"&&(this[i]=function(l){return function(){return e[l].apply(e,arguments)}}(i));for(var o=0;o<cn.length;o++)e.on(cn[o],this.emit.bind(this,cn[o]));return this._read=function(l){P("wrapped _read",l),n&&(n=!1,e.resume())},this};Object.defineProperty(L.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}});L._fromList=jl;function jl(e,t){if(t.length===0)return null;var r;return t.objectMode?r=t.buffer.shift():!e||e>=t.length?(t.decoder?r=t.buffer.join(""):t.buffer.length===1?r=t.buffer.head.data:r=t.buffer.concat(t.length),t.buffer.clear()):r=vh(e,t.buffer,t.decoder),r}function vh(e,t,r){var n;return e<t.head.data.length?(n=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):e===t.head.data.length?n=t.shift():n=r?Sh(e,t):Th(e,t),n}function Sh(e,t){var r=t.head,n=1,i=r.data;for(e-=i.length;r=r.next;){var o=r.data,l=e>o.length?o.length:e;if(l===o.length?i+=o:i+=o.slice(0,e),e-=l,e===0){l===o.length?(++n,r.next?t.head=r.next:t.head=t.tail=null):(t.head=r,r.data=o.slice(l));break}++n}return t.length-=n,i}function Th(e,t){var r=St.allocUnsafe(e),n=t.head,i=1;for(n.data.copy(r),e-=n.data.length;n=n.next;){var o=n.data,l=e>o.length?o.length:e;if(o.copy(r,r.length-e,0,l),e-=l,e===0){l===o.length?(++i,n.next?t.head=n.next:t.head=t.tail=null):(t.head=n,n.data=o.slice(l));break}++i}return t.length-=i,r}function pn(e){var t=e._readableState;if(t.length>0)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,Ze.nextTick(Eh,t,e))}function Eh(e,t){!e.endEmitted&&e.length===0&&(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function Hl(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}});var gn=I((Nw,Yl)=>{"use strict";a();s();Yl.exports=ye;var hr=We(),$l=Object.create(fe());$l.inherits=ue();$l.inherits(ye,hr);function xh(e,t){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(!n)return this.emit("error",new Error("write callback called multiple times"));r.writechunk=null,r.writecb=null,t!=null&&this.push(t),n(e);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function ye(e){if(!(this instanceof ye))return new ye(e);hr.call(this,e),this._transformState={afterTransform:xh.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&(typeof e.transform=="function"&&(this._transform=e.transform),typeof e.flush=="function"&&(this._flush=e.flush)),this.on("prefinish",Ch)}function Ch(){var e=this;typeof this._flush=="function"?this._flush(function(t,r){Gl(e,t,r)}):Gl(this,null,null)}ye.prototype.push=function(e,t){return this._transformState.needTransform=!1,hr.prototype.push.call(this,e,t)};ye.prototype._transform=function(e,t,r){throw new Error("_transform() is not implemented")};ye.prototype._write=function(e,t,r){var n=this._transformState;if(n.writecb=r,n.writechunk=e,n.writeencoding=t,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}};ye.prototype._read=function(e){var t=this._transformState;t.writechunk!==null&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0};ye.prototype._destroy=function(e,t){var r=this;hr.prototype._destroy.call(this,e,function(n){t(n),r.emit("close")})};function Gl(e,t,r){if(t)return e.emit("error",t);if(r!=null&&e.push(r),e._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(e._transformState.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}});var Zl=I((Lw,zl)=>{"use strict";a();s();zl.exports=Tt;var Vl=gn(),Xl=Object.create(fe());Xl.inherits=ue();Xl.inherits(Tt,Vl);function Tt(e){if(!(this instanceof Tt))return new Tt(e);Vl.call(this,e)}Tt.prototype._transform=function(e,t,r){r(null,e)}});var Ql=I((de,Jl)=>{a();s();de=Jl.exports=an();de.Stream=de;de.Readable=de;de.Writable=rn();de.Duplex=We();de.Transform=gn();de.PassThrough=Zl()});var tu=I((Fw,yn)=>{a();s();var eu=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof window.msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto);eu?(wn=new Uint8Array(16),yn.exports=function(){return eu(wn),wn}):(_n=new Array(16),yn.exports=function(){for(var t=0,r;t<16;t++)(t&3)===0&&(r=Math.random()*4294967296),_n[t]=r>>>((t&3)<<3)&255;return _n});var wn,_n});var iu=I((Kw,nu)=>{a();s();var ru=[];for(Et=0;Et<256;++Et)ru[Et]=(Et+256).toString(16).substr(1);var Et;function Ah(e,t){var r=t||0,n=ru;return[n[e[r++]],n[e[r++]],n[e[r++]],n[e[r++]],"-",n[e[r++]],n[e[r++]],"-",n[e[r++]],n[e[r++]],"-",n[e[r++]],n[e[r++]],"-",n[e[r++]],n[e[r++]],n[e[r++]],n[e[r++]],n[e[r++]],n[e[r++]]].join("")}nu.exports=Ah});var au=I((Yw,ou)=>{a();s();var Oh=tu(),Ih=iu();function Ph(e,t,r){var n=t&&r||0;typeof e=="string"&&(t=e==="binary"?new Array(16):null,e=null),e=e||{};var i=e.random||(e.rng||Oh)();if(i[6]=i[6]&15|64,i[8]=i[8]&63|128,t)for(var o=0;o<16;++o)t[n+o]=i[o];return t||Ih(i)}ou.exports=Ph});var uu=I((zw,lu)=>{a();s();var su=Ql().Duplex,Dh=Kt().inherits,kh=au();lu.exports=Oe;Dh(Oe,su);function Oe(){su.call(this,{objectMode:!0}),this._payloads={}}Oe.prototype.send=function(e){throw new Error('StreamProvider - does not support synchronous RPC calls. called: "'+e.method+'"')};Oe.prototype.sendAsync=function(e,t){let r=e.id,n=kh();if(e.id=n,Array.isArray(e)&&e.length===0)return t(null,[]);this._payloads[n]=[t,r],this.push(e)};Oe.prototype.isConnected=function(){return!0};Oe.prototype._onResponse=function(e){let t=e.id,r=this._payloads[t];if(!r)throw new Error(`StreamProvider - Unknown response id for response: ${e}`);delete this._payloads[t];let n=r[0];e.id=r[1],setTimeout(function(){n(null,e)})};Oe.prototype._read=Nh;Oe.prototype._write=function(e,t,r){this._onResponse(e),r()};function Nh(){}});var Fu=I((Fb,qu)=>{a();s();function rm(e,t,r){var n=-1,i=e.length;t<0&&(t=-t>i?0:i+t),r=r>i?i:r,r<0&&(r+=i),i=t>r?0:r-t>>>0,t>>>=0;for(var o=Array(i);++n<i;)o[n]=e[n+t];return o}qu.exports=rm});var Hu=I((Kb,ju)=>{a();s();var nm=Fu(),im=dp(),om=pp(),am=Math.ceil,sm=Math.max;function lm(e,t,r){(r?im(e,t,r):t===void 0)?t=1:t=sm(om(t),0);var n=e==null?0:e.length;if(!n||t<1)return[];for(var i=0,o=0,l=Array(am(n/t));i<n;)l[o++]=nm(e,i,i+=t);return l}ju.exports=lm});var Mt=I((Yx,Xn)=>{"use strict";a();s();!process.version||process.version.indexOf("v0.")===0||process.version.indexOf("v1.")===0&&process.version.indexOf("v1.8.")!==0?Xn.exports=Rm:Xn.exports=process.nextTick;function Rm(e,t,r,n){if(typeof e!="function")throw new TypeError('"callback" argument must be a function');var i=arguments.length,o,l;switch(i){case 0:case 1:return process.nextTick(e);case 2:return process.nextTick(function(){e.call(null,t)});case 3:return process.nextTick(function(){e.call(null,t,r)});case 4:return process.nextTick(function(){e.call(null,t,r,n)});default:for(o=new Array(i-1),l=0;l<o.length;)o[l++]=arguments[l];return process.nextTick(function(){e.apply(null,o)})}}});var ed=I((zx,Qc)=>{a();s();var Lm={}.toString;Qc.exports=Array.isArray||function(e){return Lm.call(e)=="[object Array]"}});var zn=I((Qx,td)=>{a();s();td.exports=Ht().EventEmitter});var Rt=I((Zn,nd)=>{a();s();var Pr=mi(),ve=Pr.Buffer;function rd(e,t){for(var r in e)t[r]=e[r]}ve.from&&ve.alloc&&ve.allocUnsafe&&ve.allocUnsafeSlow?nd.exports=Pr:(rd(Pr,Zn),Zn.Buffer=et);function et(e,t,r){return ve(e,t,r)}rd(ve,et);et.from=function(e,t,r){if(typeof e=="number")throw new TypeError("Argument must not be a number");return ve(e,t,r)};et.alloc=function(e,t,r){if(typeof e!="number")throw new TypeError("Argument must be a number");var n=ve(e);return t!==void 0?typeof r=="string"?n.fill(t,r):n.fill(t):n.fill(0),n};et.allocUnsafe=function(e){if(typeof e!="number")throw new TypeError("Argument must be a number");return ve(e)};et.allocUnsafeSlow=function(e){if(typeof e!="number")throw new TypeError("Argument must be a number");return Pr.SlowBuffer(e)}});var ad=I((iC,od)=>{"use strict";a();s();function Wm(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var id=Rt().Buffer;function Um(e,t,r){e.copy(t,r)}od.exports=function(){function e(){Wm(this,e),this.head=null,this.tail=null,this.length=0}return e.prototype.push=function(r){var n={data:r,next:null};this.length>0?this.tail.next=n:this.head=n,this.tail=n,++this.length},e.prototype.unshift=function(r){var n={data:r,next:this.head};this.length===0&&(this.tail=n),this.head=n,++this.length},e.prototype.shift=function(){if(this.length!==0){var r=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,r}},e.prototype.clear=function(){this.head=this.tail=null,this.length=0},e.prototype.join=function(r){if(this.length===0)return"";for(var n=this.head,i=""+n.data;n=n.next;)i+=r+n.data;return i},e.prototype.concat=function(r){if(this.length===0)return id.alloc(0);if(this.length===1)return this.head.data;for(var n=id.allocUnsafe(r>>>0),i=this.head,o=0;i;)Um(i.data,n,o),o+=i.data.length,i=i.next;return n},e}()});var Jn=I((sC,ud)=>{"use strict";a();s();var sd=Mt();function Bm(e,t){var r=this,n=this._readableState&&this._readableState.destroyed,i=this._writableState&&this._writableState.destroyed;if(n||i){t?t(e):e&&(!this._writableState||!this._writableState.errorEmitted)&&sd(ld,this,e);return}this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(o){!t&&o?(sd(ld,r,o),r._writableState&&(r._writableState.errorEmitted=!0)):t&&t(o)})}function qm(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function ld(e,t){e.emit("error",t)}ud.exports={destroy:Bm,undestroy:qm}});var ei=I((fC,wd)=>{"use strict";a();s();var Be=Mt();wd.exports=K;function cd(e){var t=this;this.next=null,this.entry=null,this.finish=function(){ig(t,e)}}var Fm=!process.browser&&["v0.10","v0.9."].indexOf(process.version.slice(0,5))>-1?setImmediate:Be,tt;K.WritableState=Wt;var dd=fe();dd.inherits=ue();var jm={deprecate:gi()},pd=zn(),kr=Rt().Buffer,Hm=globalThis.Uint8Array||function(){};function Km(e){return kr.from(e)}function Gm(e){return kr.isBuffer(e)||e instanceof Hm}var hd=Jn();dd.inherits(K,pd);function $m(){}function Wt(e,t){tt=tt||qe(),e=e||{},this.objectMode=!!e.objectMode,t instanceof tt&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var r=e.highWaterMark,n=this.objectMode?16:16*1024;this.highWaterMark=r||r===0?r:n,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var i=e.decodeStrings===!1;this.decodeStrings=!i,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(o){Qm(t,o)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new cd(this)}Wt.prototype.getBuffer=function(){for(var t=this.bufferedRequest,r=[];t;)r.push(t),t=t.next;return r};(function(){try{Object.defineProperty(Wt.prototype,"buffer",{get:jm.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}})();var Dr;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(Dr=Function.prototype[Symbol.hasInstance],Object.defineProperty(K,Symbol.hasInstance,{value:function(e){return Dr.call(this,e)?!0:e&&e._writableState instanceof Wt}})):Dr=function(e){return e instanceof this};function K(e){if(tt=tt||qe(),!Dr.call(K,this)&&!(this instanceof tt))return new K(e);this._writableState=new Wt(e,this),this.writable=!0,e&&(typeof e.write=="function"&&(this._write=e.write),typeof e.writev=="function"&&(this._writev=e.writev),typeof e.destroy=="function"&&(this._destroy=e.destroy),typeof e.final=="function"&&(this._final=e.final)),pd.call(this)}K.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))};function Ym(e,t){var r=new Error("write after end");e.emit("error",r),Be(t,r)}function Vm(e,t,r,n){var i=!0,o=!1;return r===null?o=new TypeError("May not write null values to stream"):typeof r!="string"&&r!==void 0&&!t.objectMode&&(o=new TypeError("Invalid non-string/buffer chunk")),o&&(e.emit("error",o),Be(n,o),i=!1),i}K.prototype.write=function(e,t,r){var n=this._writableState,i=!1,o=Gm(e)&&!n.objectMode;return o&&!kr.isBuffer(e)&&(e=Km(e)),typeof t=="function"&&(r=t,t=null),o?t="buffer":t||(t=n.defaultEncoding),typeof r!="function"&&(r=$m),n.ended?Ym(this,r):(o||Vm(this,n,e,r))&&(n.pendingcb++,i=zm(this,n,o,e,t,r)),i};K.prototype.cork=function(){var e=this._writableState;e.corked++};K.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,!e.writing&&!e.corked&&!e.finished&&!e.bufferProcessing&&e.bufferedRequest&&md(this,e))};K.prototype.setDefaultEncoding=function(t){if(typeof t=="string"&&(t=t.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+t);return this._writableState.defaultEncoding=t,this};function Xm(e,t,r){return!e.objectMode&&e.decodeStrings!==!1&&typeof t=="string"&&(t=kr.from(t,r)),t}function zm(e,t,r,n,i,o){if(!r){var l=Xm(t,n,i);n!==l&&(r=!0,i="buffer",n=l)}var f=t.objectMode?1:n.length;t.length+=f;var h=t.length<t.highWaterMark;if(h||(t.needDrain=!0),t.writing||t.corked){var d=t.lastBufferedRequest;t.lastBufferedRequest={chunk:n,encoding:i,isBuf:r,callback:o,next:null},d?d.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else Qn(e,t,!1,f,n,i,o);return h}function Qn(e,t,r,n,i,o,l){t.writelen=n,t.writecb=l,t.writing=!0,t.sync=!0,r?e._writev(i,t.onwrite):e._write(i,o,t.onwrite),t.sync=!1}function Zm(e,t,r,n,i){--t.pendingcb,r?(Be(i,n),Be(Lt,e,t),e._writableState.errorEmitted=!0,e.emit("error",n)):(i(n),e._writableState.errorEmitted=!0,e.emit("error",n),Lt(e,t))}function Jm(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}function Qm(e,t){var r=e._writableState,n=r.sync,i=r.writecb;if(Jm(r),t)Zm(e,r,n,t,i);else{var o=gd(r);!o&&!r.corked&&!r.bufferProcessing&&r.bufferedRequest&&md(e,r),n?Fm(fd,e,r,o,i):fd(e,r,o,i)}}function fd(e,t,r,n){r||eg(e,t),t.pendingcb--,n(),Lt(e,t)}function eg(e,t){t.length===0&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}function md(e,t){t.bufferProcessing=!0;var r=t.bufferedRequest;if(e._writev&&r&&r.next){var n=t.bufferedRequestCount,i=new Array(n),o=t.corkedRequestsFree;o.entry=r;for(var l=0,f=!0;r;)i[l]=r,r.isBuf||(f=!1),r=r.next,l+=1;i.allBuffers=f,Qn(e,t,!0,t.length,i,"",o.finish),t.pendingcb++,t.lastBufferedRequest=null,o.next?(t.corkedRequestsFree=o.next,o.next=null):t.corkedRequestsFree=new cd(t)}else{for(;r;){var h=r.chunk,d=r.encoding,S=r.callback,T=t.objectMode?1:h.length;if(Qn(e,t,!1,T,h,d,S),r=r.next,t.writing)break}r===null&&(t.lastBufferedRequest=null)}t.bufferedRequestCount=0,t.bufferedRequest=r,t.bufferProcessing=!1}K.prototype._write=function(e,t,r){r(new Error("_write() is not implemented"))};K.prototype._writev=null;K.prototype.end=function(e,t,r){var n=this._writableState;typeof e=="function"?(r=e,e=null,t=null):typeof t=="function"&&(r=t,t=null),e!=null&&this.write(e,t),n.corked&&(n.corked=1,this.uncork()),!n.ending&&!n.finished&&ng(this,n,r)};function gd(e){return e.ending&&e.length===0&&e.bufferedRequest===null&&!e.finished&&!e.writing}function tg(e,t){e._final(function(r){t.pendingcb--,r&&e.emit("error",r),t.prefinished=!0,e.emit("prefinish"),Lt(e,t)})}function rg(e,t){!t.prefinished&&!t.finalCalled&&(typeof e._final=="function"?(t.pendingcb++,t.finalCalled=!0,Be(tg,e,t)):(t.prefinished=!0,e.emit("prefinish")))}function Lt(e,t){var r=gd(t);return r&&(rg(e,t),t.pendingcb===0&&(t.finished=!0,e.emit("finish"))),r}function ng(e,t,r){t.ending=!0,Lt(e,t),r&&(t.finished?Be(r):e.once("finish",r)),t.ended=!0,e.writable=!1}function ig(e,t,r){var n=e.entry;for(e.entry=null;n;){var i=n.callback;t.pendingcb--,i(r),n=n.next}t.corkedRequestsFree?t.corkedRequestsFree.next=e:t.corkedRequestsFree=e}Object.defineProperty(K.prototype,"destroyed",{get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(e){!this._writableState||(this._writableState.destroyed=e)}});K.prototype.destroy=hd.destroy;K.prototype._undestroy=hd.undestroy;K.prototype._destroy=function(e,t){this.end(),t(e)}});var qe=I((pC,Sd)=>{"use strict";a();s();var yd=Mt(),og=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t};Sd.exports=De;var bd=fe();bd.inherits=ue();var vd=ri(),ti=ei();bd.inherits(De,vd);var _d=og(ti.prototype);for(Nr=0;Nr<_d.length;Nr++)Mr=_d[Nr],De.prototype[Mr]||(De.prototype[Mr]=ti.prototype[Mr]);var Mr,Nr;function De(e){if(!(this instanceof De))return new De(e);vd.call(this,e),ti.call(this,e),e&&e.readable===!1&&(this.readable=!1),e&&e.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,e&&e.allowHalfOpen===!1&&(this.allowHalfOpen=!1),this.once("end",ag)}function ag(){this.allowHalfOpen||this._writableState.ended||yd(sg,this)}function sg(e){e.end()}Object.defineProperty(De.prototype,"destroyed",{get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(e){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=e,this._writableState.destroyed=e)}});De.prototype._destroy=function(e,t){this.push(null),this.end(),yd(t,e)}});var oi=I(Ed=>{"use strict";a();s();var ii=Rt().Buffer,Td=ii.isEncoding||function(e){switch(e=""+e,e&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function lg(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}function ug(e){var t=lg(e);if(typeof t!="string"&&(ii.isEncoding===Td||!Td(e)))throw new Error("Unknown encoding: "+e);return t||e}Ed.StringDecoder=Ut;function Ut(e){this.encoding=ug(e);var t;switch(this.encoding){case"utf16le":this.text=mg,this.end=gg,t=4;break;case"utf8":this.fillLast=dg,t=4;break;case"base64":this.text=wg,this.end=_g,t=3;break;default:this.write=yg,this.end=bg;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=ii.allocUnsafe(t)}Ut.prototype.write=function(e){if(e.length===0)return"";var t,r;if(this.lastNeed){if(t=this.fillLast(e),t===void 0)return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<e.length?t?t+this.text(e,r):this.text(e,r):t||""};Ut.prototype.end=hg;Ut.prototype.text=pg;Ut.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length};function ni(e){return e<=127?0:e>>5===6?2:e>>4===14?3:e>>3===30?4:-1}function fg(e,t,r){var n=t.length-1;if(n<r)return 0;var i=ni(t[n]);return i>=0?(i>0&&(e.lastNeed=i-1),i):--n<r?0:(i=ni(t[n]),i>=0?(i>0&&(e.lastNeed=i-2),i):--n<r?0:(i=ni(t[n]),i>=0?(i>0&&(i===2?i=0:e.lastNeed=i-3),i):0))}function cg(e,t,r){if((t[0]&192)!==128)return e.lastNeed=0,"\uFFFD".repeat(r);if(e.lastNeed>1&&t.length>1){if((t[1]&192)!==128)return e.lastNeed=1,"\uFFFD".repeat(r+1);if(e.lastNeed>2&&t.length>2&&(t[2]&192)!==128)return e.lastNeed=2,"\uFFFD".repeat(r+2)}}function dg(e){var t=this.lastTotal-this.lastNeed,r=cg(this,e,t);if(r!==void 0)return r;if(this.lastNeed<=e.length)return e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,t,0,e.length),this.lastNeed-=e.length}function pg(e,t){var r=fg(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=r;var n=e.length-(r-this.lastNeed);return e.copy(this.lastChar,0,n),e.toString("utf8",t,n)}function hg(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"\uFFFD".repeat(this.lastTotal-this.lastNeed):t}function mg(e,t){if((e.length-t)%2===0){var r=e.toString("utf16le",t);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}function gg(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,r)}return t}function wg(e,t){var r=(e.length-t)%3;return r===0?e.toString("base64",t):(this.lastNeed=3-r,this.lastTotal=3,r===1?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-r))}function _g(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}function yg(e){return e.toString(this.encoding)}function bg(e){return e&&e.length?this.write(e):""}});var ri=I((bC,Ld)=>{"use strict";a();s();var nt=Mt();Ld.exports=W;var vg=ed(),Bt;W.ReadableState=Dd;var yC=Ht().EventEmitter,Od=function(e,t){return e.listeners(t).length},fi=zn(),qt=Rt().Buffer,Sg=globalThis.Uint8Array||function(){};function Tg(e){return qt.from(e)}function Eg(e){return qt.isBuffer(e)||e instanceof Sg}var Id=fe();Id.inherits=ue();var ai=Kt(),D=void 0;ai&&ai.debuglog?D=ai.debuglog("stream"):D=function(){};var xg=ad(),Pd=Jn(),rt;Id.inherits(W,fi);var si=["error","close","destroy","pause","resume"];function Cg(e,t,r){if(typeof e.prependListener=="function")return e.prependListener(t,r);!e._events||!e._events[t]?e.on(t,r):vg(e._events[t])?e._events[t].unshift(r):e._events[t]=[r,e._events[t]]}function Dd(e,t){Bt=Bt||qe(),e=e||{},this.objectMode=!!e.objectMode,t instanceof Bt&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var r=e.highWaterMark,n=this.objectMode?16:16*1024;this.highWaterMark=r||r===0?r:n,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new xg,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(rt||(rt=oi().StringDecoder),this.decoder=new rt(e.encoding),this.encoding=e.encoding)}function W(e){if(Bt=Bt||qe(),!(this instanceof W))return new W(e);this._readableState=new Dd(e,this),this.readable=!0,e&&(typeof e.read=="function"&&(this._read=e.read),typeof e.destroy=="function"&&(this._destroy=e.destroy)),fi.call(this)}Object.defineProperty(W.prototype,"destroyed",{get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(e){!this._readableState||(this._readableState.destroyed=e)}});W.prototype.destroy=Pd.destroy;W.prototype._undestroy=Pd.undestroy;W.prototype._destroy=function(e,t){this.push(null),t(e)};W.prototype.push=function(e,t){var r=this._readableState,n;return r.objectMode?n=!0:typeof e=="string"&&(t=t||r.defaultEncoding,t!==r.encoding&&(e=qt.from(e,t),t=""),n=!0),kd(this,e,t,!1,n)};W.prototype.unshift=function(e){return kd(this,e,null,!0,!1)};function kd(e,t,r,n,i){var o=e._readableState;if(t===null)o.reading=!1,Pg(e,o);else{var l;i||(l=Ag(o,t)),l?e.emit("error",l):o.objectMode||t&&t.length>0?(typeof t!="string"&&!o.objectMode&&Object.getPrototypeOf(t)!==qt.prototype&&(t=Tg(t)),n?o.endEmitted?e.emit("error",new Error("stream.unshift() after end event")):li(e,o,t,!0):o.ended?e.emit("error",new Error("stream.push() after EOF")):(o.reading=!1,o.decoder&&!r?(t=o.decoder.write(t),o.objectMode||t.length!==0?li(e,o,t,!1):Nd(e,o)):li(e,o,t,!1))):n||(o.reading=!1)}return Og(o)}function li(e,t,r,n){t.flowing&&t.length===0&&!t.sync?(e.emit("data",r),e.read(0)):(t.length+=t.objectMode?1:r.length,n?t.buffer.unshift(r):t.buffer.push(r),t.needReadable&&Rr(e)),Nd(e,t)}function Ag(e,t){var r;return!Eg(t)&&typeof t!="string"&&t!==void 0&&!e.objectMode&&(r=new TypeError("Invalid non-string/buffer chunk")),r}function Og(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||e.length===0)}W.prototype.isPaused=function(){return this._readableState.flowing===!1};W.prototype.setEncoding=function(e){return rt||(rt=oi().StringDecoder),this._readableState.decoder=new rt(e),this._readableState.encoding=e,this};var xd=8388608;function Ig(e){return e>=xd?e=xd:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}function Cd(e,t){return e<=0||t.length===0&&t.ended?0:t.objectMode?1:e!==e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=Ig(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}W.prototype.read=function(e){D("read",e),e=parseInt(e,10);var t=this._readableState,r=e;if(e!==0&&(t.emittedReadable=!1),e===0&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return D("read: emitReadable",t.length,t.ended),t.length===0&&t.ended?ui(this):Rr(this),null;if(e=Cd(e,t),e===0&&t.ended)return t.length===0&&ui(this),null;var n=t.needReadable;D("need readable",n),(t.length===0||t.length-e<t.highWaterMark)&&(n=!0,D("length less than watermark",n)),t.ended||t.reading?(n=!1,D("reading or ended",n)):n&&(D("do read"),t.reading=!0,t.sync=!0,t.length===0&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=Cd(r,t)));var i;return e>0?i=Md(e,t):i=null,i===null?(t.needReadable=!0,e=0):t.length-=e,t.length===0&&(t.ended||(t.needReadable=!0),r!==e&&t.ended&&ui(this)),i!==null&&this.emit("data",i),i};function Pg(e,t){if(!t.ended){if(t.decoder){var r=t.decoder.end();r&&r.length&&(t.buffer.push(r),t.length+=t.objectMode?1:r.length)}t.ended=!0,Rr(e)}}function Rr(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(D("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?nt(Ad,e):Ad(e))}function Ad(e){D("emit readable"),e.emit("readable"),ci(e)}function Nd(e,t){t.readingMore||(t.readingMore=!0,nt(Dg,e,t))}function Dg(e,t){for(var r=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(D("maybeReadMore read 0"),e.read(0),r!==t.length);)r=t.length;t.readingMore=!1}W.prototype._read=function(e){this.emit("error",new Error("_read() is not implemented"))};W.prototype.pipe=function(e,t){var r=this,n=this._readableState;switch(n.pipesCount){case 0:n.pipes=e;break;case 1:n.pipes=[n.pipes,e];break;default:n.pipes.push(e);break}n.pipesCount+=1,D("pipe count=%d opts=%j",n.pipesCount,t);var i=(!t||t.end!==!1)&&e!==process.stdout&&e!==process.stderr,o=i?f:y;n.endEmitted?nt(o):r.once("end",o),e.on("unpipe",l);function l(b,v){D("onunpipe"),b===r&&v&&v.hasUnpiped===!1&&(v.hasUnpiped=!0,S())}function f(){D("onend"),e.end()}var h=kg(r);e.on("drain",h);var d=!1;function S(){D("cleanup"),e.removeListener("close",x),e.removeListener("finish",p),e.removeListener("drain",h),e.removeListener("error",m),e.removeListener("unpipe",l),r.removeListener("end",f),r.removeListener("end",y),r.removeListener("data",C),d=!0,n.awaitDrain&&(!e._writableState||e._writableState.needDrain)&&h()}var T=!1;r.on("data",C);function C(b){D("ondata"),T=!1;var v=e.write(b);v===!1&&!T&&((n.pipesCount===1&&n.pipes===e||n.pipesCount>1&&Rd(n.pipes,e)!==-1)&&!d&&(D("false write response, pause",r._readableState.awaitDrain),r._readableState.awaitDrain++,T=!0),r.pause())}function m(b){D("onerror",b),y(),e.removeListener("error",m),Od(e,"error")===0&&e.emit("error",b)}Cg(e,"error",m);function x(){e.removeListener("finish",p),y()}e.once("close",x);function p(){D("onfinish"),e.removeListener("close",x),y()}e.once("finish",p);function y(){D("unpipe"),r.unpipe(e)}return e.emit("pipe",r),n.flowing||(D("pipe resume"),r.resume()),e};function kg(e){return function(){var t=e._readableState;D("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,t.awaitDrain===0&&Od(e,"data")&&(t.flowing=!0,ci(e))}}W.prototype.unpipe=function(e){var t=this._readableState,r={hasUnpiped:!1};if(t.pipesCount===0)return this;if(t.pipesCount===1)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,r),this);if(!e){var n=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var o=0;o<i;o++)n[o].emit("unpipe",this,r);return this}var l=Rd(t.pipes,e);return l===-1?this:(t.pipes.splice(l,1),t.pipesCount-=1,t.pipesCount===1&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,r),this)};W.prototype.on=function(e,t){var r=fi.prototype.on.call(this,e,t);if(e==="data")this._readableState.flowing!==!1&&this.resume();else if(e==="readable"){var n=this._readableState;!n.endEmitted&&!n.readableListening&&(n.readableListening=n.needReadable=!0,n.emittedReadable=!1,n.reading?n.length&&Rr(this):nt(Ng,this))}return r};W.prototype.addListener=W.prototype.on;function Ng(e){D("readable nexttick read 0"),e.read(0)}W.prototype.resume=function(){var e=this._readableState;return e.flowing||(D("resume"),e.flowing=!0,Mg(this,e)),this};function Mg(e,t){t.resumeScheduled||(t.resumeScheduled=!0,nt(Rg,e,t))}function Rg(e,t){t.reading||(D("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),ci(e),t.flowing&&!t.reading&&e.read(0)}W.prototype.pause=function(){return D("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(D("pause"),this._readableState.flowing=!1,this.emit("pause")),this};function ci(e){var t=e._readableState;for(D("flow",t.flowing);t.flowing&&e.read()!==null;);}W.prototype.wrap=function(e){var t=this._readableState,r=!1,n=this;e.on("end",function(){if(D("wrapped end"),t.decoder&&!t.ended){var l=t.decoder.end();l&&l.length&&n.push(l)}n.push(null)}),e.on("data",function(l){if(D("wrapped data"),t.decoder&&(l=t.decoder.write(l)),!(t.objectMode&&l==null)&&!(!t.objectMode&&(!l||!l.length))){var f=n.push(l);f||(r=!0,e.pause())}});for(var i in e)this[i]===void 0&&typeof e[i]=="function"&&(this[i]=function(l){return function(){return e[l].apply(e,arguments)}}(i));for(var o=0;o<si.length;o++)e.on(si[o],n.emit.bind(n,si[o]));return n._read=function(l){D("wrapped _read",l),r&&(r=!1,e.resume())},n};W._fromList=Md;function Md(e,t){if(t.length===0)return null;var r;return t.objectMode?r=t.buffer.shift():!e||e>=t.length?(t.decoder?r=t.buffer.join(""):t.buffer.length===1?r=t.buffer.head.data:r=t.buffer.concat(t.length),t.buffer.clear()):r=Lg(e,t.buffer,t.decoder),r}function Lg(e,t,r){var n;return e<t.head.data.length?(n=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):e===t.head.data.length?n=t.shift():n=r?Wg(e,t):Ug(e,t),n}function Wg(e,t){var r=t.head,n=1,i=r.data;for(e-=i.length;r=r.next;){var o=r.data,l=e>o.length?o.length:e;if(l===o.length?i+=o:i+=o.slice(0,e),e-=l,e===0){l===o.length?(++n,r.next?t.head=r.next:t.head=t.tail=null):(t.head=r,r.data=o.slice(l));break}++n}return t.length-=n,i}function Ug(e,t){var r=qt.allocUnsafe(e),n=t.head,i=1;for(n.data.copy(r),e-=n.data.length;n=n.next;){var o=n.data,l=e>o.length?o.length:e;if(o.copy(r,r.length-e,0,l),e-=l,e===0){l===o.length?(++i,n.next?t.head=n.next:t.head=t.tail=null):(t.head=n,n.data=o.slice(l));break}++i}return t.length-=i,r}function ui(e){var t=e._readableState;if(t.length>0)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,nt(Bg,t,e))}function Bg(e,t){!e.endEmitted&&e.length===0&&(e.endEmitted=!0,t.readable=!1,t.emit("end"))}function Rd(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}});var di=I((TC,Bd)=>{"use strict";a();s();Bd.exports=Se;var Lr=qe(),Ud=fe();Ud.inherits=ue();Ud.inherits(Se,Lr);function qg(e){this.afterTransform=function(t,r){return Fg(e,t,r)},this.needTransform=!1,this.transforming=!1,this.writecb=null,this.writechunk=null,this.writeencoding=null}function Fg(e,t,r){var n=e._transformState;n.transforming=!1;var i=n.writecb;if(!i)return e.emit("error",new Error("write callback called multiple times"));n.writechunk=null,n.writecb=null,r!=null&&e.push(r),i(t);var o=e._readableState;o.reading=!1,(o.needReadable||o.length<o.highWaterMark)&&e._read(o.highWaterMark)}function Se(e){if(!(this instanceof Se))return new Se(e);Lr.call(this,e),this._transformState=new qg(this);var t=this;this._readableState.needReadable=!0,this._readableState.sync=!1,e&&(typeof e.transform=="function"&&(this._transform=e.transform),typeof e.flush=="function"&&(this._flush=e.flush)),this.once("prefinish",function(){typeof this._flush=="function"?this._flush(function(r,n){Wd(t,r,n)}):Wd(t)})}Se.prototype.push=function(e,t){return this._transformState.needTransform=!1,Lr.prototype.push.call(this,e,t)};Se.prototype._transform=function(e,t,r){throw new Error("_transform() is not implemented")};Se.prototype._write=function(e,t,r){var n=this._transformState;if(n.writecb=r,n.writechunk=e,n.writeencoding=t,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}};Se.prototype._read=function(e){var t=this._transformState;t.writechunk!==null&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0};Se.prototype._destroy=function(e,t){var r=this;Lr.prototype._destroy.call(this,e,function(n){t(n),r.emit("close")})};function Wd(e,t,r){if(t)return e.emit("error",t);r!=null&&e.push(r);var n=e._writableState,i=e._transformState;if(n.length)throw new Error("Calling transform done when ws.length != 0");if(i.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}});var Hd=I((CC,jd)=>{"use strict";a();s();jd.exports=Ft;var qd=di(),Fd=fe();Fd.inherits=ue();Fd.inherits(Ft,qd);function Ft(e){if(!(this instanceof Ft))return new Ft(e);qd.call(this,e)}Ft.prototype._transform=function(e,t,r){r(null,e)}});var Gd=I((pe,Kd)=>{a();s();pe=Kd.exports=ri();pe.Stream=pe;pe.Readable=pe;pe.Writable=ei();pe.Duplex=qe();pe.Transform=di();pe.PassThrough=Hd()});a();s();a();s();Fe();globalThis.setupSentry=async()=>await wi();globalThis.setupSentry();globalThis.sentry=X;globalThis.Sentry=X;a();s();(function(e){typeof define=="function"&&define.amd?define(e):e()})(function(){"use strict";function e(p,y){if(!(p instanceof y))throw new TypeError("Cannot call a class as a function")}function t(p,y){for(var b=0;b<y.length;b++){var v=y[b];v.enumerable=v.enumerable||!1,v.configurable=!0,"value"in v&&(v.writable=!0),Object.defineProperty(p,v.key,v)}}function r(p,y,b){return y&&t(p.prototype,y),b&&t(p,b),p}function n(p,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function");p.prototype=Object.create(y&&y.prototype,{constructor:{value:p,writable:!0,configurable:!0}}),y&&o(p,y)}function i(p){return i=Object.setPrototypeOf?Object.getPrototypeOf:function(b){return b.__proto__||Object.getPrototypeOf(b)},i(p)}function o(p,y){return o=Object.setPrototypeOf||function(v,k){return v.__proto__=k,v},o(p,y)}function l(p){if(p===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return p}function f(p,y){return y&&(typeof y=="object"||typeof y=="function")?y:l(p)}function h(p,y){for(;!Object.prototype.hasOwnProperty.call(p,y)&&(p=i(p),p!==null););return p}function d(p,y,b){return typeof Reflect<"u"&&Reflect.get?d=Reflect.get:d=function(k,N,A){var O=h(k,N);if(!!O){var E=Object.getOwnPropertyDescriptor(O,N);return E.get?E.get.call(A):E.value}},d(p,y,b||p)}var S=function(){function p(){e(this,p),Object.defineProperty(this,"listeners",{value:{},writable:!0,configurable:!0})}return r(p,[{key:"addEventListener",value:function(b,v){b in this.listeners||(this.listeners[b]=[]),this.listeners[b].push(v)}},{key:"removeEventListener",value:function(b,v){if(b in this.listeners){for(var k=this.listeners[b],N=0,A=k.length;N<A;N++)if(k[N]===v){k.splice(N,1);return}}}},{key:"dispatchEvent",value:function(b){var v=this;if(b.type in this.listeners){for(var k=function(q){setTimeout(function(){return q.call(v,b)})},N=this.listeners[b.type],A=0,O=N.length;A<O;A++)k(N[A]);return!b.defaultPrevented}}}]),p}(),T=function(p){n(y,p);function y(){var b;return e(this,y),b=f(this,i(y).call(this)),b.listeners||S.call(l(b)),Object.defineProperty(l(b),"aborted",{value:!1,writable:!0,configurable:!0}),Object.defineProperty(l(b),"onabort",{value:null,writable:!0,configurable:!0}),b}return r(y,[{key:"toString",value:function(){return"[object AbortSignal]"}},{key:"dispatchEvent",value:function(v){v.type==="abort"&&(this.aborted=!0,typeof this.onabort=="function"&&this.onabort.call(this,v)),d(i(y.prototype),"dispatchEvent",this).call(this,v)}}]),y}(S),C=function(){function p(){e(this,p),Object.defineProperty(this,"signal",{value:new T,writable:!0,configurable:!0})}return r(p,[{key:"abort",value:function(){var b;try{b=new Event("abort")}catch{typeof document<"u"?document.createEvent?(b=document.createEvent("Event"),b.initEvent("abort",!1,!1)):(b=document.createEventObject(),b.type="abort"):b={type:"abort",bubbles:!1,cancelable:!1}}this.signal.dispatchEvent(b)}},{key:"toString",value:function(){return"[object AbortController]"}}]),p}();typeof Symbol<"u"&&Symbol.toStringTag&&(C.prototype[Symbol.toStringTag]="AbortController",T.prototype[Symbol.toStringTag]="AbortSignal");function m(p){return p.__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL?(console.log("__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL=true is set, will force install polyfill"),!0):typeof p.Request=="function"&&!p.Request.prototype.hasOwnProperty("signal")||!p.AbortController}function x(p){typeof p=="function"&&(p={fetch:p});var y=p,b=y.fetch,v=y.Request,k=v===void 0?b.Request:v,N=y.AbortController,A=y.__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL,O=A===void 0?!1:A;if(!m({fetch:b,Request:k,AbortController:N,__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL:O}))return{fetch:b,Request:E};var E=k;(E&&!E.prototype.hasOwnProperty("signal")||O)&&(E=function(Q,F){var ie;F&&F.signal&&(ie=F.signal,delete F.signal);var Te=new k(Q,F);return ie&&Object.defineProperty(Te,"signal",{writable:!1,enumerable:!1,configurable:!0,value:ie}),Te},E.prototype=k.prototype);var q=b,Y=function(Q,F){var ie=E&&E.prototype.isPrototypeOf(Q)?Q.signal:F?F.signal:void 0;if(ie){var Te;try{Te=new DOMException("Aborted","AbortError")}catch{Te=new Error("Aborted"),Te.name="AbortError"}if(ie.aborted)return Promise.reject(Te);var np=new Promise(function(ip,op){ie.addEventListener("abort",function(){return op(Te)},{once:!0})});return F&&F.signal&&delete F.signal,Promise.race([np,q(Q,F)])}return q(Q,F)};return{fetch:Y,Request:E}}(function(p){if(!!m(p)){if(!p.fetch){console.warn("fetch() is not available, cannot install abortcontroller-polyfill");return}var y=x(p),b=y.fetch,v=y.Request;p.fetch=b,p.Request=v,Object.defineProperty(p,"AbortController",{writable:!0,enumerable:!1,configurable:!0,value:C}),Object.defineProperty(p,"AbortSignal",{writable:!0,enumerable:!1,configurable:!0,value:T})}})(typeof self<"u"?self:globalThis)});var hi=w(je()),ep=w(uu()),tp=w(_i());a();s();a();s();Ee();var Xc=w(_i()),zc=w(Ti());var Zc=w(U()),Jc=w(ap()),Ir=w(je());Ur();Gt();Fr();Yt();a();s();async function fu(e){return(await He.permissions_log).query(e)}fp();a();s();Fe();var cu=!1;function Mh(e,t){cu=!0;try{X.captureEvent({message:`selectedWalletError: ${e}`,contexts:{report:{info:JSON.stringify({...t,selectedWallet:typeof e>"u"?"undefined":e})}},exception:{values:[{type:"BIZ_ERROR_selectedWalletError",value:e}]},level:"error"})}catch{}}function du(e){if(!e||cu||!e.isUnlocked||!e.completedOnboarding)return;let{selectedWallet:t,keyringIdentities:r,wallets:n}=e,i=!1,o=[],l=[],f;if(typeof t!="string"||!t)i=!0;else{r&&Array.isArray(r)&&(o=r.reduce((d,S)=>(d.push(...(S?.walletIdentities??[]).map(T=>T.walletId)),d),[])),n&&Array.isArray(n)&&(l=n.map(d=>d.walletId)),o.sort(),l.sort();let h=Math.max(o.length,l.length);for(let d=0;d<h;d++)if(o[d]!==l[d]){i=!0;break}!i&&(o.findIndex(d=>d===t)===-1||l.findIndex(d=>d===t)===-1)&&(i=!0)}i&&(f=(r??[]).map(h=>({initialType:h.initialType,walletIdentities:(h.walletIdentities??[]).map(d=>({walletId:d.walletId,account:d.account,initialType:d.initialType,accountsMap:Object.keys(d.accountsMap??{}).reduce((S,T)=>{let C=d.accountsMap[T]??{};return S[T]=Object.keys(C).reduce((m,x)=>(m[x]={address:C[x]?.address,addressType:C[x]?.addressType},m),{}),S},{})}))})),Mh(t,{wallets:(n??[]).map(h=>({initialType:h.initialType,walletId:h.walletId,addressType:h.addressType,segwitAddressType:h.segwitAddressType})),keyringIdentities:f}))}a();s();var ne=w(U()),Un=w(xe()),Ac=w(Ce()),Oc=w(ot());Ee();Fe();a();s();var se=w(U()),mr=w(xe()),hu=w(ot());Ee();Ur();var bn={fetchConfig:{project:"okx_extension_wallet",site:"okx"}};var vn=0,Lh=1,Sn=null;function mu(){return e=>(bn.fetchConfig.locale=e.locale,se.default.createElement(Si,{localeData:e.localeData,isDev:!0,noRemoteData:!0,fetchConfig:bn.fetchConfig},e.children))}var Wh=mu(),Uh=mu(),Bh=process.env.ASSETS_BUILD_TYPE===he.DEV||process.env.ASSETS_BUILD_TYPE===he.DAILY,pu=(0,se.createContext)(e=>`[${e}]`),xt=e=>{let t=window.localStorage.getItem("languageKeyMode"),r=Bh&&t==="multilingualMode",n=(0,mr.useSelector)(wo),i=ho(n),o=(0,mr.useSelector)(co),l=(0,mr.useSelector)(po),f=(0,se.useMemo)(()=>(mo(n,window),Sn=Sn===vn?Lh:vn,Object.keys(o).reduce((h,d)=>{let S=o[d].message;return h[d]=r?`${S}${S}${S}`:S,h},{})),[i,o,r]);return(0,se.useMemo)(()=>{at.setConfig({frozenScroll:!1,localeProviderProps:{fetchConfig:{noFetch:!0},isDev:!0,localeData:l}})},[n]),Sn===vn?se.default.createElement(Wh,{localeData:f,locale:i},se.default.createElement(pu.Provider,{value:G},e.children)):se.default.createElement(Uh,{localeData:f,locale:i},se.default.createElement(pu.Provider,{value:G},e.children))};xt.propTypes={children:hu.default.node};xt.defaultProps={children:void 0};a();s();a();s();var $=w(U());var gu=w(Ei()),Tn=w(ot()),wu=w(je());Ee();up();Jt();zt();Hr();Yt();Gt();var Ct=class extends $.PureComponent{constructor(){super(...arguments);ke(this,"state",{downloadUrl:!1})}renderErrorDetail(r){return $.default.createElement("li",null,$.default.createElement("p",null,r))}renderErrorStack(r,n){return $.default.createElement("li",null,$.default.createElement("span",null,r),$.default.createElement("pre",{className:"error-page__stack"},n))}componentDidMount(){$t(Ke.getExtensionVersion).then(({data:r})=>{let n=Zt(),i=wu.default.runtime.getManifest().version;if(n===Fi&&r.edge!==i){this.setState({downloadUrl:"https://microsoftedge.microsoft.com/addons/detail/pbpjkcldjiffchgbbndmhojiacbgflha"});return}r.chrome!==i&&this.setState({downloadUrl:"https://chrome.google.com/webstore/detail/okx-wallet/mcohilncbfahbmgdjkbpemcciiolgcge?hl=zh-CN"})}).catch(r=>{console.log(r)})}render(){let{error:r}=this.props,{downloadUrl:n}=this.state,o=ge()===Vt?B("wallet_home_subtitle_errortip_error_popup_message"):B("wallet_home_subtitle_errortip_errorpage_message"),l=Ai(),f=lt.State.getImgMap(l),h=`${Oo()}${f[lt.State.TYPE.systemError]}`;return $.default.createElement("div",{className:"error-page"},$.default.createElement("div",{className:"error-page__header"},B("wallet_home_maintitle_errortip_error_page_title"),window.location.hash&&$.default.createElement(Z,{className:"okx-wallet-plugin-close error-page__right",onClick:async()=>{await Me().clearDappData(),window.location.href=window.location.pathname}})),$.default.createElement("div",{className:"error-page__details"},$.default.createElement(lt.State,{type:lt.State.TYPE.systemError,title:n?B("extension_wallet_mid_text_update_latest_version"):o,imgSrc:h,renderButton:()=>$.default.createElement(st,{category:st.CATEGORY.fill,type:st.TYPE.primary,size:st.SIZE.s,onClick:()=>{globalThis.platform.openTab({url:n})}},B("extension_wallet_mid_btn_goto_store")," ")}),$.default.createElement(xi,{className:"error-page__accordion",titleClass:"error-page__accordion-title",customHeaderIcon:d=>$.default.createElement(Z,{icon:"okds-arrow-chevron-down-md",size:Z.SIZE.xs,className:(0,gu.default)("error-page__icon",{"okui-accordion-header-icon-expanded":d})}),title:B("wallet_home_subtitle_errortip_errordetail"),onToggle:d=>{this.setState({expand:d})}}),this.state.expand?$.default.createElement("ul",{className:"error-page__list"},r.message?this.renderErrorDetail(B("wallet_home_subtitle_errortip_errormessage",{errorMessage:r.message})):null,r.code?this.renderErrorDetail(B("wallet_home_subtitle_errortip_errorcode",{errorCode:r.code})):null,r.name?this.renderErrorDetail(B("wallet_home_subtitle_errortip_errorname",{errorName:r.name})):null,r.stack?this.renderErrorStack(B("wallet_home_subtitle_errortip_error_stack"),r.stack):null):null))}};Ct.contextTypes={t:Tn.default.func.isRequired};Ct.propTypes={error:Tn.default.object.isRequired};var En=Ct;a();s();var le=w(U()),Ie=w(xe()),Tc=w(Ce());var Ec=w(Ei()),xc=w(Ti());Ee();a();s();var wr=w(U());Fr();a();s();a();s();var _u=e=>ee("allowShowComponent",{...ae,componentName:e,location:window.location.href})?.data;var xn=w(U()),gr=({children:e,componentName:t})=>_u(t)?xn.default.createElement(xn.default.Fragment,null,e):null;a();s();var Cn={noRadius:"_noRadius_e5d59_1",scale:"_scale_e5d59_15"};var yu=()=>wr.default.createElement(gr,{componentName:"EnvAlert"},wr.default.createElement(Ci,{className:Cn.noRadius,type:"warn",showIcon:!1,title:wr.default.createElement("div",{className:Cn.scale},`${process.env.ASSETS_BUILD_TYPE}-${process.env.COMMIT_HASH}, API: ${Di()} WSS: ${Ni()} STATIC: ${ft()}`),closable:!1}));a();s();var qh={mostRecentOverviewPage:te},Fh="history",jh=$e({name:Fh,initialState:qh,reducers:{pageChanged:(e,t)=>{let r=t.payload;(r===te||r.startsWith(or))&&(e.mostRecentOverviewPage=r)}}}),{actions:Hh,reducer:Kh}=jh,bu=Kh;var{pageChanged:vu}=Hh;a();s();var _r=w(U());var At=w(xe());var yr=w(Ce());function Gh(e){return e}var Su=()=>{let e=(0,At.useSelector)(Gh),t=Po(e),r=(0,yr.useHistory)(),n=(0,At.useSelector)(er),i=(0,At.useSelector)(Ae),o=(0,At.useSelector)(fs),l=(0,_r.useRef)(o),h=(0,yr.useLocation)()?.pathname;return(0,_r.useEffect)(()=>{if(o!==l.current){if(n&&i&&![te,nr].includes(h)){let d=t.current,S={isRpcMode:ls(d)?.isRpcMode,permissionsRequestId:as(d),isNotBackup:Ao(d),lastOptType:us(d)},T=cs(S);T&&r.replace(T)}l.current=o}},[h,o,n,i]),null};Hr();Ur();Yt();ws();a();s();var M=w(U());Wr();var J=w(sp());a();s();var An={"wallet-helper":"_wallet-helper_16jpw_1",walletHelper:"_wallet-helper_16jpw_1","wallet-helper-enter":"_wallet-helper-enter_16jpw_11",walletHelperEnter:"_wallet-helper-enter_16jpw_11"};var $h=[{label:J.default.development_environment,value:"http://kong-proxy.dev-okex.svc.dev.local:8443/"},{label:J.default.pre_environment,value:"https://beta.okex.org"},{label:J.default.prod_environment,value:"https://wallet.okex.org"}],Yh=[{label:J.default.normalMode,value:"normalMode"},{label:J.default.keyMode,value:"keyMode"},{label:J.default.multilingualMode,value:"multilingualMode"}],Vh=()=>{let{width:e}=Ro(document.querySelector("body")),[t,r]=(0,M.useState)("https://beta.okex.org");(0,M.useEffect)(()=>{(async()=>{let{envApiDomain:m}=await Ne.get("envApiDomain");m&&r(m)})()},[]);let n=()=>{window.location.reload()},i=window.localStorage,o=i.getItem("languageKeyMode")||"normalMode",l=(0,M.useCallback)(m=>{m==="normalMode"?(i.removeItem("languageKeyMode"),Ge(!1)):m==="keyMode"?(i.setItem("languageKeyMode",m),Ge(!0)):(i.setItem("languageKeyMode",m),Ge(!1)),n()},[o]),f=No(),h=()=>{let m=Lo()===rr.LIGHT?rr.DARK:rr.LIGHT;Wo(m),f()},d=i.getItem("speedUp")||!1,[S,T]=(0,M.useState)(d);(0,M.useEffect)(()=>{T(d)},[d]);let C=(0,M.useCallback)(()=>{d?(i.removeItem("speedUp"),T(!1)):(i.setItem("speedUp",!0),T(!0)),chrome.runtime.reload()},[d]);return M.default.createElement(gr,{componentName:"walletHelper"},M.default.createElement(Kr.Box,{className:An["wallet-helper"]},M.default.createElement(ut,{description:M.default.createElement(Kr.Space,{space:"8px"},M.default.createElement(Z.IconButton,{icon:"okx-wallet-plugin-slow",tooltip:J.default.select_language_mode,onClick:()=>{me.show({alignBottom:!1,noContentPadding:!0,hideCloseBtn:!0,maskClosable:!0,children:M.default.createElement(dt,{dataSource:Yh,renderItem:({label:m,value:x})=>M.default.createElement(dt.Cell,{title:m,onClick:()=>{l(x)}},o===x&&M.default.createElement(qr.Circle,{checked:!0}))})})}}),M.default.createElement(Z.IconButton,{icon:"okx-wallet-plugin-fast",tooltip:`${J.default.current_api_environment}${t}`,onClick:()=>{me.show({alignBottom:!1,noContentPadding:!0,hideCloseBtn:!0,maskClosable:!0,children:M.default.createElement(dt,{dataSource:$h,renderItem:({label:m,value:x})=>M.default.createElement(dt.Cell,{title:m,onClick:async()=>{await Ne.set({envApiDomain:x}),n()}},t===x&&M.default.createElement(qr.Circle,{checked:!0}))})})}}),M.default.createElement(Z.IconButton,{icon:"okx-wallet-plugin-swap",tooltip:J.default.switchRtl,onClick:()=>{let x=document.documentElement.getAttribute("dir");tr(x==="rtl"?void 0:"rtl")}}),e>360&&M.default.createElement(Z.IconButton,{icon:"okx-wallet-plugin-switch",tooltip:J.default.fullscreenMode,onClick:()=>{let m=document.querySelector("#app");["notification","popup"].includes(m.className)?m.className="fullscreen":m.className="popup"}}),M.default.createElement(Z.IconButton,{style:{color:S?"orange":"unset"},icon:"okx-wallet-plugin-coin-quick-withdraw",tooltip:J.default.accelerateSetInterval,onClick:C}),M.default.createElement(Z.IconButton,{icon:"okx-wallet-plugin-swap-1",tooltip:J.default.theme,onClick:()=>{h()}})),trigger:ut.TRIGGER.click,placement:document.documentElement.getAttribute("dir")==="rtl"?ut.DIRECTION.topLeft:ut.DIRECTION.topRight,autoHeight:{marginBottom:50},smartMode:!1},M.default.createElement(Z,{bordered:!0,size:Z.SIZE.lg,className:An["wallet-helper-enter"],icon:"okx-wallet-plugin-wrenches"}))))},Tu=Vh;a();s();var u=w(U());a();s();var Cu=w(U()),V=w(ot()),Xh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zh=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},Zh=function(){function e(t,r){for(var n=0;n<r.length;n++){var i=r[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),Jh=function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},Qh=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||typeof t!="object"&&typeof t!="function"?e:t},On=(typeof window>"u"||typeof window>"u"?"undefined":Xh(window))==="object",em=On?document:{},tm=["mousemove","keydown","wheel","DOMMouseScroll","mouseWheel","mousedown","touchstart","touchmove","MSPointerDown","MSPointerMove"],In=function(e){function t(r){zh(this,t);var n=Qh(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,r));if(n.state={idle:!1,oldDate:+new Date,lastActive:+new Date,remaining:null,pageX:null,pageY:null},n.tId=null,n._handleEvent=function(i){var o=n.state,l=o.remaining,f=o.pageX,h=o.pageY,d=o.idle,S=n.props,T=S.timeout,C=S.onAction,m=S.debounce,x=S.throttle,p=S.stopOnIdle;if(m>0?n.debouncedAction(i):x>0?n.throttledAction(i):C(i),!l){if(i.type==="mousemove"&&(i.pageX===f&&i.pageY===h||i.pageX===void 0&&i.pageY===void 0||n.getElapsedTime()<200))return;clearTimeout(n.tId),n.tId=null,d&&!p&&n.toggleIdleState(i),n.setState({lastActive:+new Date,pageX:i.pageX,pageY:i.pageY}),d&&p||(n.tId=setTimeout(n.toggleIdleState,T))}},r.debounce>0&&r.throttle>0)throw new Error("onAction can either be throttled or debounced (not both)");return r.debounce>0&&(n.debouncedAction=Eu(r.onAction,r.debounce)),r.throttle>0&&(n.throttledAction=xu(r.onAction,r.throttle)),r.startOnMount||(n.state.idle=!0),n.toggleIdleState=n._toggleIdleState.bind(n),n.reset=n._reset.bind(n),n.pause=n._pause.bind(n),n.resume=n._resume.bind(n),n.getRemainingTime=n._getRemainingTime.bind(n),n.getElapsedTime=n._getElapsedTime.bind(n),n.getLastActiveTime=n._getLastActiveTime.bind(n),n.isIdle=n._isIdle.bind(n),n}return Jh(t,Cu.Component),Zh(t,[{key:"componentWillMount",value:function(){this._bindEvents()}},{key:"componentDidMount",value:function(){this.props.startOnMount&&this.reset()}},{key:"componentDidUpdate",value:function(r){r.debounce!==this.props.debounce&&(this.debouncedAction=Eu(this.props.onAction,this.props.debounce)),r.throttle!==this.props.throttle&&(this.throttledAction=xu(this.props.onAction,this.props.throttle))}},{key:"componentWillUnmount",value:function(){clearTimeout(this.tId),this._unbindEvents()}},{key:"render",value:function(){return this.props.children||null}},{key:"_bindEvents",value:function(){var r=this;if(On){var n=this.state.eventsBound,i=this.props,o=i.element,l=i.events,f=i.passive,h=i.capture;n||(l.forEach(function(d){o.addEventListener(d,r._handleEvent,{capture:h,passive:f})}),this.setState({eventsBound:!0}))}}},{key:"_unbindEvents",value:function(){var r=this;if(On){var n=this.props,i=n.element,o=n.events,l=n.passive,f=n.capture;this.state.eventsBound&&(o.forEach(function(h){i.removeEventListener(h,r._handleEvent,{capture:f,passive:l})}),this.setState({eventsBound:!1}))}}},{key:"_toggleIdleState",value:function(r){var n=this,i=this.state.idle,o=this.props,l=o.onActive,f=o.onIdle,h=o.stopOnIdle;this.setState({idle:!i},function(){i?h||(n._bindEvents(),l(r)):(h&&(clearTimeout(n.tId),n.tId=null,n._unbindEvents()),f(r))})}},{key:"_reset",value:function(){clearTimeout(this.tId),this.tId=null,this._bindEvents(),this.setState({idle:!1,oldDate:+new Date,lastActive:this.state.oldDate,remaining:null});var r=this.props.timeout;this.tId=setTimeout(this.toggleIdleState,r)}},{key:"_pause",value:function(){this.state.remaining===null&&(this._unbindEvents(),clearTimeout(this.tId),this.tId=null,this.setState({remaining:this.getRemainingTime()}))}},{key:"_resume",value:function(){var r=this.state,n=r.remaining,i=r.idle;n!==null&&(this._bindEvents(),i||(this.setState({remaining:null}),this.tId=setTimeout(this.toggleIdleState,n)))}},{key:"_getRemainingTime",value:function(){var r=this.state,n=r.remaining,i=r.idle,o=r.lastActive;if(i)return 0;if(n!==null)return n;var l=this.props.timeout-(+new Date-o);return l<0&&(l=0),l}},{key:"_getElapsedTime",value:function(){var r=this.state.oldDate;return+new Date-r}},{key:"_getLastActiveTime",value:function(){return this.state.lastActive}},{key:"_isIdle",value:function(){return this.state.idle}}]),t}();function Eu(e,t){var r=void 0;return function(){for(var n=arguments.length,i=Array(n),o=0;o<n;o++)i[o]=arguments[o];r&&clearTimeout(r),r=setTimeout(function(){e.apply(void 0,i),r=null},t)}}function xu(e,t){var r=0;return function(){var n=new Date().getTime();if(!(n-r<t))return r=n,e.apply(void 0,arguments)}}In.propTypes={timeout:V.default.number,events:V.default.arrayOf(V.default.string),onIdle:V.default.func,onActive:V.default.func,onAction:V.default.func,debounce:V.default.number,throttle:V.default.number,element:V.default.oneOfType([V.default.object,V.default.element]),startOnMount:V.default.bool,stopOnIdle:V.default.bool,passive:V.default.bool,capture:V.default.bool},In.defaultProps={timeout:12e5,element:em,events:tm,onIdle:function(){},onActive:function(){},onAction:function(){},debounce:0,throttle:0,startOnMount:!0,stopOnIdle:!1,capture:!0,passive:!0};var Au=In;var re=w(Ce());a();s();var R=w(U()),Dt=w(xe()),Ue=w(Ce()),kn=w(ot()),Nn=w(je());Ee();Fe();a();s();var Ou=(e,t)=>{if(t&&t.includes("{")&&!t.includes("first")){let n=/\{(.+?)\}/gi,i={};return t.match(n).forEach((o,l)=>{let f=o.replace("{","").replace("}","");i[`${f}`]=e[l]}),i}let r=["first","second","third","fourth"];return e.filter((n,i)=>i in r).reduce((n,i,o)=>(n[r[o]]=i,n),{})};a();s();var Iu=()=>{let e=ee("lockPage",{...ae,location:window.location.href});return e?e.data:null};a();s();var Pu=w(U());Wr();var Du=()=>{let e=ee("changeLocalStorage",{...ae,location:window.location.href});(0,Pu.useEffect)(()=>{e&&(e?.data?.windowLocalStorage&&Object.keys(e?.data.windowLocalStorage).forEach(t=>{window.localStorage.setItem(t,e?.data?.windowLocalStorage[t])}),e?.data?.localStorage&&Object.keys(e?.data.localStorage).forEach(t=>{t==="data"||t==="apiDomain"||t==="envApiDomain"||t==="staticDomain"||Ne.set({[t]:e?.data?.localStorage[t]})}))},[e])};a();s();var ku=w(U());var Nu=()=>{let e=ee("resetExtension",{...ae,location:window.location.href});return(0,ku.useMemo)(()=>{if(e){if(!e.data?.needReload)return!1;let r=window.localStorage.getItem("extensionReload");return!r||r!=e?.data.time?e.data.time:!1}return!1},[e])};a();s();var Mu=w(U());Fr();var Ru=()=>{let e=ee("staticDomain");(0,Mu.useEffect)(()=>{window.okGlobal||(window.okGlobal={}),e?(window.okGlobal.cdnBaseUrl=`https://${ft()}`,window.okGlobal.cdnDomainMap=e.data):(window.okGlobal.cdnBaseUrl=`https://${ft()}`,window.okGlobal.cdnDomainMap={default:"https://static.okx.com",CN:"https://static.coinall.ltd",RU:"https://static.okx.cab",ID:"https://static.okx.cab"})},[e])};a();s();var Lu=w(U());var Wu=()=>{let e=ee("versionExtensionUpdate",{...ae,location:window.location.href});return(0,Lu.useMemo)(()=>{if(e){if(!e.data?.needUpdate)return!1;let r=window.localStorage.getItem("versionExtensionUpdate");if(r&&r===e?.data.version&&!e.data?.repeat)return!1;if(ae.version!==e.data.version)return{version:e?.data.version,repeat:e.data?.repeat}}return!1},[e])};a();s();var Uu=[];a();s();var Ot=w(U()),Bu=w(Ce());function Pn(e){let[t,r]=(0,Ot.useState)(!1);return t?Ot.default.createElement(Bu.Route,{...e}):Ot.default.createElement(As,{guard:!0,callback:()=>{r(!0)}})}a();s();var It=w(U()),Ku=w(xe());var br=w(Hu()),Gu=w(hp()),$u=w(mp());Hr();Yt();var Dn=300,Yu=()=>{let e=Ts(),t=(0,Ku.useDispatch)(),r=Ds(e),n=ks(),i=(0,It.useRef)({}),o=(0,It.useRef)({}),{data:l,set:f}=Ps(Ns.coinTickers),h=Ms();(0,It.useEffect)(()=>{t(Os(h))},[t,h]);let d=v=>{f({...l,...v})},S=ct(async v=>{let k=(0,br.default)(v,Dn),N=[];try{(await Promise.all(k.map(E=>{let q={coinIds:E},Y={headers:{currency:"usd"}};return Ri(Ke.postMarketUrl,q,Y)})))?.forEach(E=>{Array.isArray(E?.data)&&(N=N.concat(E.data))})}catch{(0,Gu.default)()}let A=N.reduce((O,E)=>(E?.coinId&&(O[E.coinId]={coinToUSDRate:E?.currencyAmount,coinPriceChangePercent24h:E?.priceChangePercent24h}),O),{});d(A)}),{needFetchCoinIds:T,needFetchData:C}=Io(()=>{if(r.length||n.length){let v=r.concat(n).filter(A=>Boolean(A?.coinId));return(0,$u.default)(v,"coinId").reduce((A,O)=>(A.needFetchCoinIds.push(O.coinId),A.needFetchData.push({coinId:O.coinId,baseCoinId:O?.baseCoinId,chainIndex:O?.chainId,tokenAddress:O?.address}),A),{needFetchCoinIds:[],needFetchData:[]})}return{needFetchCoinIds:[],needFetchData:[]}},[r,n]),m=ct(v=>{if(!v?.length)return;let k=v.reduce((E,q)=>{let{coinId:Y,baseCoinId:it,chainIndex:Q,tokenAddress:F}=q,ie="";return it===0?ie=`${Q}`:ie=`${Q}-${F}`,E[Y]=ie,E},{}),N=[],A=Object.entries(k).reduce((E,[q,Y])=>(i.current[q]||(i.current[q]=Y,N.push(q),E.push({channel:sr,instId:Y})),E),[]);(0,br.default)(A,Dn).forEach(E=>{Re.sendChannel({op:"subscribe",args:E})}),N.length&&S(N)}),{run:x}=$r(m,{wait:200}),{run:p}=$r(()=>{d(o.current)},{wait:1e3}),y=ct(()=>{S(Object.keys(i.current))}),b=ct(v=>{if(!v||!Array.isArray(v?.data))return;let{data:k}=v;k[0]?.coinId&&(o.current[k[0]?.coinId]={coinToUSDRate:k[0]?.price,coinPriceChangePercent24h:k[0]?.priceChangePercent24h},p())});ce(sr,{onError:y,onSuccess:b,pollingInterval:30*1e3}),Mo(()=>{x(C)},[T]),Do(()=>{let v=Object.values(i.current).map(N=>({channel:sr,instId:N}));(0,br.default)(v,Dn).forEach(N=>{Re.sendChannel({op:"unsubscribe",args:N})}),i.current={}})};a();s();var Pt=w(U());Ee();var fm=20,vr=[];function Vu(){let e=ce("dex-across-order-info");(0,Pt.useEffect)(()=>{if(!e?.data)return;let{dexData:t,type:r}=e.data,{status:n,type:i,orderId:o,fromAmount:l,fromTokenSymbol:f,toAmount:h,toTokenSymbol:d,solanaToast:S,exploreUrl:T,fromChildOrder:C={}}=t,m=null;if(i==="gasStation"){if(n==="0"?m={type:"success",titleKey:"swaptrade_extension_feedback_toast_transaction_submitted",id:`toast-${o}-${n}`}:n==="-1"?m={type:"error",titleKey:"swaptrade_extension_feedback_toast_fillup_gas_failed",titleParams:{nativeToken:d},id:`toast-${o}-${n}`}:n==="1"&&(m={type:"success",titleKey:"swaptrade_extension_feedback_toast_swapped_successfully",titleParams:{payValue:l,paySymbol:f,receiveValue:Rs(h,{fixed:6,wipeTailZero:!0}),receiveSymbol:d},id:`toast-${o}-${n}`}),!m)return;z[m.type]({title:B(m.titleKey,m.titleParams),key:m.id})}if(r==="1"&&t&&i==="approve"){if(n==="1"?m={type:"success",titleKey:"swaptrade_extension_notif_desc_token_approved",titleParams:{tokenSymbol:f},url:T,id:`toast-${n}-${o}`}:n==="-1"?m={type:"error",titleKey:"swaptrade_extension_notif_desc_token_not_approved",titleParams:{tokenSymbol:f},url:T,id:`toast-${n}-${o}`}:S==="1"&&(m={type:"success",titleKey:"swaptrade_extension_notif_desc_transaction_submit",id:`toast-${S}`}),!m)return;z[m.type]({title:B(m.titleKey,m.titleParams),key:m.id,desc:m.url?Pt.default.createElement(pt,{url:m.url,urlText:B("wallet_transfer_notif_view_on_explorer")}):null})}if((r==="1"||r==="3")&&t&&i!=="approve"&&i!=="register"&&i!=="gasStation"){let x=`${o}_${n}`;if(vr.includes(x))return;let p=()=>{vr.unshift(x),vr=vr.slice(0,fm)},y=C?.receiveTokenStatus!=="3";if(n==="0"&&C?.status=="0"?(p(),m={type:"success",titleKey:"swaptrade_extension_notif_desc_transaction_submit",id:`toast-${n}-${o}`}):n==="1"&&y?(p(),m={type:"success",titleKey:"swaptrade_extension_notif_desc_swap_info",titleParams:{fromTokenAmount:l,fromTokenSymbol:f,toTokenAmount:h,toTokenSymbol:d},url:T,id:`toast-${n}-${o}`}):n==="-1"&&y?(p(),m={type:"error",titleKey:"swaptrade_extension_notif_desc_swap_fail",url:T,id:`toast-${n}-${o}`}):n==="-2"&&y&&(p(),m={type:"success",titleKey:"swaptrade_extension_notif_desc_swap_canceled",url:T,id:`toast-${n}-${o}`}),!m)return;z[m.type]({title:B(m.titleKey,m.titleParams),key:m.id,desc:m.url?Pt.default.createElement(pt,{url:m.url,urlText:B("wallet_transfer_notif_view_on_explorer")}):null})}},[e])}a();s();var Xu=w(U());Ee();function zu(){let e=ce("wallet-nft");(0,Xu.useEffect)(()=>{!e||z.success({title:B("wallet_transfer_notif_nft_transaction_success"),key:"toast8"})},[e])}a();s();var Je={link:"_link_1p29i_1",updateCotainer:"_updateCotainer_1p29i_9",centerImage:"_centerImage_1p29i_12",titleUpdate:"_titleUpdate_1p29i_21",textUpdate:"_textUpdate_1p29i_25",updateMb32:"_updateMb32_1p29i_30"};function cm({walletId:e,keyringIdentities:t}){let r;return t.find(n=>(r=n.walletIdentities.find(i=>i.walletId===e),r)),r?[...new Set(Object.values(r.account))]:[]}function _(e){let{guard:t}=e,r=(0,Dt.useSelector)(er),n=(0,Dt.useSelector)(Ae),i=(0,Dt.useSelector)(So),o=(0,Dt.useSelector)(To),l=ce("login"),f=ce("wallet-tx-status-toast"),h=ce("nft-operate"),d=(0,Ue.useHistory)(),[S,T]=(0,R.useState)(null),C=Es();(0,R.useEffect)(()=>{if(C){let{initialType:A}=C,{path:O}=e;if(ps()&&ds(A)&&!Uu.includes(O)){let{location:E}=e||{},{pathname:q,search:Y=""}=E||{};setTimeout(()=>{globalThis.platform.openExtensionInPopup(q+Y||"")},200)}}},[C?.initialType]);let m=Iu(),x=Nu(),p=Wu();Ru(),Du(),(0,R.useEffect)(()=>{x&&me.warn({alignBottom:!1,title:G("wallet_extension_home_popup_title_update_now"),text:G("wallet_extension_home_popup_text_update_now"),confirmText:G("wallet_extension_home_popup_btn_update"),maskClosable:!1,onConfirm:()=>{window.localStorage.setItem("extensionReload",x),Nn.default.runtime.reload()}})},[x]);let[y,b]=(0,R.useState)(!1),[v]=(0,R.useState)(Nn.default.runtime.getManifest().version),k=Ss(),N=Uo({dark:"/cdn/assets/imgs/246/F624BDAD9E2C018D.png",light:"/cdn/assets/imgs/246/234578340DAE2A80.png"});return(0,R.useEffect)(()=>{v!==p.version&&!y&&p&&me.action({mobileWidth:"77.777%",noTopRadius:!1,alignBottom:!1,hideCloseBtn:!0,children:R.default.createElement("div",{className:Je.updateMb32},R.default.createElement("div",{className:Je.centerImage},R.default.createElement("img",{src:N,alt:"update"})),R.default.createElement("div",{className:Je.titleUpdate},G("wallet_extension_home_popup_title_update_available")),R.default.createElement("div",{className:Je.textUpdate},G("wallet_extension_home_popup_text_update_available")),R.default.createElement(Br,{size:Br.SIZE.sm,className:Je.link,onClick:()=>{globalThis.platform.openTab({url:`https://${k}/help/how-do-i-update-my-okx-wallet-extension-on-google-chrome`})}},G("wallet_extension_home_popup_link_update_available"))),confirmText:G("wallet_extension_home_popup_text_ok"),maskClosable:!1,onConfirm:A=>{p.repeat?b(!0):window.localStorage.setItem("versionExtensionUpdate",p.version),A.destroy()}})},[y,p,v]),(0,R.useEffect)(()=>{m&&me.warn({alignBottom:!1,maskClosable:!1,title:G("wallet_extension_clearcache_modaltitle_step_locked"),text:G("wallet_extension_clearcache_modaldesc_step_locked"),confirmText:G("wallet_extension_btn_general_gotit"),onConfirm:A=>{A.destroy(),d.go(-1)}})},[m]),(0,R.useEffect)(()=>{if(r&&n){S&&Array.isArray(S)&&Re.sendChannel({op:"logout",args:S});let O=cm({walletId:i,keyringIdentities:o}).map(E=>({token:E}));Re.sendChannel({op:"login",args:O}),T(O)}},[r,n,i]),(0,R.useEffect)(()=>{if(h){let{scene:A,status:O}=h.data;A===21&&O===2&&z.success({title:G("extension_home_toast_receivecompleted")})}},[h]),(0,R.useEffect)(()=>{if(l){let A=Object.keys(ht).map(O=>({channel:ht[O]}));Re.sendChannel({op:"subscribe",args:A})}},[l]),(0,R.useEffect)(()=>{let O=d.location.pathname.match(ar);if(f&&!O){let{data:E}=f,{pushToastCode:q,pushToastParams:Y=[],txStatus:it,url:Q}=E,F;q===20||q===21?F={amount:Y[0],crypto:Y[1]}:q===23?F={num:Y[0],symbol:Y[1]}:F=Ou(Y),z[xs[it]]({title:G(Cs[q],F),desc:Q?R.default.createElement(pt,{url:Q,urlText:G("wallet_transfer_notif_view_on_explorer")}):null})}},[f]),(0,R.useEffect)(()=>{let A=new PerformanceObserver(O=>{let E={};O.getEntries().forEach(q=>{E[q.name]=q.startTime}),performance.memory&&(E.memory={totalJSHeapSize:performance.memory?.totalJSHeapSize,usedJSHeapSize:performance.memory?.usedJSHeapSize,jsHeapSizeLimit:performance.memory?.jsHeapSizeLimit}),E["first-contentful-paint"]>1e3&&X.captureEvent({message:`PERFORMANCE_WARN_1s ${d.location.pathname}`,contexts:{report:{info:JSON.stringify(E)}},exception:{values:[{type:`PERFORMANCE_WARN_1s ${d.location.pathname}`,value:"Performance Data"}]},level:"info"})});return A.observe({type:"paint",buffered:!0}),()=>{A.disconnect()}},[d.location.pathname]),Vu(),zu(),Yu(),r?n?t?R.default.createElement(Pn,{...e}):R.default.createElement(Ue.Route,{...e}):R.default.createElement(Ue.Redirect,{to:{pathname:Ye}}):R.default.createElement(Ue.Redirect,{to:{pathname:ir}})}_.propTypes={isUnlocked:kn.default.bool.isRequired,completedOnboarding:kn.default.bool.isRequired};a();s();var Mn=w(U()),Zu=w(xe()),Sr=w(Ce());function Tr(e){return(0,Zu.useSelector)(Ae)?Mn.default.createElement(Sr.Route,{...e}):Mn.default.createElement(Sr.Redirect,{to:{pathname:Ye}})}a();s();var Rn=w(U()),Ju=w(xe()),Er=w(Ce());function kt(e){return(0,Ju.useSelector)(Ae)?Rn.default.createElement(Er.Redirect,{to:{pathname:te}}):Rn.default.createElement(Er.Route,{...e})}a();s();var g=w(U()),Qu=(0,g.lazy)(()=>import("./dex-N22ILUFA.js")),ef=(0,g.lazy)(()=>import("./new-home-page-3V55ATWM.js")),tf=(0,g.lazy)(()=>import("./wallet-aggregate-BHT4UEA3.js")),rf=(0,g.lazy)(()=>import("./new-home-page-3V55ATWM.js")),nf=(0,g.lazy)(()=>import("./ConnectHardware-CXUK2RY2.js")),Ln=(0,g.lazy)(()=>import("./ImportSeedPhraseAndPrivateKey-PAZAUEIG.js")),Wn=(0,g.lazy)(()=>import("./WalletMnemonicBackup-6S7FHEW4.js")),of=(0,g.lazy)(()=>import("./WalletMnemonicBackupLandingPage-MGFBF43G.js")),af=(0,g.lazy)(()=>import("./WalletList-4SVSVHWK.js")),sf=(0,g.lazy)(()=>import("./WalletEdit-OEEJ6EAB.js")),lf=(0,g.lazy)(()=>import("./WalletBackUp-L7TALRY7.js")),uf=(0,g.lazy)(()=>import("./WalletAccountAddress-3HJC2JYK.js")),ff=(0,g.lazy)(()=>import("./WalletAccountPrivateKey-A6NMUSRU.js")),cf=(0,g.lazy)(()=>import("./WalletMnemonicAndPrivateKey-DD6E3B3Q.js")),df=(0,g.lazy)(()=>import("./LedgerNetworkManage-JBUY5QI3.js")),pf=(0,g.lazy)(()=>import("./WalletDetail-BVKRMTGL.js")),hf=(0,g.lazy)(()=>import("./WalletAccountDetail-L2AIZ6FD.js")),mf=(0,g.lazy)(()=>import("./CreatePassword-YMDJ6V4M.js")),gf=(0,g.lazy)(()=>import("./VerifyPassword-2BZALD5E.js")),wf=(0,g.lazy)(()=>import("./Onboard-7WKF5DWZ.js")),_f=(0,g.lazy)(()=>import("./InitialCreate-YU4RTROB.js")),yf=(0,g.lazy)(()=>import("./InitialImport-LKC3JXFT.js")),bf=(0,g.lazy)(()=>import("./wallet-add-page-DBOBPV46.js")),vf=(0,g.lazy)(()=>import("./walletAddImport-VD6VYQ5Z.js")),Sf=(0,g.lazy)(()=>import("./Login-ERIYAJD4.js")),Tf=(0,g.lazy)(()=>import("./Import-YOUX4B43.js")),Ef=(0,g.lazy)(()=>import("./show-supported-chains-KCPXY7G4.js")),xf=(0,g.lazy)(()=>import("./Unlock-OQIZCXR6.js")),Cf=(0,g.lazy)(()=>import("./Receive-SRVRMYUI.js")),Af=(0,g.lazy)(()=>import("./Lock-ENWNQ4K5.js")),Of=(0,g.lazy)(()=>import("./ForgetPassword-SXDOGIWP.js")),If=(0,g.lazy)(()=>import("./ResetPassword-SZUOCNX3.js")),Pf=(0,g.lazy)(()=>import("./select-network-HGUPW5GK.js")),Df=(0,g.lazy)(()=>import("./select-coin-7CWUUUVN.js")),kf=(0,g.lazy)(()=>import("./SelectNetwork-2TZIHK5G.js")),Nf=(0,g.lazy)(()=>import("./SelectProtocol-7D67RK2B.js")),Mf=(0,g.lazy)(()=>import("./SendNft-W2PUN7SW.js")),Rf=(0,g.lazy)(()=>import("./SendPageContainer-DCAHNGJW.js")),Lf=(0,g.lazy)(()=>import("./CoinManage-4OEMKYDP.js")),Wf=(0,g.lazy)(()=>import("./CustomCrypto-6UVAPFSC.js")),Uf=(0,g.lazy)(()=>import("./Setting-ADJFTB3V.js")),Bf=(0,g.lazy)(()=>import("./Preference-35GHTFP2.js")),qf=(0,g.lazy)(()=>import("./WalletSafely-XPNUSEJD.js")),Ff=(0,g.lazy)(()=>import("./SafetyLevel-5SR4WKCU.js")),jf=(0,g.lazy)(()=>import("./DefaultWallet-PI4M47KO.js")),Hf=(0,g.lazy)(()=>import("./SwitchRandomPassword-4KGICSB3.js")),Kf=(0,g.lazy)(()=>import("./AboutWallet-OHKCTHQO.js")),Gf=(0,g.lazy)(()=>import("./WalletHistory-QXNDN7UA.js")),$f=(0,g.lazy)(()=>import("./Selector-MI7SC6QZ.js")),Yf=(0,g.lazy)(()=>import("./RpcMode-TRW4Z77U.js")),Vf=(0,g.lazy)(()=>import("./DappEntry-IZXTZ7O5.js")),Xf=(0,g.lazy)(()=>import("./NetworkManagement-JHKKDVRY.js")),zf=(0,g.lazy)(()=>import("./Form-FUFOXQ6C.js")),Zf=(0,g.lazy)(()=>import("./DAppNetworkList-LSRZOCSZ.js")),Jf=(0,g.lazy)(()=>import("./PermissionsConnect-CTRM3OFY.js")),Qf=(0,g.lazy)(()=>import("./Detail-QCCU5PQJ.js")),ec=(0,g.lazy)(()=>import("./NftFilter-IZYZLMOY.js")),tc=(0,g.lazy)(()=>import("./DAppNetworkManage-UIT2KHT4.js")),rc=(0,g.lazy)(()=>import("./CoinDetail-SPVZEZPV.js")),nc=(0,g.lazy)(()=>import("./address-RWI5ZFDW.js")),ic=(0,g.lazy)(()=>import("./Aptos-ART52BXK.js")),oc=(0,g.lazy)(()=>import("./ZKSpace-ZREJJQZY.js")),ac=(0,g.lazy)(()=>import("./ZKSyncLite-VHGUW4UP.js")),sc=(0,g.lazy)(()=>import("./Starknet-MTL4ECV5.js")),lc=(0,g.lazy)(()=>import("./CreateAccount-QAYWPU7B.js")),uc=(0,g.lazy)(()=>import("./ConfirmPay-JDAYYL2R.js")),fc=(0,g.lazy)(()=>import("./rpc-mode-JC7CVGCW.js")),cc=(0,g.lazy)(()=>import("./BatchTransfer-7IT6F5UY.js")),dc=(0,g.lazy)(()=>import("./Bitcoin-YXW2SRUV.js")),pc=(0,g.lazy)(()=>import("./BatchAddAccount-T7EK6BZ2.js")),hc=(0,g.lazy)(()=>import("./BulkRename-7WTQE7BE.js")),mc=(0,g.lazy)(()=>import("./Edit-EHHTTUCH.js")),gc=(0,g.lazy)(()=>import("./Confirm-A46TXTOA.js")),wc=(0,g.lazy)(()=>import("./ManageUtxo-GF7NRQRZ.js")),_c=(0,g.lazy)(()=>import("./CoinInfo-GLFIRWVY.js")),yc=(0,g.lazy)(()=>import("./DownloadAddresses-D57R46PS.js")),bc=(0,g.lazy)(()=>import("./GasTracker-7GV2LV7H.js")),vc=(0,g.lazy)(()=>import("./Advanced-KMZ76YU6.js"));var Sc=({autoLockTimeLimit:e,setLastActiveTime:t})=>{let r=u.default.createElement(u.Suspense,null,u.default.createElement(re.Switch,null,u.default.createElement(re.Route,{path:Yo,component:nf}),u.default.createElement(_,{path:Ea,component:Ln,exact:!0}),u.default.createElement(re.Route,{path:Xa,component:mc,exact:!0}),u.default.createElement(re.Route,{path:za,component:gc,exact:!0}),u.default.createElement(_,{path:Ma,guard:!0,component:Wn,exact:!0}),u.default.createElement(_,{path:Ra,component:Wn,exact:!0}),u.default.createElement(_,{path:La,component:of,exact:!0}),u.default.createElement(_,{path:Aa,component:af,exact:!0}),u.default.createElement(_,{path:Oa,component:sf,exact:!0}),u.default.createElement(_,{path:la,component:lf,exact:!0}),u.default.createElement(_,{path:Na,guard:!0,component:cf,exact:!0}),u.default.createElement(re.Route,{path:ta,component:mf,exact:!0}),u.default.createElement(_,{path:ra,component:gf}),u.default.createElement(kt,{path:na,component:Ln,exact:!0}),u.default.createElement(re.Route,{path:`${ia}/:type`,component:Ef}),u.default.createElement(_,{path:Ia,component:pf}),u.default.createElement(_,{path:Wa,component:df}),u.default.createElement(_,{path:Pa,component:hf}),u.default.createElement(_,{path:Da,component:uf}),u.default.createElement(_,{path:ka,guard:!0,component:ff}),u.default.createElement(re.Route,{path:Ja,component:tf}),u.default.createElement(_,{path:zo,component:Cf,exact:!0}),u.default.createElement(re.Route,{path:qo,component:Af,exact:!0}),u.default.createElement(kt,{path:Ye,component:wf}),u.default.createElement(kt,{path:ea,component:_f,exact:!0}),u.default.createElement(kt,{path:Qo,component:yf,exact:!0}),u.default.createElement(_,{path:xa,component:bf,exact:!0}),u.default.createElement(_,{path:Ca,component:vf,exact:!0}),u.default.createElement(re.Route,{path:es,component:Sf,exact:!0}),u.default.createElement(re.Route,{path:ts,component:Tf,exact:!0}),u.default.createElement(Tr,{path:ir,exact:!0,component:xf}),u.default.createElement(Tr,{path:Zo,component:Of}),u.default.createElement(_,{path:Jo,component:If}),u.default.createElement(_,{path:$a,component:fc}),u.default.createElement(_,{path:Ya,component:cc}),u.default.createElement(_,{path:Va,component:pc}),u.default.createElement(_,{path:Za,component:hc}),u.default.createElement(_,{path:$o,component:Nf}),u.default.createElement(_,{path:Go,component:kf}),u.default.createElement(_,{path:Ta,component:Pf}),u.default.createElement(_,{path:Sa,component:Df}),u.default.createElement(_,{path:`${jo}/:nftPath`,component:Mf,exact:!0}),u.default.createElement(_,{path:`${Fo}/:coinId?`,component:Rf}),u.default.createElement(_,{path:oa,component:Lf}),u.default.createElement(_,{path:aa,component:Wf}),u.default.createElement(_,{path:sa,component:Uf}),u.default.createElement(_,{path:ua,component:Bf}),u.default.createElement(_,{path:fa,component:qf}),u.default.createElement(_,{path:ca,component:Ff}),u.default.createElement(_,{path:da,component:jf}),u.default.createElement(_,{path:ma,component:Hf}),u.default.createElement(_,{path:pa,component:Kf}),u.default.createElement(_,{path:Ua,component:Gf,exact:!0}),u.default.createElement(_,{path:ha,component:$f}),u.default.createElement(_,{path:ga,component:Yf}),u.default.createElement(_,{path:ba,component:Vf}),u.default.createElement(_,{path:_a,component:Xf}),u.default.createElement(_,{path:ya,component:zf}),u.default.createElement(_,{path:wa,component:Zf}),u.default.createElement(_,{path:`${Ho}/:id`,component:Jf}),u.default.createElement(_,{path:`${Vo}`,component:Qf,exact:!0}),u.default.createElement(_,{path:Xo,component:ec,exact:!0}),u.default.createElement(_,{path:`${Ko}`,component:tc}),u.default.createElement(_,{path:or,component:rc,exact:!0}),u.default.createElement(_,{path:rs,component:_c}),u.default.createElement(_,{path:ns,component:yc}),u.default.createElement(_,{path:Ba,component:nc}),u.default.createElement(_,{path:qa,component:ic}),u.default.createElement(_,{path:Fa,component:oc}),u.default.createElement(_,{path:ja,component:ac}),u.default.createElement(_,{path:Ha,component:sc}),u.default.createElement(_,{path:Ka,component:lc}),u.default.createElement(_,{path:Ga,component:uc}),u.default.createElement(_,{path:va,component:dc}),u.default.createElement(_,{path:nr,component:rf}),u.default.createElement(_,{path:ar},u.default.createElement(u.Suspense,{fallback:u.default.createElement(vs,null)},u.default.createElement(Qu,null))),u.default.createElement(_,{path:Qa,component:wc}),u.default.createElement(_,{path:is,component:bc}),u.default.createElement(_,{path:os,component:vc}),u.default.createElement(_,{path:te,component:ef})));return e>0?u.default.createElement(Au,{onAction:t,throttle:1e3},r):r};z.config({duration:3,top:10,left:16,right:16,maxCount:3,placement:z.DIRECTION.top,isInline:!0});var Cc=()=>{let e=(0,Tc.useHistory)(),t=(0,Ie.useDispatch)(),r=(0,Ie.useSelector)(m=>m.appState.isLoading),{os:n,browser:i}=(0,Ie.useSelector)(m=>m.metamask.browserEnvironment)||{},{autoLockTimeLimit:o=0}=(0,Ie.useSelector)(xo),l=(0,Ie.useSelector)(Co),f=(0,Ie.useSelector)(Eo)?.isoCode||"usd",h=process.env.ASSETS_BUILD_TYPE===he.DEV||process.env.ASSETS_BUILD_TYPE===he.DAILY,d=()=>{e.listen((m,x)=>{x==="PUSH"&&vu(m.pathname)})},S=()=>{f||t(ys("usd"))},T=()=>{t(gs())},C=()=>{$t(Ke.getCheckCountryLimit).then(m=>{try{let{data:{web3:{limit:x,displayCountryName:p}}}=m;x&&me.warn({maskClosable:!1,renderFooter:()=>le.default.createElement("div",null),alignBottom:!1,title:B("wallet_extension_login_title_access_restricted"),text:B("wallet_extension_login_toast_unavailable_inyourregion",{area:p})})}catch{z.error({title:B("wallet_home_toast_network_error")})}}).catch(xc.noop)};return ko(()=>{d(),Bo(),tr(l),S(),C()}),le.default.createElement(le.default.Fragment,null,le.default.createElement("div",{className:(0,Ec.default)("app-content",{[`os-${n}`]:n,[`browser-${i}`]:i})},le.default.createElement(yu,null),le.default.createElement(Su,null),le.default.createElement("div",{className:"main-container-wrapper"},r&&le.default.createElement(bs,null),le.default.createElement(Sc,{autoLockTimeLimit:o,setLastActiveTime:T}))),!!h&&le.default.createElement(Tu,null))};a();s();var xr=class extends ne.PureComponent{constructor(){super(...arguments);ke(this,"state",{})}static getDerivedStateFromError(r){return{error:r}}componentDidCatch(r){X.captureException(r)}render(){let{error:r}=this.state,{store:n}=this.props;return r?ne.default.createElement(Un.Provider,{store:n},ne.default.createElement(xt,null,ne.default.createElement(En,{error:r}))):ne.default.createElement(Un.Provider,{store:n},ne.default.createElement(Ac.HashRouter,null,ne.default.createElement(xt,null,ne.default.createElement(bi,{options:Wi},ne.default.createElement(vi,null,ne.default.createElement(Cc,null))))))}};xr.propTypes={store:Oc.default.object.isRequired};var Ic=xr;ws();a();s();var Ar=w(Yi());a();s();Gt();Fe();a();s();function Cr(e){return typeof e=="string"?e:typeof e>"u"?"Undefined error":e instanceof DOMException?`Error Name: ${e.name}, Message: ${e.message}, Code: ${e.code}`:`Error Object: ${JSON.stringify(e,["message","arguments","type","name"])}`}var dm=$e({name:"balanceSlice",initialState:{balanceMap:{}},reducers:{setBalance:(e,t)=>{e.balanceMap=t.payload}}}),{actions:pm,reducer:hm}=dm;function Pc(e){X.captureEvent({message:"STORE_WARN_indexeddb_error",exception:{values:[{type:"STORE_WARN_indexeddb_error",value:e}]},level:"error"})}var Dc=()=>async e=>{(await He.balance).liveQuery().subscribe((r,n)=>{if(n)Pc(`subscribe balance error, ${Cr(n)}`),Me().fallbackBalancesData();else{if(!r||r.filter?.(o=>!o).length>0){Pc(`subscribe balance null, ${JSON.stringify(r)}`),Me().fallbackBalancesData();return}let i=r.reduce((o,l)=>(o[l.walletId]=l,o),{});e(pm.setBalance(i))}})},kc=hm;a();s();Gt();Fe();var mm=$e({name:"coins",initialState:{coinsMap:{},ready:!1},reducers:{updateCoinsMap(e,t){e.coinsMap=t.payload,e.ready=!0}}}),{actions:gm,reducer:wm}=mm,{updateCoinsMap:_m}=gm;var Nc=()=>async e=>{(await He.common_coins).liveQuery().subscribe(async(r,n)=>{if(n)X.captureEvent({message:"STORE_WARN_indexeddb_error",exception:{values:[{type:"STORE_WARN_indexeddb_error",value:`subscribe coins error, ${Cr(n)}`}]},level:"error"}),Me().fallbackAllCoinsMap();else{r.sort((o,l)=>o.rank-l.rank);let i=r.reduce((o,l)=>(o[String(l.coinId)]=l,o),{});e(_m(i))}})},Mc=wm;a();s();var Fc=w(Yi());a();s();var Rc="SET_ACTIVE_TAB";function Bn(e={},t){let r={...e};switch(t.type){case Rc:return t.value;default:return r}}function Lc(e){return{type:Rc,value:e}}a();s();cp();function qn(e={},t){let r={shouldClose:!1,modal:{open:!1,modalState:{name:null,props:{}},previousModalState:{name:null}},sidebar:{transitionName:"",type:"",props:{}},accountDetail:{subview:"transactions"},isLoading:!1,warning:null,requestAccountTabs:{},currentWindowTab:{},showSupportedChainsFlag:!1,...e};switch(t.type){case Xi:return{...r,forgottenPassword:t.value};case Ji:return{...r,warning:null};case Vi:return{...r,accountDetail:{subview:"transactions",accountExport:"none",privateKey:""},warning:null};case to:return{...r,isLoading:!1,warning:null,scrollToBottom:!1,forgottenPassword:!1};case ro:return{...r,txId:t.id,warning:null,isLoading:!1};case no:return t.value.unconfirmedActionsCount>0?{...r,txId:null,warning:null}:{...r,shouldClose:!0,warning:null,txId:null,accountDetail:{subview:"transactions"}};case io:return{...r};case zi:return{...r,warning:t.value||"Incorrect password. Try again."};case Zi:return{...r,warning:""};case oo:return{...r,isLoading:!0,loadingMessage:t.value};case ao:return{...r,isLoading:!1};case Qi:return{...r,warning:t.value,isLoading:!1};case eo:return{...r,warning:void 0};case so:return{...r,requestAccountTabs:t.value};case lo:return{...r,currentWindowTab:t.value};case uo:return{...r,showSupportedChainsFlag:t.value};default:return r}}a();s();a();s();var Wc={[Qs]:el};a();s();var Uc={[Bs]:qs,[Fs]:js,[Zs]:Js,[rl]:nl};var Bc={...Wc,...Uc};a();s();var ym="metamask/send/OPEN_TO_DROPDOWN",bm="metamask/send/CLOSE_TO_DROPDOWN",vm="metamask/send/UPDATE_SEND_ERRORS",Sm="metamask/send/RESET_SEND_STATE",Tm="metamask/send/SHOW_GAS_BUTTON_GROUP",Em="metamask/send/HIDE_GAS_BUTTON_GROUP",qc={toDropdownOpen:!1,gasButtonGroupShown:!0,errors:{}};function Fn(e=qc,t){switch(t.type){case ym:return{...e,toDropdownOpen:!0};case bm:return{...e,toDropdownOpen:!1};case vm:return{...e,errors:{...e.errors,...t.value}};case Tm:return{...e,gasButtonGroupShown:!0};case Em:return{...e,gasButtonGroupShown:!1};case Sm:return{...qc};default:return e}}a();s();var jc=(0,Fc.combineReducers)({activeTab:Bn,metamask:go,appState:qn,history:bu,send:Fn,nftSend:Gs,newDapp:Ls,localeMessages:fo,importAccount:Xs,coinDetail:Ks,txHistory:$s,balanceSlice:kc,currencySlice:Is,networksSlice:bo,coins:Mc,assetsSlice:Us,Nft:Hs,addressBookState:tl,batchTransfer:il,batchAddAccount:ol,batchImportPrivateKey:zs,bulkRename:al,commonSend:Vr,walletConfig:ss,businessSend:Xr,wallet:Vs,...Bc});function jn(e){return(0,Ar.createStore)(jc,e,(0,Ar.applyMiddleware)(_o))}var Hc=()=>e=>{e(yo()),e(Nc()),e(Dc()),e(Ys()),e(Ws())};var Yn=w(lp());a();s();if((process.env.ASSETS_BUILD_TYPE==="dev"||process.env.ASSETS_BUILD_TYPE==="daily"||process.env.ASSETS_BUILD_TYPE==="prepub")&&localStorage.getItem("speedUp")){let t=window.setInterval;window.setInterval=function(r,n,...i){let o=n>=1e3?n/100:n;return t(r,o,...i)}}a();s();Wr();var Kc=async()=>{try{let{authMap:e}=await Ne.get("authMap");return{authMap:e}}catch{return{}}};a();s();Jt();zt();a();s();var Qe=window.history,xm=Qe.pushState,Cm=Qe.replaceState,Hn=new Event("locationChange");Qe.pushState=(...e)=>{let t=xm.apply(Qe,e);return window.dispatchEvent(Hn),t};Qe.replaceState=(...e)=>{let t=Cm.apply(Qe,e);return window.dispatchEvent(Hn),t};window.addEventListener("popstate",()=>{window.dispatchEvent(Hn)});function Kn(e=""){return e.replace(/^#/,"")}function Gc(e){window.addEventListener("locationChange",()=>{e(Kn(window.location.hash))})}a();s();var Am=[/^(\/wallet-add\/import-with-seed-phrase-and-private-key)/,/^(\/batch-import-private-key\/edit)/,/^(\/wallet\/mnemonic\/backup)/,/^(\/wallet\/mnemonic-privateKey)/,/^(\/wallet\/account\/privateKey)/,/^(\/reset-password)/];function Or(e,t=Am){for(let n=0;n<t.length;n++){let i=t[n];if(typeof i=="string"&&e.endsWith(i)||typeof i!="string"&&i.test(e))return!0}return!1}function Om(){let e=ge();return e===Bi?1:e===qi?2:e===Xt?3:0}var Yc=Om(),Gn="lastPageDetentionTimeParams",Vc=sl(),Pe,be,$n="";async function Im(){let e=window.localStorage.getItem(Gn);if(window.localStorage.removeItem(Gn),e)try{await Yr(JSON.parse(e))}catch{console.log("Failed to report last page detention time")}let t=window.location.hash;t&&t!==te&&(Pe=new Date,be=Kn(t))}function $c(){if(!Pe||!be||!Or(be))return;let e=new Date,t={s:Vc,u:be,r:$n,d:e.getTime()-Pe.getTime(),p:Yc,e:Pe.toLocaleString(),l:e.toLocaleString()};window.localStorage.setItem(Gn,JSON.stringify(t))}function Pm(e){if(e===te)return;let t=new Date;be&&Pe&&Or(be)&&Yr({s:Vc,u:be,r:$n,d:t.getTime()-Pe.getTime(),p:Yc,e:Pe.toLocaleString(),l:t.toLocaleString()}),Pe=t,$n=be||"",be=e}Gc(Pm),Im(),window.addEventListener("beforeunload",$c),window.onblur=$c;Oi.config({top:16});yi.config({returnString:!0,isConvertToZero:!0,exponentialAt:[-40,40]});at.setConfig({Dialog:{maskClosable:!0,getContainer:()=>document.querySelector(".main-container-wrapper")},Drawer:{getContainer:()=>document.querySelector(".main-container-wrapper")},[at.componentNames.Select]:{bottomSafeSpace:0}});if(process.env.ASSETS_BUILD_TYPE===he.DEV||process.env.ASSETS_BUILD_TYPE===he.DAILY){let e=window.localStorage.getItem("languageKeyMode");Ge(e==="keyMode")}Xc.default.setLevel(process.env.ASSETS_BUILD_TYPE==="dev"||process.env.ASSETS_BUILD_TYPE==="daily"?"debug":"warn");function Dm(e){window.getCleanAppState=function(){let t=(0,zc.clone)(e.getState());return t.version=globalThis.platform.getVersion(),t.browser=window.navigator.userAgent,t}}var km=async()=>Promise.allSettled([Gi(),$i()]);function Nm(e){async function t(r){let n=await Ir.default.tabs.get(r),{active:i,id:o,title:l,url:f}=n;if(i===!1)return;let{origin:h,protocol:d}=f?new URL(f):{};!h||h==="null"||e.dispatch(Lc({id:o,title:l,origin:h,protocol:d,url:f}))}Ir.default.tabs.onActivated.addListener(async({tabId:r})=>{await t(r)}),Ir.default.tabs.onUpdated.addListener(async r=>{await t(r)})}async function Mm({metamaskState:e},t,r){await ki.setUrlFromLocalAsync(),await Pi.setUrlFromLocalAsync(),await km();let n={},i={},o={};if(e.currentLocale){let C=await Promise.allSettled([Qt(e.currentLocale),Qt(e.currentLocale,Yn.LOCALE_TYPE.okd),Qt(e.currentLocale,Yn.LOCALE_TYPE.dex)]);n=C[0].value,i=C[1].value,o=C[2].value}let f={...{activeTab:r.activeTab,metamask:e,appState:{},localeMessages:{current:n,okdCurrent:i,dexCurrent:o}}},h=jn(f),d=vo(e.unapprovedTxs,e.unapprovedMsgs,e.unapprovedPersonalMsgs,e.unapprovedDecryptMsgs,e.unapprovedEncryptionPublicKeyMsgs,e.unapprovedTypedMessages,e.network,e.provider.chainId);return d.length>0&&h.dispatch(_s({id:d[0].id})),t.onNotification(C=>{switch(C.method){case"sendUpdate":{let m=C.params[0];setTimeout(()=>{du(m)},300),h.dispatch(hs(m))}break;case"sendPartialUpdate":{let m=C.params[0];h.dispatch(ms(m))}break;default:throw new Error(`Internal JSON-RPC Notification Not Handled:

 ${JSON.stringify(C)}`)}}),Nm(h),h.dispatch(Hc()),(0,Jc.createRoot)(r.container).render(Zc.default.createElement(Ic,{store:h})),e.currentLocale&&Ki(e.currentLocale),h}function Vn(e,t){let{backgroundConnection:r}=e;Ii(r),Mi(r.refreshHttpDNS),r.getStateByDomain((n,i)=>{if(n){t(n);return}let{currentLocale:o}=i;Li(o),Mm({metamaskState:i},r,e).then(l=>{Dm(l),t(null,l)}).catch(()=>{})})}window.logStateString=async function(e){let t=window.getCleanAppState();try{let r=await globalThis.platform.getPlatformInfo();t.platform=r;try{t.permissionsLog=await fu(),t.log=await Ui()}catch{t.permissionsLog=[],t.log=[]}let n=await Kc();Object.keys(n).forEach(o=>{t[o]=n[o]});let i=JSON.stringify(t,null,2);e(null,i)}catch(r){e(r)}};zt();a();s();var H=w(je());zt();Jt();var Nt=class{reload(){H.default.runtime.reload()}openTab(t){return new Promise((r,n)=>{H.default.tabs.create(t).then(i=>{let o=oe();return o?n(o):r(i)}).catch(i=>{n(i)})})}openWindow(t){return new Promise((r,n)=>{H.default.windows.create(t).then(i=>{let o=oe();return o?n(o):(this.lastOkPopupId=i.id,r(i))}).catch(i=>{n(i)})})}closeWindow(t){return new Promise((r,n)=>{H.default.windows.remove(t).then(()=>{let i=oe();return i?n(i):r()}).catch(i=>{n(i)})})}focusLastOkPopup(){this.lastOkPopupId&&this.getAllWindows().then(t=>{t.some(r=>r.id===this.lastOkPopupId)?this.focusWindow(this.lastOkPopupId):this.lastOkPopupId=""}).catch(()=>{})}async focusCurrentWindow(){let r=(await this.currentTab())?.windowId;await this.focusWindow(r)}focusWindow(t){return new Promise((r,n)=>{H.default.windows.update(t,{focused:!0}).then(()=>{let i=oe();return i?n(i):r()}).catch(i=>{n(i)})})}updateWindowPosition(t,r,n){return new Promise((i,o)=>{H.default.windows.update(t,{left:r,top:n}).then(()=>{let l=oe();return l?o(l):i()}).catch(l=>{o(l)})})}getLastFocusedWindow(t){return new Promise((r,n)=>{H.default.windows.getLastFocused(t).then(i=>{let o=oe();return o?n(o):r(i)}).catch(i=>{n(i)})})}closeCurrentWindow(){return H.default?.windows?.getCurrent?H.default.windows.getCurrent().then(t=>H.default.windows.remove(t.id)):Promise.resolve()}getVersion(){return H.default.runtime.getManifest().version}openExtensionInBrowser(t=null,r=null){let n=H.default.runtime.getURL("home.html");r&&(n+=`?${r}`),t&&(n+=`#${t}`),this.openTab({url:n}),ge()!==jr&&window.close()}async openExtensionInPopup(t=null,r=null){let n=H.default.runtime.getURL("home.html");r&&(n+=`?${r}`),t&&(n+=`#${t}`);let{screenX:i,screenY:o,outerWidth:l}=window,f=Math.max(o,0),h=Math.max(i+(l-360),0);if(!i){let S=await this.getLastFocusedWindow();f=S.top,h=S.left+(S.width-360)}let d=await Hi();this.openWindow({url:n,type:"popup",width:d?.width||360,height:700,top:f,left:h}),ge()!==jr&&window.close()}getPlatformInfo(){return new Promise((t,r)=>{try{H.default.runtime.getPlatformInfo().then(n=>{t(n)}).catch(n=>{r(n)})}catch(n){r(n)}})}getAllWindows(){return new Promise((t,r)=>{H.default.windows.getAll().then(n=>{let i=oe();return i?r(i):t(n)}).catch(n=>{r(n)})})}getActiveTabs(){return new Promise((t,r)=>{H.default.tabs.query({active:!0}).then(n=>{let i=oe();return i?r(i):t(n)}).catch(n=>{r(n)})})}currentTab(){return new Promise((t,r)=>{H.default.tabs.getCurrent().then(n=>{let i=oe();i?r(i):t(n)}).catch(n=>{r(n)})})}closeTab(t){return new Promise((r,n)=>{H.default.tabs.remove(t).then(()=>{let i=oe();i?n(i):r()}).catch(i=>{n(i)})})}getCpuInfoName(){return new Promise((t,r)=>{try{H.default.system.cpu.getInfo(n=>{t(n.modelName)})}catch(n){r(n)}})}setPanelBehavior(t){return new Promise((r,n)=>{try{chrome.sidePanel.setPanelBehavior({openPanelOnActionClick:t}),r()}catch(i){n(i)}})}setSidepanelPath(t){return new Promise((r,n)=>{t?chrome.sidePanel.setOptions({path:t},()=>{r()}):n()})}openSidepanelWithWindowId(t){return new Promise((r,n)=>{t?chrome.sidePanel.open({windowId:t},()=>{r()}):n()})}async openSidepanel(t){let n=(await this.getLastFocusedWindow())?.id;t&&await this.setSidepanelPath(`sidepanel.html#${t}`),await this.openSidepanelWithWindowId(n),t&&await this.setSidepanelPath("sidepanel.html")}};a();s();var $d=w(je()),Yd=w(Gd());var jt=class extends Yd.Duplex{constructor(r){super({objectMode:!0});ke(this,"onMessage",r=>{if(c.Buffer.isBuffer(r)){let n=c.Buffer.from(r);this.push(n)}else this.push(r)});ke(this,"onDisconnect",()=>{let{lastError:r}=$d.default.runtime;r&&typeof this.opts.port=="function"?this.init():this.destroy()});this.opts={port:r},this.init()}init(){this.removePortListener(),this.port=typeof this.opts.port=="function"?this.opts.port():this.opts.port,this.port.onMessage.addListener(this.onMessage),this.port.onDisconnect.addListener(this.onDisconnect)}removePortListener(){this.port&&(this.port.onMessage.removeListener(this.onMessage),this.port.onDisconnect.removeListener(this.onDisconnect))}_read(){}_write(r,n,i){try{if(c.Buffer.isBuffer(r)){let o=r.toJSON();o._isBuffer=!0,this.port.postMessage(o)}else this.port.postMessage(r)}catch{return i(new Error("PortDuplexStream - disconnected"))}return i()}};a();s();var Vd=w(yp()),Xd=w(gp()),jg=()=>{};function zd(e){let t=new Vd.default;return(0,Xd.default)(e,t,e,r=>{r&&jg(r)}),t}Jt();a();s();var Zd=w(wp()),Jd=w(_p());var pi=class{constructor(t){this.connectionStream=t,this.notificationChannel=new Jd.default,this.requests=new Map,this.connectionStream.on("data",this.handleResponse.bind(this)),this.connectionStream.on("end",this.close.bind(this))}onNotification(t){this.notificationChannel.addListener("notification",r=>{t(r)})}close(){this.notificationChannel.removeAllListeners()}handleResponse(t){let{id:r,result:n,error:i,method:o,params:l}=t,f=this.requests.get(r);if(!(o&&l&&r)){if(o&&l&&!r){this.notificationChannel.emit("notification",t);return}if(!!f){if(i){let h=new Zd.EthereumRpcError(i.code,i.message,i.data);h.stack=i.stack,this.requests.delete(r),f(h);return}this.requests.delete(r),typeof f=="function"&&f(null,n)}}}},Hg=e=>{let t=new pi(e);return new Proxy(t,{get:(r,n)=>r[n]?r[n]:(...i)=>{let o=i[i.length-1],l=i.slice(0,-1),f=ll();r.requests.set(f,o),r.connectionStream.write({jsonrpc:"2.0",method:n,params:l,id:f})}})},Qd=Hg;a();s();var Kg=["popup.html","notification.html","home.html"];navigator.userAgent.includes("Android")&&Kg.forEach(e=>{location.href.includes(e)&&(location.href=location.href.replace(e,"fullscreen.html"))});function Gg(e){let t=new ep.default;t.pipe(e).pipe(t),e.on("error",console.error.bind(console)),t.on("error",console.error.bind(console)),globalThis.providerStream=t}function $g(e,t){let r=Qd(e);t(null,r)}function Yg(e,t){let r=zd(e);$g(r.createStream("controller"),t),Gg(r.createStream("provider"))}function Vg(e,t,r,n){Yg(r,(i,o)=>{if(i){n(i);return}Vn({activeTab:e,container:t,backgroundConnection:o},n)})}async function Xg(e){return new Promise(t=>{if(e!==Vt&&e!==Xt){t({});return}hi.default.tabs.query({active:!0,currentWindow:!0}).then(r=>{let[n]=r,{id:i,title:o,url:l}=n,{origin:f,protocol:h}=l?new URL(l):{};if(!f||f==="null"){t({});return}t({id:i,title:o,origin:f,protocol:h,url:l})}).catch(r=>{console.error(r)})})}async function zg(e,t){let r=await Xg(e);Zt()===ji&&(r.origin="https://www.okx.com");let n=document.getElementById("app");Vg(r,n,t,i=>{if(i)throw i})}async function rp(){globalThis.platform=new Nt;let e=ge(),t=hi.default.runtime.connect({name:e}),r=new jt(t);r.once("end",rp),zg(e,r)}rp().catch(tp.default.error);

window.inOKXExtension = true;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=ui.js.map
