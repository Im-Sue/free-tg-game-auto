import{a as Li}from"./chunk-MX76ZZ6Y.js";import{a as Ld}from"./chunk-2QEOUJNN.js";import{a as V,j as Qa,l as ei,m as ti,n as Dt,o as ri,p as co,q as oi,r as ni}from"./chunk-UYALNF4Q.js";import"./chunk-JPV5PNQX.js";import{a as Ja}from"./chunk-T65CW4NW.js";import{a as Xa}from"./chunk-T2LI56ZH.js";import{b as $a}from"./chunk-KG3C55VT.js";import{a as Za,b as Ka}from"./chunk-XKXVOEIB.js";import{a as Va}from"./chunk-FMELEEEB.js";import{b as Vo,c as Kt,e as Hr,f as qa,g as st}from"./chunk-LHNVUV3G.js";import{b as Ga,k as ja}from"./chunk-G35FQ3WW.js";import{a as Ko,b as $n,c as Ha}from"./chunk-DCMAUS7C.js";import{b as Ya}from"./chunk-KWQVFNZ3.js";import"./chunk-N3VGDA3L.js";import{a as Zo,b as za}from"./chunk-TAZU4KSU.js";import"./chunk-W327NRHO.js";import{a as Ra}from"./chunk-DZDHGH5B.js";import{a as nt,c as qo,d as Ur}from"./chunk-UKFSUXAE.js";import{a as Pa}from"./chunk-M4STRGDO.js";import"./chunk-GYUX3JJ3.js";import"./chunk-4C2576LU.js";import"./chunk-PBOUQOH2.js";import"./chunk-SG4LXTVB.js";import"./chunk-QUUI62AZ.js";import{B as Wa,G as Ua}from"./chunk-VX7CI7XT.js";import"./chunk-D6HSNWGS.js";import{a as jo}from"./chunk-7ODXCTBK.js";import"./chunk-GZMWLE4V.js";import"./chunk-C54I6GL3.js";import"./chunk-ZJICRI36.js";import"./chunk-BIBDTDJA.js";import"./chunk-ADIQBHVU.js";import"./chunk-TPVT7ZCY.js";import"./chunk-A6HNAUBV.js";import{c as Yo,d as La,i as Ba,j as Da}from"./chunk-6GFVKSAR.js";import{a as Wr,d as Oa}from"./chunk-JVLSBRR5.js";import"./chunk-5IXTSGAM.js";import"./chunk-OR2KMY5L.js";import"./chunk-FFJ36R7T.js";import{a as Ma}from"./chunk-NVCWAHOV.js";import"./chunk-RFEJLMRV.js";import{e as Sr,f as Ia}from"./chunk-UIABO6UG.js";import"./chunk-KJFAD5C4.js";import"./chunk-BFVA6OLJ.js";import"./chunk-ON3J2WQV.js";import"./chunk-RC3QMLDN.js";import"./chunk-JINEVGIZ.js";import"./chunk-SRU2IM3A.js";import{a as Ca}from"./chunk-46NSFYB3.js";import{i as Na,k as ka}from"./chunk-FFQESTX4.js";import"./chunk-OCZAVPFZ.js";import"./chunk-P6SDUFQ6.js";import"./chunk-5TNZ4MQV.js";import"./chunk-VPDXC6IS.js";import"./chunk-XGXABYQN.js";import"./chunk-KKTPGZSO.js";import{b as lt,c as wa}from"./chunk-ESKOSV75.js";import"./chunk-ZDQ5EBGN.js";import"./chunk-2KEW2T4M.js";import"./chunk-R7VTXTCL.js";import"./chunk-LBYCQPAD.js";import{A as bi,B as Xo,C as Ni,D as ct,E as ki,F as Ii,G as Ci,H as Oi,a as uo,b as ie,c as We,d as si,e as ai,f as ii,g as li,h as ci,i as ui,j as di,k as fi,l as mi,m as pi,n as hi,o as Ze,p as vi,q as gi,r as _i,s as xi,t as Si,u as Ti,v as Jn,w as wi,x as yi,y as Ei,z as Ai}from"./chunk-SGLPDLO2.js";import{a as qe}from"./chunk-3P5YDD2R.js";import"./chunk-FV6MP3UU.js";import"./chunk-PRHPRTXY.js";import"./chunk-SQ5W4RLM.js";import"./chunk-Y2PED5BF.js";import"./chunk-RUSRHRGO.js";import"./chunk-IZ5XPPXG.js";import{e as Go}from"./chunk-6PN4BR3D.js";import{a as ya}from"./chunk-EWK7ZFVN.js";import"./chunk-A23SHFFL.js";import"./chunk-VZ3BFZKL.js";import"./chunk-T6Z2C3RK.js";import"./chunk-R2QYIBE7.js";import"./chunk-KT53NMHD.js";import"./chunk-64STH2HN.js";import"./chunk-EKQH7XTV.js";import"./chunk-R2QKPEWB.js";import"./chunk-RMA2FZOE.js";import{b as Fa}from"./chunk-KRHB66KZ.js";import"./chunk-4RHFH7IF.js";import{d as Ta}from"./chunk-LPTRVNVL.js";import"./chunk-PH2A2GR3.js";import"./chunk-2LLM6N6U.js";import{e as Ea}from"./chunk-LF2PURXZ.js";import"./chunk-JEZIPKDY.js";import"./chunk-SR2BDP3A.js";import{M as ba,n as Aa}from"./chunk-CFT6B56M.js";import"./chunk-WK32FAZW.js";import"./chunk-WMUTUJYX.js";import{a as bd,c as Nd,e as kd}from"./chunk-B23OWGFX.js";import{a as Id,b as Cd,c as Od}from"./chunk-OSWXWF4A.js";import{a as Ad}from"./chunk-Q7FJER56.js";import"./chunk-RBTIRMSE.js";import"./chunk-7GZ2ZCGI.js";import{F as ma,h as ua,i as da,s as fa}from"./chunk-WTP3OIOS.js";import"./chunk-D66ZH3O3.js";import"./chunk-X764QIVO.js";import"./chunk-HISWVX7W.js";import"./chunk-PYJPOVV7.js";import{b as ke}from"./chunk-AO6MUSOH.js";import"./chunk-I435LZHT.js";import{t as no,x as ne}from"./chunk-SJIW4WAV.js";import{a as wd}from"./chunk-SLDECH2O.js";import{a as B,c as Uo,h as yd,i as Ed,l as ga,m as zr,p as _a,r as xa,s as Sa}from"./chunk-5JJQQHKZ.js";import{Na as xr,Oa as ao,Pa as io,Qa as lo}from"./chunk-URG4MCPH.js";import{a as ca,ab as Xn,o as zo,y as Et}from"./chunk-ZPOCIBPN.js";import{Y as Vn,ba as Bt,k as ha,m as Zn,r as Kn,t as Wo}from"./chunk-CA5MYYD6.js";import"./chunk-RZ7GFYMN.js";import{a as qn}from"./chunk-IOCZ22XI.js";import"./chunk-EJY3MW2I.js";import"./chunk-3VRAVMMN.js";import"./chunk-YJ45QIWT.js";import"./chunk-WR62TYUO.js";import"./chunk-2G2AXMFT.js";import"./chunk-XGFQCNHX.js";import"./chunk-7JF42X5G.js";import"./chunk-4JZ3HIS7.js";import"./chunk-JLA5HXVC.js";import"./chunk-I4WIGQLD.js";import"./chunk-ZNGQ6IUR.js";import"./chunk-JERFAOJH.js";import{g as Ho}from"./chunk-JXZFOFB5.js";import{a as va}from"./chunk-LYNLETTP.js";import"./chunk-FQ4XEVKF.js";import{c as w}from"./chunk-VMYDP774.js";import{a as Ft,b as oo}from"./chunk-A7LNVEYU.js";import{f as Lt,h as ro}from"./chunk-2YWUVAR3.js";import"./chunk-VA2HGDZT.js";import"./chunk-AKPDCNMH.js";import{$ as Mo,$b as pa,B as J,C as Ee,Mb as Ro,Pa as Td,R as aa,Sa as ia,Ta as Rr,V as ar,Y as Do,_ as Pr,a as ra,ab as Po,b as xd,cb as la,ib as jn,ic as so,la as Le,m as rt,na as Gn,pb as Yn,t as ae,x as le}from"./chunk-M54COW6Q.js";import"./chunk-PWWHYQAY.js";import{B as _r,G as Hn,L as sa,a as oa,b as eo,f as to,o as gr,q as pe,r as sr,w as Un,x as Mr,z as na}from"./chunk-RIJWHGTU.js";import{I as re,J as Sd,l as M,v as E}from"./chunk-K4MPEKC5.js";import"./chunk-X6USBUO5.js";import"./chunk-674MHQJQ.js";import{L as ot,Q as Oe,R as yt,X as q,c as Be}from"./chunk-XIGC6FD5.js";import{a as K}from"./chunk-CXUPEGDW.js";import"./chunk-QAWZYDPQ.js";import"./chunk-PYTKRRY4.js";import"./chunk-363VDWOO.js";import"./chunk-7B5WANGL.js";import"./chunk-4P4FGPYZ.js";import"./chunk-Y47SQ3XQ.js";import"./chunk-YGNOWOE7.js";import"./chunk-N4GKTC7Y.js";import"./chunk-MHPFRLZZ.js";import"./chunk-2BD64J7Y.js";import"./chunk-RYJHESAH.js";import"./chunk-DOQ5NSSP.js";import"./chunk-VULQOB2N.js";import{c as nr,f as k,h as wt,m as f,o as m}from"./chunk-ICCOEXX5.js";var Wl=nr((aE,zl)=>{"use strict";f();m();zl.exports=yf;var Pl="\u0591-\u07FF\uFB1D-\uFDFD\uFE70-\uFEFC",Rl="A-Za-z\xC0-\xD6\xD8-\xF6\xF8-\u02B8\u0300-\u0590\u0800-\u1FFF\u200E\u2C00-\uFB1C\uFE00-\uFE6F\uFEFD-\uFFFF",Tf=new RegExp("^[^"+Rl+"]*["+Pl+"]"),wf=new RegExp("^[^"+Pl+"]*["+Rl+"]");function yf(t){return t=String(t||""),Tf.test(t)?"rtl":wf.test(t)?"ltr":"neutral"}});var To=nr((vE,Yl)=>{f();m();Yl.exports=globalThis.Slate});var mc=nr(Ut=>{"use strict";f();m();Object.defineProperty(Ut,"__esModule",{value:!0});var Df=typeof window<"u"&&/Mac|iPod|iPhone|iPad/.test(window.navigator.platform),bs={alt:"altKey",control:"ctrlKey",meta:"metaKey",shift:"shiftKey"},Mf={add:"+",break:"pause",cmd:"meta",command:"meta",ctl:"control",ctrl:"control",del:"delete",down:"arrowdown",esc:"escape",ins:"insert",left:"arrowleft",mod:Df?"meta":"control",opt:"alt",option:"alt",return:"enter",right:"arrowright",space:" ",spacebar:" ",up:"arrowup",win:"meta",windows:"meta"},cc={backspace:8,tab:9,enter:13,shift:16,control:17,alt:18,pause:19,capslock:20,escape:27," ":32,pageup:33,pagedown:34,end:35,home:36,arrowleft:37,arrowup:38,arrowright:39,arrowdown:40,insert:45,delete:46,meta:91,numlock:144,scrolllock:145,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222};for(Eo=1;Eo<20;Eo++)cc["f"+Eo]=111+Eo;var Eo;function bn(t,e,r){e&&!("byKey"in e)&&(r=e,e=null),Array.isArray(t)||(t=[t]);var o=t.map(function(i){return uc(i,e)}),n=function(l){return o.some(function(d){return dc(d,l)})},s=r==null?n:n(r);return s}function Pf(t,e){return bn(t,e)}function Rf(t,e){return bn(t,{byKey:!0},e)}function uc(t,e){var r=e&&e.byKey,o={};t=t.replace("++","+add");var n=t.split("+"),s=n.length;for(var i in bs)o[bs[i]]=!1;var l=!0,d=!1,c=void 0;try{for(var g=n[Symbol.iterator](),x;!(l=(x=g.next()).done);l=!0){var h=x.value,v=h.endsWith("?")&&h.length>1;v&&(h=h.slice(0,-1));var p=Ns(h),a=bs[p];(s===1||!a)&&(r?o.key=p:o.which=fc(h)),a&&(o[a]=v?null:!0)}}catch(_){d=!0,c=_}finally{try{!l&&g.return&&g.return()}finally{if(d)throw c}}return o}function dc(t,e){for(var r in t){var o=t[r],n=void 0;if(o!=null&&(r==="key"&&e.key!=null?n=e.key.toLowerCase():r==="which"?n=o===91&&e.which===93?91:e.which:n=e[r],!(n==null&&o===!1)&&n!==o))return!1}return!0}function fc(t){t=Ns(t);var e=cc[t]||t.toUpperCase().charCodeAt(0);return e}function Ns(t){return t=t.toLowerCase(),t=Mf[t]||t,t}Ut.default=bn;Ut.isHotkey=bn;Ut.isCodeHotkey=Pf;Ut.isKeyHotkey=Rf;Ut.parseHotkey=uc;Ut.compareHotkey=dc;Ut.toKeyCode=fc;Ut.toKeyName=Ns});var od=nr((pF,rd)=>{f();m();var Yp=Nd(),qp=Ld(),Zp=bd();function Kp(t,e,r){for(var o=-1,n=e.length,s={};++o<n;){var i=e[o],l=Yp(t,i);r(l,i)&&qp(s,Zp(i,t),l)}return s}rd.exports=Kp});var sd=nr((gF,nd)=>{f();m();var Vp=od(),Xp=kd();function $p(t,e){return Vp(t,e,function(r,o){return Xp(t,o)})}nd.exports=$p});var id=nr((SF,ad)=>{f();m();var Jp=Id();function Qp(t){var e=t==null?0:t.length;return e?Jp(t,1):[]}ad.exports=Qp});var cd=nr((yF,ld)=>{f();m();var eh=id(),th=Cd(),rh=Od();function oh(t){return rh(th(t,void 0,eh),t+"")}ld.exports=oh});var dd=nr((bF,ud)=>{f();m();var nh=sd(),sh=cd(),ah=sh(function(t,e){return t==null?{}:nh(t,e)});ud.exports=ah});f();m();var vr=k(K()),Br=k(qn());f();m();var Qn=k(Et());re();Le();f();m();re();Le();var Fi=()=>B(async({to:t,toes:e,from:r,value:o,values:n,budget:s,gasPrice:i,inputCoins:l,tokenInputCoins:d,baseCoinId:c})=>{let g=e?.length?e:[t],x=n?.length?n:[o],h=l.map((a={})=>{let{digest:_,version:T,objectId:S}=a;return{digest:_,version:T,objectId:S}}),v=new ja;if(v.setGasPrice(i),v.setGasPayment(h||[]),v.setSender(r),s&&v.setGasBudget(s),c===0){let a=v.splitCoins(v.gas,x?.map(_=>v.pure(_)));g.forEach((_,T)=>{v.transferObjects([a[T]],v.pure(_))})}else if(d?.length>1){let a=d.slice(1).map(S=>v.object(S.objectId)),_=v.object(d[0].objectId);v.mergeCoins(_,a);let T=v.splitCoins(_,[v.pure(o)]);v.transferObjects([T],v.pure(t))}else{let a=v.splitCoins(v.object(d[0].objectId),[v.pure(o)]);v.transferObjects([a],v.pure(t))}let p=Ga(await v.build({client:Ja}));return{tx:v,txBytes:p}}),$o=()=>{let t=nt(),e=Fi();return B(async({to:r,from:o,value:n,values:s,toes:i,coinId:l,baseCoinId:d})=>{let c=s?.length?s?.reduce((v,p)=>M.add(v,p),0):n,g=await t({coinId:l,address:o,value:c,toAddr:i?.[0]||r});return(await e({...g,to:r,toes:i,from:o,value:n,coinId:l,values:s,baseCoinId:d}))?.tx?.blockData?.gasConfig?.budget||"0"})},Bi=()=>{let t=Fi(),e=nt(),r=qo({localType:Ee});return B(async({to:o,toes:n,values:s,from:i,coinId:l,value:d,baseCoinId:c})=>{let g=s?.length?s?.reduce((_,T)=>M.add(_,T),0):d,x=await e({value:g,coinId:l,address:i,toAddr:n?.[0]||o}),{tx:h,txBytes:v}=await t({...x,value:d,coinId:l,to:o,toes:n,from:i,values:s,baseCoinId:c}),a=await r({params:{type:"raw",data:v},fromAddr:i});return{tx:h,txBytes:v,signedTx:a}})},Di=t=>{let e=ka(),r=Na(),o=Ur({coinId:t,txSource:pa.NORMAL});return B(async({tx:n,to:s,from:i,txBytes:l,coinAmount:d,signedTx:c,walletId:g})=>{let{signature:x,hash:h}=c||{},v=e(g)||r;return await o({tx_bytes:l,signatures:[x],request_type:"WaitForEffectsCert"},{txHash:h,coinAmount:d,accountId:g,fromAdr:i,toAdr:s,walletType:v?.serverWalletType,serviceCharge:n?.blockData?.gasConfig?.budget||"0"})})};f();m();re();Le();oo();ro();var Fd="8000",Jo=()=>{let t=nt();return B(async({coinId:e,address:r,inputData:o})=>{let n=await t({coinId:e,address:r,fromAddr:r,scenario:ha.SCENARIO_SEND_COIN}),s=n,{gasUnitPrice:i}=n;if(o){let{data:{gasLimit:d}}=await Lt(Ft.getAptosGasLimit,{inputData:o});s=d}else s=Fd;let l=M.mul(i,s);return{...n,networkFee:l,maxGasAmount:s,gasUnitPrice:i}})},Mi=()=>{let t=qo({localType:le});return B(async({to:e,from:r,amount:o,baseCoinId:n,metaAddress:s,sequenceNumber:i,maxGasAmount:l,gasUnitPrice:d,protocolType:c,chainId:g,expirationTimestampSecs:x,tyArg:h})=>{let p={base:{sequenceNumber:i,chainId:g,maxGasAmount:l,gasUnitPrice:d,expirationTimestampSecs:x}},a={amount:o,recipientAddress:e};return n===0&&(p.type=Wo.TRANSFER,p.data=a),n!==0&&c===so.APTOS_FUNGIBLE_TOKEN&&(p.type=Wo.FUNGIBLE_ASSET_TRANSFER,p.data={...a,fungibleAssetMetadataAddress:s}),n!==0&&c===so.APTOS_TOKEN&&(p.type=Wo.TOKEN_TRANSFER,p.data={...a,tyArg:h}),await t({params:p,fromAddr:r})})};var ji=k(K());f();m();var Ui=k(K());f();m();f();m();var fo=k(Et()),Pi=k(K());var ut=(t,e)=>r=>{let o=(0,fo.useSelector)(t),n=(0,fo.useDispatch)(),s=l=>{e&&n(e(l))},i=B(s);return(0,Pi.useEffect)(()=>{if(r===void 0)return;let l=typeof r=="function"?r():r;i(l)},[r,i]),[o,s]},Ri=t=>()=>{let e=(0,fo.useDispatch)();return(...o)=>{t&&e(t(...o))}};var De=ut(li,Ti),ee=ut(ci,Si),Qo=ut(ui,Xo),en=ut(di,Ni),dt=ut(ai,xi),zi=ut(gi,Ai),zh=ut(_i,bi),ge=ut(fi,wi),Wi=Ri(Ii),ft=ut(pi,yi),mt=ut(hi,Ei),Gr=ut(ii,ki);var Tr=t=>{let[e]=De(),r=t||e?.rpcUrl;return(0,Ui.useCallback)(async()=>r?await La(r):{},[r])};f();m();var tn=k(K()),Hi=k(Et());var rn=k(rt());Le();var Bd=()=>{let t=(0,Hi.useSelector)(Fa);return(0,tn.useCallback)(e=>{let r=t.filter(o=>o.chainId===e&&!o.isDeleted);return(0,rn.uniqBy)(r,"address")},[t])},Dd=(t,e)=>{let r=Dt(),{data:o,reload:n,loadingMore:s,listRef:i}=$a({aggregation:!1,chainIds:[Vo(t)],symbolLike:e||void 0},{filter:!1,reloadDeps:[t,e],beforeRequest(){return r||!t?{list:[],pageNo:0,isNoMore:!0}:!1}});return{list:Uo(()=>o?.list??[],[o?.list]),listRef:i,loadingMore:s,refreshDom:n}},Gi=(t,e)=>{let{chainId:r,localType:o}=t||{},[n,s]=(0,tn.useState)([]),i=Dt(),l=xa(e,{wait:300}),{list:d,listRef:c,refreshDom:g,loadingMore:x}=Dd(r,l),h=Bd(),v=nt(),p=Wr(J);zr(async()=>{if(o===J){let{coinFeeList:_}=await v({coinId:Pr,address:p,fromAddr:p,toAddr:p,value:"0"});s(_)}},[o]);let a=Uo(()=>{if(o===J&&n?.length){let _=n.map(({coinId:S})=>S);return d.filter(({coinId:S})=>(0,rn.includes)(_,S)).map(S=>{let{tokenId:N,originSymbol:C}=n.find(z=>z?.coinId===S?.coinId);return{...S,tokenId:N,originSymbol:C}})}return d},[o,d,n]);return Uo(()=>i?{list:h(r)??[],listRef:null,refreshDom:null,loadingMore:!1}:{list:a,listRef:c,refreshDom:g,loadingMore:x},[r,a,d,c,x,i,h])},mo=()=>{let t=Dt(),e=Da(),r=Ea();return B(async({coinId:o,chainId:n,contractAddress:s})=>{if(t)try{return(await e(n,[s||""]))?.[0]?.price||0}catch{return 0}return r?.[o]?.coinToUSDRate||"0"},[t])};var on=t=>{let[e]=De(),r=t||e?.rpcUrl;return ei(r)};var Md=(t,e)=>{let[r]=ee(),{ready:o=!0,onSuccess:n}=e||{},s=ti(t);ga(async()=>{let i=await s(r?.chainId);return{isSupportEip1559:i?.[0]?.isSupportEip1559||!1,gasPriceLevels:i}},{onSuccess:n,pollingInterval:7e3,ready:!!r?.chainId&&!!o})},Yi=()=>{let[t]=ee(),[e]=De(),r=(0,Qn.useDispatch)(),[o,n]=(0,ji.useState)([]),[,s]=Gr(),i=Wr(t?.localType),l=i&&lt(i,t?.localType);return Md(e?.rpcUrl,{ready:!!e?.rpcUrl&&!t?.coinId,onSuccess:({isSupportEip1559:d,gasPriceLevels:c})=>{s(d),r(Jn(c)),n(c)}}),Ra({coinId:t?.coinId,chainId:t?.chainId,address:l},{ready:!!t?.coinId&&![le,ae,Ee,J].includes(t?.localType),onSuccess:d=>{let{gasPrice:c,needExtFee:g}=d;r(Oi(g)),s(c?.supportEip1559||!1),n($n(c)),r(Jn($n(c)))}}),o};var nn=()=>{let t=Sr(ar,{withPrice:!0}),e=nt(),r=Pa();return B(async({from:o,to:n,coinId:s,chainId:i})=>{let l=await e({coinId:s,toAddr:n,address:o,fromAddr:o})||{},d=await r({from:o,chainId:i,coinId:s,bizLine:6,simulateTransactionParamList:[{sigVerify:!1,replaceRecentBlockhash:!0}],checkTypes:[Vn.TX_ANALYZE]}),{simulateTransactionResultList:c}=d?.[Vn.TX_ANALYZE]||{},{unitGasLimit:g}=c[0]||{},{fee:x,feelimit:h,computeUnitPrice:v,rent:p,solRent:a}=l;if(x){let{priorityFee:_,priorityGasPrice:T,priorityGasLimit:S}=Ya(h,v,g),N=M.add(x,_),C=M.div(N,10**t?.decimals);return{rent:p,solRent:a,networkFee:C,networkFeeInt:N,computeUnitLimit:S,computeUnitPrice:T,networkFeeMarket:M.mul(C,t?.currencyPrice)}}return{estimateFailed:!0}})},qi=()=>{let t=Sr(Mo,{withPrice:!0}),e=$o();return B(async({coinId:r,from:o,to:n,value:s,baseCoinId:i})=>{let l=await e({to:n,from:o,value:s,coinId:r,baseCoinId:i}),d=M.div(l,10**t?.decimals);return{networkFee:d,networkFeeInt:l,networkFeeMarket:M.mul(d,t?.currencyPrice)}})},sn=t=>{let e=Sr(t||Pr,{withPrice:!0});return B(async({to:r,chainId:o,contractAddress:n})=>{let s={address:r,type:"Transfer",contractAddress:n,chainId:o||e?.chainId},l=(await Xa(s))?.data?.fee||"0",d=M.div(l,10**(e?.decimals||0));return{networkFee:d,networkFeeInt:l,networkFeeMarket:M.mul(d,e?.currencyPrice)}})},Zi=()=>{let t=Sr(Do,{withPrice:!0}),e=Jo();return B(async({coinId:r,address:o,inputData:n})=>{let{networkFee:s}=await e({coinId:r,address:o,inputData:n}),i=M.div(s,10**t?.decimals);return{networkFee:i,networkFeeInt:s,networkFeeMarket:M.mul(i,t?.currencyPrice)}})};var zn=k(Et());Le();Yn();f();m();var Ge=k(K());re();f();m();var Vt=k(K());var an=k(Be());f();m();f();m();var po=k(K());f();m();var Ki=k(qn());function Pd(){let t=(0,Ki.useHistory)(),[e,r]=zi(),o=(v,p)=>(a=!0)=>{e!==p&&r(p),a?t.replace(v):t.push(v)},n=v=>t.location.pathname===v,s=o(ao,uo.ADD_ADDRESS),i=o(io,uo.CONFIRM),l=o(lo,uo.SEND),d=o(xr,uo.SELECT_TYPE),c=n(xr),g=n(io),x=n(lo),h=n(ao);return{isConfirmPage:g,isHomePage:c,isSendPage:x,isAddressPage:h,gotoAddressPage:s,gotoConfirmPage:i,gotoSendPage:l,gotoHomePage:d}}var Ke=Pd;function Rd(){let[t]=De(),[e]=ee(),[r]=ge(),{gotoHomePage:o,gotoAddressPage:n,isConfirmPage:s,isSendPage:i,isAddressPage:l,isHomePage:d}=Ke(),c=(0,po.useCallback)(()=>{!t&&!e?.symbol&&!d&&o()},[t,e,d,o]),g=(0,po.useCallback)(()=>{r.length<=0&&!l&&n()},[r,l,n]);(0,po.useLayoutEffect)(()=>{l?c():(s||i)&&(c(),g())},[c,g,l,s,i])}var Vi=Rd;function zd(){return Vi(),null}var Xi=zd;f();m();var wr={root:"_root_3x3tv_1",container:"_container_3x3tv_6",okgLayout:"_okgLayout_3x3tv_10",headerBox:"_headerBox_3x3tv_44",header:"_header_3x3tv_44",footer:"_footer_3x3tv_181"};function Wd({children:t}){return Vt.default.createElement(w.Box,{className:wr.footer},t)}function Ud({children:t,footer:e,useOkg:r=!0,headerProps:o={}}){let n=r?Vt.default.Fragment:w.Box;return Vt.default.createElement(w.FlexBox,{className:wr.root,direction:w.DIRECTION.vertical},Vt.default.createElement(w.Container,{className:(0,an.default)(wr.container,r&&wr.okgLayout)},Vt.default.createElement(n,{className:(0,an.default)(!r&&wr.headerBox)},Vt.default.createElement(Li,{...o,className:(0,an.default)(wr.header,o.className)})),t),Vt.default.createElement(Wd,null,e),Vt.default.createElement(Xi,null))}var ir=Ud;f();m();var Mt=k(K());var es=k(Be());f();m();var yr={root:"_root_1f6pc_1",icon:"_icon_1f6pc_101",title:"_title_1f6pc_120",subtitle:"_subtitle_1f6pc_140",tip:"_tip_1f6pc_168",tipIcon:"_tipIcon_1f6pc_172"};function Hd(t){let{icon:e,title:r,subtitle:o,tip:n,className:s,titleClassName:i,subtitleClassName:l}=t;return Mt.default.createElement(w.Box,{className:(0,es.default)(yr.root,s)},e&&Mt.default.createElement(w.Box,{className:yr.icon},e),Mt.default.createElement(w.Box,null,Mt.default.createElement(w.Box,{className:(0,es.default)(yr.title,i)},r),Mt.default.createElement(w.Box,{className:yr.subtitle},Mt.default.createElement(w.Box,{className:l},o),n&&Mt.default.createElement(_r,{title:n,placement:_r.DIRECTION.bottom,maxWidth:240},Mt.default.createElement(w.Box,{className:yr.tip},Mt.default.createElement(ot,{className:`okds-question-mark-circle ${yr.tipIcon}`}))))))}var jr=Hd;f();m();var at=k(K());f();m();var Gd={MANY_TO_MANY:"MANY_TO_MANY",ONE_TO_MANY:"ONE_TO_MANY",MANY_TO_ONE:"MANY_TO_ONE"},X=Gd;re();var ho=k(Be());Le();f();m();var He={root:"_root_1cmo5_2",select:"_select_1cmo5_99",titleBox:"_titleBox_1cmo5_120",title:"_title_1cmo5_120",tip:"_tip_1cmo5_147",card:"_card_1cmo5_163",icon:"_icon_1cmo5_236",checkBox:"_checkBox_1cmo5_252",check:"_check_1cmo5_252",disabled:"_disabled_1cmo5_268",active:"_active_1cmo5_272",disabledContent:"_disabledContent_1cmo5_275",name:"_name_1cmo5_278",subtitle:"_subtitle_1cmo5_285"};function jd(t){let{icon:e,name:r,mode:o,disable:n,active:s,onSelected:i,subtitle:l}=t,d=()=>{i(o);let c={[X.ONE_TO_MANY]:"1tomany",[X.MANY_TO_MANY]:"manytomany",[X.MANY_TO_ONE]:"manyto1"};ua({button_name:c[o]})};return at.default.createElement(w.Box,{className:(0,ho.default)(He.card,{[He.active]:s,[He.disabled]:n}),onClick:d},at.default.createElement("img",{src:e,height:72,alt:"",className:(0,ho.default)(He.icon,{[He.disabledContent]:n})}),at.default.createElement(w.Box,{className:(0,ho.default)(He.name,{[He.disabledContent]:n})},r),l&&at.default.createElement(w.Box,{className:(0,ho.default)(He.subtitle,{[He.disabledContent]:n})},l),s&&at.default.createElement(w.Box,{className:He.checkBox},at.default.createElement(sr.Circle,{checked:!0})))}function Yd(){let t=E("wallet_extension_type_title_transaction_method");return at.default.createElement(w.FlexBox,{className:He.titleBox,align:w.ALIGN.center},at.default.createElement(w.Box,{className:He.title},t))}function qd(t){let{mode:e,onSelected:r,selectedNetwork:o}=t,n=Ho({light:"/cdn/assets/imgs/235/15D8A8A385BD668B.png",dark:"/cdn/assets/imgs/245/A1F7D56C14F82C12.png"}),s=Ho({light:"/cdn/assets/imgs/235/3043DD8BFB521773.png",dark:"/cdn/assets/imgs/245/5BE287EAEC2D70D7.png"}),i=Ho({light:"/cdn/assets/imgs/235/A1F8C8D99B9BE99C.png",dark:"/cdn/assets/imgs/245/2815C6DD084226C7.png"}),l={[X.ONE_TO_MANY]:{mode:X.ONE_TO_MANY,icon:n,disable:o?.localType===J,name:E("wallet_extension_type_pic_one_to_many")},[X.MANY_TO_ONE]:{mode:X.MANY_TO_ONE,icon:s,name:E("wallet_extension_type_pic_many_to_one")},[X.MANY_TO_MANY]:{mode:X.MANY_TO_MANY,icon:i,name:E("wallet_extension_type_pic_many_to_many")}};return at.default.createElement(w.Box,{className:He.root},at.default.createElement(Yd,null),at.default.createElement(w.Box,{className:He.select},Object.values(l).map((d,c)=>at.default.createElement(jd,{key:c,onSelected:r,active:d.mode===e,...d}))))}var $i=qd;f();m();var _e=k(K());var rs=k(Be()),Ji=k(ca());re();Le();f();m();var Pt={root:"_root_rlpgb_1",title:"_title_rlpgb_4",inputWrap:"_inputWrap_rlpgb_22",option:"_option_rlpgb_25",inputPopup:"_inputPopup_rlpgb_35",show:"_show_rlpgb_51",loadingWrap:"_loadingWrap_rlpgb_54","select-up-active":"_select-up-active_rlpgb_60",selectUpActive:"_select-up-active_rlpgb_60","item-image":"_item-image_rlpgb_64",itemImage:"_item-image_rlpgb_64","arrow-down-icon":"_arrow-down-icon_rlpgb_68",arrowDownIcon:"_arrow-down-icon_rlpgb_68"};var Zd="0x",Kd=async(t,e)=>{try{return!Ua(e)||await t.eth.getCode(e)===Zd}catch{return!0}},Vd=async(t,e)=>{let r=new e.eth.Contract(Ji.default,t),[o,n,s]=await Promise.all([r.methods.symbol().call(),r.methods.decimals().call(),r.methods.name().call()]);return{name:s,symbol:o,decimals:n}},ts=!1;function Xd(t,e){let{value:r,options:o,disabled:n,selectedNetwork:s,onSelect:i,onInputChange:l,onCustomContractChange:d,refreshInfiniteScrollRef:c,tokensLoadingMore:g}=t,x=(0,_e.useRef)(),[h,v]=(0,_e.useState)(!1),[p,a]=(0,_e.useState)(!1),[_,T]=(0,_e.useState)(!1),[S,N]=(0,_e.useState)(r?.address||""),C=Z=>(ts=!0,T(!1),N(""),i(Z?{...Z,custom:!1}:null)),z=B(async({target:Z})=>{N(Z?.value)},[s?.rpcUrl]);(0,_e.useEffect)(()=>{l?.(S)},[S,l]);let W=async()=>{let Z=o.find(({address:L})=>!!S&&L===S);if(Z)C(Z);else if(!ts&&S&&![le,ae,Ee,J].includes(s?.localType)){let L=await Yo(s?.rpcUrl);if(await Kd(L,S)===!1){let R=await Vd(S,L);d?.({...R,address:S,custom:!0}),T(!1)}else T(!0),d?.(null)}ts=!1};(0,_e.useEffect)(()=>{N(""),T(!1)},[s?.chainId]);let Y=Dt();(0,_e.useEffect)(()=>{N(""),T(!1)},[Y]);let P=S&&_,O=!!o?.length;(0,_e.useEffect)(()=>{!h||(O?O&&a(!0):a(!1))},[O]),(0,_e.useLayoutEffect)(()=>{p&&c?.()},[p,c]),_a(()=>{v(!1),a(!1)},x);let D=E("wallet_extension_type_placeholder_select_crypto");return _e.default.createElement(w.Box,{className:Pt.root},_e.default.createElement(w.Box,{className:Pt.title},E("wallet_extension_type_title_select_coin")),_e.default.createElement("div",{className:Pt.inputWrap},_e.default.createElement(pe,{onRef:Z=>{x.current=Z},style:{width:"100%"},error:P&&E("wallet_manage_crypto_custom_crypto_errortip_invalid_address"),placeholder:D,value:r&&r?.custom===!1?r?.symbol:S||r?.address,onChange:z,onBlur:()=>{W()},onFocus:()=>{v(!0),O&&a(!0)},size:pe.SIZE.xl,disabled:n,cleanable:!0,readonly:r&&r?.custom===!1&&"readonly",suffix:_e.default.createElement(ke,{className:(0,rs.default)({[Pt["select-up-active"]]:p}),icon:"okds-arrow-chevron-down-md",size:ke.SIZE.xs}),onClear:()=>C(null)}),!!p&&_e.default.createElement("div",{ref:e,className:(0,rs.default)(Pt.inputPopup,{[Pt.show]:p})},o.map(Z=>{let{image:L,imageUrl:G,symbol:R}=Z;return _e.default.createElement("div",{className:Pt.option,key:R,onClick:()=>{C(Z)}},_e.default.createElement(ke,{className:Pt.itemImage,src:L||G,text:R,size:ke.SIZE.md}),R)}),!!g&&_e.default.createElement("div",{className:Pt.loadingWrap},_e.default.createElement(yt.Circle,{size:yt.SIZE.md})))))}var Qi=_e.default.forwardRef(Xd);f();m();var pt=k(K());re();f();m();var $d=t=>`${va()}${t}`,el=$d;f();m();var Yr={root:"_root_tc3ej_2",title:"_title_tc3ej_99",item:"_item_tc3ej_122",question:"_question_tc3ej_138",answer:"_answer_tc3ej_155"};function Jd(){let t=el("/cdn/assets/files/235/C7BA61E964654AF6.csv"),e=E("wallet_extension_faq_maintitle_question"),r=[{question:E("wallet_extension_faq_title_distinction"),answer:pt.default.createElement("pre",null,E("wallet_extension_faq_text_one_to_many"))},{question:E("wallet_extension_sending_title_multisender_network"),answer:pt.default.createElement("pre",null,E("wallet_extension_sending_subtitle_multisender_evm"))},{question:E("wallet_extension_faq_title_what_transfer"),answer:pt.default.createElement("pre",null,E("wallet_extension_faq_text_transfer_definition"))},{question:E("wallet_extension_faq_title_how_transfer"),answer:pt.default.createElement("pre",null,E("wallet_extension_faq_text_transfer_method",{btn:pt.default.createElement(to,{type:to.TYPE.primary,href:t,weight:to.WEIGHT.muted,size:to.SIZE.sm},E("wallet_extension_multisender_btn_download"))}))}];return pt.default.createElement(w.Box,{className:Yr.root},pt.default.createElement(w.Box,{className:Yr.title},e),pt.default.createElement(w.Box,null,r.map((o,n)=>pt.default.createElement(w.Box,{key:n,className:Yr.item},pt.default.createElement(w.Box,{className:Yr.question},o.question),pt.default.createElement(w.Box,{className:Yr.answer},o.answer)))))}var tl=Jd;f();m();var bt=k(K()),rl=k(Et());re();f();m();var At={root:"_root_sdbg5_2",footer:"_footer_sdbg5_11",network:"_network_sdbg5_112",networkTitle:"_networkTitle_sdbg5_220",networkSelectBox:"_networkSelectBox_sdbg5_239",networkSelect:"_networkSelect_sdbg5_239",tokenSelect:"_tokenSelect_sdbg5_301",icon:"_icon_sdbg5_358",loader:"_loader_sdbg5_361","network-icon":"_network-icon_sdbg5_364",networkIcon:"_network-icon_sdbg5_364"};var Qd=()=>{let[t,e]=(0,bt.useState)(!1),r=ri(),[,o]=ee(),{isRpcMode:n,currentNetworkUniqueId:s}=(0,rl.useSelector)(Ta),i=r.find(h=>n?h.uniqueId===s:h.netWorkId===s),[l,d]=De(i),c=(0,bt.useMemo)(()=>r.map(h=>{let{chainId:v,icon:p,chainName:a,rpcUrl:_}=h;return{network:h,value:v,searchKeyword:a,label:bt.default.createElement(w.FlexBox,{align:w.ALIGN.center,style:{height:"20px",width:"100%"}},bt.default.createElement(w.FlexBox,{align:w.ALIGN.center,style:{flex:1}},l?.rpcUrl===_&&t?bt.default.createElement(yt,{className:At.loader,size:yt.SIZE.md}):bt.default.createElement(ke,{className:At.networkIcon,src:p,text:a,size:ke.SIZE.md}),a))}}),[r,l?.rpcUrl,t]),g=async h=>{try{e(!0),await(await Yo(h)).eth.getGasPrice()}catch{let p=gr.warn({title:E("developer_mode_network_toast_connect_failed"),text:E("developer_mode_network_toast_changenetwork"),cancelText:E("wallet_extension_sending_btn_cancel"),confirmText:E("developer_mode_network_btn_retry"),confirmBtnProps:{type:q.TYPE.highlight,size:q.SIZE.lg},onCancel:()=>{p.destroy(),d(null)},onConfirm:()=>{p.destroy(),g(h)}})}finally{e(!1)}},x=B(({network:h={},label:v,...p})=>{d({...h,...p}),h?.appBaseChain==="ethereum"?g(h.rpcUrl).then(()=>{o(null)}).catch(()=>{}):o(null),da()},[]);return(0,bt.useEffect)(()=>{o(null)},[n]),[t,l,c,x]},ol=Qd;f();m();var nl=k(K());var ef=t=>{let[e,r]=ee(),[o,n]=(0,nl.useState)(""),s=Dt(),i=ya(),{list:l,listRef:d,refreshDom:c,loadingMore:g}=Gi(t,o),x=async _=>{if(!_){r(null);return}let T=!_?.address,S=await ba({coinId:_.coinId}),N;T?N=S:N=i.find(({coinId:z})=>z===_.baseCoinId);let{chainId:C}=t||{};S===null||!T&&N===null||r({chainId:C,..._,...S,baseCoin:T?void 0:N})},h=_=>{let T=!_?.address,{chainId:S}=t||{},N=i.find(({chainId:C})=>C===Vo(S));r({chainId:S,..._,baseCoin:T?void 0:N})},v=B(_=>{x(_)}),p=B(_=>{n(_)}),a=B(_=>{h(_)});return[e,l,d,c,g,{onBatchTokenChange:s?a:v,onBatchCustomTokenChange:a,onInputChange:p}]},sl=ef;var tf=()=>{let{isSm:t}=Oe(),{gotoAddressPage:e}=Ke(),[r,o]=dt(),[n,s,i,l]=ol(),[d,c,g,x,h,{onBatchTokenChange:v,onBatchCustomTokenChange:p,onInputChange:a}]=sl(s);return Ge.default.createElement(ir,{footer:Ge.default.createElement(w.FlexBox,{justify:"flex-end",className:At.footer},Ge.default.createElement(q,{block:t,category:q.CATEGORY.fill,type:q.TYPE.highlight,size:t?q.SIZE.lg:q.SIZE.xl,disabled:!s?.chainId||!r||!d?.symbol,onClick:e},E("wallet_extension_footer_btn_next")))},Ge.default.createElement(w.Box,{className:At.root},Ge.default.createElement(jr,{title:E("wallet_extension_type_title_select_type"),subtitle:E("wallet_extension_type_subtitle_select")}),Ge.default.createElement(w.Box,{className:At.network},Ge.default.createElement(w.Box,{className:At.networkSelectBox},Ge.default.createElement(w.Box,{className:At.networkTitle},E("wallet_extension_type_title_select_internet")),Ge.default.createElement(Un,{block:!0,placeholder:E("wallet_extension_type_placeholder_ethereum"),size:Un.SIZE.xl,onChange:l,value:s?.chainId,options:i,className:At.networkSelect,disabled:n,searchFocus:!1,searchPlaceholder:E("wallet_extension_sending_input_search_network"),scrollStyle:{height:360}})),Ge.default.createElement(w.Box,{className:At.tokenSelect},Ge.default.createElement(Qi,{ref:g,disabled:!s?.chainId,value:d,options:c,onSelect:v,onInputChange:a,onCustomContractChange:p,selectedNetwork:s,tokensLoadingMore:h,refreshInfiniteScrollRef:x}))),Ge.default.createElement($i,{mode:r,selectedNetwork:s,onSelected:o}),Ge.default.createElement(tl,null)))},al=Ge.default.memo(tf);f();m();var Me=k(K());re();var Dl=k(Et());f();m();var Xt=k(K()),il=k(rt()),os=k(Et());re();var ln=()=>{let[t]=ee(),[e]=De(),[r,o]=(0,Xt.useState)(0),[n,s]=(0,Xt.useState)(0),i=(0,os.useSelector)(Xn),{usdToThisRate:l}=i,d=st(t),c=mo(),g=async()=>{if(d){let S=await c({chainId:t?.chainId,coinId:t?.coinId,contractAddress:t?.address});o(S),s(S)}else{let[S,N]=await Promise.all([c({chainId:t?.chainId,coinId:t?.baseCoin?.coinId,contractAddress:t?.address}),c({chainId:t?.chainId,coinId:t?.coinId,contractAddress:t?.address})]);s(S),o(N)}};(0,Xt.useEffect)(()=>{g()},[]);let[x]=ge(),h=(0,os.useSelector)(Ze),v=x?.length,p=d?t:t?.baseCoin,a=(0,Xt.useMemo)(()=>x[0]?.realNetworkFee?x.reduce((N,{realNetworkFee:C})=>M.add(N,C),0):M.mul(h?.networkFee??0,v),[t,h]),_=(0,Xt.useMemo)(()=>{let S=x.reduce((N,{txAmount:C})=>M.add(N,C),0);return M.div(S,10**(t?.decimals||18))},[x]);return(0,Xt.useMemo)(()=>{let S=M.mul(l,M.mul(n,a)),N=M.mul(l,M.mul(r,_));return[{title:"wallet_extension_info_title_internet",icon:e?.icon,value:e?.chainName,showIcon:!0},{title:"wallet_extension_info_title_crypto",icon:t?.image,value:t?.symbol,showIcon:!0},{title:"wallet_extension_info_title_address_amount",value:M.thousandFormat(v)},{title:"wallet_extension_info_title_transfer_amount",value:no((0,il.max)([_,0]),{symbol:t?.symbol??""}),market:N},{title:"wallet_extension_info_title_internet_fee",value:no(a,{symbol:p?.symbol??""}),market:S}]},[t,e,a,r,n,_,v])};f();m();var ht=k(K()),ns=k(Be());re();f();m();var lr={root:"_root_z3ank_2",row:"_row_z3ank_97",nextRow:"_nextRow_z3ank_114",title:"_title_z3ank_124",subtitle:"_subtitle_z3ank_148",value:"_value_z3ank_174",icon:"_icon_z3ank_177"};function ll(t){let{icon:e,title:r,value:o,showIcon:n=!1,market:s}=t;return ht.default.createElement(w.Box,null,ht.default.createElement(w.Box,{className:lr.title},E(r)),ht.default.createElement(w.Box,{className:(0,ns.default)(lr.subtitle)},n&&(e||o)&&ht.default.createElement(ke,{src:e,className:lr.icon,text:o,size:ke.SIZE.md}),ht.default.createElement(w.Box,{className:lr.value},o)),s!==void 0&&ht.default.createElement(ne.DisplayAmount,{wrap:!0,useApproximate:!0,amount:s,mode:ne.LEGAL,type:ne.TYPE.secondary,size:ne.SIZE.sm,style:{display:"block",marginTop:"4px"}}))}function rf({className:t,statistics:e}){let{isSm:r}=Oe(),o=Math.floor(e.length/2),n=r?o:e.length;return ht.default.createElement(w.Box,{className:(0,ns.default)(lr.root,t)},ht.default.createElement(w.Box,{className:lr.row},e.slice(0,n).filter(Boolean).map((s,i)=>ht.default.createElement(ll,{...s,key:i}))),ht.default.createElement(w.Box,{className:lr.nextRow},e.slice(n).filter(Boolean).map((s,i)=>ht.default.createElement(ll,{...s,key:i}))))}var cn=rf;f();m();var ss=k(K());f();m();var de={root:"_root_1sugj_2",table:"_table_1sugj_54",row:"_row_1sugj_63",order:"_order_1sugj_68",addressError:"_addressError_1sugj_94",fromError:"_fromError_1sugj_97",text:"_text_1sugj_100",oneLineText:"_oneLineText_1sugj_122",moreLineText:"_moreLineText_1sugj_125",remove:"_remove_1sugj_128",success:"_success_1sugj_133",error:"_error_1sugj_146",open:"_open_1sugj_159",receiveError:"_receiveError_1sugj_162",errorIcon:"_errorIcon_1sugj_165",hash:"_hash_1sugj_170",hashText:"_hashText_1sugj_180",loader:"_loader_1sugj_191"};function of({dataSource:t,columns:e,scroll:r}){let o=()=>({style:{background:"var(--okd-color-background-surface-primary)"}});return ss.default.createElement(w.Box,{className:de.root},ss.default.createElement(sa,{columns:e,dataSource:t,className:de.table,onHeaderCell:o,scroll:r}))}var un=of;var So=k(Be());Le();var gn=k(rt());f();m();var vt={root:"_root_ysd61_1",statistics:"_statistics_ysd61_36",setting:"_setting_ysd61_57",amount:"_amount_ysd61_76",no_gas:"_no_gas_ysd61_227",noGas:"_no_gas_ysd61_227",interval:"_interval_ysd61_365",gas:"_gas_ysd61_644",address:"_address_ysd61_783",footer:"_footer_ysd61_899",alert:"_alert_ysd61_1002"};f();m();var Ve=k(K()),cl=k(Be());re();Le();f();m();var $t={root:"_root_iq84d_1",type:"_type_iq84d_32",title:"_title_iq84d_54",random:"_random_iq84d_77",input:"_input_iq84d_91",setting:"_setting_iq84d_95"};f();m();var as=k(K());function nf(){let[t,e]=(0,as.useState)(!1),[r,o]=(0,as.useState)(!1),n=(d,c)=>d&&c&&Number(d)>Number(c);return{hasMinError:t,hasMaxError:r,checkMaxError:(d,c)=>{e(!1),o(n(d,c))},checkMinError:(d,c)=>{o(!1),e(n(d,c))},clearError:()=>{o(!1),e(!1)}}}var dn=nf;function sf({value:t,className:e,options:r,onChange:o}){let[n]=ee(),[s]=Qo(),i=Number(n?.decimals??18),{hasMinError:l,hasMaxError:d,checkMaxError:c,checkMinError:g,clearError:x}=dn(),h=S=>{o?.({min:S}),g(S,t.max)},v=S=>{o?.({max:S}),c(t.min,S)},p=S=>{o?.({amount:S})},a=B(S=>{S?.value!==t.type&&(o?.({type:S?.value,amount:"",min:"",max:""}),x())},[t]),_=M.thousandFormat("0.00"),T=(0,Ve.useMemo)(()=>n?.localType===ae&&st(n)&&M.div(s,10**n?.decimals)||0,[s,n]);return Ve.default.createElement(w.Box,{className:(0,cl.default)($t.root,e)},Ve.default.createElement(w.Box,{className:$t.type},Ve.default.createElement(w.Box,{className:$t.title},E("wallet_extension_amount_title_transfer_amount")),Ve.default.createElement(w.Box,null,Ve.default.createElement(Mr,{options:r,value:t?.type,onChange:a,align:Mr.DIRECTION.right}))),Ve.default.createElement(w.Box,{className:$t.setting},t?.type===ie.RANDOM?Ve.default.createElement(w.Box,{className:$t.random},Ve.default.createElement(pe.Number,{enableMinus:!1,className:$t.input,suffix:n?.symbol,title:E("wallet_extension_amount_input_lowest"),value:t?.min,onChange:h,size:pe.SIZE.lg,precision:i,placeholder:_,min:T,error:l,errorType:pe.TIP_TYPE.always}),Ve.default.createElement(pe.Number,{suffix:n?.symbol,className:$t.input,title:E("wallet_extension_amount_input_highest"),value:t?.max,onChange:v,precision:i,size:pe.SIZE.lg,placeholder:_,min:T,error:d,errorType:pe.TIP_TYPE.always})):Ve.default.createElement(w.Box,{className:$t.custom},Ve.default.createElement(pe.Number,{enableMinus:!1,suffix:n?.symbol,title:E("wallet_extension_amount_subtitle_send_amount"),value:t?.amount,size:pe.SIZE.lg,onChange:p,disabled:t?.type===ie.ALL,precision:i,placeholder:t?.type===ie.ALL?E("wallet_extension_amount_dropdown_all_balance"):_,min:T}))))}var ul=sf;f();m();var Rt=k(K()),dl=k(Be());re();f();m();var cr={root:"_root_rc0rn_1",title:"_title_rc0rn_27",type:"_type_rc0rn_45",random:"_random_rc0rn_56",input:"_input_rc0rn_76",setting:"_setting_rc0rn_80"};function af({value:t,className:e,onChange:r}){let{type:n,min:s,max:i}=t,{hasMinError:l,hasMaxError:d,checkMaxError:c,checkMinError:g,clearError:x}=dn(),h=z=>{let W={...t,...z};r?.(W)},v=z=>{let W=z;h({min:W}),g(W,i)},p=z=>{h({max:z}),c(s,z)},a=E("wallet_extension_interval_title_send_interval"),_=[{value:We.NONE,label:E("wallet_extension_interval_select_no_interval")},{value:We.RANDOM,label:E("wallet_extension_interval_dropdown_random_interval")}],T=E("wallet_extension_interval_subtitle_lowest"),S=E("wallet_extension_interval_subtitle_highest"),N=z=>{let W=z.value;W!==n&&(h({type:W,min:"",max:""}),x())},C=n===We.NONE;return Rt.default.createElement(w.Box,{className:(0,dl.default)(cr.root,e)},Rt.default.createElement(w.Box,{className:cr.type},Rt.default.createElement(w.Box,{className:cr.title},a),Rt.default.createElement(w.Box,null,Rt.default.createElement(Mr,{options:_,value:n,onChange:N,align:Mr.DIRECTION.right}))),Rt.default.createElement(w.Box,{className:cr.setting},Rt.default.createElement(w.Box,{className:cr.random},Rt.default.createElement(pe.Number,{className:cr.input,title:T,value:s,onChange:v,size:pe.SIZE.lg,placeholder:"0",min:0,max:600,disabled:C,error:l,errorType:pe.TIP_TYPE.always}),Rt.default.createElement(pe.Number,{className:cr.input,title:S,value:i,onChange:p,size:pe.SIZE.lg,placeholder:"0",disabled:C,min:0,max:600,error:d,errorType:pe.TIP_TYPE.always}))))}var fl=af;f();m();var fe=k(K());var fs=k(Be());Yn();re();f();m();var Xe={root:"_root_17dsg_1",title:"_title_17dsg_27",setting:"_setting_17dsg_46",item:"_item_17dsg_70",inactive:"_inactive_17dsg_106",active:"_active_17dsg_109",label:"_label_17dsg_112",fee:"_fee_17dsg_119",gweiText:"_gweiText_17dsg_143",customInput:"_customInput_17dsg_147",defaultTip:"_defaultTip_17dsg_153",defaultChecker:"_defaultChecker_17dsg_159"};f();m();f();m();f();m();var Jt=k(K());re();var fn=k(Be());f();m();var is=k(K());var ml=k(Be());var lf=({children:t,className:e,...r})=>is.default.createElement(w.Box,{className:(0,ml.default)(de.row,e),...r},is.default.createElement(w.Box,null),t),zt=lf;function cf(t){let{error:e,showShortAddress:r=!1,from:o,order:n,to:s,isFromAddress:i=!1,showTextOneLine:l=!1,showOrder:d=!1,showError:c=!1}=t,g=e===Bt.BALANCE_INSUFFICIENT,x=!!e,h=g?"okx-wallet-plugin-warning-circle-fill":"okx-wallet-plugin-gas",v=(0,Jt.useMemo)(()=>e===Bt.BALANCE_INSUFFICIENT?E("wallet_extension_list_tooltips_scarce_balance"):e===Bt.FEE_BALANCE_INSUFFICIENT?E("wallet_extension_list_tooltips_scarce_fee"):e,[e]),p=i?o:s,a=r?zo(p):p;return Jt.default.createElement(zt,null,d&&Jt.default.createElement(w.Box,{className:de.order},n,"."),Jt.default.createElement(w.Box,{className:(0,fn.default)(de.text,{[de.oneLineText]:l,[de.moreLineText]:!l,[de.receiveError]:c&&x})},a),c&&x&&Jt.default.createElement(w.Box,{className:(0,fn.default)(de.addressError)},Jt.default.createElement(_r,{title:v},Jt.default.createElement(ot,{className:(0,fn.default)(h,de.errorIcon)}))))}var pl=cf;f();m();var ls=k(K());var hl=k(Be());re();var vl=k(rt());function uf(t){let{txAmount:e,showTextOneLine:r}=t;return ls.default.createElement(zt,null,ls.default.createElement(w.Box,{className:(0,hl.default)(de.text,{[de.oneLineText]:r,[de.moreLineText]:!r})},M.thousandFormat((0,vl.max)([e||0,0]))))}var gl=uf;f();m();var ur=k(K()),_l=k(wd());re();var cs=k(Be());function df(t){let{txHash:e}=t,[r]=De(),o="",n=r.blockExplorerUrl||r.explorerUrl;n&&(o=Qa(n,"tx",e));let s=()=>{e&&(o?globalThis.platform.openTab({url:o}):((0,_l.default)(e),Hn.success({desc:ur.default.createElement(ne.Text,{inherit:!0,forceWrap:!0},e),placement:Hn.DIRECTION.top,title:E("wallet_receive_toast_address_copied")})))};return ur.default.createElement(zt,{className:de.hash,onClick:s},e?ur.default.createElement(ur.default.Fragment,null,ur.default.createElement(w.Box,{className:(0,cs.default)(de.text,de.hashText)},zo(e)),ur.default.createElement(w.Box,null,ur.default.createElement(ot,{className:(0,cs.default)(de.open,{"okx-wallet-plugin-open-link":o,"okx-wallet-plugin-copy":!o})}))):"-")}var xl=df;f();m();var vo=k(K());var us=k(Be());function ff(t){let{txStatus:e}=t;return vo.default.createElement(zt,null,(()=>{switch(e){case V.SUCCEED:return vo.default.createElement(ot,{className:(0,us.default)("okds-success-circle",de.success)});case V.FAILED:case V.DROPPED:return vo.default.createElement(ot,{className:(0,us.default)("okds-fail-circle",de.error)});case V.PENDING:return vo.default.createElement(yt,{size:yt.SIZE.md,loaderClassName:de.loader});default:return"-"}})())}var Sl=ff;f();m();var mn=k(K());var ds=k(Be());function mf(t){let[e,r]=ge(),{gotoAddressPage:o}=Ke(),{index:n}=t,s=()=>{let i=[...e.slice(0,n),...e.slice(n+1)];r(i),i.length<=0&&o()};return mn.default.createElement(zt,null,mn.default.createElement(w.Box,{className:(0,ds.default)(de.text),onClick:s},mn.default.createElement(ot,{className:(0,ds.default)("okx-wallet-plugin-trash",de.remove)})))}var Tl=mf;var Ue={ADDRESS:"address",AMOUNT:"amount",ACTION:"action",HASH:"hash",STATUS:"status"},pn={[Ue.ADDRESS]:pl,[Ue.AMOUNT]:gl,[Ue.ACTION]:Tl,[Ue.HASH]:xl,[Ue.STATUS]:Sl};var qr={FROM:"from",TO:"to",TX_AMOUNT:"txAmount",ACTION:"action"},wl=[{title:"wallet_extension_list_title_send_address",key:qr.FROM,type:Ue.ADDRESS},{title:"wallet_extension_list_title_receive_address",key:qr.TO,type:Ue.ADDRESS},{title:"wallet_extension_list_title_amount",key:qr.TX_AMOUNT,type:Ue.AMOUNT,width:100},{title:"wallet_extension_list_title_operation",key:qr.ACTION,type:Ue.ACTION,width:50}];var go={[qe.HIGH]:"wallet_extension_gas_select_fast",[qe.MEDIUM]:"wallet_extension_gas_select_average",[qe.LOW]:"wallet_extension_gas_select_slow",[qe.CUSTOM]:"commonall_filter_dropdown_custom"},yl=[{value:ie.CUSTOM,label:"wallet_extension_amount_select_designated_amount"},{value:ie.ALL,label:"wallet_extension_amount_dropdown_all_balance"},{value:ie.RANDOM,label:"wallet_extension_amount_dropdown_random_size"}];function El(){return fe.default.createElement("div",{className:Xe.gweiText},E("extension_wallet_transaction_input_gwei"))}function pf({custom:t,onClose:e,network:r,onConfirm:o,isSupportEip1559:n}){let{gasPrice:s,gasLimit:i,baseFeePerGas:l,maxFeePerGas:d,maxPriorityFeePerGas:c}=t,g=Zo(l),x=n?`${E("extension_wallet_transaction_text_maxbase_fee")} (${E("extension_wallet_transaction_text_current",{number:g})})`:E("wallet_extension_cosmos_title_gasfee"),h=Zo(n?Rr(d,c):s),[v,p]=(0,fe.useState)(h),a=Zo(c),[_,T]=(0,fe.useState)(a),S=ni(),[N,C]=(0,fe.useState)(t.isDefault),z=O=>{let D=O.target.checked;if(D)C(D),ma();else{let Z=gr.tip({children:E("wallet_extension_mid_alert_checkbox_setting_uncheck"),confirmText:E("wallet_extension_btn_general_confirm"),cancelText:E("wallet_extension_btn_general_cancel"),btnFull:!1,async onConfirm(){await S(r,{[co.batchTransfer]:null}),C(D),Z.destroy()},onCancel(){Z.destroy()}})}},W=Dt(),[Y]=(0,fe.useState)(i),P=(0,fe.useMemo)(()=>{let O=!Number(v);return n&&(O=O||!Number(_)),O},[v,_,n]);return fe.default.createElement(gr.Confirmation,{maskClosable:!1,visible:!0,title:E("commonall_filter_dropdown_custom"),confirmText:E("commonall_text_btn_confirm"),cancelText:E("commonall_text_btn_cancel"),confirmDisabled:P,onConfirm:async()=>{let{price:O,usdToThisRate:D}=t,Z=Po(n?ia(v,_):v),{networkFee:L,networkFeeInt:G,networkFeeMarket:R}=Kt({gasPrice:Z,gasLimit:Y,price:O,usdToThisRate:D}),U={...t,isDefault:N,networkFee:L,networkFeeInt:G,networkFeeMarket:R,gasPrice:Z,maxFeePerGas:Z,maxPriorityFeePerGas:Po(_),gasLimit:Y};W&&N&&await S(r,{[co.batchTransfer]:{...U,isSupportEip1559:n,baseFeePerGas:Rr(Z,Po(_))}}),o(U)},onCancel:e,onClose:e},fe.default.createElement(w.Box,null,fe.default.createElement(pe.Number,{className:Xe.customInput,size:pe.SIZE.sm,title:x,placeholder:h,value:v,precision:9,enableMinus:!1,min:0,onChange:p,suffix:fe.default.createElement(El,null)}),n&&fe.default.createElement(pe.Number,{className:Xe.customInput,size:pe.SIZE.sm,placeholder:a,title:E("extension_wallet_transaction_text_priority_fee"),value:_,precision:9,enableMinus:!1,min:0,onChange:T,suffix:fe.default.createElement(El,null)})),W?fe.default.createElement(fe.default.Fragment,null,fe.default.createElement(w.Box,{className:Xe.defaultTip},E("wallet_extension_mid_checkbox_setting_default")),fe.default.createElement(sr,{checked:N,onChange:z,className:Xe.defaultChecker},E("wallet_extension_bot_alert_default_gas",{networkName:r.name}))):null)}function hf({loading:t,value:e,network:r,className:o,options:n,onChange:s=()=>{},onCustomChange:i=()=>{}}){let[l]=Gr(),[d,c]=(0,fe.useState)(!1);return fe.default.createElement(w.Spin,{loading:t&&!n?.length,className:(0,fs.default)(Xe.root,o)},fe.default.createElement(w.Box,{className:Xe.title},E("wallet_extension_gas_title_internet_fee")),fe.default.createElement(w.Box,{className:Xe.setting},n.map(g=>{let{level:x,unitPriceDisplay:h}=g,v=E(go[x]);return fe.default.createElement(w.Box,{className:(0,fs.default)(Xe.item,e?.level===x?Xe.active:Xe.inactive),key:x,onClick:()=>{g.level===qe.CUSTOM?c(!0):s?.(g)}},fe.default.createElement(w.Box,{className:Xe.label},v),fe.default.createElement(w.Box,{className:Xe.fee},fe.default.createElement(ne.Text,{type:ne.TYPE.secondary,size:ne.SIZE.xs,ellipsis:{tooltip:!0}},h),fe.default.createElement(w.Box,null,E("extension_wallet_transaction_input_gwei"))))})),d&&fe.default.createElement(pf,{network:r,isSupportEip1559:l,custom:n[n.length-1],onConfirm:g=>{i(g),c(!1)},onClose:()=>{c(!1)}}))}var Al=hf;f();m();var _o=k(K());var vf=({dataSource:t,amountSetting:e,intervalSetting:r})=>{let{gotoSendPage:o}=Ke(),n=(0,_o.useMemo)(()=>{if(!e)return!0;if(e.type===ie.CUSTOM)return!e.amount||Number(e.amount)===0;if(e.type===ie.RANDOM){let{min:c,max:g}=e;return!c||!g||Number(c)>Number(g)||Number(g)===0}return!1},[e]),s=(0,_o.useMemo)(()=>{if(!r)return!0;if(r.type===We.RANDOM){let{min:c,max:g}=r;return!c||!g||Number(c)>Number(g)}return!1},[r]),i=(0,_o.useMemo)(()=>t?.some(({error:c})=>!!c),[t]),l=(0,_o.useMemo)(()=>n||s||i,[n,s,i]),d=B(()=>{fa?.(),o()},[]);return[l,d]},bl=vf;f();m();re();var Qt=k(K()),xo=k(Et());Le();var gf=21e3,Nl=({from:t,to:e,token:r,network:o,txAmount:n=0})=>{let s=(0,xo.useDispatch)(),i=Ca(),l=(0,xo.useSelector)(vi),[d]=(0,Qt.useState)(!1),[c,g]=(0,Qt.useState)([]),[x,h]=(0,Qt.useState)(0),[v,p]=(0,Qt.useState)(gf),a=za(),_=nn(),T=qi(),S=Zi(),N=sn(r?.coinId),C=(0,xo.useSelector)(Ze),z=oi(),W=on(o?.rpcUrl),Y=mo(),P=B(D=>{s(ct(D))},[]),O=B(D=>{s(ct(D)),g(Z=>{let L=[...Z],G=L.pop();return L.push({...G,...D,unitPriceDisplay:a(D.gasPrice)}),L})});return Sa(()=>{[le,ae,Ee,J].includes(r?.localType)||(async()=>{let D=await W({value:n,to:lt(e,r?.localType),from:lt(t,r?.localType)},r?.address);p(D)})()},[n],{wait:500}),(0,Qt.useEffect)(()=>{(async()=>{let D=await Y({coinId:r?.coinId,chainId:r?.chainId,contractAddress:r?.address});h(D)})()},[]),(0,Qt.useEffect)(()=>{if(![le,ae,Ee,J].includes(r?.localType)){let D,Z=l.map(oe=>{let{level:se,gasPrice:Ce}=oe,{networkFee:he,networkFeeInt:xe,networkFeeMarket:be}=Kt({gasPrice:Ce,gasLimit:v,price:x,usdToThisRate:i?.usdToThisRate}),Se={...oe,gasLimit:v,tokenPrice:x,networkFee:he,networkFeeInt:xe,networkFeeMarket:be,currencySymbol:i?.symbol,label:E(go[se]),usdToThisRate:i?.usdToThisRate,unitPriceDisplay:a(Ce)};return se===qe.MEDIUM&&(D=Se),Se}),L={...D},G=!1,R=C?.level;if(r?.coinId)R===qe.CUSTOM&&(L=[...c].pop()||D);else{let oe=z(o,co.batchTransfer);oe&&(L=oe,G=!0)}let U={...L,level:qe.CUSTOM,unitPriceDisplay:a(L.gasPrice),label:E(go[qe.CUSTOM])};if(Z.push(U),g(Z),R){let oe=Z.find(se=>se.level===R);s(ct(oe||D))}else s(G?ct(U):ct(D))}},[v,l]),(0,Qt.useEffect)(()=>{let D=async()=>{let R=await _({to:e,from:t,coinId:r?.coinId,chainId:r?.chainId}),{solRent:U}=R||{};s(Xo(U)),s(ct(R))},Z=async()=>{let R=await T({to:e,from:t,value:n,coinId:r?.coinId,chainId:r?.chainId,baseCoinId:r?.baseCoinId});s(ct(R))},L=async()=>{let R=await N({to:e,chainId:r?.chainId,contractAddress:r?.address});s(ct(R))},G=async()=>{let R=await S({coinId:r?.coinId,address:t});s(ct(R))};r?.localType===J?L():r?.localType===ae?D():r?.localType===Ee?Z():r?.localType===le&&G()},[]),[d,c,P,O]};f();m();var vn=k(K());re();f();m();var kl=k(K()),hn=(t,e={})=>(r,o)=>kl.default.createElement(t,{...o,...e});Yn();Le();f();m();var Il=k(rt()),_f=(t,e,r=0)=>+(0,Il.random)(t,e,!0).toFixed(r),gt=_f;f();m();re();var ms=({balance:t,isBaseCoin:e,baseCoinBalance:r,usedCoinBalance:o,usedFeeCoinBalance:n})=>{if(M.lt(r,n))return Bt.FEE_BALANCE_INSUFFICIENT;if(e){if(M.lt(t,M.add(o,n)))return Bt.BALANCE_INSUFFICIENT}else if(M.lt(t,o))return Bt.BALANCE_INSUFFICIENT;return null},Cl=({balance:t,solRent:e,usedRent:r,txAmount:o,isBaseCoin:n,formattedSolRent:s,baseCoinBalance:i,usedCoinBalance:l,usedFeeCoinBalance:d})=>{let c,g=!0;if(M.lt(i,d))return Bt.FEE_BALANCE_INSUFFICIENT;if(n){if(M.lt(t,M.add(l,d))&&(g=!1),M.lt(o,e))return E("walletextension_toast_text_minimum_rent_fee",{number:s});c=M.sub(i,M.add(d,l))}return M.lt(i,M.add(d,r))?E("extension_wallet_transfer_alert_insufficient"):(n||(c=M.sub(i,M.add(d,r)),M.lt(t,l)&&(g=!1)),g?c!=="1"&&M.lt(c,e)&&M.gt(c,0)?E("walletextension_toast_text_reserve_rent_exempt",{number:s}):null:Bt.BALANCE_INSUFFICIENT)},Ol=async({coin:t,balance:e,txAmount:r,isBaseCoin:o,baseCoinBalance:n,usedCoinBalance:s,usedFeeCoinBalance:i})=>{let l=ms({balance:e,txAmount:r,isBaseCoin:o,baseCoinBalance:n,usedCoinBalance:s,usedFeeCoinBalance:i});if(l)return l;let{ZksyncWallet:d}=await Ro(),c=r&&await d.getCloseAmounts(r);return c&&!M.eq(c,r)?E("wallet_extension_placeholder_zksync_max_num",{amount:M.showFloorTruncation(M.div(c,10**t?.decimals),t?.decimals,!1)}):null};var xf=9,Ll=({token:t,networkFee:e,amountSetting:r})=>{let{isSm:o}=Oe(),[n]=dt(),[s]=Qo(),[i]=en(),[l,d]=(0,vn.useState)([]),[c,g]=ge(),x=st(t);zr(async()=>{if(!r)return;let{type:a,amount:_,min:T,max:S}=r;a===ie.CUSTOM&&g(c?.map(N=>({...N,txAmount:M.mul(_,10**(t?.decimals??18))}))),a===ie.RANDOM&&g(c?.map(N=>{let C=T&&S&&Number(T)<=Number(S)?gt(T,S,6):0;return{...N,txAmount:M.mul(C,10**(t?.decimals||18))}}))},[r,c?.length,t?.decimals]);let h=async a=>{let{ZksyncWallet:_}=await Ro();return await Promise.all(a.map(async S=>({...S,txAmount:S?.txAmount&&await _.getCloseAmounts(S?.txAmount)})))};zr(async()=>{if(!r)return;let{type:a}=r;if(a===ie.ALL&&n===X.ONE_TO_MANY){let[{balance:_}]=c,T=c?.length,S=x?Rr(_,M.mul(e?.networkFeeInt,T)):_,N=jn(M.div(S,c?.length),0),C=jn(M.div(_,T),0);g(c.map((z,W)=>(W===T-1&&(C=M.sub(_,M.mul(C,T-1)),N=x?M.sub(C,e?.networkFeeInt):C),{...z,txAmount:N,usedBalance:C})))}if(a===ie.ALL&&n!==X.ONE_TO_MANY){let _=c.map(T=>{let{balance:S}=T,N=x?Rr(S,e?.networkFeeInt):S;return{...T,txAmount:N}});g(t?.localType===J?await h(_):_)}},[r.type,c?.length,t?.decimals,e?.networkFeeInt]),zr(async()=>{d(await(async()=>{let _=0,T=0,S=0,N=e?.networkFeeInt,C=ms;return t?.localType===ae?C=Cl:t?.localType===J&&(C=Ol),await Promise.all(c.map(async(W,Y)=>{let{to:P,txAmount:O,balance:D,baseCoinBalance:Z}=W,L=i[P]||"0";return n===X.ONE_TO_MANY?(S=M.add(S,L),_=M.add(_,O),T=M.add(T,N)):(S=L,_=O,T=N),{...W,txAmount:M.truncate(M.div(O,10**(t?.decimals??18)),6,!1),index:Y,showShortAddress:o,showTextOneLine:!1,order:Y+1,error:await C({balance:D,needRent:L,usedRent:S,solRent:s,txAmount:O,isBaseCoin:x,formattedSolRent:no(s,{decimals:xf}),baseCoinBalance:Z,usedCoinBalance:_,usedFeeCoinBalance:T})}}))})())},[o,s,i,n,x,c,t?.decimals,e?.networkFeeInt]);let v=(0,vn.useMemo)(()=>({[qr.FROM]:{showOrder:!0,showError:!0,isFromAddress:!0}}),[]),p=wl.map(a=>{let{title:_,key:T,type:S,...N}=a;return{title:E(_),dataIndex:T,key:T,render:hn(pn[S],{...v[T],address:T}),...N}});return{dataSource:l,columns:p}};f();m();re();Le();var Fl=k(K());var Bl=t=>{let[e,r]=ft(),n=yl.filter(({value:i})=>!(t===J&&i===ie.RANDOM)).map(({label:i,value:l})=>({value:l,label:E(i)})),s=B((i={})=>{r({...e,...i})},[e]);return(0,Fl.useLayoutEffect)(()=>{t===J&&e?.type===ie.RANDOM&&r({type:ie.CUSTOM})},[t]),[e,n,s]};var Sf=()=>{let{gotoAddressPage:t}=Ke(),{isSm:e}=Oe(),[r]=ee(),[o]=De(),[n]=ge(),s=(0,Dl.useSelector)(Ze),i=(0,gn.reverse)((0,gn.sortBy)(n,"balance"))[0],l=![le,ae,Ee,J].includes(r?.localType),[d,c,g,x]=Nl({...i,network:o,token:r,isEvmTransaction:l}),[h,v,p]=Bl(r?.localType),{dataSource:a,columns:_}=Ll({token:r,network:o,amountSetting:h,networkFee:s}),[T={},S]=mt(),[N,C]=bl({dataSource:a,amountSetting:h,intervalSetting:T}),z=ln();return Me.default.createElement(ir,{footer:Me.default.createElement(w.Box,{className:vt.footer},Me.default.createElement(q,{block:e,category:q.CATEGORY.outline,type:q.TYPE.primary,size:e?q.SIZE.lg:q.SIZE.xl,onClick:()=>{t()}},E("wallet_extension_footer_btn_back")),Me.default.createElement(q,{block:e,category:q.CATEGORY.fill,type:q.TYPE.highlight,size:e?q.SIZE.lg:q.SIZE.xl,onClick:C,disabled:N||!s},E("wallet_extension_footer_btn_confirm"))),useOkg:!1},Me.default.createElement(w.Box,{className:(0,So.default)(vt.root)},Me.default.createElement(jr,{title:E("wallet_extension_amount_title_input_amount"),subtitle:E("wallet_extension_amount_subtitle_input_number")}),Me.default.createElement(cn,{className:vt.statistics,statistics:z}),Me.default.createElement(w.Box,{className:vt.setting},Me.default.createElement(w.Box,{className:(0,So.default)(vt.amount,{[vt.no_gas]:!l})},Me.default.createElement(ul,{value:h,options:v,onChange:p})),Me.default.createElement(w.Box,{className:(0,So.default)(vt.interval,{[vt.no_gas]:!l})},Me.default.createElement(fl,{value:T,onChange:S})),l&&Me.default.createElement(w.Box,{className:vt.gas},Me.default.createElement(Al,{loading:d,network:o,options:c,onChange:g,value:s,onCustomChange:x})))),Me.default.createElement(w.Box,{className:(0,So.default)(vt.address)},r?.localType===J&&h.type===ie.ALL&&Me.default.createElement(eo,{closable:!1,className:vt.alert,title:E("wallet_extension_toast_zksync_max_num")}),Me.default.createElement(un,{dataSource:a,columns:_})))},Ml=Me.default.memo(Sf);f();m();var It=k(K());re();f();m();var rr=k(K()),pu=k(Be());re();f();m();var me=k(K());f();m();var Ps=k(Wl()),Nc=k(yd()),kc=k(Ed()),b=k(K());f();m();f();m();function Ul(t){return typeof t=="object"&&t!=null&&t.nodeType===1}function Hl(t,e){return(!e||t!=="hidden")&&t!=="visible"&&t!=="clip"}function ps(t,e){if(t.clientHeight<t.scrollHeight||t.clientWidth<t.scrollWidth){var r=getComputedStyle(t,null);return Hl(r.overflowY,e)||Hl(r.overflowX,e)||function(o){var n=function(s){if(!s.ownerDocument||!s.ownerDocument.defaultView)return null;try{return s.ownerDocument.defaultView.frameElement}catch{return null}}(o);return!!n&&(n.clientHeight<o.scrollHeight||n.clientWidth<o.scrollWidth)}(t)}return!1}function _n(t,e,r,o,n,s,i,l){return s<t&&i>e||s>t&&i<e?0:s<=t&&l<=r||i>=e&&l>=r?s-t-o:i>e&&l<r||s<t&&l>r?i-e+n:0}var hs=function(t,e){var r=window,o=e.scrollMode,n=e.block,s=e.inline,i=e.boundary,l=e.skipOverflowHiddenElements,d=typeof i=="function"?i:function(Qe){return Qe!==i};if(!Ul(t))throw new TypeError("Invalid target");for(var c,g,x=document.scrollingElement||document.documentElement,h=[],v=t;Ul(v)&&d(v);){if((v=(g=(c=v).parentElement)==null?c.getRootNode().host||null:g)===x){h.push(v);break}v!=null&&v===document.body&&ps(v)&&!ps(document.documentElement)||v!=null&&ps(v,l)&&h.push(v)}for(var p=r.visualViewport?r.visualViewport.width:innerWidth,a=r.visualViewport?r.visualViewport.height:innerHeight,_=window.scrollX||pageXOffset,T=window.scrollY||pageYOffset,S=t.getBoundingClientRect(),N=S.height,C=S.width,z=S.top,W=S.right,Y=S.bottom,P=S.left,O=n==="start"||n==="nearest"?z:n==="end"?Y:z+N/2,D=s==="center"?P+C/2:s==="end"?W:P,Z=[],L=0;L<h.length;L++){var G=h[L],R=G.getBoundingClientRect(),U=R.height,oe=R.width,se=R.top,Ce=R.right,he=R.bottom,xe=R.left;if(o==="if-needed"&&z>=0&&P>=0&&Y<=a&&W<=p&&z>=se&&Y<=he&&P>=xe&&W<=Ce)return Z;var be=getComputedStyle(G),Se=parseInt(be.borderLeftWidth,10),Ye=parseInt(be.borderTopWidth,10),y=parseInt(be.borderRightWidth,10),j=parseInt(be.borderBottomWidth,10),F=0,H=0,te="offsetWidth"in G?G.offsetWidth-G.clientWidth-Se-y:0,Q="offsetHeight"in G?G.offsetHeight-G.clientHeight-Ye-j:0,ue="offsetWidth"in G?G.offsetWidth===0?0:oe/G.offsetWidth:0,Ne="offsetHeight"in G?G.offsetHeight===0?0:U/G.offsetHeight:0;if(x===G)F=n==="start"?O:n==="end"?O-a:n==="nearest"?_n(T,T+a,a,Ye,j,T+O,T+O+N,N):O-a/2,H=s==="start"?D:s==="center"?D-p/2:s==="end"?D-p:_n(_,_+p,p,Se,y,_+D,_+D+C,C),F=Math.max(0,F+T),H=Math.max(0,H+_);else{F=n==="start"?O-se-Ye:n==="end"?O-he+j+Q:n==="nearest"?_n(se,he,U,Ye,j+Q,O,O+N,N):O-(se+U/2)+Q/2,H=s==="start"?D-xe-Se:s==="center"?D-(xe+oe/2)+te/2:s==="end"?D-Ce+y+te:_n(xe,Ce,oe,Se,y+te,D,D+C,C);var ye=G.scrollLeft,Pe=G.scrollTop;O+=Pe-(F=Math.max(0,Math.min(Pe+F/Ne,G.scrollHeight-U/Ne+Q))),D+=ye-(H=Math.max(0,Math.min(ye+H/ue,G.scrollWidth-oe/ue+te)))}Z.push({el:G,top:F,left:H})}return Z};function Gl(t){return t===Object(t)&&Object.keys(t).length!==0}function Ef(t,e){e===void 0&&(e="auto");var r="scrollBehavior"in document.body.style;t.forEach(function(o){var n=o.el,s=o.top,i=o.left;n.scroll&&r?n.scroll({top:s,left:i,behavior:e}):(n.scrollTop=s,n.scrollLeft=i)})}function Af(t){return t===!1?{block:"end",inline:"nearest"}:Gl(t)?t:{block:"start",inline:"nearest"}}function bf(t,e){var r=t.isConnected||t.ownerDocument.documentElement.contains(t);if(Gl(e)&&typeof e.behavior=="function")return e.behavior(r?hs(t,e):[]);if(!!r){var o=Af(e);return Ef(hs(t,o),o.behavior)}}var jl=bf;var u=k(To());f();m();f();m();f();m();f();m();f();m();f();m();f();m();var _t=[];var ql=function(){return _t.some(function(t){return t.activeTargets.length>0})};f();m();var Zl=function(){return _t.some(function(t){return t.skippedTargets.length>0})};f();m();var Kl="ResizeObserver loop completed with undelivered notifications.",Vl=function(){var t;typeof ErrorEvent=="function"?t=new ErrorEvent("error",{message:Kl}):(t=document.createEvent("Event"),t.initEvent("error",!1,!1),t.message=Kl),window.dispatchEvent(t)};f();m();f();m();f();m();f();m();var Er;(function(t){t.BORDER_BOX="border-box",t.CONTENT_BOX="content-box",t.DEVICE_PIXEL_CONTENT_BOX="device-pixel-content-box"})(Er||(Er={}));f();m();f();m();var Nt=function(t){return Object.freeze(t)};var vs=function(){function t(e,r){this.inlineSize=e,this.blockSize=r,Nt(this)}return t}();f();m();var gs=function(){function t(e,r,o,n){return this.x=e,this.y=r,this.width=o,this.height=n,this.top=this.y,this.left=this.x,this.bottom=this.top+this.height,this.right=this.left+this.width,Nt(this)}return t.prototype.toJSON=function(){var e=this,r=e.x,o=e.y,n=e.top,s=e.right,i=e.bottom,l=e.left,d=e.width,c=e.height;return{x:r,y:o,top:n,right:s,bottom:i,left:l,width:d,height:c}},t.fromRect=function(e){return new t(e.x,e.y,e.width,e.height)},t}();f();m();var wo=function(t){return t instanceof SVGElement&&"getBBox"in t},xn=function(t){if(wo(t)){var e=t.getBBox(),r=e.width,o=e.height;return!r&&!o}var n=t,s=n.offsetWidth,i=n.offsetHeight;return!(s||i||t.getClientRects().length)},_s=function(t){var e;if(t instanceof Element)return!0;var r=(e=t?.ownerDocument)===null||e===void 0?void 0:e.defaultView;return!!(r&&t instanceof r.Element)},Xl=function(t){switch(t.tagName){case"INPUT":if(t.type!=="image")break;case"VIDEO":case"AUDIO":case"EMBED":case"OBJECT":case"CANVAS":case"IFRAME":case"IMG":return!0}return!1};f();m();var Ar=typeof window<"u"?window:{};var Sn=new WeakMap,$l=/auto|scroll/,Nf=/^tb|vertical/,kf=/msie|trident/i.test(Ar.navigator&&Ar.navigator.userAgent),Wt=function(t){return parseFloat(t||"0")},Zr=function(t,e,r){return t===void 0&&(t=0),e===void 0&&(e=0),r===void 0&&(r=!1),new vs((r?e:t)||0,(r?t:e)||0)},Jl=Nt({devicePixelContentBoxSize:Zr(),borderBoxSize:Zr(),contentBoxSize:Zr(),contentRect:new gs(0,0,0,0)}),xs=function(t,e){if(e===void 0&&(e=!1),Sn.has(t)&&!e)return Sn.get(t);if(xn(t))return Sn.set(t,Jl),Jl;var r=getComputedStyle(t),o=wo(t)&&t.ownerSVGElement&&t.getBBox(),n=!kf&&r.boxSizing==="border-box",s=Nf.test(r.writingMode||""),i=!o&&$l.test(r.overflowY||""),l=!o&&$l.test(r.overflowX||""),d=o?0:Wt(r.paddingTop),c=o?0:Wt(r.paddingRight),g=o?0:Wt(r.paddingBottom),x=o?0:Wt(r.paddingLeft),h=o?0:Wt(r.borderTopWidth),v=o?0:Wt(r.borderRightWidth),p=o?0:Wt(r.borderBottomWidth),a=o?0:Wt(r.borderLeftWidth),_=x+c,T=d+g,S=a+v,N=h+p,C=l?t.offsetHeight-N-t.clientHeight:0,z=i?t.offsetWidth-S-t.clientWidth:0,W=n?_+S:0,Y=n?T+N:0,P=o?o.width:Wt(r.width)-W-z,O=o?o.height:Wt(r.height)-Y-C,D=P+_+z+S,Z=O+T+C+N,L=Nt({devicePixelContentBoxSize:Zr(Math.round(P*devicePixelRatio),Math.round(O*devicePixelRatio),s),borderBoxSize:Zr(D,Z,s),contentBoxSize:Zr(P,O,s),contentRect:new gs(x,d,P,O)});return Sn.set(t,L),L},Tn=function(t,e,r){var o=xs(t,r),n=o.borderBoxSize,s=o.contentBoxSize,i=o.devicePixelContentBoxSize;switch(e){case Er.DEVICE_PIXEL_CONTENT_BOX:return i;case Er.BORDER_BOX:return n;default:return s}};var Ss=function(){function t(e){var r=xs(e);this.target=e,this.contentRect=r.contentRect,this.borderBoxSize=Nt([r.borderBoxSize]),this.contentBoxSize=Nt([r.contentBoxSize]),this.devicePixelContentBoxSize=Nt([r.devicePixelContentBoxSize])}return t}();f();m();var wn=function(t){if(xn(t))return 1/0;for(var e=0,r=t.parentNode;r;)e+=1,r=r.parentNode;return e};var Ql=function(){var t=1/0,e=[];_t.forEach(function(i){if(i.activeTargets.length!==0){var l=[];i.activeTargets.forEach(function(c){var g=new Ss(c.target),x=wn(c.target);l.push(g),c.lastReportedSize=Tn(c.target,c.observedBox),x<t&&(t=x)}),e.push(function(){i.callback.call(i.observer,l,i.observer)}),i.activeTargets.splice(0,i.activeTargets.length)}});for(var r=0,o=e;r<o.length;r++){var n=o[r];n()}return t};f();m();var Ts=function(t){_t.forEach(function(r){r.activeTargets.splice(0,r.activeTargets.length),r.skippedTargets.splice(0,r.skippedTargets.length),r.observationTargets.forEach(function(n){n.isActive()&&(wn(n.target)>t?r.activeTargets.push(n):r.skippedTargets.push(n))})})};var ec=function(){var t=0;for(Ts(t);ql();)t=Ql(),Ts(t);return Zl()&&Vl(),t>0};f();m();f();m();var ws,tc=[],If=function(){return tc.splice(0).forEach(function(t){return t()})},rc=function(t){if(!ws){var e=0,r=document.createTextNode(""),o={characterData:!0};new MutationObserver(function(){return If()}).observe(r,o),ws=function(){r.textContent="".concat(e?e--:e++)}}tc.push(t),ws()};var oc=function(t){rc(function(){requestAnimationFrame(t)})};var yn=0,Cf=function(){return!!yn},Of=250,Lf={attributes:!0,characterData:!0,childList:!0,subtree:!0},nc=["resize","load","transitionend","animationend","animationstart","animationiteration","keyup","keydown","mouseup","mousedown","mouseover","mouseout","blur","focus"],sc=function(t){return t===void 0&&(t=0),Date.now()+t},ys=!1,Ff=function(){function t(){var e=this;this.stopped=!0,this.listener=function(){return e.schedule()}}return t.prototype.run=function(e){var r=this;if(e===void 0&&(e=Of),!ys){ys=!0;var o=sc(e);oc(function(){var n=!1;try{n=ec()}finally{if(ys=!1,e=o-sc(),!Cf())return;n?r.run(1e3):e>0?r.run(e):r.start()}})}},t.prototype.schedule=function(){this.stop(),this.run()},t.prototype.observe=function(){var e=this,r=function(){return e.observer&&e.observer.observe(document.body,Lf)};document.body?r():Ar.addEventListener("DOMContentLoaded",r)},t.prototype.start=function(){var e=this;this.stopped&&(this.stopped=!1,this.observer=new MutationObserver(this.listener),this.observe(),nc.forEach(function(r){return Ar.addEventListener(r,e.listener,!0)}))},t.prototype.stop=function(){var e=this;this.stopped||(this.observer&&this.observer.disconnect(),nc.forEach(function(r){return Ar.removeEventListener(r,e.listener,!0)}),this.stopped=!0)},t}(),En=new Ff,Es=function(t){!yn&&t>0&&En.start(),yn+=t,!yn&&En.stop()};f();m();var Bf=function(t){return!wo(t)&&!Xl(t)&&getComputedStyle(t).display==="inline"},ac=function(){function t(e,r){this.target=e,this.observedBox=r||Er.CONTENT_BOX,this.lastReportedSize={inlineSize:0,blockSize:0}}return t.prototype.isActive=function(){var e=Tn(this.target,this.observedBox,!0);return Bf(this.target)&&(this.lastReportedSize=e),this.lastReportedSize.inlineSize!==e.inlineSize||this.lastReportedSize.blockSize!==e.blockSize},t}();f();m();var ic=function(){function t(e,r){this.activeTargets=[],this.skippedTargets=[],this.observationTargets=[],this.observer=e,this.callback=r}return t}();var An=new WeakMap,lc=function(t,e){for(var r=0;r<t.length;r+=1)if(t[r].target===e)return r;return-1},yo=function(){function t(){}return t.connect=function(e,r){var o=new ic(e,r);An.set(e,o)},t.observe=function(e,r,o){var n=An.get(e),s=n.observationTargets.length===0;lc(n.observationTargets,r)<0&&(s&&_t.push(n),n.observationTargets.push(new ac(r,o&&o.box)),Es(1),En.schedule())},t.unobserve=function(e,r){var o=An.get(e),n=lc(o.observationTargets,r),s=o.observationTargets.length===1;n>=0&&(s&&_t.splice(_t.indexOf(o),1),o.observationTargets.splice(n,1),Es(-1))},t.disconnect=function(e){var r=this,o=An.get(e);o.observationTargets.slice().forEach(function(n){return r.unobserve(e,n.target)}),o.activeTargets.splice(0,o.activeTargets.length)},t}();var As=function(){function t(e){if(arguments.length===0)throw new TypeError("Failed to construct 'ResizeObserver': 1 argument required, but only 0 present.");if(typeof e!="function")throw new TypeError("Failed to construct 'ResizeObserver': The callback provided as parameter 1 is not a function.");yo.connect(this,e)}return t.prototype.observe=function(e,r){if(arguments.length===0)throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!_s(e))throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': parameter 1 is not of type 'Element");yo.observe(this,e,r)},t.prototype.unobserve=function(e){if(arguments.length===0)throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!_s(e))throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': parameter 1 is not of type 'Element");yo.unobserve(this,e)},t.prototype.disconnect=function(){yo.disconnect(this)},t.toString=function(){return"function ResizeObserver () { [polyfill code] }"},t}();var In=k(mc()),Ic=k(Sd());function Bn(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function zf(t,e){if(t==null)return{};var r={},o=Object.keys(t),n,s;for(s=0;s<o.length;s++)n=o[s],!(e.indexOf(n)>=0)&&(r[n]=t[n]);return r}function Vr(t,e){if(t==null)return{};var r=zf(t,e),o,n;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(n=0;n<s.length;n++)o=s[n],!(e.indexOf(o)>=0)&&(!Object.prototype.propertyIsEnumerable.call(t,o)||(r[o]=t[o]))}return r}var Rs=(0,b.createContext)(null),hr=()=>{var t=(0,b.useContext)(Rs);if(!t)throw new Error("The `useSlateStatic` hook must be used inside the <Slate> component's context.");return t},Wf=parseInt(b.default.version.split(".")[0],10)>=17,Uf=typeof navigator<"u"&&typeof window<"u"&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,pc=typeof navigator<"u"&&/Mac OS X/.test(navigator.userAgent),it=typeof navigator<"u"&&/Android/.test(navigator.userAgent),Ln=typeof navigator<"u"&&/^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent),Ao=typeof navigator<"u"&&/Version\/[\d\.]+.*Safari/.test(navigator.userAgent),Hf=typeof navigator<"u"&&/Edge?\/(?:[0-6][0-9]|[0-7][0-8])(?:\.)/i.test(navigator.userAgent),Cc=typeof navigator<"u"&&/Chrome/i.test(navigator.userAgent),Gf=typeof navigator<"u"&&/Chrome?\/(?:[0-7][0-5]|[0-6][0-9])(?:\.)/i.test(navigator.userAgent),jf=it&&typeof navigator<"u"&&/Chrome?\/(?:[0-5]?\d)(?:\.)/i.test(navigator.userAgent),Yf=typeof navigator<"u"&&/^(?!.*Seamonkey)(?=.*Firefox\/(?:[0-7][0-9]|[0-8][0-6])(?:\.)).*/i.test(navigator.userAgent),qf=typeof navigator<"u"&&/.*UCBrowser/.test(navigator.userAgent),Zf=typeof navigator<"u"&&/.*Wechat/.test(navigator.userAgent),Cn=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",dr=(!Gf||!jf)&&!Hf&&typeof globalThis<"u"&&globalThis.InputEvent&&typeof globalThis.InputEvent.prototype.getTargetRanges=="function",zs=new WeakMap,Ws=new WeakMap,Oc=new WeakMap,On=new WeakMap,Is=new WeakMap,No=new WeakMap,kr=new WeakMap,Cs=new WeakMap,Dn=new WeakMap,Os=new WeakMap,br=new WeakMap,Nr=new WeakMap,bo=new WeakMap,Ls=new WeakMap,Us=new WeakMap,kt=new WeakMap,er=new WeakMap,$e=new WeakMap,fr=new WeakMap,mr=new WeakMap,Lc=new WeakMap,Xr=Symbol("placeholder"),Fc=Symbol("mark-placeholder"),Kf=globalThis.Text,Hs=t=>t&&t.ownerDocument&&t.ownerDocument.defaultView||null,Vf=t=>pr(t)&&t.nodeType===8,xt=t=>pr(t)&&t.nodeType===1,pr=t=>{var e=Hs(t);return!!e&&t instanceof e.Node},Fs=t=>{var e=t&&t.anchorNode&&Hs(t.anchorNode);return!!e&&t instanceof e.Selection},Bc=t=>pr(t)&&t.nodeType===3,Xf=t=>t.clipboardData&&t.clipboardData.getData("text/plain")!==""&&t.clipboardData.types.length===1,$f=t=>{var[e,r]=t;if(xt(e)&&e.childNodes.length){var o=r===e.childNodes.length,n=o?r-1:r;for([e,n]=Dc(e,n,o?"backward":"forward"),o=n<r;xt(e)&&e.childNodes.length;){var s=o?e.childNodes.length-1:0;e=Qf(e,s,o?"backward":"forward")}r=o&&e.textContent!=null?e.textContent.length:0}return[e,r]},Jf=t=>{for(var e=t&&t.parentNode;e;){if(e.toString()==="[object ShadowRoot]")return!0;e=e.parentNode}return!1},Dc=(t,e,r)=>{for(var{childNodes:o}=t,n=o[e],s=e,i=!1,l=!1;(Vf(n)||xt(n)&&n.childNodes.length===0||xt(n)&&n.getAttribute("contenteditable")==="false")&&!(i&&l);){if(s>=o.length){i=!0,s=e-1,r="backward";continue}if(s<0){l=!0,s=e+1,r="forward";continue}n=o[s],e=s,s+=r==="forward"?1:-1}return[n,e]},Qf=(t,e,r)=>{var[o]=Dc(t,e,r);return o},Mc=t=>{var e="";if(Bc(t)&&t.nodeValue)return t.nodeValue;if(xt(t)){for(var r of Array.from(t.childNodes))e+=Mc(r);var o=getComputedStyle(t).getPropertyValue("display");(o==="block"||o==="list"||t.tagName==="BR")&&(e+=`
`)}return e},em=/data-slate-fragment="(.+?)"/m,tm=t=>{var e=t.getData("text/html"),[,r]=e.match(em)||[];return r},Gs=(t,e,r)=>{var{target:o}=e;if(xt(o)&&o.matches('[contentEditable="false"]'))return!1;var{document:n}=I.getWindow(t);if(n.contains(o))return I.hasDOMNode(t,o,{editable:!0});var s=r.find(i=>{var{addedNodes:l,removedNodes:d}=i;for(var c of l)if(c===o||c.contains(o))return!0;for(var g of d)if(g===o||g.contains(o))return!0});return!s||s===e?!1:Gs(t,s,r)},rm=0,Bs=class{constructor(){this.id="".concat(rm++)}},I={androidPendingDiffs:t=>$e.get(t),androidScheduleFlush:t=>{var e;(e=Us.get(t))===null||e===void 0||e()},blur:t=>{var e=I.toDOMNode(t,t),r=I.findDocumentOrShadowRoot(t);br.set(t,!1),r.activeElement===e&&e.blur()},deselect:t=>{var{selection:e}=t,r=I.findDocumentOrShadowRoot(t),o=r.getSelection();o&&o.rangeCount>0&&o.removeAllRanges(),e&&u.Transforms.deselect(t)},findDocumentOrShadowRoot:t=>{var e=I.toDOMNode(t,t),r=e.getRootNode();return(r instanceof Document||r instanceof ShadowRoot)&&r.getSelection!=null?r:e.ownerDocument},findEventRange:(t,e)=>{"nativeEvent"in e&&(e=e.nativeEvent);var{clientX:r,clientY:o,target:n}=e;if(r==null||o==null)throw new Error("Cannot resolve a Slate range from a DOM event: ".concat(e));var s=I.toSlateNode(t,e.target),i=I.findPath(t,s);if(u.Element.isElement(s)&&u.Editor.isVoid(t,s)){var l=n.getBoundingClientRect(),d=t.isInline(s)?r-l.left<l.left+l.width-r:o-l.top<l.top+l.height-o,c=u.Editor.point(t,i,{edge:d?"start":"end"}),g=d?u.Editor.before(t,c):u.Editor.after(t,c);if(g){var x=u.Editor.range(t,g);return x}}var h,{document:v}=I.getWindow(t);if(v.caretRangeFromPoint)h=v.caretRangeFromPoint(r,o);else{var p=v.caretPositionFromPoint(r,o);p&&(h=v.createRange(),h.setStart(p.offsetNode,p.offset),h.setEnd(p.offsetNode,p.offset))}if(!h)throw new Error("Cannot resolve a Slate range from a DOM event: ".concat(e));var a=I.toSlateRange(t,h,{exactMatch:!1,suppressThrow:!1});return a},findKey:(t,e)=>{var r=Cs.get(e);return r||(r=new Bs,Cs.set(e,r)),r},findPath:(t,e)=>{for(var r=[],o=e;;){var n=Ws.get(o);if(n==null){if(u.Editor.isEditor(o))return r;break}var s=zs.get(o);if(s==null)break;r.unshift(s),o=n}throw new Error("Unable to find the path for Slate node: ".concat(u.Scrubber.stringify(e)))},focus:t=>{var e=I.toDOMNode(t,t),r=I.findDocumentOrShadowRoot(t);br.set(t,!0),r.activeElement!==e&&e.focus({preventScroll:!0})},getWindow:t=>{var e=Oc.get(t);if(!e)throw new Error("Unable to find a host window element for this editor");return e},hasDOMNode:function(e,r){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},{editable:n=!1}=o,s=I.toDOMNode(e,e),i;try{i=xt(r)?r:r.parentElement}catch(l){if(!l.message.includes('Permission denied to access property "nodeType"'))throw l}return i?i.closest("[data-slate-editor]")===s&&(!n||i.isContentEditable?!0:typeof i.isContentEditable=="boolean"&&i.closest('[contenteditable="false"]')===s||!!i.getAttribute("data-slate-zero-width")):!1},hasEditableTarget:(t,e)=>pr(e)&&I.hasDOMNode(t,e,{editable:!0}),hasRange:(t,e)=>{var{anchor:r,focus:o}=e;return u.Editor.hasPath(t,r.path)&&u.Editor.hasPath(t,o.path)},hasSelectableTarget:(t,e)=>I.hasEditableTarget(t,e)||I.isTargetInsideNonReadonlyVoid(t,e),hasTarget:(t,e)=>pr(e)&&I.hasDOMNode(t,e),insertData:(t,e)=>{t.insertData(e)},insertFragmentData:(t,e)=>t.insertFragmentData(e),insertTextData:(t,e)=>t.insertTextData(e),isComposing:t=>!!Nr.get(t),isFocused:t=>!!br.get(t),isReadOnly:t=>!!Os.get(t),isTargetInsideNonReadonlyVoid:(t,e)=>{if(Os.get(t))return!1;var r=I.hasTarget(t,e)&&I.toSlateNode(t,e);return u.Element.isElement(r)&&u.Editor.isVoid(t,r)},setFragmentData:(t,e,r)=>t.setFragmentData(e,r),toDOMNode:(t,e)=>{var r=Dn.get(t),o=u.Editor.isEditor(e)?On.get(t):r?.get(I.findKey(t,e));if(!o)throw new Error("Cannot resolve a DOM node from Slate node: ".concat(u.Scrubber.stringify(e)));return o},toDOMPoint:(t,e)=>{var[r]=u.Editor.node(t,e.path),o=I.toDOMNode(t,r),n;u.Editor.void(t,{at:e})&&(e={path:e.path,offset:0});for(var s="[data-slate-string], [data-slate-zero-width]",i=Array.from(o.querySelectorAll(s)),l=0,d=0;d<i.length;d++){var c=i[d],g=c.childNodes[0];if(!(g==null||g.textContent==null)){var{length:x}=g.textContent,h=c.getAttribute("data-slate-length"),v=h==null?x:parseInt(h,10),p=l+v,a=i[d+1];if(e.offset===p&&a!==null&&a!==void 0&&a.hasAttribute("data-slate-mark-placeholder")){var _,T=a.childNodes[0];n=[T instanceof Kf?T:a,(_=a.textContent)!==null&&_!==void 0&&_.startsWith("\uFEFF")?1:0];break}if(e.offset<=p){var S=Math.min(x,Math.max(0,e.offset-l));n=[g,S];break}l=p}}if(!n)throw new Error("Cannot resolve a DOM point from Slate point: ".concat(u.Scrubber.stringify(e)));return n},toDOMRange:(t,e)=>{var{anchor:r,focus:o}=e,n=u.Range.isBackward(e),s=I.toDOMPoint(t,r),i=u.Range.isCollapsed(e)?s:I.toDOMPoint(t,o),l=I.getWindow(t),d=l.document.createRange(),[c,g]=n?i:s,[x,h]=n?s:i,v=xt(c)?c:c.parentElement,p=!!v.getAttribute("data-slate-zero-width"),a=xt(x)?x:x.parentElement,_=!!a.getAttribute("data-slate-zero-width");return d.setStart(c,p?1:g),d.setEnd(x,_?1:h),d},toSlateNode:(t,e)=>{var r=xt(e)?e:e.parentElement;r&&!r.hasAttribute("data-slate-node")&&(r=r.closest("[data-slate-node]"));var o=r?No.get(r):null;if(!o)throw new Error("Cannot resolve a Slate node from DOM node: ".concat(r));return o},toSlatePoint:(t,e,r)=>{var{exactMatch:o,suppressThrow:n}=r,[s,i]=o?e:$f(e),l=s.parentNode,d=null,c=0;if(l){var g,x,h=I.toDOMNode(t,t),v=l.closest('[data-slate-void="true"]'),p=v&&h.contains(v)?v:null,a=l.closest("[data-slate-leaf]"),_=null;if(a){if(d=a.closest('[data-slate-node="text"]'),d){var T=I.getWindow(t),S=T.document.createRange();S.setStart(d,0),S.setEnd(s,i);var N=S.cloneContents(),C=[...Array.prototype.slice.call(N.querySelectorAll("[data-slate-zero-width]")),...Array.prototype.slice.call(N.querySelectorAll("[contenteditable=false]"))];C.forEach(R=>{if(it&&!o&&R.hasAttribute("data-slate-zero-width")&&R.textContent.length>0&&R.textContext!=="\uFEFF"){R.textContent.startsWith("\uFEFF")&&(R.textContent=R.textContent.slice(1));return}R.parentNode.removeChild(R)}),c=N.textContent.length,_=d}}else if(p){for(var z=p.querySelectorAll("[data-slate-leaf]"),W=0;W<z.length;W++){var Y=z[W];if(I.hasDOMNode(t,Y)){a=Y;break}}a?(d=a.closest('[data-slate-node="text"]'),_=a,c=_.textContent.length,_.querySelectorAll("[data-slate-zero-width]").forEach(R=>{c-=R.textContent.length})):c=1}_&&c===_.textContent.length&&it&&_.getAttribute("data-slate-zero-width")==="z"&&(g=_.textContent)!==null&&g!==void 0&&g.startsWith("\uFEFF")&&(l.hasAttribute("data-slate-zero-width")||Ln&&(x=_.textContent)!==null&&x!==void 0&&x.endsWith(`

`))&&c--}if(it&&!d&&!o){var P=l.hasAttribute("data-slate-node")?l:l.closest("[data-slate-node]");if(P&&I.hasDOMNode(t,P,{editable:!0})){var O=I.toSlateNode(t,P),{path:D,offset:Z}=u.Editor.start(t,I.findPath(t,O));return P.querySelector("[data-slate-leaf]")||(Z=i),{path:D,offset:Z}}}if(!d){if(n)return null;throw new Error("Cannot resolve a Slate point from DOM point: ".concat(e))}var L=I.toSlateNode(t,d),G=I.findPath(t,L);return{path:G,offset:c}},toSlateRange:(t,e,r)=>{var{exactMatch:o,suppressThrow:n}=r,s=Fs(e)?e.anchorNode:e.startContainer,i,l,d,c,g;if(s&&(Fs(e)?(i=e.anchorNode,l=e.anchorOffset,d=e.focusNode,c=e.focusOffset,Cc&&Jf(i)?g=e.anchorNode===e.focusNode&&e.anchorOffset===e.focusOffset:g=e.isCollapsed):(i=e.startContainer,l=e.startOffset,d=e.endContainer,c=e.endOffset,g=e.collapsed)),i==null||d==null||l==null||c==null)throw new Error("Cannot resolve a Slate range from DOM range: ".concat(e));if("getAttribute"in d&&d.getAttribute("contenteditable")==="false"){var x;d=i,c=((x=i.textContent)===null||x===void 0?void 0:x.length)||0}var h=I.toSlatePoint(t,[i,l],{exactMatch:o,suppressThrow:n});if(!h)return null;var v=g?h:I.toSlatePoint(t,[d,c],{exactMatch:o,suppressThrow:n});if(!v)return null;if(Ln&&!g&&i!==d){var p=u.Editor.isEnd(t,h,h.path),a=u.Editor.isStart(t,v,v.path);if(p){var _=u.Editor.after(t,h);h=_||h}if(a){var T=u.Editor.before(t,v);v=T||v}}var S={anchor:h,focus:v};return u.Range.isExpanded(S)&&u.Range.isForward(S)&&xt(d)&&u.Editor.void(t,{at:S.focus,mode:"highest"})&&(S=u.Editor.unhangRange(t,S,{voids:!0})),S}};function om(t,e){var{path:r,diff:o}=e;if(!u.Editor.hasPath(t,r))return!1;var n=u.Node.get(t,r);if(!u.Text.isText(n))return!1;if(o.start!==n.text.length||o.text.length===0)return n.text.slice(o.start,o.start+o.text.length)===o.text;var s=u.Path.next(r);if(!u.Editor.hasPath(t,s))return!1;var i=u.Node.get(t,s);return u.Text.isText(i)&&i.text.startsWith(o.text)}function Pc(t){for(var e=arguments.length,r=new Array(e>1?e-1:0),o=1;o<e;o++)r[o-1]=arguments[o];return r.reduce((n,s)=>n.slice(0,s.start)+s.text+n.slice(s.end),t)}function nm(t,e){for(var r=Math.min(t.length,e.length),o=0;o<r;o++)if(t.charAt(o)!==e.charAt(o))return o;return r}function sm(t,e,r){for(var o=Math.min(t.length,e.length,r),n=0;n<o;n++)if(t.charAt(t.length-n-1)!==e.charAt(e.length-n-1))return n;return o}function Rc(t,e){var{start:r,end:o,text:n}=e,s=t.slice(r,o),i=nm(s,n),l=Math.min(s.length-i,n.length-i),d=sm(s,n,l),c={start:r+i,end:o-d,text:n.slice(i,n.length-d)};return c.start===c.end&&c.text.length===0?null:c}function am(t,e,r){var o=Math.min(e.start,r.start),n=Math.max(0,Math.min(e.start+e.text.length,r.end)-r.start),s=Pc(t,e,r),i=Math.max(r.start+r.text.length,e.start+e.text.length+(e.start+e.text.length>r.start?r.text.length:0)-n),l=s.slice(o,i),d=Math.max(e.end,r.end-e.text.length+(e.end-e.start));return Rc(t,{start:o,end:d,text:l})}function im(t){var{path:e,diff:r}=t;return{anchor:{path:e,offset:r.start},focus:{path:e,offset:r.end}}}function Ds(t,e){var{path:r,offset:o}=e;if(!u.Editor.hasPath(t,r))return null;var n=u.Node.get(t,r);if(!u.Text.isText(n))return null;var s=u.Editor.above(t,{match:l=>u.Element.isElement(l)&&u.Editor.isBlock(t,l),at:r});if(!s)return null;for(;o>n.text.length;){var i=u.Editor.next(t,{at:r,match:u.Text.isText});if(!i||!u.Path.isDescendant(i[1],s[1]))return null;o-=n.text.length,n=i[0],r=i[1]}return{path:r,offset:o}}function hc(t,e){var r=Ds(t,e.anchor);if(!r)return null;if(u.Range.isCollapsed(e))return{anchor:r,focus:r};var o=Ds(t,e.focus);return o?{anchor:r,focus:o}:null}function Ms(t,e,r){var o=$e.get(t),n=o?.find(g=>{var{path:x}=g;return u.Path.equals(x,e.path)});if(!n||e.offset<=n.diff.start)return u.Point.transform(e,r,{affinity:"backward"});var{diff:s}=n;if(e.offset<=s.start+s.text.length){var i={path:e.path,offset:s.start},l=u.Point.transform(i,r,{affinity:"backward"});return l?{path:l.path,offset:l.offset+e.offset-s.start}:null}var d={path:e.path,offset:e.offset-s.text.length+s.end-s.start},c=u.Point.transform(d,r,{affinity:"backward"});return c?r.type==="split_node"&&u.Path.equals(r.path,e.path)&&d.offset<r.position&&s.start<r.position?c:{path:c.path,offset:c.offset+s.text.length-s.end+s.start}:null}function vc(t,e,r){var o=Ms(t,e.anchor,r);if(!o)return null;if(u.Range.isCollapsed(e))return{anchor:o,focus:o};var n=Ms(t,e.focus,r);return n?{anchor:o,focus:n}:null}function lm(t,e){var{path:r,diff:o,id:n}=t;switch(e.type){case"insert_text":return!u.Path.equals(e.path,r)||e.offset>=o.end?t:e.offset<=o.start?{diff:{start:e.text.length+o.start,end:e.text.length+o.end,text:o.text},id:n,path:r}:{diff:{start:o.start,end:o.end+e.text.length,text:o.text},id:n,path:r};case"remove_text":return!u.Path.equals(e.path,r)||e.offset>=o.end?t:e.offset+e.text.length<=o.start?{diff:{start:o.start-e.text.length,end:o.end-e.text.length,text:o.text},id:n,path:r}:{diff:{start:o.start,end:o.end-e.text.length,text:o.text},id:n,path:r};case"split_node":return!u.Path.equals(e.path,r)||e.position>=o.end?{diff:o,id:n,path:u.Path.transform(r,e,{affinity:"backward"})}:e.position>o.start?{diff:{start:o.start,end:Math.min(e.position,o.end),text:o.text},id:n,path:r}:{diff:{start:o.start-e.position,end:o.end-e.position,text:o.text},id:n,path:u.Path.transform(r,e,{affinity:"forward"})};case"merge_node":return u.Path.equals(e.path,r)?{diff:{start:o.start+e.position,end:o.end+e.position,text:o.text},id:n,path:u.Path.transform(r,e)}:{diff:o,id:n,path:u.Path.transform(r,e)}}var s=u.Path.transform(r,e);return s?{diff:o,path:s,id:n}:null}function gc(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),r.push.apply(r,o)}return r}function Nn(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?gc(Object(r),!0).forEach(function(o){Bn(t,o,r[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):gc(Object(r)).forEach(function(o){Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(r,o))})}return t}var cm=25,um=200,dm=function(){},fm=t=>t?.constructor.name==="DataTransfer";function mm(t){var{editor:e,scheduleOnDOMSelectionChange:r,onDOMSelectionChange:o}=t,n=!1,s=null,i=null,l=null,d=0,c=!1,g=()=>{var L=mr.get(e);if(mr.delete(e),L){var{selection:G}=e,R=hc(e,L);R&&(!G||!u.Range.equals(R,G))&&u.Transforms.select(e,R)}},x=()=>{var L=fr.get(e);if(fr.delete(e),!!L){if(L.at){var G=u.Point.isPoint(L.at)?Ds(e,L.at):hc(e,L.at);if(!G)return;var R=u.Editor.range(e,G);(!e.selection||!u.Range.equals(e.selection,R))&&u.Transforms.select(e,G)}L.run()}},h=()=>{if(i&&(clearTimeout(i),i=null),l&&(clearTimeout(l),l=null),!C()&&!N()){g();return}n||(n=!0,setTimeout(()=>n=!1)),N()&&(n="action");var L=e.selection&&u.Editor.rangeRef(e,e.selection,{affinity:"forward"});er.set(e,e.marks),dm("flush",fr.get(e),$e.get(e));for(var G=C(),R;R=(U=$e.get(e))===null||U===void 0?void 0:U[0];){var U,oe,se=kt.get(e);se!==void 0&&(kt.delete(e),e.marks=se),se&&c===!1&&(c=null);var Ce=im(R);(!e.selection||!u.Range.equals(e.selection,Ce))&&u.Transforms.select(e,Ce),R.diff.text?u.Editor.insertText(e,R.diff.text):u.Editor.deleteFragment(e),$e.set(e,(oe=$e.get(e))===null||oe===void 0?void 0:oe.filter(be=>{var{id:Se}=be;return Se!==R.id})),om(e,R)||(G=!1,fr.delete(e),er.delete(e),n="action",mr.delete(e),r.cancel(),o.cancel(),L?.unref())}var he=L?.unref();if(he&&!mr.get(e)&&(!e.selection||!u.Range.equals(he,e.selection))&&u.Transforms.select(e,he),N()){x();return}G&&r(),r.flush(),o.flush(),g();var xe=er.get(e);er.delete(e),xe!==void 0&&(e.marks=xe,e.onChange())},v=L=>{s&&clearTimeout(s),s=setTimeout(()=>{Nr.set(e,!1),h()},cm)},p=L=>{Nr.set(e,!0),s&&(clearTimeout(s),s=null)},a=function(){var G=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,R=Is.get(e);if(!!R){if(C()||G){R.style.display="none";return}R.style.removeProperty("display")}},_=(L,G)=>{var R,U=(R=$e.get(e))!==null&&R!==void 0?R:[];$e.set(e,U);var oe=u.Node.leaf(e,L),se=U.findIndex(xe=>u.Path.equals(xe.path,L));if(se<0){var Ce=Rc(oe.text,G);Ce&&U.push({path:L,diff:G,id:d++}),a();return}var he=am(oe.text,U[se].diff,G);if(!he){U.splice(se,1),a();return}U[se]=Nn(Nn({},U[se]),{},{diff:he})},T=function(G){var{at:R}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};c=!1,mr.delete(e),r.cancel(),o.cancel(),N()&&h(),fr.set(e,{at:R,run:G}),l=setTimeout(h)},S=L=>{var G;i&&(clearTimeout(i),i=null);var{inputType:R}=L,U=null,oe=L.dataTransfer||L.data||void 0;c!==!1&&R!=="insertText"&&R!=="insertCompositionText"&&(c=!1);var[se]=L.getTargetRanges();se&&(U=I.toSlateRange(e,se,{exactMatch:!1,suppressThrow:!0}));var Ce=I.getWindow(e),he=Ce.getSelection();if(!U&&he&&(se=he,U=I.toSlateRange(e,he,{exactMatch:!1,suppressThrow:!0})),U=(G=U)!==null&&G!==void 0?G:e.selection,!!U){var xe=!0;if(R.startsWith("delete")){if(u.Range.isExpanded(U)){var[be,Se]=u.Range.edges(U),Ye=u.Node.leaf(e,be.path);if(Ye.text.length===be.offset&&Se.offset===0){var y=u.Editor.next(e,{at:be.path,match:u.Text.isText});y&&u.Path.equals(y[1],Se.path)&&(U={anchor:Se,focus:Se})}}var j=R.endsWith("Backward")?"backward":"forward",[F,H]=u.Range.edges(U),[te,Q]=u.Editor.leaf(e,F.path),ue={text:"",start:F.offset,end:H.offset},Ne=$e.get(e),ye=Ne?.find(Bo=>u.Path.equals(Bo.path,Q)),Pe=ye?[ye.diff,ue]:[ue],Qe=Pc(te.text,...Pe);if(Qe.length===0&&(xe=!1),u.Range.isExpanded(U)){if(xe&&u.Path.equals(U.anchor.path,U.focus.path)){var et={path:U.anchor.path,offset:F.offset},tt=u.Editor.range(e,et,et);return Y(tt),_(U.anchor.path,{text:"",end:H.offset,start:F.offset})}return T(()=>u.Editor.deleteFragment(e,{direction:j}),{at:U})}}switch(R){case"deleteByComposition":case"deleteByCut":case"deleteByDrag":return T(()=>u.Editor.deleteFragment(e),{at:U});case"deleteContent":case"deleteContentForward":{var{anchor:ze}=U;if(xe&&u.Range.isCollapsed(U)){var qt=u.Node.leaf(e,ze.path);if(ze.offset<qt.text.length)return _(ze.path,{text:"",start:ze.offset,end:ze.offset+1})}return T(()=>u.Editor.deleteForward(e),{at:U})}case"deleteContentBackward":{var Zt,{anchor:Tt}=U,or=Fs(se)?se.isCollapsed:!!((Zt=se)!==null&&Zt!==void 0&&Zt.collapsed);return xe&&or&&u.Range.isCollapsed(U)&&Tt.offset>0?_(Tt.path,{text:"",start:Tt.offset-1,end:Tt.offset}):T(()=>u.Editor.deleteBackward(e),{at:U})}case"deleteEntireSoftLine":return T(()=>{u.Editor.deleteBackward(e,{unit:"line"}),u.Editor.deleteForward(e,{unit:"line"})},{at:U});case"deleteHardLineBackward":return T(()=>u.Editor.deleteBackward(e,{unit:"block"}),{at:U});case"deleteSoftLineBackward":return T(()=>u.Editor.deleteBackward(e,{unit:"line"}),{at:U});case"deleteHardLineForward":return T(()=>u.Editor.deleteForward(e,{unit:"block"}),{at:U});case"deleteSoftLineForward":return T(()=>u.Editor.deleteForward(e,{unit:"line"}),{at:U});case"deleteWordBackward":return T(()=>u.Editor.deleteBackward(e,{unit:"word"}),{at:U});case"deleteWordForward":return T(()=>u.Editor.deleteForward(e,{unit:"word"}),{at:U});case"insertLineBreak":return T(()=>u.Editor.insertSoftBreak(e),{at:U});case"insertParagraph":return T(()=>u.Editor.insertBreak(e),{at:U});case"insertCompositionText":case"deleteCompositionText":case"insertFromComposition":case"insertFromDrop":case"insertFromPaste":case"insertFromYank":case"insertReplacementText":case"insertText":{if(fm(oe))return T(()=>I.insertData(e,oe),{at:U});var ve=oe??"";if(kt.get(e)&&(ve=ve.replace("\uFEFF","")),R==="insertText"&&/.*\n.*\n$/.test(ve)&&(ve=ve.slice(0,-1)),ve.includes(`
`))return T(()=>{var Bo=ve.split(`
`);Bo.forEach((ta,_d)=>{ta&&u.Editor.insertText(e,ta),_d!==Bo.length-1&&u.Editor.insertSoftBreak(e)})},{at:U});if(u.Path.equals(U.anchor.path,U.focus.path)){var[Dr,Wn]=u.Range.edges(U),Ot={start:Dr.offset,end:Wn.offset,text:ve};if(ve&&c&&R==="insertCompositionText"){var Fo=c.start+c.text.search(/\S|$/),gd=Ot.start+Ot.text.search(/\S|$/);gd===Fo+1&&Ot.end===c.start+c.text.length?(Ot.start-=1,c=null,D()):c=!1}else R==="insertText"?c===null?c=Ot:c&&u.Range.isCollapsed(U)&&c.end+c.text.length===Dr.offset?c=Nn(Nn({},c),{},{text:c.text+ve}):c=!1:c=!1;if(xe){_(Dr.path,Ot);return}}return T(()=>u.Editor.insertText(e,ve),{at:U})}}}},N=()=>!!fr.get(e),C=()=>{var L;return!!((L=$e.get(e))!==null&&L!==void 0&&L.length)},z=()=>N()||C(),W=()=>n,Y=L=>{mr.set(e,L),i&&(clearTimeout(i),i=null);var{selection:G}=e;if(!!L){var R=!G||!u.Path.equals(G.anchor.path,L.anchor.path),U=!G||!u.Path.equals(G.anchor.path.slice(0,-1),L.anchor.path.slice(0,-1));(R&&c||U)&&(c=!1),(R||C())&&(i=setTimeout(h,um))}},P=()=>{(N()||!C())&&h()},O=L=>{C()||(a(!0),setTimeout(a))},D=()=>{N()||(l=setTimeout(h))},Z=L=>{if(!(C()||N())&&L.some(R=>Gs(e,R,L))){var G;(G=Lc.get(e))===null||G===void 0||G()}};return{flush:h,scheduleFlush:D,hasPendingDiffs:C,hasPendingAction:N,hasPendingChanges:z,isFlushing:W,handleUserSelect:Y,handleCompositionEnd:v,handleCompositionStart:p,handleDOMBeforeInput:S,handleKeyDown:O,handleDomMutations:Z,handleInput:P}}function pm(){var t=(0,b.useRef)(!1);return(0,b.useEffect)(()=>(t.current=!0,()=>{t.current=!1}),[]),t.current}var ko=Cn?b.useLayoutEffect:b.useEffect;function hm(t,e,r){var[o]=(0,b.useState)(()=>new MutationObserver(e));ko(()=>{o.takeRecords()}),(0,b.useEffect)(()=>{if(!t.current)throw new Error("Failed to attach MutationObserver, `node` is undefined");return o.observe(t.current,r),()=>o.disconnect()},[o,t,r])}var vm=["node"];function _c(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),r.push.apply(r,o)}return r}function gm(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?_c(Object(r),!0).forEach(function(o){Bn(t,o,r[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):_c(Object(r)).forEach(function(o){Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(r,o))})}return t}var _m={subtree:!0,childList:!0,characterData:!0},xm=it?t=>{var{node:e}=t,r=Vr(t,vm);if(!it)return null;var o=hr(),n=pm(),[s]=(0,b.useState)(()=>mm(gm({editor:o},r)));return hm(e,s.handleDomMutations,_m),Us.set(o,s.scheduleFlush),n&&s.flush(),s}:()=>null,Sm=["anchor","focus"],Tm=["anchor","focus"],wm=(t,e)=>Object.keys(t).length===Object.keys(e).length&&Object.keys(t).every(r=>e.hasOwnProperty(r)&&t[r]===e[r]),zc=(t,e)=>{var r=Vr(t,Sm),o=Vr(e,Tm);return t[Xr]===e[Xr]&&wm(r,o)},ym=(t,e)=>{if(t.length!==e.length)return!1;for(var r=0;r<t.length;r++){var o=t[r],n=e[r];if(!u.Range.equals(o,n)||!zc(o,n))return!1}return!0},Em=(t,e)=>{if(t.length!==e.length)return!1;for(var r=0;r<t.length;r++){var o=t[r],n=e[r];if(o.anchor.offset!==n.anchor.offset||o.focus.offset!==n.focus.offset||!zc(o,n))return!1}return!0},Am=t=>{var{isLast:e,leaf:r,parent:o,text:n}=t,s=hr(),i=I.findPath(s,n),l=u.Path.parent(i),d=r[Fc]===!0;return s.isVoid(o)?b.default.createElement(ks,{length:u.Node.string(o).length}):r.text===""&&o.children[o.children.length-1]===n&&!s.isInline(o)&&u.Editor.string(s,l)===""?b.default.createElement(ks,{isLineBreak:!0,isMarkPlaceholder:d}):r.text===""?b.default.createElement(ks,{isMarkPlaceholder:d}):e&&r.text.slice(-1)===`
`?b.default.createElement(xc,{isTrailing:!0,text:r.text}):b.default.createElement(xc,{text:r.text})},xc=t=>{var{text:e,isTrailing:r=!1}=t,o=(0,b.useRef)(null),n=()=>"".concat(e??"").concat(r?`
`:""),[s]=(0,b.useState)(n);return ko(()=>{var i=n();o.current&&o.current.textContent!==i&&(o.current.textContent=i)}),b.default.createElement(bm,{ref:o},s)},bm=(0,b.memo)((0,b.forwardRef)((t,e)=>b.default.createElement("span",{"data-slate-string":!0,ref:e},t.children))),ks=t=>{var{length:e=0,isLineBreak:r=!1,isMarkPlaceholder:o=!1}=t,n={"data-slate-zero-width":r?"n":"z","data-slate-length":e};return o&&(n["data-slate-mark-placeholder"]=!0),b.default.createElement("span",Object.assign({},n),!it||!r?"\uFEFF":null,r?b.default.createElement("br",null):null)};function Nm(t,e){t.current&&(t.current.disconnect(),e&&(t.current=null))}function Sc(t){t.current&&(clearTimeout(t.current),t.current=null)}var km=t=>{var{leaf:e,isLast:r,text:o,parent:n,renderPlaceholder:s,renderLeaf:i=S=>b.default.createElement(Cm,Object.assign({},S))}=t,l=hr(),d=(0,b.useRef)(null),c=(0,b.useRef)(null),[g,x]=(0,b.useState)(!1),h=(0,b.useRef)(null),v=(0,b.useCallback)(S=>{if(Nm(d,S==null),S==null){var N;Is.delete(l),(N=e.onPlaceholderResize)===null||N===void 0||N.call(e,null)}else{if(Is.set(l,S),!d.current){var C=window.ResizeObserver||As;d.current=new C(()=>{var z;(z=e.onPlaceholderResize)===null||z===void 0||z.call(e,S)})}d.current.observe(S),c.current=S}},[c,e,l]),p=b.default.createElement(Am,{isLast:r,leaf:e,parent:n,text:o}),a=e[Xr];if((0,b.useEffect)(()=>(a?h.current||(h.current=setTimeout(()=>{x(!0),h.current=null},300)):(Sc(h),x(!1)),()=>Sc(h)),[a,x]),a&&g){var _={children:e.placeholder,attributes:{"data-slate-placeholder":!0,style:{position:"absolute",pointerEvents:"none",width:"100%",maxWidth:"100%",display:"block",opacity:"0.333",userSelect:"none",textDecoration:"none",WebkitUserModify:Ao?"inherit":void 0},contentEditable:!1,ref:v}};p=b.default.createElement(b.default.Fragment,null,s(_),p)}var T={"data-slate-leaf":!0};return i({attributes:T,children:p,leaf:e,text:o})},Im=b.default.memo(km,(t,e)=>e.parent===t.parent&&e.isLast===t.isLast&&e.renderLeaf===t.renderLeaf&&e.renderPlaceholder===t.renderPlaceholder&&e.text===t.text&&u.Text.equals(e.leaf,t.leaf)&&e.leaf[Xr]===t.leaf[Xr]),Cm=t=>{var{attributes:e,children:r}=t;return b.default.createElement("span",Object.assign({},e),r)},Om=t=>{for(var{decorations:e,isLast:r,parent:o,renderPlaceholder:n,renderLeaf:s,text:i}=t,l=hr(),d=(0,b.useRef)(null),c=u.Text.decorations(i,e),g=I.findKey(l,i),x=[],h=0;h<c.length;h++){var v=c[h];x.push(b.default.createElement(Im,{isLast:r&&h===c.length-1,key:"".concat(g.id,"-").concat(h),renderPlaceholder:n,leaf:v,text:i,parent:o,renderLeaf:s}))}var p=(0,b.useCallback)(a=>{var _=Dn.get(l);a?(_?.set(g,a),kr.set(i,a),No.set(a,i)):(_?.delete(g),kr.delete(i),d.current&&No.delete(d.current)),d.current=a},[d,l,g,i]);return b.default.createElement("span",{"data-slate-node":"text",ref:p},x)},Wc=b.default.memo(Om,(t,e)=>e.parent===t.parent&&e.isLast===t.isLast&&e.renderLeaf===t.renderLeaf&&e.renderPlaceholder===t.renderPlaceholder&&e.text===t.text&&Em(e.decorations,t.decorations)),Lm=t=>{var{decorations:e,element:r,renderElement:o=S=>b.default.createElement(Bm,Object.assign({},S)),renderPlaceholder:n,renderLeaf:s,selection:i}=t,l=hr(),d=Pm(),c=l.isInline(r),g=I.findKey(l,r),x=(0,b.useCallback)(S=>{var N=Dn.get(l);S?(N?.set(g,S),kr.set(r,S),No.set(S,r)):(N?.delete(g),kr.delete(r))},[l,g,r]),h=Hc({decorations:e,node:r,renderElement:o,renderPlaceholder:n,renderLeaf:s,selection:i}),v={"data-slate-node":"element",ref:x};if(c&&(v["data-slate-inline"]=!0),!c&&u.Editor.hasInlines(l,r)){var p=u.Node.string(r),a=(0,Ps.default)(p);a==="rtl"&&(v.dir=a)}if(u.Editor.isVoid(l,r)){v["data-slate-void"]=!0,!d&&c&&(v.contentEditable=!1);var _=c?"span":"div",[[T]]=u.Node.texts(r);h=b.default.createElement(_,{"data-slate-spacer":!0,style:{height:"0",color:"transparent",outline:"none",position:"absolute"}},b.default.createElement(Wc,{renderPlaceholder:n,decorations:[],isLast:!1,parent:r,text:T})),zs.set(T,0),Ws.set(T,r)}return o({attributes:v,children:h,element:r})},Fm=b.default.memo(Lm,(t,e)=>t.element===e.element&&t.renderElement===e.renderElement&&t.renderLeaf===e.renderLeaf&&t.renderPlaceholder===e.renderPlaceholder&&ym(t.decorations,e.decorations)&&(t.selection===e.selection||!!t.selection&&!!e.selection&&u.Range.equals(t.selection,e.selection))),Bm=t=>{var{attributes:e,children:r,element:o}=t,n=hr(),s=n.isInline(o)?"span":"div";return b.default.createElement(s,Object.assign({},e,{style:{position:"relative"}}),r)},Uc=(0,b.createContext)(()=>[]),Dm=()=>(0,b.useContext)(Uc),Mm=(0,b.createContext)(!1);var Hc=t=>{for(var{decorations:e,node:r,renderElement:o,renderPlaceholder:n,renderLeaf:s,selection:i}=t,l=Dm(),d=hr(),c=I.findPath(d,r),g=[],x=u.Element.isElement(r)&&!d.isInline(r)&&u.Editor.hasInlines(d,r),h=0;h<r.children.length;h++){var v=c.concat(h),p=r.children[h],a=I.findKey(d,p),_=u.Editor.range(d,v),T=i&&u.Range.intersection(_,i),S=l([p,v]);for(var N of e){var C=u.Range.intersection(N,_);C&&S.push(C)}u.Element.isElement(p)?g.push(b.default.createElement(Mm.Provider,{key:"provider-".concat(a.id),value:!!T},b.default.createElement(Fm,{decorations:S,element:p,key:a.id,renderElement:o,renderPlaceholder:n,renderLeaf:s,selection:T}))):g.push(b.default.createElement(Wc,{decorations:S,key:a.id,isLast:x&&h===r.children.length-1,parent:r,renderPlaceholder:n,renderLeaf:s,text:p})),zs.set(p,h),Ws.set(p,r)}return g},Gc=(0,b.createContext)(!1),Pm=()=>(0,b.useContext)(Gc),jc=(0,b.createContext)(null),Rm=()=>{var t=(0,b.useContext)(jc);if(!t)throw new Error("The `useSlate` hook must be used inside the <Slate> component's context.");var{editor:e}=t;return e};function zm(){var t=hr(),e=(0,b.useRef)(!1),r=(0,b.useRef)(0),o=(0,b.useCallback)(()=>{if(!e.current){e.current=!0;var n=I.getWindow(t);n.cancelAnimationFrame(r.current),r.current=n.requestAnimationFrame(()=>{e.current=!1})}},[t]);return(0,b.useEffect)(()=>()=>cancelAnimationFrame(r.current),[]),{receivedUserInput:e,onUserInput:o}}var Wm=3,Um={bold:"mod+b",compose:["down","left","right","up","backspace","enter"],moveBackward:"left",moveForward:"right",moveWordBackward:"ctrl+left",moveWordForward:"ctrl+right",deleteBackward:"shift?+backspace",deleteForward:"shift?+delete",extendBackward:"shift+left",extendForward:"shift+right",italic:"mod+i",insertSoftBreak:"shift+enter",splitBlock:"enter",undo:"mod+z"},Hm={moveLineBackward:"opt+up",moveLineForward:"opt+down",moveWordBackward:"opt+left",moveWordForward:"opt+right",deleteBackward:["ctrl+backspace","ctrl+h"],deleteForward:["ctrl+delete","ctrl+d"],deleteLineBackward:"cmd+shift?+backspace",deleteLineForward:["cmd+shift?+delete","ctrl+k"],deleteWordBackward:"opt+shift?+backspace",deleteWordForward:"opt+shift?+delete",extendLineBackward:"opt+shift+up",extendLineForward:"opt+shift+down",redo:"cmd+shift+z",transposeCharacter:"ctrl+t"},Gm={deleteWordBackward:"ctrl+shift?+backspace",deleteWordForward:"ctrl+shift?+delete",redo:["ctrl+y","ctrl+shift+z"]},Te=t=>{var e=Um[t],r=Hm[t],o=Gm[t],n=e&&(0,In.isKeyHotkey)(e),s=r&&(0,In.isKeyHotkey)(r),i=o&&(0,In.isKeyHotkey)(o);return l=>!!(n&&n(l)||pc&&s&&s(l)||!pc&&i&&i(l))},we={isBold:Te("bold"),isCompose:Te("compose"),isMoveBackward:Te("moveBackward"),isMoveForward:Te("moveForward"),isDeleteBackward:Te("deleteBackward"),isDeleteForward:Te("deleteForward"),isDeleteLineBackward:Te("deleteLineBackward"),isDeleteLineForward:Te("deleteLineForward"),isDeleteWordBackward:Te("deleteWordBackward"),isDeleteWordForward:Te("deleteWordForward"),isExtendBackward:Te("extendBackward"),isExtendForward:Te("extendForward"),isExtendLineBackward:Te("extendLineBackward"),isExtendLineForward:Te("extendLineForward"),isItalic:Te("italic"),isMoveLineBackward:Te("moveLineBackward"),isMoveLineForward:Te("moveLineForward"),isMoveWordBackward:Te("moveWordBackward"),isMoveWordForward:Te("moveWordForward"),isRedo:Te("redo"),isSoftBreak:Te("insertSoftBreak"),isSplitBlock:Te("splitBlock"),isTransposeCharacter:Te("transposeCharacter"),isUndo:Te("undo")},jm=(t,e)=>{var r=[],o=()=>{r=[]},n=i=>{if(!!e.current){var l=i.filter(d=>Gs(t,d,i));r.push(...l)}};function s(){r.length>0&&(r.reverse().forEach(i=>{i.type!=="characterData"&&(i.removedNodes.forEach(l=>{i.target.insertBefore(l,i.nextSibling)}),i.addedNodes.forEach(l=>{i.target.removeChild(l)}))}),o())}return{registerMutations:n,restoreDOM:s,clear:o}},Ym={subtree:!0,childList:!0,characterData:!0,characterDataOldValue:!0},Fn=class extends b.Component{constructor(){super(...arguments),this.context=null,this.manager=null,this.mutationObserver=null}observe(){var e,{node:r}=this.props;if(!r.current)throw new Error("Failed to attach MutationObserver, `node` is undefined");(e=this.mutationObserver)===null||e===void 0||e.observe(r.current,Ym)}componentDidMount(){var{receivedUserInput:e}=this.props,r=this.context;this.manager=jm(r,e),this.mutationObserver=new MutationObserver(this.manager.registerMutations),this.observe()}getSnapshotBeforeUpdate(){var e,r,o,n=(e=this.mutationObserver)===null||e===void 0?void 0:e.takeRecords();if(n!=null&&n.length){var s;(s=this.manager)===null||s===void 0||s.registerMutations(n)}return(r=this.mutationObserver)===null||r===void 0||r.disconnect(),(o=this.manager)===null||o===void 0||o.restoreDOM(),null}componentDidUpdate(){var e;(e=this.manager)===null||e===void 0||e.clear(),this.observe()}componentWillUnmount(){var e;(e=this.mutationObserver)===null||e===void 0||e.disconnect()}render(){return this.props.children}};Fn.contextType=Rs;var qm=it?Fn:t=>{var{children:e}=t;return b.default.createElement(b.default.Fragment,null,e)},Zm=["autoFocus","decorate","onDOMBeforeInput","placeholder","readOnly","renderElement","renderLeaf","renderPlaceholder","scrollSelectionIntoView","style","as","disableDefaultStyles"],Km=["text"];function Tc(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),r.push.apply(r,o)}return r}function Kr(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Tc(Object(r),!0).forEach(function(o){Bn(t,o,r[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Tc(Object(r)).forEach(function(o){Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(r,o))})}return t}var Vm=t=>b.default.createElement(b.default.Fragment,null,Hc(t)),Yc=t=>{var e=(0,b.useCallback)(y=>b.default.createElement(Xm,Object.assign({},y)),[]),{autoFocus:r,decorate:o=$m,onDOMBeforeInput:n,placeholder:s,readOnly:i=!1,renderElement:l,renderLeaf:d,renderPlaceholder:c=e,scrollSelectionIntoView:g=Jm,style:x={},as:h="div",disableDefaultStyles:v=!1}=t,p=Vr(t,Zm),a=Rm(),[_,T]=(0,b.useState)(!1),S=(0,b.useRef)(null),N=(0,b.useRef)([]),[C,z]=(0,b.useState)(),{onUserInput:W,receivedUserInput:Y}=zm(),[,P]=(0,b.useReducer)(y=>y+1,0);Lc.set(a,P),Os.set(a,i);var O=(0,b.useMemo)(()=>({isDraggingInternally:!1,isUpdatingSelection:!1,latestElement:null,hasMarkPlaceholder:!1}),[]);(0,b.useEffect)(()=>{S.current&&r&&S.current.focus()},[r]);var D=(0,b.useRef)(),Z=(0,b.useMemo)(()=>(0,kc.default)(()=>{var y=D.current;if((it||!I.isComposing(a))&&(!O.isUpdatingSelection||y!=null&&y.isFlushing())&&!O.isDraggingInternally){var j=I.findDocumentOrShadowRoot(a),{activeElement:F}=j,H=I.toDOMNode(a,a),te=j.getSelection();if(F===H?(O.latestElement=F,br.set(a,!0)):br.delete(a),!te)return u.Transforms.deselect(a);var{anchorNode:Q,focusNode:ue}=te,Ne=I.hasEditableTarget(a,Q)||I.isTargetInsideNonReadonlyVoid(a,Q),ye=I.hasEditableTarget(a,ue)||I.isTargetInsideNonReadonlyVoid(a,ue);if(Ne&&ye){var Pe=I.toSlateRange(a,te,{exactMatch:!1,suppressThrow:!0});Pe&&(!I.isComposing(a)&&!(y!=null&&y.hasPendingChanges())&&!(y!=null&&y.isFlushing())?u.Transforms.select(a,Pe):y?.handleUserSelect(Pe))}i&&(!Ne||!ye)&&u.Transforms.deselect(a)}},100),[a,i,O]),L=(0,b.useMemo)(()=>(0,Nc.default)(Z,0),[Z]);D.current=xm({node:S,onDOMSelectionChange:Z,scheduleOnDOMSelectionChange:L}),ko(()=>{var y,j,F;S.current&&(F=Hs(S.current))?(Oc.set(a,F),On.set(a,S.current),kr.set(a,S.current),No.set(S.current,a)):kr.delete(a);var{selection:H}=a,te=I.findDocumentOrShadowRoot(a),Q=te.getSelection();if(!(!Q||!I.isFocused(a)||(y=D.current)!==null&&y!==void 0&&y.hasPendingAction())){var ue=et=>{var tt=Q.type!=="None";if(!(!H&&!tt)){var ze=On.get(a),qt=!1;if(ze.contains(Q.anchorNode)&&ze.contains(Q.focusNode)&&(qt=!0),tt&&qt&&H&&!et){var Zt=I.toSlateRange(a,Q,{exactMatch:!0,suppressThrow:!0});if(Zt&&u.Range.equals(Zt,H)){var Tt;if(!O.hasMarkPlaceholder)return;var{anchorNode:or}=Q;if(or!=null&&(Tt=or.parentElement)!==null&&Tt!==void 0&&Tt.hasAttribute("data-slate-mark-placeholder"))return}}if(H&&!I.hasRange(a,H)){a.selection=I.toSlateRange(a,Q,{exactMatch:!1,suppressThrow:!0});return}O.isUpdatingSelection=!0;var ve=H&&I.toDOMRange(a,H);return ve?(u.Range.isBackward(H)?Q.setBaseAndExtent(ve.endContainer,ve.endOffset,ve.startContainer,ve.startOffset):Q.setBaseAndExtent(ve.startContainer,ve.startOffset,ve.endContainer,ve.endOffset),g(a,ve)):Q.removeAllRanges(),ve}},Ne=ue(),ye=((j=D.current)===null||j===void 0?void 0:j.isFlushing())==="action";if(!it||!ye){setTimeout(()=>{if(Ne&&Ln){var et=I.toDOMNode(a,a);et.focus()}O.isUpdatingSelection=!1});return}var Pe=null,Qe=requestAnimationFrame(()=>{if(ye){var et=tt=>{try{var ze=I.toDOMNode(a,a);ze.focus(),ue(tt)}catch{}};et(),Pe=setTimeout(()=>{et(!0),O.isUpdatingSelection=!1})}});return()=>{cancelAnimationFrame(Qe),Pe&&clearTimeout(Pe)}}});var G=(0,b.useCallback)(y=>{if(W(),!i&&I.hasEditableTarget(a,y.target)&&!Qm(y,n)){var j;if(D.current)return D.current.handleDOMBeforeInput(y);L.flush(),Z.flush();var{selection:F}=a,{inputType:H}=y,te=y.dataTransfer||y.data||void 0,Q=H==="insertCompositionText"||H==="deleteCompositionText";if(Q&&I.isComposing(a))return;var ue=!1;if(H==="insertText"&&F&&u.Range.isCollapsed(F)&&y.data&&y.data.length===1&&/[a-z ]/i.test(y.data)&&F.anchor.offset!==0){var Ne,ye;ue=!0,a.marks&&(ue=!1);var{anchor:Pe}=F,[Qe,et]=I.toDOMPoint(a,Pe),tt=(Ne=Qe.parentElement)===null||Ne===void 0?void 0:Ne.closest("a"),ze=I.getWindow(a);if(ue&&tt&&I.hasDOMNode(a,tt)){var qt,Zt=ze?.document.createTreeWalker(tt,NodeFilter.SHOW_TEXT).lastChild();Zt===Qe&&((qt=Zt.textContent)===null||qt===void 0?void 0:qt.length)===et&&(ue=!1)}if(ue&&Qe.parentElement&&(ze==null||(ye=ze.getComputedStyle(Qe.parentElement))===null||ye===void 0?void 0:ye.whiteSpace)==="pre"){var Tt=u.Editor.above(a,{at:Pe.path,match:Fo=>u.Element.isElement(Fo)&&u.Editor.isBlock(a,Fo)});Tt&&u.Node.string(Tt[0]).includes("	")&&(ue=!1)}}if(!H.startsWith("delete")||H.startsWith("deleteBy")){var[or]=y.getTargetRanges();if(or){var ve=I.toSlateRange(a,or,{exactMatch:!1,suppressThrow:!1});if(!F||!u.Range.equals(F,ve)){ue=!1;var Dr=!Q&&a.selection&&u.Editor.rangeRef(a,a.selection);u.Transforms.select(a,ve),Dr&&bo.set(a,Dr)}}}if(Q)return;if(ue||y.preventDefault(),F&&u.Range.isExpanded(F)&&H.startsWith("delete")){var Wn=H.endsWith("Backward")?"backward":"forward";u.Editor.deleteFragment(a,{direction:Wn});return}switch(H){case"deleteByComposition":case"deleteByCut":case"deleteByDrag":{u.Editor.deleteFragment(a);break}case"deleteContent":case"deleteContentForward":{u.Editor.deleteForward(a);break}case"deleteContentBackward":{u.Editor.deleteBackward(a);break}case"deleteEntireSoftLine":{u.Editor.deleteBackward(a,{unit:"line"}),u.Editor.deleteForward(a,{unit:"line"});break}case"deleteHardLineBackward":{u.Editor.deleteBackward(a,{unit:"block"});break}case"deleteSoftLineBackward":{u.Editor.deleteBackward(a,{unit:"line"});break}case"deleteHardLineForward":{u.Editor.deleteForward(a,{unit:"block"});break}case"deleteSoftLineForward":{u.Editor.deleteForward(a,{unit:"line"});break}case"deleteWordBackward":{u.Editor.deleteBackward(a,{unit:"word"});break}case"deleteWordForward":{u.Editor.deleteForward(a,{unit:"word"});break}case"insertLineBreak":u.Editor.insertSoftBreak(a);break;case"insertParagraph":{u.Editor.insertBreak(a);break}case"insertFromComposition":case"insertFromDrop":case"insertFromPaste":case"insertFromYank":case"insertReplacementText":case"insertText":{H==="insertFromComposition"&&I.isComposing(a)&&(T(!1),Nr.set(a,!1)),te?.constructor.name==="DataTransfer"?I.insertData(a,te):typeof te=="string"&&(ue?N.current.push(()=>u.Editor.insertText(a,te)):u.Editor.insertText(a,te));break}}var Ot=(j=bo.get(a))===null||j===void 0?void 0:j.unref();bo.delete(a),Ot&&(!a.selection||!u.Range.equals(a.selection,Ot))&&u.Transforms.select(a,Ot)}},[a,Z,W,n,i,L]),R=(0,b.useCallback)(y=>{y==null?(Z.cancel(),L.cancel(),On.delete(a),kr.delete(a),S.current&&dr&&S.current.removeEventListener("beforeinput",G)):dr&&y.addEventListener("beforeinput",G),S.current=y},[Z,L,a,G]);ko(()=>{var y=I.getWindow(a);return y.document.addEventListener("selectionchange",L),()=>{y.document.removeEventListener("selectionchange",L)}},[L]);var U=o([a,[]]),oe=s&&a.children.length===1&&Array.from(u.Node.texts(a)).length===1&&u.Node.string(a)===""&&!_,se=(0,b.useCallback)(y=>{if(y&&oe){var j;z((j=y.getBoundingClientRect())===null||j===void 0?void 0:j.height)}else z(void 0)},[oe]);if(oe){var Ce=u.Editor.start(a,[]);U.push({[Xr]:!0,placeholder:s,onPlaceholderResize:se,anchor:Ce,focus:Ce})}var{marks:he}=a;if(O.hasMarkPlaceholder=!1,a.selection&&u.Range.isCollapsed(a.selection)&&he){var{anchor:xe}=a.selection,be=u.Node.leaf(a,xe.path),Se=Vr(be,Km);if(!u.Text.equals(be,he,{loose:!0})){O.hasMarkPlaceholder=!0;var Ye=Object.fromEntries(Object.keys(Se).map(y=>[y,null]));U.push(Kr(Kr(Kr({[Fc]:!0},Ye),he),{},{anchor:xe,focus:xe}))}}return(0,b.useEffect)(()=>{setTimeout(()=>{var{selection:y}=a;if(y){var{anchor:j}=y,F=u.Node.leaf(a,j.path);if(he&&!u.Text.equals(F,he,{loose:!0})){kt.set(a,he);return}}kt.delete(a)})}),b.default.createElement(Gc.Provider,{value:i},b.default.createElement(Uc.Provider,{value:o},b.default.createElement(qm,{node:S,receivedUserInput:Y},b.default.createElement(h,Object.assign({role:i?void 0:"textbox","aria-multiline":i?void 0:!0},p,{spellCheck:dr||!Cn?p.spellCheck:!1,autoCorrect:dr||!Cn?p.autoCorrect:"false",autoCapitalize:dr||!Cn?p.autoCapitalize:"false","data-slate-editor":!0,"data-slate-node":"value",contentEditable:!i,zindex:-1,suppressContentEditableWarning:!0,ref:R,style:Kr(Kr({},v?{}:Kr({position:"relative",outline:"none",whiteSpace:"pre-wrap",wordWrap:"break-word"},C?{minHeight:C}:{})),x),onBeforeInput:(0,b.useCallback)(y=>{if(!dr&&!i&&!je(y,p.onBeforeInput)&&I.hasSelectableTarget(a,y.target)&&(y.preventDefault(),!I.isComposing(a))){var j=y.data;u.Editor.insertText(a,j)}},[p.onBeforeInput,a,i]),onInput:(0,b.useCallback)(y=>{if(!je(y,p.onInput)){if(D.current){D.current.handleInput();return}for(var j of N.current)j();N.current=[]}},[p.onInput]),onBlur:(0,b.useCallback)(y=>{if(!(i||O.isUpdatingSelection||!I.hasSelectableTarget(a,y.target)||je(y,p.onBlur))){var j=I.findDocumentOrShadowRoot(a);if(O.latestElement!==j.activeElement){var{relatedTarget:F}=y,H=I.toDOMNode(a,a);if(F!==H&&!(xt(F)&&F.hasAttribute("data-slate-spacer"))){if(F!=null&&pr(F)&&I.hasDOMNode(a,F)){var te=I.toSlateNode(a,F);if(u.Element.isElement(te)&&!a.isVoid(te))return}if(Ao){var Q=j.getSelection();Q?.removeAllRanges()}br.delete(a)}}}},[i,O.isUpdatingSelection,O.latestElement,a,p.onBlur]),onClick:(0,b.useCallback)(y=>{if(I.hasTarget(a,y.target)&&!je(y,p.onClick)&&pr(y.target)){var j=I.toSlateNode(a,y.target),F=I.findPath(a,j);if(!u.Editor.hasPath(a,F)||u.Node.get(a,F)!==j)return;if(y.detail===Wm&&F.length>=1){var H=F;if(!(u.Element.isElement(j)&&u.Editor.isBlock(a,j))){var te,Q=u.Editor.above(a,{match:tt=>u.Element.isElement(tt)&&u.Editor.isBlock(a,tt),at:F});H=(te=Q?.[1])!==null&&te!==void 0?te:F.slice(0,1)}var ue=u.Editor.range(a,H);u.Transforms.select(a,ue);return}if(i)return;var Ne=u.Editor.start(a,F),ye=u.Editor.end(a,F),Pe=u.Editor.void(a,{at:Ne}),Qe=u.Editor.void(a,{at:ye});if(Pe&&Qe&&u.Path.equals(Pe[1],Qe[1])){var et=u.Editor.range(a,Ne);u.Transforms.select(a,et)}}},[a,p.onClick,i]),onCompositionEnd:(0,b.useCallback)(y=>{if(I.hasSelectableTarget(a,y.target)){var j;if(I.isComposing(a)&&(T(!1),Nr.set(a,!1)),(j=D.current)===null||j===void 0||j.handleCompositionEnd(y),je(y,p.onCompositionEnd)||it)return;if(!Ao&&!Yf&&!Uf&&!Zf&&!qf&&y.data){var F=kt.get(a);kt.delete(a),F!==void 0&&(er.set(a,a.marks),a.marks=F),u.Editor.insertText(a,y.data);var H=er.get(a);er.delete(a),H!==void 0&&(a.marks=H)}}},[p.onCompositionEnd,a]),onCompositionUpdate:(0,b.useCallback)(y=>{I.hasSelectableTarget(a,y.target)&&!je(y,p.onCompositionUpdate)&&(I.isComposing(a)||(T(!0),Nr.set(a,!0)))},[p.onCompositionUpdate,a]),onCompositionStart:(0,b.useCallback)(y=>{if(I.hasSelectableTarget(a,y.target)){var j;if((j=D.current)===null||j===void 0||j.handleCompositionStart(y),je(y,p.onCompositionStart)||it)return;T(!0);var{selection:F}=a;if(F){if(u.Range.isExpanded(F)){u.Editor.deleteFragment(a);return}var H=u.Editor.above(a,{match:ue=>u.Element.isElement(ue)&&u.Editor.isInline(a,ue),mode:"highest"});if(H){var[,te]=H;if(u.Editor.isEnd(a,F.anchor,te)){var Q=u.Editor.after(a,te);u.Transforms.setSelection(a,{anchor:Q,focus:Q})}}}}},[p.onCompositionStart,a]),onCopy:(0,b.useCallback)(y=>{I.hasSelectableTarget(a,y.target)&&!je(y,p.onCopy)&&!wc(y)&&(y.preventDefault(),I.setFragmentData(a,y.clipboardData,"copy"))},[p.onCopy,a]),onCut:(0,b.useCallback)(y=>{if(!i&&I.hasSelectableTarget(a,y.target)&&!je(y,p.onCut)&&!wc(y)){y.preventDefault(),I.setFragmentData(a,y.clipboardData,"cut");var{selection:j}=a;if(j)if(u.Range.isExpanded(j))u.Editor.deleteFragment(a);else{var F=u.Node.parent(a,j.anchor.path);u.Editor.isVoid(a,F)&&u.Transforms.delete(a)}}},[i,a,p.onCut]),onDragOver:(0,b.useCallback)(y=>{if(I.hasTarget(a,y.target)&&!je(y,p.onDragOver)){var j=I.toSlateNode(a,y.target);u.Element.isElement(j)&&u.Editor.isVoid(a,j)&&y.preventDefault()}},[p.onDragOver,a]),onDragStart:(0,b.useCallback)(y=>{if(!i&&I.hasTarget(a,y.target)&&!je(y,p.onDragStart)){var j=I.toSlateNode(a,y.target),F=I.findPath(a,j),H=u.Element.isElement(j)&&u.Editor.isVoid(a,j)||u.Editor.void(a,{at:F,voids:!0});if(H){var te=u.Editor.range(a,F);u.Transforms.select(a,te)}O.isDraggingInternally=!0,I.setFragmentData(a,y.dataTransfer,"drag")}},[i,a,p.onDragStart,O]),onDrop:(0,b.useCallback)(y=>{if(!i&&I.hasTarget(a,y.target)&&!je(y,p.onDrop)){y.preventDefault();var j=a.selection,F=I.findEventRange(a,y),H=y.dataTransfer;u.Transforms.select(a,F),O.isDraggingInternally&&j&&!u.Range.equals(j,F)&&!u.Editor.void(a,{at:F,voids:!0})&&u.Transforms.delete(a,{at:j}),I.insertData(a,H),I.isFocused(a)||I.focus(a)}O.isDraggingInternally=!1},[i,a,p.onDrop,O]),onDragEnd:(0,b.useCallback)(y=>{!i&&O.isDraggingInternally&&p.onDragEnd&&I.hasTarget(a,y.target)&&p.onDragEnd(y),O.isDraggingInternally=!1},[i,O,p,a]),onFocus:(0,b.useCallback)(y=>{if(!i&&!O.isUpdatingSelection&&I.hasEditableTarget(a,y.target)&&!je(y,p.onFocus)){var j=I.toDOMNode(a,a),F=I.findDocumentOrShadowRoot(a);if(O.latestElement=F.activeElement,Ln&&y.target!==j){j.focus();return}br.set(a,!0)}},[i,O,a,p.onFocus]),onKeyDown:(0,b.useCallback)(y=>{if(!i&&I.hasEditableTarget(a,y.target)){var j;(j=D.current)===null||j===void 0||j.handleKeyDown(y);var{nativeEvent:F}=y;if(I.isComposing(a)&&F.isComposing===!1&&(Nr.set(a,!1),T(!1)),je(y,p.onKeyDown)||I.isComposing(a))return;var{selection:H}=a,te=a.children[H!==null?H.focus.path[0]:0],Q=(0,Ps.default)(u.Node.string(te))==="rtl";if(we.isRedo(F)){y.preventDefault();var ue=a;typeof ue.redo=="function"&&ue.redo();return}if(we.isUndo(F)){y.preventDefault();var Ne=a;typeof Ne.undo=="function"&&Ne.undo();return}if(we.isMoveLineBackward(F)){y.preventDefault(),u.Transforms.move(a,{unit:"line",reverse:!0});return}if(we.isMoveLineForward(F)){y.preventDefault(),u.Transforms.move(a,{unit:"line"});return}if(we.isExtendLineBackward(F)){y.preventDefault(),u.Transforms.move(a,{unit:"line",edge:"focus",reverse:!0});return}if(we.isExtendLineForward(F)){y.preventDefault(),u.Transforms.move(a,{unit:"line",edge:"focus"});return}if(we.isMoveBackward(F)){y.preventDefault(),H&&u.Range.isCollapsed(H)?u.Transforms.move(a,{reverse:!Q}):u.Transforms.collapse(a,{edge:"start"});return}if(we.isMoveForward(F)){y.preventDefault(),H&&u.Range.isCollapsed(H)?u.Transforms.move(a,{reverse:Q}):u.Transforms.collapse(a,{edge:"end"});return}if(we.isMoveWordBackward(F)){y.preventDefault(),H&&u.Range.isExpanded(H)&&u.Transforms.collapse(a,{edge:"focus"}),u.Transforms.move(a,{unit:"word",reverse:!Q});return}if(we.isMoveWordForward(F)){y.preventDefault(),H&&u.Range.isExpanded(H)&&u.Transforms.collapse(a,{edge:"focus"}),u.Transforms.move(a,{unit:"word",reverse:Q});return}if(dr){if((Cc||Ao)&&H&&(we.isDeleteBackward(F)||we.isDeleteForward(F))&&u.Range.isCollapsed(H)){var ye=u.Node.parent(a,H.anchor.path);if(u.Element.isElement(ye)&&u.Editor.isVoid(a,ye)&&(u.Editor.isInline(a,ye)||u.Editor.isBlock(a,ye))){y.preventDefault(),u.Editor.deleteBackward(a,{unit:"block"});return}}}else{if(we.isBold(F)||we.isItalic(F)||we.isTransposeCharacter(F)){y.preventDefault();return}if(we.isSoftBreak(F)){y.preventDefault(),u.Editor.insertSoftBreak(a);return}if(we.isSplitBlock(F)){y.preventDefault(),u.Editor.insertBreak(a);return}if(we.isDeleteBackward(F)){y.preventDefault(),H&&u.Range.isExpanded(H)?u.Editor.deleteFragment(a,{direction:"backward"}):u.Editor.deleteBackward(a);return}if(we.isDeleteForward(F)){y.preventDefault(),H&&u.Range.isExpanded(H)?u.Editor.deleteFragment(a,{direction:"forward"}):u.Editor.deleteForward(a);return}if(we.isDeleteLineBackward(F)){y.preventDefault(),H&&u.Range.isExpanded(H)?u.Editor.deleteFragment(a,{direction:"backward"}):u.Editor.deleteBackward(a,{unit:"line"});return}if(we.isDeleteLineForward(F)){y.preventDefault(),H&&u.Range.isExpanded(H)?u.Editor.deleteFragment(a,{direction:"forward"}):u.Editor.deleteForward(a,{unit:"line"});return}if(we.isDeleteWordBackward(F)){y.preventDefault(),H&&u.Range.isExpanded(H)?u.Editor.deleteFragment(a,{direction:"backward"}):u.Editor.deleteBackward(a,{unit:"word"});return}if(we.isDeleteWordForward(F)){y.preventDefault(),H&&u.Range.isExpanded(H)?u.Editor.deleteFragment(a,{direction:"forward"}):u.Editor.deleteForward(a,{unit:"word"});return}}}},[i,a,p.onKeyDown]),onPaste:(0,b.useCallback)(y=>{!i&&I.hasEditableTarget(a,y.target)&&!je(y,p.onPaste)&&(!dr||Xf(y.nativeEvent)||Ao)&&(y.preventDefault(),I.insertData(a,y.clipboardData))},[i,a,p.onPaste])}),b.default.createElement(Vm,{decorations:U,node:a,renderElement:l,renderPlaceholder:c,renderLeaf:d,selection:a.selection})))))},Xm=t=>{var{attributes:e,children:r}=t;return b.default.createElement("span",Object.assign({},e),r,it&&b.default.createElement("br",null))},$m=()=>[],Jm=(t,e)=>{if(e.getBoundingClientRect&&(!t.selection||t.selection&&u.Range.isCollapsed(t.selection))){var r=e.startContainer.parentElement;r.getBoundingClientRect=e.getBoundingClientRect.bind(e),jl(r,{scrollMode:"if-needed"}),delete r.getBoundingClientRect}},je=(t,e)=>{if(!e)return!1;var r=e(t);return r??(t.isDefaultPrevented()||t.isPropagationStopped())},wc=t=>pr(t.target)&&(t.target instanceof HTMLInputElement||t.target instanceof HTMLTextAreaElement),Qm=(t,e)=>{if(!e)return!1;var r=e(t);return r??t.defaultPrevented},ep=(0,b.createContext)(!1);var tp=(0,b.createContext)({});function rp(t){var e=(0,b.useRef)([]).current,r=(0,b.useRef)({editor:t}).current,o=(0,b.useCallback)(s=>{r.editor=s,e.forEach(i=>i(s))},[e,r]),n=(0,b.useMemo)(()=>({getSlate:()=>r.editor,addEventListener:s=>(e.push(s),()=>{e.splice(e.indexOf(s),1)})}),[e,r]);return{selectorContext:n,onChange:o}}var op=["editor","children","onChange","value"],qc=t=>{var{editor:e,children:r,onChange:o,value:n}=t,s=Vr(t,op),i=(0,b.useRef)(!1),[l,d]=b.default.useState(()=>{if(!u.Node.isNodeList(n))throw new Error("[Slate] value is invalid! Expected a list of elements but got: ".concat(u.Scrubber.stringify(n)));if(!u.Editor.isEditor(e))throw new Error("[Slate] editor is invalid! You passed: ".concat(u.Scrubber.stringify(e)));return e.children=n,Object.assign(e,s),{v:0,editor:e}}),{selectorContext:c,onChange:g}=rp(e),x=(0,b.useCallback)(()=>{o&&o(e.children),d(p=>({v:p.v+1,editor:e})),g(e)},[e,g,o]);(0,b.useEffect)(()=>(Ls.set(e,x),()=>{Ls.set(e,()=>{}),i.current=!0}),[e,x]);var[h,v]=(0,b.useState)(I.isFocused(e));return(0,b.useEffect)(()=>{v(I.isFocused(e))},[e]),ko(()=>{var p=()=>v(I.isFocused(e));return Wf?(document.addEventListener("focusin",p),document.addEventListener("focusout",p),()=>{document.removeEventListener("focusin",p),document.removeEventListener("focusout",p)}):(document.addEventListener("focus",p,!0),document.addEventListener("blur",p,!0),()=>{document.removeEventListener("focus",p,!0),document.removeEventListener("blur",p,!0)})},[]),b.default.createElement(tp.Provider,{value:c},b.default.createElement(jc.Provider,{value:l},b.default.createElement(Rs.Provider,{value:l.editor},b.default.createElement(ep.Provider,{value:h},r))))};var yc=(t,e)=>{var r=(e.top+e.bottom)/2;return t.top<=r&&t.bottom>=r},Ec=(t,e,r)=>{var o=I.toDOMRange(t,e).getBoundingClientRect(),n=I.toDOMRange(t,r).getBoundingClientRect();return yc(o,n)&&yc(n,o)},np=(t,e)=>{var r=u.Editor.range(t,u.Range.end(e)),o=Array.from(u.Editor.positions(t,{at:e})),n=0,s=o.length,i=Math.floor(s/2);if(Ec(t,u.Editor.range(t,o[n]),r))return u.Editor.range(t,o[n],r);if(o.length<2)return u.Editor.range(t,o[o.length-1],r);for(;i!==o.length&&i!==n;)Ec(t,u.Editor.range(t,o[i]),r)?s=i:n=i,i=Math.floor((n+s)/2);return u.Editor.range(t,o[s],r)};function Ac(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),r.push.apply(r,o)}return r}function bc(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Ac(Object(r),!0).forEach(function(o){Bn(t,o,r[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Ac(Object(r)).forEach(function(o){Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(r,o))})}return t}var Zc=function(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"x-slate-fragment",o=e,{apply:n,onChange:s,deleteBackward:i,addMark:l,removeMark:d}=o;return Dn.set(o,new WeakMap),o.addMark=(c,g)=>{var x,h;(x=Us.get(o))===null||x===void 0||x(),!kt.get(o)&&(h=$e.get(o))!==null&&h!==void 0&&h.length&&kt.set(o,null),er.delete(o),l(c,g)},o.removeMark=c=>{var g;!kt.get(o)&&(g=$e.get(o))!==null&&g!==void 0&&g.length&&kt.set(o,null),er.delete(o),d(c)},o.deleteBackward=c=>{if(c!=="line")return i(c);if(o.selection&&u.Range.isCollapsed(o.selection)){var g=u.Editor.above(o,{match:p=>u.Element.isElement(p)&&u.Editor.isBlock(o,p),at:o.selection});if(g){var[,x]=g,h=u.Editor.range(o,x,o.selection.anchor),v=np(o,h);u.Range.isCollapsed(v)||u.Transforms.delete(o,{at:v})}}},o.apply=c=>{var g=[],x=$e.get(o);if(x!=null&&x.length){var h=x.map(W=>lm(W,c)).filter(Boolean);$e.set(o,h)}var v=mr.get(o);v&&mr.set(o,vc(o,v,c));var p=fr.get(o);if(p!=null&&p.at){var a=u.Point.isPoint(p?.at)?Ms(o,p.at,c):vc(o,p.at,c);fr.set(o,a?bc(bc({},p),{},{at:a}):null)}switch(c.type){case"insert_text":case"remove_text":case"set_node":case"split_node":{g.push(...kn(o,c.path));break}case"set_selection":{var _;(_=bo.get(o))===null||_===void 0||_.unref(),bo.delete(o);break}case"insert_node":case"remove_node":{g.push(...kn(o,u.Path.parent(c.path)));break}case"merge_node":{var T=u.Path.previous(c.path);g.push(...kn(o,T));break}case"move_node":{var S=u.Path.common(u.Path.parent(c.path),u.Path.parent(c.newPath));g.push(...kn(o,S));break}}n(c);for(var[N,C]of g){var[z]=u.Editor.node(o,N);Cs.set(z,C)}},o.setFragmentData=c=>{var{selection:g}=o;if(!!g){var[x,h]=u.Range.edges(g),v=u.Editor.void(o,{at:x.path}),p=u.Editor.void(o,{at:h.path});if(!(u.Range.isCollapsed(g)&&!v)){var a=I.toDOMRange(o,g),_=a.cloneContents(),T=_.childNodes[0];if(_.childNodes.forEach(D=>{D.textContent&&D.textContent.trim()!==""&&(T=D)}),p){var[S]=p,N=a.cloneRange(),C=I.toDOMNode(o,S);N.setEndAfter(C),_=N.cloneContents()}if(v&&(T=_.querySelector("[data-slate-spacer]")),Array.from(_.querySelectorAll("[data-slate-zero-width]")).forEach(D=>{var Z=D.getAttribute("data-slate-zero-width")==="n";D.textContent=Z?`
`:""}),Bc(T)){var z=T.ownerDocument.createElement("span");z.style.whiteSpace="pre",z.appendChild(T),_.appendChild(z),T=z}var W=o.getFragment(),Y=JSON.stringify(W),P=window.btoa(encodeURIComponent(Y));T.setAttribute("data-slate-fragment",P),c.setData("application/".concat(r),P);var O=_.ownerDocument.createElement("div");return O.appendChild(_),O.setAttribute("hidden","true"),_.ownerDocument.body.appendChild(O),c.setData("text/html",O.innerHTML),c.setData("text/plain",Mc(O)),_.ownerDocument.body.removeChild(O),c}}},o.insertData=c=>{o.insertFragmentData(c)||o.insertTextData(c)},o.insertFragmentData=c=>{var g=c.getData("application/".concat(r))||tm(c);if(g){var x=decodeURIComponent(window.atob(g)),h=JSON.parse(x);return o.insertFragment(h),!0}return!1},o.insertTextData=c=>{var g=c.getData("text/plain");if(g){var x=g.split(/\r\n|\r|\n/),h=!1;for(var v of x)h&&u.Transforms.splitNodes(o,{always:!0}),o.insertText(v),h=!0;return!0}return!1},o.onChange=c=>{Ic.default.unstable_batchedUpdates(()=>{var g=Ls.get(o);g&&g(),s(c)})},o},kn=(t,e)=>{var r=[];for(var[o,n]of u.Editor.levels(t,{at:e})){var s=I.findKey(t,o);r.push([n,s])}return r};var Ht=k(To());f();m();f();m();function Kc(t){return Object.prototype.toString.call(t)==="[object Object]"}function Vc(t){var e,r;return Kc(t)===!1?!1:(e=t.constructor,e===void 0?!0:(r=e.prototype,!(Kc(r)===!1||r.hasOwnProperty("isPrototypeOf")===!1)))}var Je=k(To()),sp={isHistory(t){return Vc(t)&&Array.isArray(t.redos)&&Array.isArray(t.undos)&&(t.redos.length===0||Je.Operation.isOperationList(t.redos[0].operations))&&(t.undos.length===0||Je.Operation.isOperationList(t.undos[0].operations))}};var js=new WeakMap,Ys=new WeakMap,$r={isHistoryEditor(t){return sp.isHistory(t.history)&&Je.Editor.isEditor(t)},isMerging(t){return Ys.get(t)},isSaving(t){return js.get(t)},redo(t){t.redo()},undo(t){t.undo()},withoutMerging(t,e){var r=$r.isMerging(t);Ys.set(t,!1),e(),Ys.set(t,r)},withoutSaving(t,e){var r=$r.isSaving(t);js.set(t,!1),e(),js.set(t,r)}},Xc=t=>{var e=t,{apply:r}=e;return e.history={undos:[],redos:[]},e.redo=()=>{var{history:o}=e,{redos:n}=o;if(n.length>0){var s=n[n.length-1];s.selectionBefore&&Je.Transforms.setSelection(e,s.selectionBefore),$r.withoutSaving(e,()=>{Je.Editor.withoutNormalizing(e,()=>{for(var i of s.operations)e.apply(i)})}),o.redos.pop(),e.writeHistory("undos",s)}},e.undo=()=>{var{history:o}=e,{undos:n}=o;if(n.length>0){var s=n[n.length-1];$r.withoutSaving(e,()=>{Je.Editor.withoutNormalizing(e,()=>{var i=s.operations.map(Je.Operation.inverse).reverse();for(var l of i)e.apply(l);s.selectionBefore&&Je.Transforms.setSelection(e,s.selectionBefore)})}),e.writeHistory("redos",s),o.undos.pop()}},e.apply=o=>{var{operations:n,history:s}=e,{undos:i}=s,l=i[i.length-1],d=l&&l.operations[l.operations.length-1],c=$r.isSaving(e),g=$r.isMerging(e);if(c==null&&(c=ip(o)),c){if(g==null&&(l==null?g=!1:n.length!==0?g=!0:g=ap(o,d)),l&&g)l.operations.push(o);else{var x={operations:[o],selectionBefore:e.selection};e.writeHistory("undos",x)}for(;i.length>100;)i.shift();s.redos=[]}r(o)},e.writeHistory=(o,n)=>{e.history[o].push(n)},e},ap=(t,e)=>!!(e&&t.type==="insert_text"&&e.type==="insert_text"&&t.offset===e.offset+e.text.length&&Je.Path.equals(t.path,e.path)||e&&t.type==="remove_text"&&e.type==="remove_text"&&t.offset+t.text.length===e.offset&&Je.Path.equals(t.path,e.path)),ip=(t,e)=>t.type!=="set_selection";f();m();var Ae={"batch-send-address":"_batch-send-address_1gj1i_1",batchSendAddress:"_batch-send-address_1gj1i_1","batch-send-address-dialog-core":"_batch-send-address-dialog-core_1gj1i_30",batchSendAddressDialogCore:"_batch-send-address-dialog-core_1gj1i_30","batch-send-address-input":"_batch-send-address-input_1gj1i_35",batchSendAddressInput:"_batch-send-address-input_1gj1i_35","batch-send-address-accordion":"_batch-send-address-accordion_1gj1i_48",batchSendAddressAccordion:"_batch-send-address-accordion_1gj1i_48","batch-send-address-accordion-header":"_batch-send-address-accordion-header_1gj1i_51",batchSendAddressAccordionHeader:"_batch-send-address-accordion-header_1gj1i_51","batch-send-address-accordion-content":"_batch-send-address-accordion-content_1gj1i_55",batchSendAddressAccordionContent:"_batch-send-address-accordion-content_1gj1i_55","batch-send-address-accordion-checkbox":"_batch-send-address-accordion-checkbox_1gj1i_59",batchSendAddressAccordionCheckbox:"_batch-send-address-accordion-checkbox_1gj1i_59","batch-send-address-select-address-actions":"_batch-send-address-select-address-actions_1gj1i_64",batchSendAddressSelectAddressActions:"_batch-send-address-select-address-actions_1gj1i_64",upload:"_upload_1gj1i_74",uploadIcon:"_uploadIcon_1gj1i_89",uploadText:"_uploadText_1gj1i_92",addressPre:"_addressPre_1gj1i_95",selectAddress:"_selectAddress_1gj1i_99",selectedAddressInfo:"_selectedAddressInfo_1gj1i_104",addBtn:"_addBtn_1gj1i_112","circle-icon":"_circle-icon_1gj1i_116",circleIcon:"_circle-icon_1gj1i_116"};f();m();var Jr=k(K()),ru=k(Be());re();f();m();var Mn=k(K());re();f();m();var $c=k(Va()),lp=(t,e={})=>new Promise((r,o)=>{$c.default.parse(t,{complete:n=>{r(n)},error:n=>{o(n)},...e})}),cp=(t,e={})=>lp(t,e).then(r=>(r?.data??[]).flat().filter(Boolean)),Jc=cp;f();m();var Qc=k(K());function up(t,{onDrop:e,onDragLeave:r,onDragEnter:o,onDragOver:n}){(0,Qc.useEffect)(()=>(t&&(t.addEventListener("drop",e),t.addEventListener("dragleave",r),t.addEventListener("dragenter",o),t.addEventListener("dragover",n)),()=>{t&&(t.removeEventListener("drop",e),t.removeEventListener("dragleave",r),t.removeEventListener("dragenter",o),t.removeEventListener("dragover",n))}),[e,r,o,n,t])}var qs=up;function dp(t){let e=t.scrollHeight;t.scrollTo(0,e)}var fp=1024,mp=1024*fp,eu=1,pp=mp*eu;function hp(t,{onChange:e,slateRef:r,onError:o}={}){let[n,s]=(0,Mn.useState)(!1),i=x=>{r?.current&&(r.current.style.pointerEvents=x?"none":"auto")},l=B(x=>{x.preventDefault()});qs(document,{onDrop:l,onDragEnter:l,onDragLeave:l,onDragOver:l});let d=B(x=>{i(!1),s(!1);let h=x.dataTransfer?.files?.[0];if(!!h){if(h.type!=="text/csv"){o?.(E("wallet_extension_reminder_text_wrong_format"));return}if(h.size>pp){o?.(E("wallet_extension_reminder_text_large_doc",{num:eu}));return}Jc(h).then(v=>{e?.(v)}).catch(()=>{e?.([])})}});(0,Mn.useEffect)(()=>{n&&t.current&&dp(t.current)},[n,t]);let c=B(()=>{i(!0),s(!0)}),g=B(()=>{i(!1),s(!1)});return qs(t.current,{onDrop:d,onDragEnter:c,onDragLeave:g}),{show:n}}var tu=hp;function vp(t){let{onChange:e,dropRef:r,slateRef:o,onError:n}=t,s=(0,Jr.useRef)(null),{show:i}=tu(r,{onChange:e,slateRef:o,onError:n});return i?Jr.default.createElement(w.Box,{ref:s,className:Ae.upload},Jr.default.createElement(ot,{className:(0,ru.default)("okds-plus-circle",Ae.uploadIcon)}),Jr.default.createElement(w.Box,{className:Ae.uploadText},E("wallet_extension_reminder_dropzone_input_address"))):void 0}var ou=vp;f();m();var St=k(K());var nu=k(rt());re();var gp=({type:t,title:e,children:r,dropError:o,actionTitle:n,addressErrors:s,onSelectWalletAddress:i})=>{let l=(0,St.useMemo)(()=>{if(o)return o;if(!s?.length)return null;let d=(0,nu.uniqBy)(s,"error");return d?.length>1?E("wallet_extension_sending_text_address_error"):E(d[0]?.error,d[0]?.args)},[o,s]);return St.default.createElement(w.Space,{direction:w.DIRECTION.vertical,space:"12px"},St.default.createElement(w.FlexBox,{justify:"space-between",align:w.ALIGN.center},St.default.createElement(ne.Text,{strong:700,size:ne.SIZE.lg,style:{lineHeight:"24px"}},e,St.default.createElement(ke,{className:Ae.circleIcon,icon:"okds-question-mark-circle",size:ke.SIZE.xs,tooltip:{maxWidth:"300px",placement:_r?.DIRECTION.topRight,title:St.default.createElement("pre",{className:Ae.addressPre},E("wallet_extension_sending_tooltip_address_condition"))}})),St.default.createElement(w.Space,{direction:w.DIRECTION.horizontal,space:"6px",align:w.ALIGN.center,style:{cursor:"pointer"},onClick:()=>{i(t)}},St.default.createElement(ke,{icon:"okx-wallet-plugin-tier-guide",size:ke.SIZE.md}),St.default.createElement(ne.Text,{strong:!0,size:ne.SIZE.sm,style:{lineHeight:"16px"}},n))),r,l&&St.default.createElement(ne.Text,{size:ne.SIZE.xs,type:ne.TYPE.danger},l))},Pn=gp;f();m();var su=k(rt()),Ir=k(To()),_p=[{type:"numbered-list",children:[{type:"list-item",children:[{text:""}]}]}],au=(t=[])=>!t||!t?.length?_p:[{type:"numbered-list",children:t.map(e=>({type:"list-item",children:[{text:e}]}))}],iu=t=>{let[{children:e}]=t;return e.map(({children:r})=>(0,su.trim)(r?.[0]?.text))},lu=(t=[],e=[])=>!e.some(r=>!t.includes(r)),cu=t=>{let{normalizeNode:e}=t;return t.normalizeNode=r=>{let[o,n]=r;if(Ir.Element.isElement(o)&&o.type==="numbered-list"){for(let[s,i]of Ir.Node.children(t,n))if(Ir.Element.isElement(s)&&s.type==="numbered-list"){Ir.Transforms.unwrapNodes(t,{at:i});return}}e(r)},t};var xp="Enter",Sp=({attributes:t,children:e,element:r})=>{let{error:o}=r;switch(r.type){case"list-item":return me.default.createElement("li",{style:{color:o&&"red"},...t},e);case"numbered-list":return me.default.createElement("ol",{...t},e);default:return me.default.createElement("p",{...t},e)}},Tp=({attributes:t,children:e,leaf:r})=>{let{error:o}=r;return me.default.createElement("span",{style:{color:o?"red":void 0},...t},e)},wp=(0,me.forwardRef)(({type:t,title:e,dropError:r,actionTitle:o,placeholder:n,value:s=[],onChange:i,addressErrors:l,onSelectWalletAddress:d,onDrop:c,onDropError:g},x)=>{let h=(0,me.useRef)(0),v=(0,me.useCallback)(C=>me.default.createElement(Sp,{...C}),[]),p=(0,me.useCallback)(C=>me.default.createElement(Tp,{...C}),[]),a=(0,me.useMemo)(()=>cu(Xc(Zc((0,Ht.createEditor)()))),[]),_=(0,me.useRef)(null),T=(0,me.useRef)(null);(0,me.useEffect)(()=>{a?.selection?.focus&&(h.current=a?.selection?.focus?.path?.[1])},[a.selection]),(0,me.useEffect)(()=>{s.forEach((C,z)=>{Ht.Transforms.setNodes(a,{error:!1},{at:[0,z,0]})}),l?.forEach(({at:C})=>{Ht.Transforms.setNodes(a,{error:!0},{at:[0,C,0]})})},[l]);let S=B(C=>{let{path:z}=a.selection?.focus??{path:null},W=l?.find(P=>P.at===z?.[1])?.address,Y=C?.[0]?.children?.[z?.[1]]?.children?.[0]?.text;(W&&Y!==W||!Y)&&Ht.Transforms.setNodes(a,{error:!1},{at:[0,z?.[1],0]}),i?.(C,t)},[l]),N=B(async C=>{let{path:z,offset:W}=a.selection?.focus||{};if(!z||!W)return!1;let Y=z?.[1];if(C.key===xp){s?.[Y]?.length>W&&Ht.Transforms.setNodes(a,{error:!1},{at:[0,Y,0]}),await Ma(10);let P=z[1]+1;Ht.Transforms.setNodes(a,{error:!1},{at:[0,P,0]})}return!0},[s,l]);return(0,me.useImperativeHandle)(x,()=>({insertNodes:(C=[])=>{let z=C.map(Y=>({type:"list-item",children:[{text:Y}]}));Ht.Transforms.insertNodes(a,z);let W=h.current;s?.[W]||Ht.Transforms.removeNodes(a,{at:[0,W]})}})),me.default.createElement(Pn,{type:t,title:e,dropError:r,actionTitle:o,addressErrors:l,onSelectWalletAddress:d},me.default.createElement(w.Box,{className:Ae["batch-send-address-input"],ref:_},me.default.createElement(w.Box,{ref:T},me.default.createElement(qc,{editor:a,value:au(s),onChange:S},me.default.createElement(Yc,{autoFocus:!0,spellCheck:!0,renderLeaf:p,renderElement:v,placeholder:n,onKeyDown:N}))),me.default.createElement(ou,{dropRef:_,onChange:c,slateRef:T,onError:g})))}),Zs=wp;f();m();var ce=k(K());re();f();m();var Fe={SEND:"SEND",RECEIVE:"RECEIVE"};var uu=t=>Array.isArray(t)?t.map(({name:e,address:r,options:o})=>r&&!o?{value:r,style:{display:"flex",alignItems:"center"},label:ce.default.createElement(w.Space,{direction:w.DIRECTION.vertical,space:"2px"},e&&ce.default.createElement(ne.Text,{size:ne.SIZE.xs},e),r&&ce.default.createElement(ne.Text,{size:ne.SIZE.xs,type:ne.TYPE.secondary},r))}:{value:e,label:ce.default.createElement(ne.Text,{size:ne.SIZE.md},e),options:uu(o)}):[],yp=t=>{let[e,r]=(0,ce.useState)([]),[o,n]=(0,ce.useState)(!1),s=(0,ce.useMemo)(()=>uu(t.options),[t.options]),i=(0,ce.useMemo)(()=>s?.map(v=>v.options?.map(({value:p})=>p))?.flat(),[s]),{mode:l,type:d}=t,c=(0,ce.useMemo)(()=>l===X.ONE_TO_MANY&&d===Fe.SEND||l===X.MANY_TO_ONE&&d===Fe.RECEIVE,[l,d]),g=B((v,p,a)=>{if(c){r([p]);return}let _=[...e];v&&p?_=[...e,p]:!v&&p?_=_.filter(T=>T!==p):v&&a&&a.length?_=[...e,...a]:!v&&a&&a.length&&(_=_.filter(T=>!a.includes(T))),r([...new Set(_)])},[c,e]),x=(0,ce.useCallback)(()=>{t?.onChange(e,t?.type)},[e,t]),h=v=>{let p=v.target.checked;r(p?i:[])};return(0,ce.useEffect)(()=>{n(e.length===i.length)},[e,i]),ce.default.createElement(w.Box,{className:Ae.selectAddress},ce.default.createElement(w.Box,{className:Ae["batch-send-address-dialog-core"]},s.map(({label:v,options:p})=>Array.isArray(p)&&p?.length?ce.default.createElement(oa,{defaultExpanded:!0,className:Ae["batch-send-address-accordion"],headerClassName:Ae["batch-send-address-accordion-header"],contentClassName:Ae["batch-send-address-accordion-content"],title:c?v:ce.default.createElement(sr,{clickStopPropagation:!0,checked:lu(e,p.map(({value:a})=>a)),onChange:({target:{checked:a}})=>{g(a,void 0,p.map(({value:_})=>_))}},v)},p.map(({value:a,label:_})=>c?ce.default.createElement(na,{checked:e?.includes(a),className:Ae["batch-send-address-accordion-checkbox"],onChange:({target:{checked:T}})=>{g(T,a)}},_):ce.default.createElement(sr,{checked:e?.includes(a),className:Ae["batch-send-address-accordion-checkbox"],onChange:({target:{checked:T}})=>{g(T,a)}},_))):ce.default.createElement(ce.default.Fragment,null))),ce.default.createElement(w.Box,{className:Ae["batch-send-address-select-address-actions"]},!c&&ce.default.createElement(w.Box,{className:Ae.selectedAddressInfo},ce.default.createElement(sr,{checked:o,onChange:h},E("wallet_extension_addressbook_text_select_all")),ce.default.createElement(ne.Text,{type:ne.TYPE.secondary,size:ne.SIZE.sm},E("wallet_extension_addressbook_text_selected_address",{wallet_extension_addressbook_text_selected_address:e?.length??0}))),ce.default.createElement(w.Box,{className:Ae.addBtn},ce.default.createElement(q,{category:q.CATEGORY.fill,type:q.TYPE.highlight,size:q.SIZE.lg,onClick:x,disabled:e.length<=0,block:!0},E("wallet_extension_addressbook_btn_add")))))},du=yp;f();m();var Ks=k(K());var fu=k(rt());var Ep=({type:t,title:e,value:r,onChange:o,actionTitle:n,placeholder:s,addressErrors:i,onSelectWalletAddress:l})=>Ks.default.createElement(Pn,{type:t,title:e,actionTitle:n,addressErrors:i,onSelectWalletAddress:l},Ks.default.createElement(pe,{size:pe.SIZE.xl,value:r?.[0],placeholder:s,onChange:({target:{value:d}})=>{o?.([(0,fu.trim)(d)],t,!0)}})),Vs=Ep;f();m();var tr=k(K());var mu=({mode:t,walletAccounts:e,walletAccountsWithAddressBook:r,onChange:o})=>{let n=(0,tr.useRef)(null),s=(0,tr.useRef)(null),[i,l]=(0,tr.useState)(null),[d,c]=(0,tr.useState)(!1),[g,x]=(0,tr.useState)([]),[h,v]=(0,tr.useState)(""),[p,a]=(0,tr.useState)(""),_=B(()=>{c(!1)},[]),T=B((P,O)=>{O===Fe.SEND&&t===X.ONE_TO_MANY||O===Fe.RECEIVE&&t===X.MANY_TO_ONE?o?.(P,O):(O===Fe.SEND?n:s)?.current?.insertNodes(P),_()},[]),S=B(P=>{let O=P===Fe.SEND?e:r;c(!0),l(P),x(O)},[]),N=B((P=[])=>{n.current.insertNodes(P),v("")}),C=B((P=[])=>{s.current.insertNodes(P),a("")}),z=B((P,O,D=!1)=>{o?.(D?P:iu(P),O),v(""),a("")},[]),W=B(P=>{a(P)}),Y=B(P=>{v(P)});return{visible:d,sendRef:n,receiveRef:s,addressType:i,addressOptions:g,onCloseDialog:_,onInsertAddresses:T,onSelectWalletAddress:S,onSendDrop:N,onReceiveDrop:C,onAddressInputChange:z,onReceiveDropError:W,onSendDropError:Y,sendError:h,receiveError:p}};var Ap=t=>{let{mode:e,className:r,style:o,toAddresses:n,fromAddresses:s,addressErrors:i}=t,{visible:l,sendRef:d,receiveRef:c,addressType:g,addressOptions:x,onCloseDialog:h,onInsertAddresses:v,onSelectWalletAddress:p,onSendDrop:a,onReceiveDrop:_,onAddressInputChange:T,onReceiveDropError:S,onSendDropError:N,sendError:C,receiveError:z}=mu(t),{isSm:W}=Oe();return rr.default.createElement(w.FlexBox,{style:o,direction:W?w.DIRECTION.vertical:w.DIRECTION.horizontal,className:(0,pu.default)(Ae["batch-send-address"],r)},e===X.ONE_TO_MANY?rr.default.createElement(Vs,{value:s,type:Fe.SEND,addressErrors:i?.from,placeholder:E("wallet_extension_address_input_input_address"),title:E("wallet_extension_sending_title_send_address"),actionTitle:E("wallet_extension_address_anchor_address_book"),onChange:T,onSelectWalletAddress:p}):rr.default.createElement(Zs,{ref:d,value:s,addressErrors:i?.from,type:Fe.SEND,placeholder:E("wallet_extension_address_input_input_address"),title:E("wallet_extension_sending_title_send_address"),actionTitle:E("wallet_extension_address_anchor_address_book"),onChange:T,onSelectWalletAddress:p,onDrop:a,onDropError:N,dropError:C}),e===X.MANY_TO_ONE?rr.default.createElement(Vs,{value:n,type:Fe.RECEIVE,addressErrors:i?.to,placeholder:E("wallet_extension_address_input_input_address"),title:E("wallet_extension_receive_title_receive_address"),actionTitle:E("wallet_extension_address_anchor_address_book"),onChange:T,onSelectWalletAddress:p}):rr.default.createElement(Zs,{ref:c,value:n,type:Fe.RECEIVE,addressErrors:i?.to,placeholder:E("wallet_extension_address_input_input_address"),title:E("wallet_extension_receive_title_receive_address"),actionTitle:E("wallet_extension_address_anchor_address_book"),onChange:T,onSelectWalletAddress:p,onDrop:_,onDropError:S,dropError:z}),rr.default.createElement(gr,{visible:l,noContentPadding:!0,windowStyle:{height:"685px",maxHeight:"685px"},title:E("wallet_extension_addressbook_title_address_book"),onClose:h},rr.default.createElement(du,{mode:e,type:g,options:x,onChange:v})))},hu=rr.default.memo(Ap);f();m();var Cr=k(K()),Or=k(rt());f();m();Le();oo();ro();var bp=()=>B(async t=>{let{data:e}=await Lt(Ft.getSolRentBatch,{coinId:ar,addresses:t});return e}),vu=bp;Le();ro();oo();f();m();var xu=k(rt());f();m();var gu=k(ca()),Qr=k(rt());var Np=10,kp=({web3:t,addressList:e,contractAddress:r})=>{let o=new t.BatchRequest;return new Promise(n=>{let s=[],i=r&&new t.eth.Contract(gu.default,r),l=e?.length;e?.forEach(d=>{let c=r?i?.methods.balanceOf(d).call.request({from:d},(g,x)=>{s.push({from:d,balance:g?0:x}),s?.length===l&&n(s)}):t.eth.getBalance.request(d,"latest",(g,x)=>{s.push({from:d,balance:g?0:x,baseCoinBalance:g?0:x}),s?.length===l&&n(s)});o.add(c)}),o.execute()})},_u=t=>{let e=Tr(t);return B(async(r,o)=>{let n=await e(),s=(0,Qr.uniq)(r),i=(0,Qr.chunk)(s,Np),l=await Promise.all(i.map(c=>kp({web3:n,addressList:c,contractAddress:o}))),d=(0,Qr.flatten)(l);return r?.length!==d?.length?r.map(c=>d.find(({from:x})=>x===c)):d},[e])};Le();var Ip=()=>{let[t]=ee(),e=Oa(void 0,t?.localType),r=Ia();return B(async o=>{let n=st(t),s=o?.length,i=[];for(let l=0;l<s;l++){let d=o[l],{walletId:c}=e.find(x=>x.address===d)||{},{coinAmountInt:g}=await r(t?.coinId,c)||{};if(n)i.push({from:d,balance:g,baseCoinBalance:g});else{let{coinAmountInt:x}=await r(t?.baseCoinId,c)||{};i.push({from:d,balance:g,baseCoinBalance:x})}}return i})},Cp=()=>{let[t]=De(),[e]=ee(),r=_u(t?.rpcUrl);return B(async o=>{let n=!e?.address,s=[],i=o.map(d=>d&&lt(d,e?.localType)),l=await r(i,void 0);return n||(s=await r(i,e?.address)),(0,xu.merge)(l,s)},[e])},Op=()=>{let[t]=ee(),e=Cp(),r=Ip();return[le,ae,Ee,J].includes(t?.localType)?r:e},Su=Op;f();m();var Tu=k(rt());Le();var Xs=(t=[],e)=>e===Fe.SEND?t.map(({from:r})=>r):t.map(({to:r})=>r),wu=async({mode:t,localType:e,tokenSymbol:r,toAddresses:o,fromAddresses:n,walletAccounts:s,addressRegisterStatusMap:i})=>{let l=[],d=[],c=(0,Tu.max)([o?.length,n?.length]),g=n[0],x=o[0];for(let h=0;h<c;h++){(t===X.MANY_TO_MANY||t===X.MANY_TO_ONE)&&(g=n[h]),(t===X.MANY_TO_MANY||t===X.ONE_TO_MANY)&&(x=o[h]),x=o[h],g&&!s?.includes(g)?d.push({address:g,error:"wallet_extension_sending_text_address_wallet_extension",at:h}):t!==X.ONE_TO_MANY&&g&&n.slice(0,h).includes(g)&&d.push({address:g,error:"wallet_extension_sending_text_address_duplicated",at:h});let v=aa;e===ae?v=ar:e===Ee?v=Mo:e===J?v=Pr:e===le&&(v=Do);let p=x&&lt(x,e),a=await Wa(p,v);if(x&&!a&&l.push({address:x,error:"wallet_extension_sending_text_address_illegal",at:h}),e===J&&g||e===le&&x){let _=!0;e===J?_=i[g]??!0:_=i[x]??!0,_===!1&&e===J&&d.push({address:g,error:"wallet_extension_sending_error_address_no_register",at:h}),_===!1&&e===le&&l.push({address:x,error:"wallet_extension_sending_error_token_no_register",at:h,args:{token:r}})}}return{to:l,from:d}};var Lp=(t,e)=>{let[r]=ee(),[o,n]=(0,Cr.useState)(!1),{gotoConfirmPage:s}=Ke(),i=Za(!0,e),[,l]=en(),d=Su(),c=vu(),[g,x]=ge(),[h,v]=(0,Cr.useState)(Xs(g,Fe.SEND)),[p,a]=(0,Cr.useState)(Xs(g,Fe.RECEIVE)),[_,T]=(0,Cr.useState)({}),S=B((W,Y)=>{Y===Fe.SEND?v(W):a(W)},[]),N=(0,Cr.useMemo)(()=>{let W=[];if(t===X.MANY_TO_MANY){let Y=(0,Or.min)(h.length,p.length),P=p.slice(0,Y);h.slice(0,Y).forEach((D,Z)=>{let L=P[Z];D&&L&&W.push({to:L,from:D})})}else if(t===X.MANY_TO_ONE){let Y=p.find(P=>!!P);h.forEach(P=>{P&&Y&&W.push({to:Y,from:P})})}else if(t===X.ONE_TO_MANY){let Y=h.find(P=>!!P);p.forEach(P=>{Y&&P&&W.push({to:P,from:Y})})}return W},[h,t,p]),C=!N?.length,z=B(async()=>{n(!0);let W=[];r?.localType===J?W=h:r?.localType===le&&(W=p);let Y={};if([le,J].includes(r?.localType))try{let{data:D}=await Lt(Ft.batchQueryAddressRegister,{chainId:r?.chainId,addresses:W,contractAddress:r?.localType===le?r?.address:void 0});Y=D}catch(D){console.log(D)}let P=await wu({localType:e,toAddresses:p,fromAddresses:h,walletAccounts:i,mode:t,addressRegisterStatusMap:Y,tokenSymbol:r?.symbol});if(P?.from?.length||P?.to?.length)return n(!1),T(P);let O=await d((0,Or.map)(N,"from"));if(r?.localType===ae&&r?.baseCoinId!==0){let D=await c((0,Or.map)(N,"to"));l(D)}return O=O?.map(D=>({...D,from:wa(D?.from,r?.localType)})),x((0,Or.merge)([],N,O)),n(!1),s()},[p,h,i,N]);return{loading:o,addressErrors:_,sendAddresses:g,fromAddresses:h,toAddresses:p,nextDisabled:C,onNext:z,onAddressChange:S}},yu=Lp;f();m();var $s={root:"_root_16y8t_2",footer:"_footer_16y8t_99"};var Fp=()=>{let{isSm:t}=Oe(),[e]=ee(),[r]=dt(),{loading:o,fromAddresses:n,toAddresses:s,addressErrors:i,nextDisabled:l,onNext:d,onAddressChange:c}=yu(r,e?.localType),[g,x]=Ka(e?.localType),{gotoHomePage:h}=Ke(),[v,p]=(0,It.useMemo)(()=>r===X.MANY_TO_MANY?[E("wallet_extension_multitomulti_subtitle_many_transfer"),E("wallet_extension_reminder_tooltips_portfolio_trading")]:r===X.ONE_TO_MANY?[E("wallet_extension_onetomulti_subtitle_one_to_many"),E("wallet_extension_reminder_tooltips_multisender_onetomulti")]:[E("wallet_extension_multitoone_subtitle_many_to_one"),E("wallet_extension_reminder_tooltips_multisender_multitoone")],[r,E]);return It.default.createElement(ir,{footer:It.default.createElement(w.Box,{className:$s.footer},It.default.createElement(q,{block:t,category:q.CATEGORY.outline,type:q.TYPE.primary,size:t?q.SIZE.lg:q.SIZE.xl,onClick:()=>{h()}},E("wallet_extension_footer_btn_back")),It.default.createElement(q,{block:t,loading:o,disabled:l,category:q.CATEGORY.fill,type:q.TYPE.highlight,size:t?q.SIZE.lg:q.SIZE.xl,onClick:d},E("wallet_extension_footer_btn_next")))},It.default.createElement(jr,{tip:p,subtitle:v,title:E("wallet_extension_address_maintitle_add_address")}),It.default.createElement(w.Box,{className:$s.root},It.default.createElement(hu,{mode:r,toAddresses:s,fromAddresses:n,addressErrors:i,walletAccounts:g,walletAccountsWithAddressBook:x,onChange:c})))},Eu=It.default.memo(Fp);f();m();var Re=k(K());Le();var hd=k(Be()),Rn=k(rt());ro();oo();f();m();var Ie={root:"_root_1juzk_1",header:"_header_1juzk_36",content:"_content_1juzk_36",alert:"_alert_1juzk_40",statistics:"_statistics_1juzk_81",address:"_address_1juzk_97",footer:"_footer_1juzk_136",loadingIcon:"_loadingIcon_1juzk_239",pauseLoadingIcon:"_pauseLoadingIcon_1juzk_254",finished:"_finished_1juzk_258",finishedIcon:"_finishedIcon_1juzk_261",failed:"_failed_1juzk_265",failedIcon:"_failedIcon_1juzk_268",sendError:"_sendError_1juzk_272",warning:"_warning_1juzk_275",export:"_export_1juzk_282",exportIcon:"_exportIcon_1juzk_305",finishedConfirm:"_finishedConfirm_1juzk_309","status-icon":"_status-icon_1juzk_351",statusIcon:"_status-icon_1juzk_351","status-icon-pause":"_status-icon-pause_1juzk_364",statusIconPause:"_status-icon-pause_1juzk_364","status-title":"_status-title_1juzk_367",statusTitle:"_status-title_1juzk_367","status-desc-text":"_status-desc-text_1juzk_376",statusDescText:"_status-desc-text_1juzk_376","status-desc-container":"_status-desc-container_1juzk_392",statusDescContainer:"_status-desc-container_1juzk_392","result-main":"_result-main_1juzk_401",resultMain:"_result-main_1juzk_401"};f();m();var Gt=k(K());re();f();m();var Lr={FROM:"from",TO:"to",TX_AMOUNT:"txAmount",STATUS:"txStatus",HASH:"txHash"},Io=[{title:"wallet_extension_list_title_send_address",key:Lr.FROM,type:Ue.ADDRESS},{title:"wallet_extension_list_title_receive_address",key:Lr.TO,type:Ue.ADDRESS},{title:"wallet_extension_list_title_amount",key:Lr.TX_AMOUNT,type:Ue.AMOUNT},{title:"wallet_extension_list_colheader_state",key:Lr.STATUS,type:Ue.STATUS},{title:"wallet_extension_list_colheader_hash",key:Lr.HASH,type:Ue.HASH,align:"center",width:"200px"}];var $={NONE:"NONE",SENDING:"SENDING",PAUSE:"PAUSE",FINISHED:"FINISHED",FAILED:"FAILED",CANCELED:"CANCELED",DONE:"DONE",BACK_TO_HOME:"BACK_TO_HOME"},Au={[$.SENDING]:[{actionProps:{children:"wallet_extension_footer_btn_cancel",category:q.CATEGORY.outline,type:q.TYPE.primary},actionType:$.CANCELED},{actionProps:{children:"wallet_extension_footer_btn_stop",category:q.CATEGORY.outline,type:q.TYPE.primary},actionType:$.PAUSE}],[$.PAUSE]:[{actionProps:{children:"wallet_extension_footer_btn_cancel",category:q.CATEGORY.outline,type:q.TYPE.primary},actionType:$.CANCELED},{actionProps:{children:"wallet_extension_footer_btn_continue",category:q.CATEGORY.fill,type:q.TYPE.highlight},actionType:$.SENDING}],[$.CANCELED]:[{actionProps:{children:"wallet_extension_complete_btn_done",category:q.CATEGORY.fill,type:q.TYPE.highlight},actionType:$.DONE}],[$.FINISHED]:[{actionProps:{children:"wallet_transfer_success_btn_back_to_home",category:q.CATEGORY.outline,type:q.TYPE.primary},actionType:$.BACK_TO_HOME},{actionProps:{children:"wallet_extension_complete_btn_done",category:q.CATEGORY.fill,type:q.TYPE.highlight},actionType:$.DONE}],[$.FAILED]:[{actionProps:{children:"wallet_extension_failure_btn_cancel",category:q.CATEGORY.outline,type:q.TYPE.primary},actionType:$.DONE},{actionProps:{children:"wallet_extension_failure_btn_restart_transaction",category:q.CATEGORY.fill,type:q.TYPE.highlight},actionType:$.FAILED}]},bu={[$.SENDING]:{title:"wallet_extension_sending_title_sending",style:{color:"var(--okd-color-content-primary)"}},[$.PAUSE]:{title:"wallet_extension_suspension_title_transaction_stop",style:{color:"var(--okd-color-content-primary)"}},[$.FAILED]:{title:"wallet_extension_failure_title_fail_transaction",style:{color:"var(--okd-color-semantic-negative)"}},[$.FINISHED]:{title:"wallet_extension_complete_title_complete_transaction",style:{color:"var(--okd-color-semantic-positive)"}}};var Bp=({onExport:t,onSendStatusChange:e,sendStatus:r=$.SENDING})=>{let{isSm:o}=Oe(),n=Au[r],s=r===$.FINISHED,i=s?w.Box:Gt.default.Fragment;return Gt.default.createElement(w.FlexBox,{align:w.ALIGN.center,className:Ie.footer},Gt.default.createElement(w.Box,{className:Ie.warning},s&&Gt.default.createElement(w.Box,{className:Ie.export,onClick:t},Gt.default.createElement(ke,{size:ke.SIZE.sm,icon:"okx-wallet-plugin-export"}),Gt.default.createElement(w.Box,null,E("wallet_extension_complete_btn_export_transaction"))),!s&&!o&&E("wallet_extension_sending_text_no_close_page")),n.map(({actionProps:{children:l,...d},actionType:c})=>Gt.default.createElement(i,{className:o&&Ie.finishedConfirm},Gt.default.createElement(q,{block:o,...d,size:o?q.SIZE.lg:q.SIZE.xl,onClick:()=>{e?.(c)}},E(l)))))},Nu=Gt.default.memo(Bp);f();m();var Ct=k(K()),ku=k(Be());re();var Dp=({sendStatus:t})=>{if([$.SENDING,$.PAUSE].includes(t))return Ct.default.createElement(yt,{loaderClassName:(0,ku.default)(Ie.loadingIcon,{[Ie.pauseLoadingIcon]:t===$.PAUSE})});let e={className:Ie["status-icon"]};return t===$.FAILED?e=Object.assign(e,{icon:"okds-fail-circle",style:{color:"var(--okd-color-semantic-negative)"}}):t===$.FINISHED&&(e=Object.assign(e,{icon:"okds-success-circle",style:{color:"var(--okd-color-semantic-positive)"}})),Ct.default.createElement(ke,{...e})},Mp=({sendStatus:t,sendResult:e=[]})=>{let{isSm:r}=Oe(),{title:o,style:n}=bu[t],s=E(o),i=(0,Ct.useMemo)(()=>Ct.default.createElement(ne.Text,{strong:700,style:n,className:Ie["status-title"]},s),[n,s]);return Ct.default.createElement(w.Space,{className:Ie["result-main"],space:r?"16px":"22px",align:w.ALIGN.center,direction:r?w.DIRECTION.vertical:w.DIRECTION.horizontal},Ct.default.createElement(Dp,{sendStatus:t}),Ct.default.createElement(w.Space,{direction:w.DIRECTION.vertical,space:"8px"},i,Ct.default.createElement(w.Space,{space:r?"4px":"8px",direction:r?w.DIRECTION.vertical:w.DIRECTION.horizontal,className:Ie["status-desc-container"]},e.map(({title:l,args:d,style:c})=>Ct.default.createElement(ne.Text,{key:l,style:c,className:Ie["status-desc-text"]},E(l,d))))))},Iu=Mp;f();m();var Fr=k(K());Le();var Zu=k(qn());var Ku=k(Et());f();m();var Uu=k(Et());f();m();var Qs=k(K()),Co=k(Et());re();f();m();var Cu=t=>{let e=Sr(t);return B(async r=>{if(e?.baseCoinId===0||!r)return{tokenAccountAddress:"",createAssociatedAddress:!1};let{data:o}=await Aa({coinId:t,address:r});return{createAssociatedAddress:!o?.legal,tokenAccountAddress:o?.tokenAccountAddress}})};Td();Le();f();m();var Ou=k(Ad());xd();var Lu=({address:t,localType:e,contractAddress:r,symbol:o,errorMsg:n})=>{try{ra.captureEvent({tags:{address:t},message:"BIZ_ERROR_batch_transfer_publish",contexts:{report:{info:JSON.stringify({address:t,localType:e,contractAddress:r,symbol:o,errorMsg:n})}},exception:{values:[{type:"BIZ_ERROR_batch_transfer_publish",value:t}]},level:"error"})}catch{(0,Ou.default)()}};f();m();oo();ro();var Fu=k(K()),Pp=()=>{let t=(0,Fu.useRef)();return B(e=>new Promise(r=>{let o=async()=>{let{data:n}=await Lt(Ft.batchGetTxStatus,{txHashList:[e]}),s=n[e];["SUCCESS","ERROR"].includes(s)&&(r(s),clearInterval(t.current))};t.current=setInterval(()=>{o()},2e3)}))},Js=Pp;f();m();var Rp=t=>{let e=Tr(t);return B(async r=>await(await e()).eth.getTransactionCount(r,"latest"),[e])},Bu=Rp;f();m();Le();var zp=()=>{let t=nt(),e=Wr(ae);return B(async()=>{let{recentBlockhash:r}=await t({isBatch:!0,coinId:ar,address:e});return r})},Du=zp;var Mu=t=>{let e=Tr(t),[r]=dt(),o=(0,Qs.useRef)(!1),n=(0,Qs.useRef)({}),[s]=ee(),[i]=De(),l=Bu(t),d=on(t),c=Ha(),[g]=Gr(),x=(0,Co.useSelector)(Ze),h=Ba(),v=(0,Co.useSelector)(mi);return o.current=v,n.current=x,B(async({to:p,from:a,value:_,usedBalance:T,balance:S,baseCoinBalance:N,transferAmountType:C,gasPrice:z})=>{let W=null,Y=o.current||!1;try{let P=_,O=await e(),{chainId:D}=i,Z=st(s),L=a&&lt(a,s?.localType),G=p&&lt(p,s?.localType),R=await h(s?.address,L,O)||S,U=await d({to:G,from:L,value:_},s?.address),oe=await l(L),se=n.current,Ce=z?.gasPrice||se?.gasPrice,he=z?.maxFeePerGas||se?.maxFeePerGas,xe=z?.maxPriorityFeePerGas||se?.maxPriorityFeePerGas,{networkFeeInt:be}=Kt({gasPrice:Ce,gasLimit:U}),Se={to:p,from:a,value:_,nonce:oe,chainId:D,gasLimit:U,supportEip1559:g,contractAddress:s?.address,localType:s?.localType};g?Se={maxFeePerGas:he,maxPriorityFeePerGas:xe,type:Zn.FEE_MARKET,...Se}:Se={gasPrice:Ce,type:Zn.LEGACY,...Se};let Ye=Ko({to:p,from:a,value:_,nonce:oe,chainId:D,gasLimit:U,gasPrice:Ce,maxFeePerGas:he,supportEip1559:g,maxPriorityFeePerGas:xe,contractAddress:s?.address,localType:s?.localType});if(Y){let H=await c({...Ye,coinId:s?.coinId});be=M.add(be,H)}Z&&r!==X.ONE_TO_MANY&&C===ie.ALL&&(P=M.sub(R,be),Ye=Ko(Object.assign(Se,{value:P}))),Z&&r===X.ONE_TO_MANY&&C===ie.ALL&&(P=M.sub(T,be),Ye=Ko(Object.assign(Se,{value:P})));let y=Hr({isBaseCoin:Z,balance:R,baseCoinBalance:N,txAmount:Se?.value,networkFee:be}),j=await qa(L);if(!y||!j)return{to:p,from:a,txStatus:V?.FAILED};W=await Go(Ye,Ye?.from,Gn);let F=await jo(Gn,W);return await O.eth.sendSignedTransaction(W),{to:p,from:a,txHash:F,txAmount:P,txStatus:V?.SUCCEED}}catch(P){return Lu({address:a,localType:i?.localType,contractAddress:s?.address,symbol:s?.symbol,errorMsg:P?.message}),{to:p,from:a,txStatus:V?.FAILED}}},[e])},Pu=()=>{let[t]=ee(),[e]=dt(),r=Ur({localType:ae,coinId:t?.coinId}),o=Du(),n=nn(),s=Cu(t?.coinId),i=(0,Co.useSelector)(Ze);return B(async({to:l,from:d,amount:c,balance:g,usedBalance:x,baseCoinBalance:h,transferAmountType:v})=>{try{let p=c,a=st(t),_=await o(),T=await n({coinId:t?.coinId,chainId:t?.chainId,to:l,from:d}),{createAssociatedAddress:S}=await s(l),N=T||i||{},{computeUnitLimit:C,computeUnitPrice:z,networkFeeInt:W}=N;v===ie.ALL&&a&&e!==X.ONE_TO_MANY&&(p=M.sub(g,W)),v===ie.ALL&&a&&e===X.ONE_TO_MANY&&(p=M.sub(x,W));let Y={to:l,from:d,blockHash:_,payer:d,computeUnitLimit:C,computeUnitPrice:z,amount:p,type:a?Kn.TRANSFER:Kn.TOKEN_TRANSFER};if(t?.baseCoinId!==0&&Object.assign(Y,{mint:t.address,createAssociatedAddress:S}),t?.protocolType===so.SPL_TOKEN_2022&&Object.assign(Y,{token2022:!0,decimal:t?.decimals}),!Hr({isBaseCoin:a,balance:g,baseCoinBalance:h,txAmount:p,networkFee:W}))return{to:l,from:d,txStatus:V?.FAILED};let O=await Go(Y,d,ae),D=await jo(ae,O);return await r(O,{txHash:D,signedTx:O,toAdr:l,fromAdr:d,coinAmount:p,serviceCharge:W,walletId:void 0}),{to:l,from:d,txHash:D,txAmount:p,startTime:Date.now(),txStatus:V?.PENDING}}catch{return{to:l,from:d,txStatus:V?.FAILED}}})},Ru=()=>{let[t]=ee(),[e]=dt(),r=Bi(t?.coinId),o=Di(t?.coinId),n=$o(),s=Js();return B(async({to:i,from:l,amount:d,balance:c,usedBalance:g,baseCoinBalance:x,transferAmountType:h})=>{try{let v=d,p=st(t),a=await n({to:i,from:l,value:d,coinId:t?.coinId,baseCoinId:t?.baseCoinId});if(h===ie.ALL&&p&&e!==X.ONE_TO_MANY&&(v=M.sub(c,a)),h===ie.ALL&&p&&e===X.ONE_TO_MANY&&(v=M.sub(g,a)),!Hr({isBaseCoin:p,balance:c,baseCoinBalance:x,txAmount:v,networkFee:a}))return{to:i,from:l,txStatus:V?.FAILED};let{tx:T,txBytes:S,signedTx:N}=await r({to:i,from:l,value:d,coinId:t?.coinId,baseCoinId:t?.baseCoinId}),{hash:C}=N||{};return await o({tx:T,txBytes:S,to:i,from:l,coinAmount:d,signedTx:N}),e===X.ONE_TO_MANY&&await s(C)==="ERROR"?{to:i,from:l,txStatus:V?.FAILED}:{to:i,from:l,txHash:C,txAmount:v,startTime:Date.now(),txStatus:V?.PENDING}}catch{return{to:i,from:l,txStatus:V?.FAILED}}})},zu=()=>{let[t]=ee(),[e]=dt(),r=nt(),o=Ur({localType:J,coinId:t?.coinId}),n=(0,Co.useSelector)(Ze),s=sn(t?.coinId);return B(async({to:i,from:l,amount:d,balance:c,baseCoinBalance:g,transferAmountType:x})=>{try{let h=d,v=st(t),p=await r({value:"0",toAddr:i,address:l,fromAddr:l,coinId:t?.coinId}),{accountId:a,nonce:_}=p||{},S=await s({to:i,chainId:t?.chainId,contractAddress:t?.address})||n||{},{networkFeeInt:N}=S;x===ie.ALL&&v&&e!==X.ONE_TO_MANY&&(h=M.sub(c,N));let C={to:i,from:l,type:"transfer",fees:N,amounts:h,decimals:t?.decimals,nonce:parseInt(_,10),accountId:parseInt(a,10),tokenSymbol:t?.originSymbol,tokenId:parseInt(t?.tokenId,10)};if(!Hr({isBaseCoin:v,balance:c,baseCoinBalance:g,txAmount:h,networkFee:N}))return{to:i,from:l,txStatus:V?.FAILED};let W=await Go(C,l,J);if(W?.code)return{to:i,from:l,txStatus:V?.FAILED};let{signature:Y,tx:P}=W,{txHash:O,...D}=P||{};return await o(JSON.stringify({signature:Y,tx:D}),{txHash:O,signedTx:W,toAdr:P?.to,fromAdr:l,coinAmount:h,serviceCharge:P?.fee,walletId:void 0,extJson:JSON.stringify({serviceChargeCoinId:t?.coinId})}),{to:i,from:l,txHash:O,txAmount:h,startTime:Date.now(),txStatus:V?.PENDING}}catch(h){return console.log(h),{to:i,from:l,txStatus:V?.FAILED}}})},Wu=()=>{let[t]=ee(),[e]=dt(),r=Mi(),o=Ur({localType:le,coinId:t?.coinId}),n=Jo(),s=Js();return B(async({to:i,from:l,amount:d,balance:c,usedBalance:g,baseCoinBalance:x,transferAmountType:h})=>{try{let v=d,p=t?.baseCoinId===0,{tyArg:a,chainId:_,networkFee:T,sequenceNumber:S,maxGasAmount:N,gasUnitPrice:C,expirationTimestampSecs:z}=await n({address:l,coinId:t?.coinId});if(h===ie.ALL&&p&&e!==X.ONE_TO_MANY&&(v=M.sub(c,T)),h===ie.ALL&&p&&e===X.ONE_TO_MANY&&(v=M.sub(g,T)),!Hr({isBaseCoin:p,balance:c,baseCoinBalance:x,txAmount:v,networkFee:T}))return{to:i,from:l,txStatus:V?.FAILED};let Y=await r({to:i,from:l,tyArg:a,chainId:_,gasUnitPrice:C,maxGasAmount:N,sequenceNumber:S,amount:v,coinId:t?.coinId,expirationTimestampSecs:z,baseCoinId:t?.baseCoinId,metaAddress:t?.address,protocolType:t?.protocolType}),P=await jo(le,Y);return await o(Y,{txHash:P,signedTx:Y,toAdr:i,fromAdr:l,coinAmount:v,serviceCharge:T,walletId:void 0,extJson:JSON.stringify({nonce:S})}),e===X.ONE_TO_MANY?(await s(P),{to:i,from:l,txHash:P,txAmount:v,txStatus:V?.SUCCEED}):{to:i,from:l,txHash:P,txAmount:v,startTime:Date.now(),txStatus:V?.PENDING}}catch{return{to:i,from:l,txStatus:V?.FAILED}}})};f();m();f();m();var jt={uninitialized:0,initialized:1,waiting:2,paused:3,working:4,canceled:5,unknown:6},Oo=class{constructor(e){wt(this,"status",jt.uninitialized);wt(this,"nextInfo",null);wt(this,"cb",null);wt(this,"args",[]);wt(this,"next",(...e)=>{[jt.waiting,jt.canceled,jt.paused].includes(this.status)||!this.cb||(e.length>0&&(this.args=e),this.nextInfo=this.generator(this.execute,...this.args),this.status=jt.waiting,this.nextInfo.execute())});wt(this,"execute",()=>{this.status=jt.working,this.cb?.(this.next)});wt(this,"cancel",()=>{this.status=jt.canceled,this.nextInfo?.cancel?.(),this.cb=void 0});wt(this,"pause",()=>{this.status=jt.paused,this.nextInfo?.pause?.()});wt(this,"start",(e,...r)=>{this.cb=e,r.length>0&&(this.args=r),this.next()});wt(this,"continue",()=>{this.status=jt.initialized,this.next()});this.generator=e,this.status=jt.initialized,this.nextInfo=null,this.cb=null}};function Wp(t){let e=(r,o)=>{let n;return{execute:()=>{n=setTimeout(r,o??t??0)},cancel:()=>{clearTimeout(n)},pause:()=>{clearTimeout(n)}}};return new Oo(e)}var Yt=Wp;var Hu=()=>{let[t]=mt(),[e]=ft(),[r,o]=ge(),n=Mu(),s=(0,Uu.useSelector)(Ze),i=s?.level===qe.CUSTOM;return B(async()=>{let l=0,{type:d,min:c,max:g}=t,x=r.map(v=>{let{to:p,from:a,txAmount:_}=v;return{to:p,from:a,interval:d===We.NONE?100:gt(c,g,0)*1e3,request:async()=>n({...v,from:a,value:_,transferAmountType:e.type,gasPrice:i?s:{}})}}),h=Yt();return h.start(async v=>{let p=x[l];if(p)try{o({to:p?.to,from:p?.from,txStatus:V.PENDING});let{txStatus:a,txHash:_,from:T,txAmount:S}=await p.request();o({from:T,to:p?.to,txStatus:a,txHash:_,txAmount:S})}catch(a){console.log(a)}finally{l++,v(p.interval)}}),h},[])};f();m();var Gu=()=>{let[t]=mt(),[e]=ft(),[r,o]=ge(),n=Pu();return B(async()=>{let s=0,{type:i,min:l,max:d}=t,c=r.map(x=>{let{to:h,from:v,txAmount:p}=x;return{to:h,from:v,interval:i===We.NONE?100:gt(l,d,0)*1e3,request:async()=>n({...x,amount:p,transferAmountType:e.type})}}),g=Yt();return g.start(async x=>{let h=c[s];if(h)try{o({to:h?.to,from:h?.from,txStatus:V.PENDING});let{txStatus:v,txHash:p,from:a,startTime:_,txAmount:T}=await h.request();o({from:a,startTime:_,to:h?.to,txStatus:v,txAmount:T,txHash:p})}catch(v){console.log(v)}finally{s++,x(h.interval)}}),g},[])};f();m();var ju=()=>{let[t]=mt(),[e]=ft(),[r,o]=ge(),n=Ru();return B(async()=>{let s=0,{type:i,min:l,max:d}=t,c=r.map(x=>{let{to:h,from:v,txAmount:p}=x;return{to:h,from:v,interval:i===We.NONE?100:gt(l,d,0)*1e3,request:async()=>n({...x,amount:p,transferAmountType:e.type})}}),g=Yt();return g.start(async x=>{let h=c[s];if(h)try{o({to:h?.to,from:h?.from,txStatus:V.PENDING});let{txStatus:v,txHash:p,from:a,startTime:_,txAmount:T}=await h.request();o({from:a,startTime:_,to:h?.to,txStatus:v,txAmount:T,txHash:p})}catch(v){console.log(v)}finally{s++,x(h.interval)}}),g},[])};f();m();var Yu=()=>{let[t]=mt(),[e]=ft(),[r,o]=ge(),n=zu();return B(async()=>{let s=0,{type:i,min:l,max:d}=t,c=r.map(x=>{let{to:h,from:v,txAmount:p}=x;return{to:h,from:v,interval:i===We.NONE?100:gt(l,d,0)*1e3,request:async()=>n({...x,amount:p,transferAmountType:e.type})}}),g=Yt();return g.start(async x=>{let h=c[s];if(h)try{o({to:h?.to,from:h?.from,txStatus:V.PENDING});let{txStatus:v,txHash:p,from:a,startTime:_,txAmount:T}=await h.request();o({from:a,startTime:_,to:h?.to,txStatus:v,txAmount:T,txHash:p})}catch(v){console.log(v)}finally{s++,x(h.interval)}}),g},[])};f();m();var qu=()=>{let[t]=mt(),[e]=ft(),[r,o]=ge(),n=Wu();return B(async()=>{let s=0,{type:i,min:l,max:d}=t,c=r.map(x=>{let{to:h,from:v,txAmount:p}=x;return{to:h,from:v,interval:i===We.NONE?100:gt(l,d,0)*1e3,request:async()=>n({...x,amount:p,transferAmountType:e.type})}}),g=Yt();return g.start(async x=>{let h=c[s];if(h)try{o({to:h?.to,from:h?.from,txStatus:V.PENDING});let{txStatus:v,txHash:p,from:a,startTime:_,txAmount:T}=await h.request();o({from:a,startTime:_,to:h?.to,txStatus:v,txAmount:T,txHash:p})}catch(v){console.log(v)}finally{s++,x(h.interval)}}),g},[])};var Vu=t=>{let[e]=ee(),r=(0,Zu.useHistory)(),o=(0,Ku.useDispatch)(),n=(0,Fr.useRef)(),[s,i]=(0,Fr.useState)($.SENDING),l=Wi(),d=Hu(s,e?.localType),c=Gu(s,e?.localType),g=ju(),x=Yu(),h=qu(),v=d;e?.localType===ae?v=c:e?.localType===Ee?v=g:e?.localType===J?v=x:e?.localType===le&&(v=h),(0,Fr.useEffect)(()=>{let _=!t.some(({txStatus:S})=>S!==V.FAILED),T=!t.some(({txStatus:S})=>S===V.PENDING||!S);_?i($.FAILED):T&&i($.FINISHED)},[t]);let p=()=>{v().then(_=>{n.current=_}).catch(_=>{console.log(_)})};(0,Fr.useEffect)(()=>{p()},[]);let a=B(async _=>{if(_===$.DONE){let T=await globalThis.platform.getActiveTabs();await globalThis.platform.closeTab(T.map(({id:S})=>S))}else _===$.PAUSE?(n.current?.pause(),i($.PAUSE)):_===$.CANCELED?(n.current?.cancel(),i($.FINISHED)):_===$.SENDING?(n.current?.continue(),i($.SENDING)):_===$.FINISHED?i($.FINISHED):_===$.FAILED?(n.current?.cancel(),l(),i($.SENDING),p()):_===$.BACK_TO_HOME&&(r.replace(xr),o(Ci()))},[]);return[s,a]};f();m();var ea=k(K());re();var Xu=({sendStatus:t,sendAddress:e=[]})=>{let r=(0,ea.useMemo)(()=>{let o=0,n=0,s=0,i=e?.length;return e.forEach(({txStatus:l})=>{l===V.FAILED&&o++,l===V.SUCCEED&&n++,l===V.PENDING&&s++}),{total:i,failed:o,success:n,notExecuted:i-o-s-n}},[e]);return(0,ea.useMemo)(()=>{if(t===$.FAILED)return[{title:"wallet_extension_failure_subtitle_fail_resend"}];let{total:o,failed:n,success:s,notExecuted:i}=r,l=[{title:"wallet_extension_multisender_text_success_transaction",args:{amount:M.thousandFormat(s)}}];return n>0&&l.push({title:"wallet_extension_multisender_text_failed_transaction",args:{amount:M.thousandFormat(n)},style:{color:"var(--okd-color-semantic-negative)"}}),t===$.FINISHED?i>0&&l.push({title:"wallet_extension_multisender_text_not_executed_transaction",args:{amount:M.thousandFormat(i)}}):l.push({title:"wallet_extension_multisender_text_total_transaction",args:{amount:M.thousandFormat(o)}}),l},[t,r])};f();m();var Lo=k(K());re();function Up({sendStatus:t}){let{isSm:e}=Oe(),[r,o]=(0,Lo.useState)(!0),n=si.FINISHED===t,s=E("wallet_extension_sending_text_no_close_page"),i=e&&r&&!n;return Lo.default.createElement(w.Box,{className:Ie.alert},i?Lo.default.createElement(eo,{desc:s,type:eo.TYPE.info,onClose:()=>{o(!1)}}):null)}var $u=Up;f();m();re();var Ju=k(K());var Hp=()=>{let[t]=ee(),[e=[]]=ge(),r=e.map((s,i)=>({...s,showShortAddress:!0,showTextOneLine:!0,order:i+1,index:i,txAmount:M.truncate(M.div(s?.txAmount,10**(t?.decimals||18)),6,!1)})),o=(0,Ju.useMemo)(()=>({[Lr.FROM]:{showOrder:!0,isFromAddress:!0}}),[]),n=Io.map(s=>{let{title:i,key:l,type:d,...c}=s;return{title:E(i),dataIndex:l,key:l,render:hn(pn[d],o[l]),...c}});return{dataSource:r,columns:n}},Qu=Hp;f();m();f();m();var ed=k(Va()),Gp=(t,e)=>{let r=window.URL||window.webkitURL||window,o=r.createObjectURL(t),n=document.createElement("a");n.href=o,n.download=e,n.click(),r.revokeObjectURL(o)},jp=(t=[],e="result.csv",r)=>{let o=ed.default.unparse(t,r),n="\uFEFF",s=new Blob([`${n}${o}`],{type:".csv, application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel"});Gp(s,e)},td=jp;re();var fd=k(dd()),md=k(K());function ih(t=[]){let e=(0,md.useMemo)(()=>Io.map(({key:n})=>n),[]),r=B(n=>{let s=E("wallet_extension_multisender_colbody_success"),i=E("wallet_extension_multisender_colbody_fail");switch(n){case V.SUCCEED:return s;case V.FAILED:case V.DROPPED:return i;default:return"-"}});return()=>{let n=`${E("wallet_extension_multisender_colheader_history")}.csv`,s=t.map(d=>{let c={...d,txAmount:M.thousandFormat(d.txAmount??0),txStatus:r(d.txStatus)};return Object.values((0,fd.default)(c,e))}),l={fields:Io.map(d=>E(d.title)),data:s};td(l,n)}}var pd=ih;var lh={ERROR:V.FAILED,SUCCESS:V.SUCCEED},ch=()=>{let t=(0,Re.useRef)(),e=(0,Re.useRef)(),[r]=ee(),[o=[],n]=ge(),{dataSource:s,columns:i}=Qu(),{isSm:l}=Oe(),[d,c]=Vu(s),g=pd(s),x=Xu({sendStatus:d,sendAddress:s}),h=ln(),v=(0,Re.useMemo)(()=>(0,Rn.map)((0,Rn.filter)(o,({txStatus:a,txHash:_})=>_&&a===V.PENDING),"txHash"),[o]),p=async()=>{let{data:a}=await Lt(Ft.batchGetTxStatus,{txHashList:e.current});a&&Object.keys(a).forEach(_=>{let T=a[_];["SUCCESS","ERROR"].includes(T)&&n({txHash:_,txStatus:lh[T]})})};return(0,Re.useEffect)(()=>(t.current=setInterval(()=>{e.current?.length&&p()},2e3),()=>{clearInterval(t.current)}),[]),(0,Re.useEffect)(()=>{[le,ae,Ee,J].includes(r?.localType)&&(e.current=v)},[r?.localType,v]),Re.default.createElement(ir,{footer:Re.default.createElement(Nu,{sendStatus:d,onSendStatusChange:c,onExport:g}),useOkg:!1,headerProps:{className:(0,hd.default)(Ie.header,Ie.content)}},Re.default.createElement(w.Box,{className:Ie.root},Re.default.createElement($u,{sendStatus:d}),Re.default.createElement(Iu,{sendStatus:d,sendResult:x}),Re.default.createElement(cn,{className:Ie.statistics,statistics:h})),Re.default.createElement(w.Box,{className:Ie.address},Re.default.createElement(un,{dataSource:s,columns:i,scroll:{x:l}})))},vd=Re.default.memo(ch);var vB=()=>{let[t]=ee(),e=(0,zn.useDispatch)(),r=Yi(),o=(0,zn.useSelector)(Ze);return(0,vr.useEffect)(()=>{if(![le,ae,Ee,J].includes(t?.localType)&&r?.length&&o?.level){let{gasLimit:n,tokenPrice:s,usdToThisRate:i}=o,l=r.find(({level:d})=>d===o?.level);if(l){let{gasPrice:d}=l,{networkFee:c,networkFeeInt:g,networkFeeMarket:x}=Kt({gasPrice:d,gasLimit:n,price:s,usdToThisRate:i});e(ct({...o,...l,networkFee:c,networkFeeInt:g,networkFeeMarket:x,unitPriceDisplay:la(d)}))}}},[e,r,t?.localType]),vr.default.createElement(Br.Switch,null,vr.default.createElement(Br.Route,{path:xr,component:al,exact:!0}),vr.default.createElement(Br.Route,{path:ao,component:Eu,exact:!0}),vr.default.createElement(Br.Route,{path:lo,component:vd,exact:!0}),vr.default.createElement(Br.Route,{path:io,component:Ml,exact:!0}))};export{vB as default};

window.inOKXExtension = true;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=BatchTransfer-7IT6F5UY.js.map
