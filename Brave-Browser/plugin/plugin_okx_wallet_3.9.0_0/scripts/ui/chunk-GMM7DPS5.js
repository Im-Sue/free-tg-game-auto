import{a as xe,i as he}from"./chunk-BJANYOX5.js";import{p as H,r as ge}from"./chunk-UYALNF4Q.js";import{a as fe,d as _e}from"./chunk-W327NRHO.js";import{a as be}from"./chunk-3EYFKVOU.js";import{e as B}from"./chunk-7ODXCTBK.js";import{a as ae}from"./chunk-TPVT7ZCY.js";import{d as le,g as ue,i as pe,m as de}from"./chunk-6GFVKSAR.js";import{a as ne}from"./chunk-JVLSBRR5.js";import{b as re}from"./chunk-RC3QMLDN.js";import{b as Te,c as ke,f as Fe,i as we,m as Pe,w as Ge,x as I}from"./chunk-IGQY7C6Y.js";import{h as me}from"./chunk-KRHB66KZ.js";import{d as ce}from"./chunk-4RHFH7IF.js";import{E as R}from"./chunk-WTP3OIOS.js";import{a as se}from"./chunk-PYJPOVV7.js";import{a as ie}from"./chunk-I435LZHT.js";import{b as oe}from"./chunk-5JJQQHKZ.js";import{ab as te,y as ee}from"./chunk-ZPOCIBPN.js";import{c as z}from"./chunk-VMYDP774.js";import{Qa as j,Sa as J,ab as y,cb as G,db as K,gb as Q,ib as V,nb as X,pb as S}from"./chunk-M54COW6Q.js";import{o as q,q as F,r as Z}from"./chunk-RIJWHGTU.js";import{I as O,l as $,v as a}from"./chunk-K4MPEKC5.js";import{L as Y,c as He}from"./chunk-XIGC6FD5.js";import{a as A}from"./chunk-CXUPEGDW.js";import{f as k,m as l,o as c}from"./chunk-ICCOEXX5.js";l();c();var v=k(A()),C=k(ee());var Ie={mainTokens:[],chainTokens:[]},Me=o=>{let i=(0,v.useRef)(Ie),t=(0,C.useDispatch)(),s=(0,C.useSelector)(ce),u=de(),f=pe(),_=ne(),m=o||_,w=()=>{let{chainTokens:b}=i.current;b.forEach(async({rpcUrl:P,chainId:x,account:g,address:h})=>{if(m!==g)return;let L=await f(h,g,h?null:await le(P));t(me({chainId:x,account:g,address:h,balance:L}))})};(0,v.useEffect)(()=>{i.current=u},[u]),oe(()=>{s!==0&&w()},[s])},Je=Me;l();c();var E=k(A()),p=k(ee());S();l();c();S();O();function Ne(o,{symbol:i,decimals:t}={}){let s;return o=X(V(o,t||18)),o==="0"?s="0":s=$.thousandFormat(o),i&&(s+=` ${i}`),s}function ye(o){let i=(0,p.useSelector)(Pe),t=o||i,s=t?.isSupportEip1559?t?.maxFeePerGas||0:t?.gasPrice||0,u=t?.gasLimit||0;return fe(Q,K)(s,u)}function ve(o){let i=ue(),{symbol:t,usdToThisRate:s}=(0,p.useSelector)(te),u=j(i?.price,s),f=Ne(o,{symbol:i?.symbol,decimals:i?.decimals}),_=_e({amount:o,rate:u,symbol:t},{useApproximate:!0});return`${f} ${_}`}function dt(){let o=(0,p.useDispatch)(),i=re(),t=(0,p.useSelector)(ke),s=(0,p.useSelector)(Fe),u=(0,p.useSelector)(we),f=(0,p.useSelector)(Te),{chainGasPrice:_,chainGasLimit:m,chainGasLoading:w,chainGasLoadFailed:b,stopPollingGasPrice:P,chainGasLimitLoading:x,chainGasLimitLoadFailed:g}=he({to:t,from:i,value:s,data:u,tokenAddress:f});return(0,E.useEffect)(()=>{o(I(_))},[_]),(0,E.useEffect)(()=>{o(I({gasLimit:m}))},[m]),{chainGasLoading:w,chainGasLoadFailed:b,stopPollingGasPrice:P,chainGasLimitLoading:x,chainGasLimitLoadFailed:g}}function ft(){let o=(0,p.useDispatch)(),{nonce:i,suggestedNonce:t,request:s}=xe();return(0,E.useEffect)(()=>{o(Ge(t))},[i,t]),{nonce:i,suggestedNonce:t,request:s}}l();c();var e=k(A());l();c();var We=()=>{let o=ae();return()=>globalThis.platform.openTab({url:o.rpcGasUrl})},Ce=We;O();var Ee=k(He());S();l();c();var n={RpcEvmSendEditNetworkFee:"_RpcEvmSendEditNetworkFee_d35zb_1",rpcEvmSendEditNetworkFee:"_RpcEvmSendEditNetworkFee_d35zb_1",content:"_content_d35zb_6",title:"_title_d35zb_9","info-icon":"_info-icon_d35zb_13",infoIcon:"_info-icon_d35zb_13",box:"_box_d35zb_18",customize:"_customize_d35zb_23",money:"_money_d35zb_36",row:"_row_d35zb_39",defaultTip:"_defaultTip_d35zb_42",checkBoxWrap:"_checkBoxWrap_d35zb_48"};function Ue({onBack:o,rpcInfo:i={},customGasInfo:t={},chainGasInfo:s={},updateCustomGasInfo:u,stopPollingGasPrice:f,chainGasLimitLoadFailed:_=!1}){let{isSupportEip1559:m}=t,w=G(m?s.baseFeePerGas:s.gasPrice),[b,P]=(0,e.useState)(G(m?t.baseFeePerGas:t.gasPrice)),[x,g]=(0,e.useState)(G(t.maxPriorityFeePerGas)),[h,L]=(0,e.useState)(t.gasLimit),[D,M]=(0,e.useState)(t.isDefault),d=(0,e.useMemo)(()=>{let r={gasLimit:h,isDefault:D};return m?(r.baseFeePerGas=y(b),r.maxPriorityFeePerGas=y(x),r.maxFeePerGas=J(r.baseFeePerGas,r.maxPriorityFeePerGas)):r.gasPrice=y(b),{...t,...r}},[h,b,D,t,m,x]),Le=ye(d),De=ve(Le),W=ge(),Ae=Ce(),Se=(0,e.useMemo)(()=>{let r=!Number(d.gasPrice);return d.isSupportEip1559&&(r=!(Number(d.baseFeePerGas)&&Number(d.maxPriorityFeePerGas))),r||!Number(d.gasLimit)},[d]),ze=[{actionType:B.ACTION_TYPE.CONFIRM,disabled:Se,async onClick(){let{gasLimit:r,...T}=d;T.isDefault&&(f(),await W(i,{[H.singleTx]:T})),u(d)}}],Be=async r=>{let T=r.target.checked;if(T)M(T),R();else{let U=q.tip({children:a("wallet_extension_mid_alert_checkbox_setting_uncheck"),confirmText:a("wallet_extension_btn_general_confirm"),cancelText:a("wallet_extension_btn_general_cancel"),btnFull:!1,async onConfirm(){await W(i,{[H.singleTx]:null}),M(T),U.destroy()},onCancel(){U.destroy()}})}};return e.default.createElement(z.Portal,null,e.default.createElement("div",{className:n.RpcEvmSendEditNetworkFee},e.default.createElement(se,{title:a("wallet_transfer_subtitle_network_fee"),onBack:o,closeable:!1}),e.default.createElement("div",{className:n.content},e.default.createElement(F.Label,{title:e.default.createElement("div",{className:n.title},a("wallet_extension_transaction_input_label_network_fee"),e.default.createElement(Y,{className:(0,Ee.default)("okx-wallet-plugin-information-circle",n["info-icon"]),onClick:Ae}))}),e.default.createElement("div",{className:n.box},e.default.createElement("div",{className:n.customize},e.default.createElement("div",{className:n.title},a("wallet_transfer_gasfee_subtitle_custom_gas_fee")),e.default.createElement("div",null,e.default.createElement("div",{className:n.money},e.default.createElement(be,{text:De,maxWidth:"215px"})))),e.default.createElement("div",{className:n.row},e.default.createElement(F.Number,{placeholder:w,title:m?a("extension_wallet_transaction_text_maxbase_fee"):a("wallet_transfer_gasfee_subtitle_gas_price"),enableMinus:!1,precision:9,value:b,onChange:P})),m?e.default.createElement("div",{className:n.row},e.default.createElement(F.Number,{placeholder:G(s.maxPriorityFeePerGas),title:a("extension_wallet_transaction_text_priority_fee"),enableMinus:!1,precision:9,value:x,onChange:g})):null,e.default.createElement("div",{className:n.row},e.default.createElement(F.Number,{placeholder:s.gasLimit,title:a("wallet_transfer_gasfee_subtitle_custom_gas_limit"),errorType:F.TIP_TYPE.always,error:_&&a("developer_mode_send_input_gaslimit_failure"),enableMinus:!1,precision:0,value:h,onChange:L}))),e.default.createElement("div",{className:n.defaultTip},a("wallet_extension_mid_checkbox_setting_default"))),e.default.createElement(ie,{placeholder:!0,offsetBottom:0},e.default.createElement(z.Box,{className:n.checkBoxWrap},e.default.createElement(Z,{onChange:Be,checked:D},a("wallet_extension_bot_alert_default_gas",{networkName:i.name}))),e.default.createElement(B,{buttonGroup:ze}))))}var Ut=e.default.memo(Ue);export{Je as a,Ne as b,ye as c,ve as d,dt as e,ft as f,Ut as g};

window.inOKXExtension = true;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=chunk-GMM7DPS5.js.map
