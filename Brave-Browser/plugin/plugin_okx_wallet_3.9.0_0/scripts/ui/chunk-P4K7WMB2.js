import{a as or}from"./chunk-KWQVFNZ3.js";import{T as ve,V as ir,_ as ar,aa as _e,t as V,u as nr,v as P}from"./chunk-U4LUDZBW.js";import{a as tr}from"./chunk-VPDXC6IS.js";import{a as xt,b as _,c as Mt}from"./chunk-PAEQZ7UN.js";import{a as Tt}from"./chunk-KDTBVHVU.js";import{a as St,p as sr}from"./chunk-CFT6B56M.js";import{C as $}from"./chunk-CA5MYYD6.js";import{a as er,b as vt}from"./chunk-A7LNVEYU.js";import{Sa as Ze,Sb as rr,Wa as be,la as yt,m as Qe,pb as bt}from"./chunk-M54COW6Q.js";import{a as _t}from"./chunk-IR63YTCE.js";import{c as z,f as ye,g as K,p as Je,q as wt}from"./chunk-DOQ5NSSP.js";import{d as gt}from"./chunk-VULQOB2N.js";import{c as m,f as g,l as process,m as o,o as l}from"./chunk-ICCOEXX5.js";var xe=m(ne=>{"use strict";o();l();Object.defineProperty(ne,"__esModule",{value:!0});ne.getUniqueId=void 0;var lr=4294967295,Se=Math.floor(Math.random()*lr);function Et(){return Se=(Se+1)%lr,Se}ne.getUniqueId=Et});var fr=m(ie=>{"use strict";o();l();Object.defineProperty(ie,"__esModule",{value:!0});ie.createIdRemapMiddleware=void 0;var Ct=xe();function At(){return(e,r,t,n)=>{let i=e.id,a=Ct.getUniqueId();e.id=a,r.id=a,t(s=>{e.id=i,r.id=i,s()})}}ie.createIdRemapMiddleware=At});var ur=m(ae=>{"use strict";o();l();Object.defineProperty(ae,"__esModule",{value:!0});ae.createAsyncMiddleware=void 0;function Rt(e){return async(r,t,n,i)=>{let a,s=new Promise(y=>{a=y}),u=null,f=!1,p=async()=>{f=!0,n(y=>{u=y,a()}),await s};try{await e(r,t,p),f?(await s,u(null)):i(null)}catch(y){u?u(y):i(y)}}}ae.createAsyncMiddleware=Rt});var dr=m(se=>{"use strict";o();l();Object.defineProperty(se,"__esModule",{value:!0});se.createScaffoldMiddleware=void 0;function Nt(e){return(r,t,n,i)=>{let a=e[r.method];return a===void 0?n():typeof a=="function"?a(r,t,n,i):(t.result=a,i())}}se.createScaffoldMiddleware=Nt});var hr=m(Me=>{"use strict";o();l();Object.defineProperty(Me,"__esModule",{value:!0});var Ot=ye();function cr(e,r,t){try{Reflect.apply(e,r,t)}catch(n){setTimeout(()=>{throw n})}}function It(e){let r=e.length,t=new Array(r);for(let n=0;n<r;n+=1)t[n]=e[n];return t}var Te=class extends Ot.EventEmitter{emit(r,...t){let n=r==="error",i=this._events;if(i!==void 0)n=n&&i.error===void 0;else if(!n)return!1;if(n){let s;if(t.length>0&&([s]=t),s instanceof Error)throw s;let u=new Error(`Unhandled error.${s?` (${s.message})`:""}`);throw u.context=s,u}let a=i[r];if(a===void 0)return!1;if(typeof a=="function")cr(a,this,t);else{let s=a.length,u=It(a);for(let f=0;f<s;f+=1)cr(u[f],this,t)}return!0}};Me.default=Te});var Ce=m(q=>{"use strict";o();l();var jt=q&&q.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(q,"__esModule",{value:!0});q.JsonRpcEngine=void 0;var Pt=jt(hr()),b=_(),S=class extends Pt.default{constructor(){super(),this._middleware=[]}push(r){this._middleware.push(r)}handle(r,t){if(t&&typeof t!="function")throw new Error('"callback" must be a function if provided.');return Array.isArray(r)?t?this._handleBatch(r,t):this._handleBatch(r):t?this._handle(r,t):this._promiseHandle(r)}asMiddleware(){return async(r,t,n,i)=>{try{let[a,s,u]=await S._runAllMiddleware(r,t,this._middleware);return s?(await S._runReturnHandlers(u),i(a)):n(async f=>{try{await S._runReturnHandlers(u)}catch(p){return f(p)}return f()})}catch(a){return i(a)}}}async _handleBatch(r,t){try{let n=await Promise.all(r.map(this._promiseHandle.bind(this)));return t?t(null,n):n}catch(n){if(t)return t(n);throw n}}_promiseHandle(r){return new Promise(t=>{this._handle(r,(n,i)=>{t(i)})})}async _handle(r,t){if(!r||Array.isArray(r)||typeof r!="object"){let s=new b.EthereumRpcError(b.errorCodes.rpc.invalidRequest,`Requests must be plain objects. Received: ${typeof r}`,{request:r});return t(s,{id:void 0,jsonrpc:"2.0",error:s})}if(typeof r.method!="string"){let s=new b.EthereumRpcError(b.errorCodes.rpc.invalidRequest,`Must specify a string method. Received: ${typeof r.method}`,{request:r});return t(s,{id:r.id,jsonrpc:"2.0",error:s})}let n=Object.assign({},r),i={id:n.id,jsonrpc:n.jsonrpc},a=null;try{await this._processRequest(n,i)}catch(s){a=s}return a&&(delete i.result,i.error||(i.error=b.serializeError(a))),t(a,i)}async _processRequest(r,t){let[n,i,a]=await S._runAllMiddleware(r,t,this._middleware);if(S._checkForCompletion(r,t,i),await S._runReturnHandlers(a),n)throw n}static async _runAllMiddleware(r,t,n){let i=[],a=null,s=!1;for(let u of n)if([a,s]=await S._runMiddleware(r,t,u,i),s)break;return[a,s,i.reverse()]}static _runMiddleware(r,t,n,i){return new Promise(a=>{let s=f=>{let p=f||t.error;p&&(t.error=b.serializeError(p)),a([p,!0])},u=f=>{t.error?s(t.error):(f&&(typeof f!="function"&&s(new b.EthereumRpcError(b.errorCodes.rpc.internal,`JsonRpcEngine: "next" return handlers must be functions. Received "${typeof f}" for request:
${Ee(r)}`,{request:r})),i.push(f)),a([null,!1]))};try{n(r,t,u,s)}catch(f){s(f)}})}static async _runReturnHandlers(r){for(let t of r)await new Promise((n,i)=>{t(a=>a?i(a):n())})}static _checkForCompletion(r,t,n){if(!("result"in t)&&!("error"in t))throw new b.EthereumRpcError(b.errorCodes.rpc.internal,`JsonRpcEngine: Response has no error or result for request:
${Ee(r)}`,{request:r});if(!n)throw new b.EthereumRpcError(b.errorCodes.rpc.internal,`JsonRpcEngine: Nothing ended request:
${Ee(r)}`,{request:r})}};q.JsonRpcEngine=S;function Ee(e){return JSON.stringify(e,null,2)}});var pr=m(oe=>{"use strict";o();l();Object.defineProperty(oe,"__esModule",{value:!0});oe.mergeMiddleware=void 0;var qt=Ce();function kt(e){let r=new qt.JsonRpcEngine;return e.forEach(t=>r.push(t)),r.asMiddleware()}oe.mergeMiddleware=kt});var mr=m(v=>{"use strict";o();l();var Dt=v&&v.__createBinding||(Object.create?function(e,r,t,n){n===void 0&&(n=t),Object.defineProperty(e,n,{enumerable:!0,get:function(){return r[t]}})}:function(e,r,t,n){n===void 0&&(n=t),e[n]=r[t]}),k=v&&v.__exportStar||function(e,r){for(var t in e)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&Dt(r,e,t)};Object.defineProperty(v,"__esModule",{value:!0});k(fr(),v);k(ur(),v);k(dr(),v);k(xe(),v);k(Ce(),v);k(pr(),v)});var G=m((Wi,Ae)=>{"use strict";o();l();typeof process>"u"||!process.version||process.version.indexOf("v0.")===0||process.version.indexOf("v1.")===0&&process.version.indexOf("v1.8.")!==0?Ae.exports={nextTick:Bt}:Ae.exports=process;function Bt(e,r,t,n){if(typeof e!="function")throw new TypeError('"callback" argument must be a function');var i=arguments.length,a,s;switch(i){case 0:case 1:return process.nextTick(e);case 2:return process.nextTick(function(){e.call(null,r)});case 3:return process.nextTick(function(){e.call(null,r,t)});case 4:return process.nextTick(function(){e.call(null,r,t,n)});default:for(a=new Array(i-1),s=0;s<a.length;)a[s++]=arguments[s];return process.nextTick(function(){e.apply(null,a)})}}});var wr=m((Fi,gr)=>{o();l();var Wt={}.toString;gr.exports=Array.isArray||function(e){return Wt.call(e)=="[object Array]"}});var Re=m((Ki,yr)=>{o();l();yr.exports=ye().EventEmitter});var X=m((Ne,vr)=>{o();l();var le=gt(),M=le.Buffer;function br(e,r){for(var t in e)r[t]=e[t]}M.from&&M.alloc&&M.allocUnsafe&&M.allocUnsafeSlow?vr.exports=le:(br(le,Ne),Ne.Buffer=D);function D(e,r,t){return M(e,r,t)}br(M,D);D.from=function(e,r,t){if(typeof e=="number")throw new TypeError("Argument must not be a number");return M(e,r,t)};D.alloc=function(e,r,t){if(typeof e!="number")throw new TypeError("Argument must be a number");var n=M(e);return r!==void 0?typeof t=="string"?n.fill(r,t):n.fill(r):n.fill(0),n};D.allocUnsafe=function(e){if(typeof e!="number")throw new TypeError("Argument must be a number");return M(e)};D.allocUnsafeSlow=function(e){if(typeof e!="number")throw new TypeError("Argument must be a number");return le.SlowBuffer(e)}});var Sr=m((Yi,Oe)=>{"use strict";o();l();function Ut(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}var _r=X().Buffer,Y=Je();function Lt(e,r,t){e.copy(r,t)}Oe.exports=function(){function e(){Ut(this,e),this.head=null,this.tail=null,this.length=0}return e.prototype.push=function(t){var n={data:t,next:null};this.length>0?this.tail.next=n:this.head=n,this.tail=n,++this.length},e.prototype.unshift=function(t){var n={data:t,next:this.head};this.length===0&&(this.tail=n),this.head=n,++this.length},e.prototype.shift=function(){if(this.length!==0){var t=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,t}},e.prototype.clear=function(){this.head=this.tail=null,this.length=0},e.prototype.join=function(t){if(this.length===0)return"";for(var n=this.head,i=""+n.data;n=n.next;)i+=t+n.data;return i},e.prototype.concat=function(t){if(this.length===0)return _r.alloc(0);if(this.length===1)return this.head.data;for(var n=_r.allocUnsafe(t>>>0),i=this.head,a=0;i;)Lt(i.data,n,a),a+=i.data.length,i=i.next;return n},e}();Y&&Y.inspect&&Y.inspect.custom&&(Oe.exports.prototype[Y.inspect.custom]=function(){var e=Y.inspect({length:this.length});return this.constructor.name+" "+e})});var Ie=m((Zi,Mr)=>{"use strict";o();l();var xr=G();function Ft(e,r){var t=this,n=this._readableState&&this._readableState.destroyed,i=this._writableState&&this._writableState.destroyed;return n||i?(r?r(e):e&&(!this._writableState||!this._writableState.errorEmitted)&&xr.nextTick(Tr,this,e),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(a){!r&&a?(xr.nextTick(Tr,t,a),t._writableState&&(t._writableState.errorEmitted=!0)):r&&r(a)}),this)}function Ht(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function Tr(e,r){e.emit("error",r)}Mr.exports={destroy:Ft,undestroy:Ht}});var Pe=m((ta,jr)=>{"use strict";o();l();var N=G();jr.exports=w;function Cr(e){var r=this;this.next=null,this.entry=null,this.finish=function(){ln(r,e)}}var zt=!process.browser&&["v0.10","v0.9."].indexOf(process.version.slice(0,5))>-1?setImmediate:N.nextTick,B;w.WritableState=Q;var Ar=Object.create(K());Ar.inherits=z();var Kt={deprecate:wt()},Rr=Re(),ue=X().Buffer,$t=globalThis.Uint8Array||function(){};function Vt(e){return ue.from(e)}function Gt(e){return ue.isBuffer(e)||e instanceof $t}var Nr=Ie();Ar.inherits(w,Rr);function Xt(){}function Q(e,r){B=B||O(),e=e||{};var t=r instanceof B;this.objectMode=!!e.objectMode,t&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var n=e.highWaterMark,i=e.writableHighWaterMark,a=this.objectMode?16:16*1024;n||n===0?this.highWaterMark=n:t&&(i||i===0)?this.highWaterMark=i:this.highWaterMark=a,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var s=e.decodeStrings===!1;this.decodeStrings=!s,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(u){tn(r,u)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new Cr(this)}Q.prototype.getBuffer=function(){for(var r=this.bufferedRequest,t=[];r;)t.push(r),r=r.next;return t};(function(){try{Object.defineProperty(Q.prototype,"buffer",{get:Kt.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}})();var fe;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(fe=Function.prototype[Symbol.hasInstance],Object.defineProperty(w,Symbol.hasInstance,{value:function(e){return fe.call(this,e)?!0:this!==w?!1:e&&e._writableState instanceof Q}})):fe=function(e){return e instanceof this};function w(e){if(B=B||O(),!fe.call(w,this)&&!(this instanceof B))return new w(e);this._writableState=new Q(e,this),this.writable=!0,e&&(typeof e.write=="function"&&(this._write=e.write),typeof e.writev=="function"&&(this._writev=e.writev),typeof e.destroy=="function"&&(this._destroy=e.destroy),typeof e.final=="function"&&(this._final=e.final)),Rr.call(this)}w.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))};function Yt(e,r){var t=new Error("write after end");e.emit("error",t),N.nextTick(r,t)}function Jt(e,r,t,n){var i=!0,a=!1;return t===null?a=new TypeError("May not write null values to stream"):typeof t!="string"&&t!==void 0&&!r.objectMode&&(a=new TypeError("Invalid non-string/buffer chunk")),a&&(e.emit("error",a),N.nextTick(n,a),i=!1),i}w.prototype.write=function(e,r,t){var n=this._writableState,i=!1,a=!n.objectMode&&Gt(e);return a&&!ue.isBuffer(e)&&(e=Vt(e)),typeof r=="function"&&(t=r,r=null),a?r="buffer":r||(r=n.defaultEncoding),typeof t!="function"&&(t=Xt),n.ended?Yt(this,t):(a||Jt(this,n,e,t))&&(n.pendingcb++,i=Zt(this,n,a,e,r,t)),i};w.prototype.cork=function(){var e=this._writableState;e.corked++};w.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,!e.writing&&!e.corked&&!e.finished&&!e.bufferProcessing&&e.bufferedRequest&&Or(this,e))};w.prototype.setDefaultEncoding=function(r){if(typeof r=="string"&&(r=r.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((r+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+r);return this._writableState.defaultEncoding=r,this};function Qt(e,r,t){return!e.objectMode&&e.decodeStrings!==!1&&typeof r=="string"&&(r=ue.from(r,t)),r}Object.defineProperty(w.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function Zt(e,r,t,n,i,a){if(!t){var s=Qt(r,n,i);n!==s&&(t=!0,i="buffer",n=s)}var u=r.objectMode?1:n.length;r.length+=u;var f=r.length<r.highWaterMark;if(f||(r.needDrain=!0),r.writing||r.corked){var p=r.lastBufferedRequest;r.lastBufferedRequest={chunk:n,encoding:i,isBuf:t,callback:a,next:null},p?p.next=r.lastBufferedRequest:r.bufferedRequest=r.lastBufferedRequest,r.bufferedRequestCount+=1}else je(e,r,!1,u,n,i,a);return f}function je(e,r,t,n,i,a,s){r.writelen=n,r.writecb=s,r.writing=!0,r.sync=!0,t?e._writev(i,r.onwrite):e._write(i,a,r.onwrite),r.sync=!1}function en(e,r,t,n,i){--r.pendingcb,t?(N.nextTick(i,n),N.nextTick(J,e,r),e._writableState.errorEmitted=!0,e.emit("error",n)):(i(n),e._writableState.errorEmitted=!0,e.emit("error",n),J(e,r))}function rn(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}function tn(e,r){var t=e._writableState,n=t.sync,i=t.writecb;if(rn(t),r)en(e,t,n,r,i);else{var a=Ir(t);!a&&!t.corked&&!t.bufferProcessing&&t.bufferedRequest&&Or(e,t),n?zt(Er,e,t,a,i):Er(e,t,a,i)}}function Er(e,r,t,n){t||nn(e,r),r.pendingcb--,n(),J(e,r)}function nn(e,r){r.length===0&&r.needDrain&&(r.needDrain=!1,e.emit("drain"))}function Or(e,r){r.bufferProcessing=!0;var t=r.bufferedRequest;if(e._writev&&t&&t.next){var n=r.bufferedRequestCount,i=new Array(n),a=r.corkedRequestsFree;a.entry=t;for(var s=0,u=!0;t;)i[s]=t,t.isBuf||(u=!1),t=t.next,s+=1;i.allBuffers=u,je(e,r,!0,r.length,i,"",a.finish),r.pendingcb++,r.lastBufferedRequest=null,a.next?(r.corkedRequestsFree=a.next,a.next=null):r.corkedRequestsFree=new Cr(r),r.bufferedRequestCount=0}else{for(;t;){var f=t.chunk,p=t.encoding,y=t.callback,x=r.objectMode?1:f.length;if(je(e,r,!1,x,f,p,y),t=t.next,r.bufferedRequestCount--,r.writing)break}t===null&&(r.lastBufferedRequest=null)}r.bufferedRequest=t,r.bufferProcessing=!1}w.prototype._write=function(e,r,t){t(new Error("_write() is not implemented"))};w.prototype._writev=null;w.prototype.end=function(e,r,t){var n=this._writableState;typeof e=="function"?(t=e,e=null,r=null):typeof r=="function"&&(t=r,r=null),e!=null&&this.write(e,r),n.corked&&(n.corked=1,this.uncork()),!n.ending&&!n.finished&&on(this,n,t)};function Ir(e){return e.ending&&e.length===0&&e.bufferedRequest===null&&!e.finished&&!e.writing}function an(e,r){e._final(function(t){r.pendingcb--,t&&e.emit("error",t),r.prefinished=!0,e.emit("prefinish"),J(e,r)})}function sn(e,r){!r.prefinished&&!r.finalCalled&&(typeof e._final=="function"?(r.pendingcb++,r.finalCalled=!0,N.nextTick(an,e,r)):(r.prefinished=!0,e.emit("prefinish")))}function J(e,r){var t=Ir(r);return t&&(sn(e,r),r.pendingcb===0&&(r.finished=!0,e.emit("finish"))),t}function on(e,r,t){r.ending=!0,J(e,r),t&&(r.finished?N.nextTick(t):e.once("finish",t)),r.ended=!0,e.writable=!1}function ln(e,r,t){var n=e.entry;for(e.entry=null;n;){var i=n.callback;r.pendingcb--,i(t),n=n.next}r.corkedRequestsFree?r.corkedRequestsFree.next=e:r.corkedRequestsFree=e}Object.defineProperty(w.prototype,"destroyed",{get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(e){!this._writableState||(this._writableState.destroyed=e)}});w.prototype.destroy=Nr.destroy;w.prototype._undestroy=Nr.undestroy;w.prototype._destroy=function(e,r){this.end(),r(e)}});var O=m((aa,Dr)=>{"use strict";o();l();var Pr=G(),fn=Object.keys||function(e){var r=[];for(var t in e)r.push(t);return r};Dr.exports=E;var qr=Object.create(K());qr.inherits=z();var kr=De(),ke=Pe();qr.inherits(E,kr);for(qe=fn(ke.prototype),de=0;de<qe.length;de++)ce=qe[de],E.prototype[ce]||(E.prototype[ce]=ke.prototype[ce]);var qe,ce,de;function E(e){if(!(this instanceof E))return new E(e);kr.call(this,e),ke.call(this,e),e&&e.readable===!1&&(this.readable=!1),e&&e.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,e&&e.allowHalfOpen===!1&&(this.allowHalfOpen=!1),this.once("end",un)}Object.defineProperty(E.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function un(){this.allowHalfOpen||this._writableState.ended||Pr.nextTick(dn,this)}function dn(e){e.end()}Object.defineProperty(E.prototype,"destroyed",{get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(e){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=e,this._writableState.destroyed=e)}});E.prototype._destroy=function(e,r){this.push(null),this.end(),Pr.nextTick(r,e)}});var Ue=m(Wr=>{"use strict";o();l();var We=X().Buffer,Br=We.isEncoding||function(e){switch(e=""+e,e&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function cn(e){if(!e)return"utf8";for(var r;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(r)return;e=(""+e).toLowerCase(),r=!0}}function hn(e){var r=cn(e);if(typeof r!="string"&&(We.isEncoding===Br||!Br(e)))throw new Error("Unknown encoding: "+e);return r||e}Wr.StringDecoder=Z;function Z(e){this.encoding=hn(e);var r;switch(this.encoding){case"utf16le":this.text=bn,this.end=vn,r=4;break;case"utf8":this.fillLast=gn,r=4;break;case"base64":this.text=_n,this.end=Sn,r=3;break;default:this.write=xn,this.end=Tn;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=We.allocUnsafe(r)}Z.prototype.write=function(e){if(e.length===0)return"";var r,t;if(this.lastNeed){if(r=this.fillLast(e),r===void 0)return"";t=this.lastNeed,this.lastNeed=0}else t=0;return t<e.length?r?r+this.text(e,t):this.text(e,t):r||""};Z.prototype.end=yn;Z.prototype.text=wn;Z.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length};function Be(e){return e<=127?0:e>>5===6?2:e>>4===14?3:e>>3===30?4:e>>6===2?-1:-2}function pn(e,r,t){var n=r.length-1;if(n<t)return 0;var i=Be(r[n]);return i>=0?(i>0&&(e.lastNeed=i-1),i):--n<t||i===-2?0:(i=Be(r[n]),i>=0?(i>0&&(e.lastNeed=i-2),i):--n<t||i===-2?0:(i=Be(r[n]),i>=0?(i>0&&(i===2?i=0:e.lastNeed=i-3),i):0))}function mn(e,r,t){if((r[0]&192)!==128)return e.lastNeed=0,"\uFFFD";if(e.lastNeed>1&&r.length>1){if((r[1]&192)!==128)return e.lastNeed=1,"\uFFFD";if(e.lastNeed>2&&r.length>2&&(r[2]&192)!==128)return e.lastNeed=2,"\uFFFD"}}function gn(e){var r=this.lastTotal-this.lastNeed,t=mn(this,e,r);if(t!==void 0)return t;if(this.lastNeed<=e.length)return e.copy(this.lastChar,r,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,r,0,e.length),this.lastNeed-=e.length}function wn(e,r){var t=pn(this,e,r);if(!this.lastNeed)return e.toString("utf8",r);this.lastTotal=t;var n=e.length-(t-this.lastNeed);return e.copy(this.lastChar,0,n),e.toString("utf8",r,n)}function yn(e){var r=e&&e.length?this.write(e):"";return this.lastNeed?r+"\uFFFD":r}function bn(e,r){if((e.length-r)%2===0){var t=e.toString("utf16le",r);if(t){var n=t.charCodeAt(t.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],t.slice(0,-1)}return t}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",r,e.length-1)}function vn(e){var r=e&&e.length?this.write(e):"";if(this.lastNeed){var t=this.lastTotal-this.lastNeed;return r+this.lastChar.toString("utf16le",0,t)}return r}function _n(e,r){var t=(e.length-r)%3;return t===0?e.toString("base64",r):(this.lastNeed=3-t,this.lastTotal=3,t===1?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",r,e.length-t))}function Sn(e){var r=e&&e.length?this.write(e):"";return this.lastNeed?r+this.lastChar.toString("base64",0,3-this.lastNeed):r}function xn(e){return e.toString(this.encoding)}function Tn(e){return e&&e.length?this.write(e):""}});var De=m((ca,Jr)=>{"use strict";o();l();var U=G();Jr.exports=h;var Mn=wr(),ee;h.ReadableState=$r;var da=ye().EventEmitter,Hr=function(e,r){return e.listeners(r).length},Ke=Re(),re=X().Buffer,En=globalThis.Uint8Array||function(){};function Cn(e){return re.from(e)}function An(e){return re.isBuffer(e)||e instanceof En}var zr=Object.create(K());zr.inherits=z();var Le=Je(),c=void 0;Le&&Le.debuglog?c=Le.debuglog("stream"):c=function(){};var Rn=Sr(),Kr=Ie(),W;zr.inherits(h,Ke);var Fe=["error","close","destroy","pause","resume"];function Nn(e,r,t){if(typeof e.prependListener=="function")return e.prependListener(r,t);!e._events||!e._events[r]?e.on(r,t):Mn(e._events[r])?e._events[r].unshift(t):e._events[r]=[t,e._events[r]]}function $r(e,r){ee=ee||O(),e=e||{};var t=r instanceof ee;this.objectMode=!!e.objectMode,t&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var n=e.highWaterMark,i=e.readableHighWaterMark,a=this.objectMode?16:16*1024;n||n===0?this.highWaterMark=n:t&&(i||i===0)?this.highWaterMark=i:this.highWaterMark=a,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new Rn,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(W||(W=Ue().StringDecoder),this.decoder=new W(e.encoding),this.encoding=e.encoding)}function h(e){if(ee=ee||O(),!(this instanceof h))return new h(e);this._readableState=new $r(e,this),this.readable=!0,e&&(typeof e.read=="function"&&(this._read=e.read),typeof e.destroy=="function"&&(this._destroy=e.destroy)),Ke.call(this)}Object.defineProperty(h.prototype,"destroyed",{get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(e){!this._readableState||(this._readableState.destroyed=e)}});h.prototype.destroy=Kr.destroy;h.prototype._undestroy=Kr.undestroy;h.prototype._destroy=function(e,r){this.push(null),r(e)};h.prototype.push=function(e,r){var t=this._readableState,n;return t.objectMode?n=!0:typeof e=="string"&&(r=r||t.defaultEncoding,r!==t.encoding&&(e=re.from(e,r),r=""),n=!0),Vr(this,e,r,!1,n)};h.prototype.unshift=function(e){return Vr(this,e,null,!0,!1)};function Vr(e,r,t,n,i){var a=e._readableState;if(r===null)a.reading=!1,Pn(e,a);else{var s;i||(s=On(a,r)),s?e.emit("error",s):a.objectMode||r&&r.length>0?(typeof r!="string"&&!a.objectMode&&Object.getPrototypeOf(r)!==re.prototype&&(r=Cn(r)),n?a.endEmitted?e.emit("error",new Error("stream.unshift() after end event")):He(e,a,r,!0):a.ended?e.emit("error",new Error("stream.push() after EOF")):(a.reading=!1,a.decoder&&!t?(r=a.decoder.write(r),a.objectMode||r.length!==0?He(e,a,r,!1):Gr(e,a)):He(e,a,r,!1))):n||(a.reading=!1)}return In(a)}function He(e,r,t,n){r.flowing&&r.length===0&&!r.sync?(e.emit("data",t),e.read(0)):(r.length+=r.objectMode?1:t.length,n?r.buffer.unshift(t):r.buffer.push(t),r.needReadable&&he(e)),Gr(e,r)}function On(e,r){var t;return!An(r)&&typeof r!="string"&&r!==void 0&&!e.objectMode&&(t=new TypeError("Invalid non-string/buffer chunk")),t}function In(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||e.length===0)}h.prototype.isPaused=function(){return this._readableState.flowing===!1};h.prototype.setEncoding=function(e){return W||(W=Ue().StringDecoder),this._readableState.decoder=new W(e),this._readableState.encoding=e,this};var Ur=8388608;function jn(e){return e>=Ur?e=Ur:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}function Lr(e,r){return e<=0||r.length===0&&r.ended?0:r.objectMode?1:e!==e?r.flowing&&r.length?r.buffer.head.data.length:r.length:(e>r.highWaterMark&&(r.highWaterMark=jn(e)),e<=r.length?e:r.ended?r.length:(r.needReadable=!0,0))}h.prototype.read=function(e){c("read",e),e=parseInt(e,10);var r=this._readableState,t=e;if(e!==0&&(r.emittedReadable=!1),e===0&&r.needReadable&&(r.length>=r.highWaterMark||r.ended))return c("read: emitReadable",r.length,r.ended),r.length===0&&r.ended?ze(this):he(this),null;if(e=Lr(e,r),e===0&&r.ended)return r.length===0&&ze(this),null;var n=r.needReadable;c("need readable",n),(r.length===0||r.length-e<r.highWaterMark)&&(n=!0,c("length less than watermark",n)),r.ended||r.reading?(n=!1,c("reading or ended",n)):n&&(c("do read"),r.reading=!0,r.sync=!0,r.length===0&&(r.needReadable=!0),this._read(r.highWaterMark),r.sync=!1,r.reading||(e=Lr(t,r)));var i;return e>0?i=Xr(e,r):i=null,i===null?(r.needReadable=!0,e=0):r.length-=e,r.length===0&&(r.ended||(r.needReadable=!0),t!==e&&r.ended&&ze(this)),i!==null&&this.emit("data",i),i};function Pn(e,r){if(!r.ended){if(r.decoder){var t=r.decoder.end();t&&t.length&&(r.buffer.push(t),r.length+=r.objectMode?1:t.length)}r.ended=!0,he(e)}}function he(e){var r=e._readableState;r.needReadable=!1,r.emittedReadable||(c("emitReadable",r.flowing),r.emittedReadable=!0,r.sync?U.nextTick(Fr,e):Fr(e))}function Fr(e){c("emit readable"),e.emit("readable"),$e(e)}function Gr(e,r){r.readingMore||(r.readingMore=!0,U.nextTick(qn,e,r))}function qn(e,r){for(var t=r.length;!r.reading&&!r.flowing&&!r.ended&&r.length<r.highWaterMark&&(c("maybeReadMore read 0"),e.read(0),t!==r.length);)t=r.length;r.readingMore=!1}h.prototype._read=function(e){this.emit("error",new Error("_read() is not implemented"))};h.prototype.pipe=function(e,r){var t=this,n=this._readableState;switch(n.pipesCount){case 0:n.pipes=e;break;case 1:n.pipes=[n.pipes,e];break;default:n.pipes.push(e);break}n.pipesCount+=1,c("pipe count=%d opts=%j",n.pipesCount,r);var i=(!r||r.end!==!1)&&e!==process.stdout&&e!==process.stderr,a=i?u:F;n.endEmitted?U.nextTick(a):t.once("end",a),e.on("unpipe",s);function s(j,H){c("onunpipe"),j===t&&H&&H.hasUnpiped===!1&&(H.hasUnpiped=!0,y())}function u(){c("onend"),e.end()}var f=kn(t);e.on("drain",f);var p=!1;function y(){c("cleanup"),e.removeListener("close",ge),e.removeListener("finish",we),e.removeListener("drain",f),e.removeListener("error",me),e.removeListener("unpipe",s),t.removeListener("end",u),t.removeListener("end",F),t.removeListener("data",L),p=!0,n.awaitDrain&&(!e._writableState||e._writableState.needDrain)&&f()}var x=!1;t.on("data",L);function L(j){c("ondata"),x=!1;var H=e.write(j);H===!1&&!x&&((n.pipesCount===1&&n.pipes===e||n.pipesCount>1&&Yr(n.pipes,e)!==-1)&&!p&&(c("false write response, pause",t._readableState.awaitDrain),t._readableState.awaitDrain++,x=!0),t.pause())}function me(j){c("onerror",j),F(),e.removeListener("error",me),Hr(e,"error")===0&&e.emit("error",j)}Nn(e,"error",me);function ge(){e.removeListener("finish",we),F()}e.once("close",ge);function we(){c("onfinish"),e.removeListener("close",ge),F()}e.once("finish",we);function F(){c("unpipe"),t.unpipe(e)}return e.emit("pipe",t),n.flowing||(c("pipe resume"),t.resume()),e};function kn(e){return function(){var r=e._readableState;c("pipeOnDrain",r.awaitDrain),r.awaitDrain&&r.awaitDrain--,r.awaitDrain===0&&Hr(e,"data")&&(r.flowing=!0,$e(e))}}h.prototype.unpipe=function(e){var r=this._readableState,t={hasUnpiped:!1};if(r.pipesCount===0)return this;if(r.pipesCount===1)return e&&e!==r.pipes?this:(e||(e=r.pipes),r.pipes=null,r.pipesCount=0,r.flowing=!1,e&&e.emit("unpipe",this,t),this);if(!e){var n=r.pipes,i=r.pipesCount;r.pipes=null,r.pipesCount=0,r.flowing=!1;for(var a=0;a<i;a++)n[a].emit("unpipe",this,t);return this}var s=Yr(r.pipes,e);return s===-1?this:(r.pipes.splice(s,1),r.pipesCount-=1,r.pipesCount===1&&(r.pipes=r.pipes[0]),e.emit("unpipe",this,t),this)};h.prototype.on=function(e,r){var t=Ke.prototype.on.call(this,e,r);if(e==="data")this._readableState.flowing!==!1&&this.resume();else if(e==="readable"){var n=this._readableState;!n.endEmitted&&!n.readableListening&&(n.readableListening=n.needReadable=!0,n.emittedReadable=!1,n.reading?n.length&&he(this):U.nextTick(Dn,this))}return t};h.prototype.addListener=h.prototype.on;function Dn(e){c("readable nexttick read 0"),e.read(0)}h.prototype.resume=function(){var e=this._readableState;return e.flowing||(c("resume"),e.flowing=!0,Bn(this,e)),this};function Bn(e,r){r.resumeScheduled||(r.resumeScheduled=!0,U.nextTick(Wn,e,r))}function Wn(e,r){r.reading||(c("resume read 0"),e.read(0)),r.resumeScheduled=!1,r.awaitDrain=0,e.emit("resume"),$e(e),r.flowing&&!r.reading&&e.read(0)}h.prototype.pause=function(){return c("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(c("pause"),this._readableState.flowing=!1,this.emit("pause")),this};function $e(e){var r=e._readableState;for(c("flow",r.flowing);r.flowing&&e.read()!==null;);}h.prototype.wrap=function(e){var r=this,t=this._readableState,n=!1;e.on("end",function(){if(c("wrapped end"),t.decoder&&!t.ended){var s=t.decoder.end();s&&s.length&&r.push(s)}r.push(null)}),e.on("data",function(s){if(c("wrapped data"),t.decoder&&(s=t.decoder.write(s)),!(t.objectMode&&s==null)&&!(!t.objectMode&&(!s||!s.length))){var u=r.push(s);u||(n=!0,e.pause())}});for(var i in e)this[i]===void 0&&typeof e[i]=="function"&&(this[i]=function(s){return function(){return e[s].apply(e,arguments)}}(i));for(var a=0;a<Fe.length;a++)e.on(Fe[a],this.emit.bind(this,Fe[a]));return this._read=function(s){c("wrapped _read",s),n&&(n=!1,e.resume())},this};Object.defineProperty(h.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}});h._fromList=Xr;function Xr(e,r){if(r.length===0)return null;var t;return r.objectMode?t=r.buffer.shift():!e||e>=r.length?(r.decoder?t=r.buffer.join(""):r.buffer.length===1?t=r.buffer.head.data:t=r.buffer.concat(r.length),r.buffer.clear()):t=Un(e,r.buffer,r.decoder),t}function Un(e,r,t){var n;return e<r.head.data.length?(n=r.head.data.slice(0,e),r.head.data=r.head.data.slice(e)):e===r.head.data.length?n=r.shift():n=t?Ln(e,r):Fn(e,r),n}function Ln(e,r){var t=r.head,n=1,i=t.data;for(e-=i.length;t=t.next;){var a=t.data,s=e>a.length?a.length:e;if(s===a.length?i+=a:i+=a.slice(0,e),e-=s,e===0){s===a.length?(++n,t.next?r.head=t.next:r.head=r.tail=null):(r.head=t,t.data=a.slice(s));break}++n}return r.length-=n,i}function Fn(e,r){var t=re.allocUnsafe(e),n=r.head,i=1;for(n.data.copy(t),e-=n.data.length;n=n.next;){var a=n.data,s=e>a.length?a.length:e;if(a.copy(t,t.length-e,0,s),e-=s,e===0){s===a.length?(++i,n.next?r.head=n.next:r.head=r.tail=null):(r.head=n,n.data=a.slice(s));break}++i}return r.length-=i,t}function ze(e){var r=e._readableState;if(r.length>0)throw new Error('"endReadable()" called on non-empty stream');r.endEmitted||(r.ended=!0,U.nextTick(Hn,r,e))}function Hn(e,r){!e.endEmitted&&e.length===0&&(e.endEmitted=!0,r.readable=!1,r.emit("end"))}function Yr(e,r){for(var t=0,n=e.length;t<n;t++)if(e[t]===r)return t;return-1}});var Ve=m((ma,et)=>{"use strict";o();l();et.exports=C;var pe=O(),Zr=Object.create(K());Zr.inherits=z();Zr.inherits(C,pe);function zn(e,r){var t=this._transformState;t.transforming=!1;var n=t.writecb;if(!n)return this.emit("error",new Error("write callback called multiple times"));t.writechunk=null,t.writecb=null,r!=null&&this.push(r),n(e);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function C(e){if(!(this instanceof C))return new C(e);pe.call(this,e),this._transformState={afterTransform:zn.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&(typeof e.transform=="function"&&(this._transform=e.transform),typeof e.flush=="function"&&(this._flush=e.flush)),this.on("prefinish",Kn)}function Kn(){var e=this;typeof this._flush=="function"?this._flush(function(r,t){Qr(e,r,t)}):Qr(this,null,null)}C.prototype.push=function(e,r){return this._transformState.needTransform=!1,pe.prototype.push.call(this,e,r)};C.prototype._transform=function(e,r,t){throw new Error("_transform() is not implemented")};C.prototype._write=function(e,r,t){var n=this._transformState;if(n.writecb=t,n.writechunk=e,n.writeencoding=r,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}};C.prototype._read=function(e){var r=this._transformState;r.writechunk!==null&&r.writecb&&!r.transforming?(r.transforming=!0,this._transform(r.writechunk,r.writeencoding,r.afterTransform)):r.needTransform=!0};C.prototype._destroy=function(e,r){var t=this;pe.prototype._destroy.call(this,e,function(n){r(n),t.emit("close")})};function Qr(e,r,t){if(r)return e.emit("error",r);if(t!=null&&e.push(t),e._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(e._transformState.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}});var it=m((ya,nt)=>{"use strict";o();l();nt.exports=te;var rt=Ve(),tt=Object.create(K());tt.inherits=z();tt.inherits(te,rt);function te(e){if(!(this instanceof te))return new te(e);rt.call(this,e)}te.prototype._transform=function(e,r,t){t(null,e)}});var st=m((T,at)=>{o();l();T=at.exports=De();T.Stream=T;T.Readable=T;T.Writable=Pe();T.Duplex=O();T.Transform=Ve();T.PassThrough=it()});var lt=m((xa,ot)=>{o();l();var $n=Tt(),Vn=st().Duplex;ot.exports=Gn;function Gn(){let e={},r=new Vn({objectMode:!0,read:i,write:a}),t=new $n;return{events:t,middleware:(f,p,y,x)=>{r.push(f),e[f.id]={req:f,res:p,next:y,end:x}},stream:r};function i(){return!1}function a(f,p,y){let x;try{!f.id?u(f):s(f)}catch(L){x=L}y(x)}function s(f){let p=e[f.id];if(!p)throw new Error(`StreamMiddleware - Unknown response id ${f.id}`);delete e[f.id],Object.assign(p.res,f),setTimeout(p.end)}function u(f){t.emit("notification",f)}}});var ut=m((Ea,ft)=>{"use strict";o();l();var A=ft.exports=function(e){return e!==null&&typeof e=="object"&&typeof e.pipe=="function"};A.writable=function(e){return A(e)&&e.writable!==!1&&typeof e._write=="function"&&typeof e._writableState=="object"};A.readable=function(e){return A(e)&&e.readable!==!1&&typeof e._read=="function"&&typeof e._readableState=="object"};A.duplex=function(e){return A.writable(e)&&A.readable(e)};A.transform=function(e){return A.duplex(e)&&typeof e._transform=="function"&&typeof e._transformState=="object"}});o();l();var ht=g(tr());o();l();o();l();var Xn=g(xt()),dt=g(mr()),Yn=g(lt()),Jn=g(Mt()),Qn=g(_()),Zn=g(ut());o();l();o();l();o();l();var ei=g(_());o();l();var ri=g(tr()),ti=g(_());var Ge={Transaction:"legacy",VersionedTransaction:0};o();l();var ni=g(_()),ii=g(Qe());o();l();var ai=g(_());o();l();var si=g(_());o();l();var oi=g(_()),li=g(St());o();l();var fi=g(_()),ct=g(Qe());yt();o();l();var ui=g(_());o();l();var di=g(_());var Xe=(e,r=$.TRANSACTION)=>ht.default.encode(r===$.TRANSACTION?e.serialize({requireAllSignatures:!1,verifySignatures:!1}):e.serialize());var Ye=e=>{switch(e?.version){case Ge.Transaction:case Ge.VersionedTransaction:return $.VERSIONED_TRANSACTION;default:return $.TRANSACTION}};o();l();var pt=g(_t());bt();vt();async function go(e){let{SolWallet:r}=await rr(),t=new r,n=[];try{let i=(e||[]).filter(Boolean);i.length>0&&(n=await t.deserializeMessages({data:i}))}catch{}return(n||[]).reduce((i,a)=>{let{deserialized:s,computeUnitLimit:u,computeUnitPrice:f}=a||{};return s&&(i=Ze(i,or(u,f))),i},"0")}var ci="SetComputeUnitLimit",hi="SetComputeUnitPrice";function mt(e,r,t){if(be(r||0,0)||be(t||0,0)||e.some(u=>{try{let f=ar.decodeInstructionType(u);return f===ci||f===hi}catch{return!1}}))return e;let i=[...e],a=_e.setComputeUnitPrice({microLamports:r});i.unshift(a);let s=_e.setComputeUnitLimit({units:t});return i.unshift(s),i}async function pi(e,r,t){let n=new ir(er.requestSolanaMethodUrlToFullnode);n._rpcRequest=sr;let i=await Promise.all((e.message?.addressTableLookups||[]).map(f=>n.getAccountInfo(f.accountKey).then(p=>new ve({key:f.accountKey,state:ve.deserialize(p.data)})))),a=nr.decompile(e.message,{addressLookupTableAccounts:i});a.instructions=mt(a.instructions,r,t);let s=new P(a.compileToV0Message(i)),u=Ye(s);return Xe(s,u)}async function wo(e,r,t){return new Promise(n=>{try{let i=pt.base.fromBase58(e);try{i=V.from(i)}catch{i=P.deserialize(i)}if(i.signatures&&i.signatures.length>1){n(e);return}if(i instanceof V){i.instructions=mt(i.instructions,r,t);let a=Ye(i);n(Xe(i,a))}else i instanceof P?pi(i,r,t).then(n).catch(()=>{n(e)}):n(e)}catch{n(e)}})}export{Xe as a,Ye as b,go as c,wo as d};

window.inOKXExtension = true;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=chunk-P4K7WMB2.js.map
