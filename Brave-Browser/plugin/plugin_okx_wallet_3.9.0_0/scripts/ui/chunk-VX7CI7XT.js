import{d as Xe}from"./chunk-D6HSNWGS.js";import{f as ee,g as q}from"./chunk-GZMWLE4V.js";import{b as eo}from"./chunk-C54I6GL3.js";import{a as Q}from"./chunk-ADIQBHVU.js";import{a as we}from"./chunk-RC3QMLDN.js";import{E as Ke,N as Qe,b as $,d as ve,e as Oe,f as B,g as Me,h as Ue,i as Ve,j as He,l as Ge,m as $e,n as qe,o as We,p as ze,r as Ze,s as X,u as Ye,v as je,y as Je}from"./chunk-Y2PED5BF.js";import{d as De}from"./chunk-R2QKPEWB.js";import{d as Re,e as ke}from"./chunk-LF2PURXZ.js";import{h as Pe}from"./chunk-CFT6B56M.js";import{s as ye}from"./chunk-SJIW4WAV.js";import{a as y,d as K,o as Te,q as Se,s as be}from"./chunk-5JJQQHKZ.js";import{a as _e,f as G,na as Ne,oa as Be}from"./chunk-URG4MCPH.js";import{ab as he,y as g}from"./chunk-ZPOCIBPN.js";import{ba as A}from"./chunk-CA5MYYD6.js";import{a as v}from"./chunk-IOCZ22XI.js";import{c as Do}from"./chunk-I4WIGQLD.js";import{a as Le}from"./chunk-FQ4XEVKF.js";import{Ea as de,La as Ce,Na as Ae,Nb as ge,Pa as ko,Qa as E,Ra as xe,Ta as H,Tb as J,Wa as N,Xa as j,ib as Fe,jb as Ee,m as le,nb as Ie,pb as I}from"./chunk-M54COW6Q.js";import{H as pe}from"./chunk-RIJWHGTU.js";import{I as Lo,v as fe}from"./chunk-K4MPEKC5.js";import{a as _}from"./chunk-CXUPEGDW.js";import{a as Ro}from"./chunk-RYJHESAH.js";import{f as c,m as t,o as s}from"./chunk-ICCOEXX5.js";t();s();var Co=c(g());Lo();t();s();var p=c(g());I();t();s();var z=c(le()),to=c(v());t();s();var W=c(_());I();var Po=(0,W.createContext)({coinId:null,fromAddress:""});function oo(){return(0,W.useContext)(Po)}function ro(){let{coinId:e}=oo();return e}function L(){let{fromAddress:e}=oo();return e}function h(){return(e,o,r)=>{if(!e)return e;let n;return r?n=Ee(e,o.orderDecimalNum):n=Fe(e,o.orderDecimalNum),Ie(n)}}function no(){return(e,o,r)=>{if(!e)return e;typeof r=="boolean"&&(r={isFee:r});let{isFee:n,useApproximate:i=!0,...u}=r||{};return De(e,{fixed:o.orderDecimalNum,isFixedUp:n,useApproximate:i,...u})}}var oe={vdecimalNum:0,decimals:0,symbol:""};function T(){let{coinId:e}=(0,to.useParams)(),o=ro();return Number(o)||Number(e)}var a=()=>{let e=T(),{coin:o,baseCoin:r}=Q(e,!0),n=(0,z.isEmpty)(o)?oe:o,i=(0,z.isEmpty)(r)?oe:r;return{coin:n,baseCoin:i}},x=()=>{let e=so(),{coin:o}=Q(e,!1);return(0,z.isEmpty)(o)?oe:o};var io=()=>(0,p.useSelector)($),Fr=()=>(0,p.useSelector)(B),C=()=>{let e=h(),o=(0,p.useSelector)(Ve),{coin:r}=a();return e(o,r,!1)},uo=()=>(0,p.useSelector)(He),Er=()=>{let e=C(),{coin:o}=a();return E(e,10**o.decimals)},co=()=>(0,p.useSelector)(ze),re=()=>(0,p.useSelector)($e),ne=()=>{let e=h(),o=re(),r=x();return e(xe(o,10**r.decimals),r,!0)},mo=()=>(0,p.useSelector)(We),te=()=>(0,p.useSelector)(qe),ao=()=>{let e=(0,p.useSelector)(he),o=(0,p.useSelector)(Ze);return o===-1?e.currencyId:o},so=()=>{let e=(0,p.useSelector)(Ge),{baseCoin:o}=a();return e===-1?o.coinId:e},se=()=>(0,p.useSelector)(Ye),fo=()=>(0,p.useSelector)(je);t();s();var Z=c(g()),lo=c(v());var po=()=>{let e=(0,lo.useHistory)(),o=(0,Z.useSelector)($),r=(0,Z.useSelector)(Ue),n=(0,Z.useSelector)(B),{coin:i}=a();return async()=>{await Xe(i.localType,{name:r?.name,type:r?.type,address:n}),e.push(o)}};var wo="DontShowError";function Mr(){let e=(0,Co.useSelector)(X),o=mo(),r=te();return(!!e.key||!!e.text)&&e.type!==A.COMMON_TIP||o||r}function Ur(e){let[o,{setTrue:r,setFalse:n}]=Te(),i=po();return{loading:o,onClick:async(...u)=>{r();try{if(!await eo()){n();return}if(e){let l=await e(...u),{pause:d}=l||{};d||await i()}}catch(f){if(f?.message===Le||f?.message===wo)n();else{let d=f?.data?.msg||f?.msg||f?.data?.originalError?.msg||fe("wallet_home_toast_network_error");pe.error({title:d})}}n()}}}t();s();t();s();var O=c(_());var R=Symbol("UNSET_INPUT");function vo(){let[e,o]=(0,O.useState)(R),r=K(e);return(0,O.useEffect)(()=>{Je(e!==R)},[e]),{latestRequestInputRef:r,setLatestRequestInput:o}}function Oo({domainInputValue:e,coinId:o},r,n=!1){let{latestRequestInputRef:i,setLatestRequestInput:u}=vo(),f=K(e),{run:l,cancel:d}=Se(w=>{Pe({coinId:o,domain:w}).then(({data:S})=>{w===f.current&&S?.address&&r({address:S?.address,domain:w})}).catch(S=>{console.log(S)}).finally(()=>{i.current===w&&u(R)})},{wait:800});return(0,O.useEffect)(()=>(e.indexOf(".")!==-1&&!n?(u(e),l(e)):u(R),()=>{d&&d()}),[e,n]),{loading:i.current!==R,abort:()=>{d&&d(),u(R)}}}var Mo=Oo;t();s();var Ao=c(v());function Uo(){let e=(0,Ao.useHistory)(),o=io();return()=>{e.push(o||_e)}}var Vo=Uo;t();s();var nn=()=>{let e=L(),{baseCoin:o}=a(),r=we(o.localType);return o.localType?e||r:""};t();s();var M=c(g());var xo=c(v());function pn(){return(0,M.useSelector)(ve)}function dn(){let e=(0,M.useSelector)(Oe),o=(0,M.useSelector)(B),r=(0,M.useSelector)(Me);return!o||e||!!r.key}function Cn(){let e=T(),o=(0,xo.useHistory)(),r=L();return y(()=>{let n={pathname:`${G}/${e}${Ne}`};r&&(n.search=`?from=${r}`),o.push(n)})}t();s();t();s();var k=c(_());function Ho(e,o){let[r,n]=(0,k.useState)(0),i=(0,k.useRef)(0);Array.isArray(o)&&(o={override:!1,fns:o});let u=o?.override?o?.fns||[]:[...e||[],...o?.fns||[]],f=(0,k.useCallback)((l,d)=>{(async()=>{let S=++i.current;n(b=>b+1);try{let b={key:"",args:{}};for(let Bo of u){let ae=await Bo(l);if(ae){b=ae;break}}S===i.current&&d(b)}finally{n(b=>b-1)}})()},u);return{isCheckingError:r>0,runErrorFns:f}}function gn(e,o,r){let n=C();be(()=>{(async()=>{r||e(n,o)})()},[e,n,r],{wait:100})}var U=Ho;t();s();t();s();var F=c(Do());var Fo=c(Ro());ko();async function Eo(e,o,r=""){let n=!1,{wallet:i}=await ge(o);try{n=(await i?.validAddress({address:e,hrp:r})).isValid}catch{return n}return n}async function Y(e,o,r=""){return Eo(e,de({coinId:o})?.coinType,r)}async function Bn(e){return Y(e,Ae)}async function Ln(e){return Y(e,Ce)}async function Go(e,o){let r=await Eo(e,Fo.Currency.BTC);return r?o===J.SEGWIT_TAPROOT?{isValid:/^(bc1p)/.test(e),addressType:o}:{isValid:r,addressType:o}:{isValid:r,addressType:o}}async function Rn(e){return Go(e,J.SEGWIT_TAPROOT)}function kn(e,{allowNonPrefixed:o=!0,mixedCaseUseChecksum:r=!1}={}){let n=o?(0,F.addHexPrefix)(e):e;if(!(0,F.isHexString)(n))return!1;if(r){let i=n.slice(2),u=i.toLowerCase(),f=i.toUpperCase();if(!(i===u||i===f))return(0,F.isValidChecksumAddress)(n)}return(0,F.isValidAddress)(n)}function $o(){return y(e=>e?null:{key:"wallet_transfer_errortip_receive_address_empty",args:{}})}function qo(){let{baseCoin:e}=a();return y(async o=>await Y(o,e.coinId)?null:{key:"wallet_manage_crypto_errortip_invalid_address_tips",args:{}})}function Un(){let e=$o(),o=qo();return[e,o]}t();s();I();t();s();var Io=c(_());I();var Wo=e=>{let o=Re(e),r=ke();return(0,Io.useCallback)((n,i,u)=>{let{useApproximate:f=!0}=u||{},l=r?.[n]?.coinToUSDRate;return ye(E(i,E(l,o.usdToThisRate)),{useApproximate:f,symbol:o.symbol})},[r,o.symbol,o.usdToThisRate])},go=Wo;var D=c(_()),yo=c(g());function zo(){let{coin:e}=a(),o=me();return(0,D.useCallback)(()=>e.baseCoinId===0&&N(o,0)?{key:"wallet_extension_transaction_input_error_insufficient_gas_fee",args:{chainSymbol:e.symbol},type:A.FEE_BALANCE_INSUFFICIENT}:null,[o])}function ie(){let e=ce();return(0,D.useCallback)(o=>j(o,e)?{key:"wallet_transfer_errortip_insufficient_balance",args:{},type:A.BALANCE_INSUFFICIENT}:null,[e])}function ue(){let e=ao(),o=no(),r=go(e),{coin:n}=a(),i=me();return(0,D.useCallback)(u=>{if(j(u,i)){let f=r(n.coinId,i,{useApproximate:!1}),l=`${o(i,n,{useApproximate:!1})} ${n.symbol}`;return{key:"wallet_extension_send_text_max_price",args:{fiatamount:f,cryptoamount:l},type:A.BALANCE_INSUFFICIENT}}return null},[i])}var rt=e=>{let o=(0,yo.useDispatch)(),r=zo(),n=ie(),i=ue(),u=[r,n,i],{runErrorFns:f}=U(u,e),l=C();(0,D.useEffect)(()=>{f(l,d=>{o(Ke(d))})},[f,l])};t();s();var P=c(_()),ho=c(g());I();t();s();var V={AMOUNT:"amount",FEE:"fee"};function Zo(){let e=x(),o=To();return(0,P.useCallback)(()=>N(o,0)?{key:"wallet_extension_popup_insufficient_network_fee",args:{token:e.symbol},type:A.FEE_BALANCE_INSUFFICIENT,highlight:V.FEE}:null,[o,e.symbol])}function Yo(){let e=ie();return(0,P.useCallback)(o=>{let r=e(o);return r?{...r,highlight:V.AMOUNT}:null},[e])}function jo(){let e=ue();return(0,P.useCallback)(o=>{let r=e(o);return r?{...r,highlight:V.AMOUNT}:null},[e])}function Jo(){let e=Zo(),o=Yo(),r=jo();return[e,o,r]}function Ct(e){let o=(0,ho.useDispatch)(),r=Jo(),{runErrorFns:n}=U(r,e),i=C();(0,P.useEffect)(()=>{n(i,u=>{o(Qe(u))})},[n,i])}t();s();var So=c(v());I();var bo=c(le());function Dt(){let e=uo(),o=C();return!!e.key&&e.type!==A.COMMON_TIP||(0,bo.isNil)(o)||o===""||N(o,0)}function Pt(){let e=T(),o=(0,So.useHistory)(),r=L();return y(()=>{let n={pathname:`${G}/${e}${Be}`};r&&(n.search=`?from=${r}`),o.push(n)})}t();s();I();var _o=()=>{let e=T();return ee(e)},$t=()=>{let e=h(),o=_o(),{coin:r}=a();return e(q(o,r.decimals),r,!1)},No=()=>{let e=_o(),o=se();return o===null?e:o},ce=()=>{let e=h(),o=No(),{coin:r}=a();return e(q(o,r.decimals),r,!1)},Ko=()=>{let{coin:e}=a(),o=x(),r=re(),n=No();return e.coinId===o.coinId?H(n,r):n},me=()=>{let{coin:e}=a(),o=x(),r=ne(),n=ce();return e.coinId===o.coinId?H(n,r):n},Qo=()=>{let e=x();return ee(e.coinId)},Xo=()=>{let{coin:e}=a(),o=x(),r=Qo(),n=fo(),i=se();return n!==null?n:e.coinId===o.coinId&&i!==null?i:r},er=()=>{let e=h(),o=Xo(),r=x();return e(q(o,r.decimals),r,!1)},To=()=>{let e=er(),o=ne();return H(e,o)},qt=()=>{let{coin:e}=a(),o=co(),r=C(),n=Ko();return o?n:E(r,10**e.decimals)};t();s();t();s();var or=c(g());export{Mo as a,Po as b,L as c,no as d,T as e,a as f,x as g,Fr as h,C as i,uo as j,Er as k,co as l,re as m,ne as n,mo as o,te as p,ao as q,so as r,se as s,fo as t,Vo as u,nn as v,pn as w,dn as x,Cn as y,gn as z,U as A,Y as B,Bn as C,Ln as D,Go as E,Rn as F,kn as G,$o as H,qo as I,Un as J,zo as K,ie as L,rt as M,V as N,Zo as O,Yo as P,Jo as Q,Ct as R,Dt as S,Pt as T,_o as U,$t as V,No as W,ce as X,me as Y,Qo as Z,Xo as _,To as $,qt as aa,wo as ba,Mr as ca,Ur as da};

window.inOKXExtension = true;
window.ASSETS_BUILD_TYPE = "publish";

//# sourceMappingURL=chunk-VX7CI7XT.js.map
